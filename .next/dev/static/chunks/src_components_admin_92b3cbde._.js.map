{"version":3,"sources":null,"sections":[{"offset":{"line":5,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/SidebarBlock.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useDraggable } from '@dnd-kit/core';\r\nimport { cn } from '@/lib/utils';\r\nimport { GripVertical, Plus, Type, Image as ImageIcon, Layout, Box, Sparkles, Users, DollarSign, MessageSquare, HelpCircle, Grid3x3, Video, FileText, Megaphone, Navigation, Menu, Share2, Minus, ArrowRight } from 'lucide-react';\r\n\r\ninterface SidebarBlockProps {\r\n    template: any;\r\n    onAdd: () => void;\r\n}\r\n\r\nconst getIconForCategory = (category: string) => {\r\n    const cat = category.toLowerCase().replace('_', '');\r\n    switch (cat) {\r\n        case 'hero':\r\n            return Sparkles;\r\n        case 'content':\r\n        case 'text':\r\n            return FileText;\r\n        case 'features':\r\n            return Grid3x3;\r\n        case 'cta':\r\n        case 'calltoaction':\r\n            return Megaphone;\r\n        case 'testimonials':\r\n            return MessageSquare;\r\n        case 'pricing':\r\n            return DollarSign;\r\n        case 'team':\r\n            return Users;\r\n        case 'faq':\r\n            return HelpCircle;\r\n        case 'gallery':\r\n        case 'media':\r\n            return ImageIcon;\r\n        case 'video':\r\n            return Video;\r\n        case 'form':\r\n            return FileText;\r\n        case 'logo':\r\n        case 'logogrid':\r\n            return Grid3x3;\r\n        case 'stats':\r\n            return Grid3x3;\r\n        case 'layout':\r\n            return Layout;\r\n        case 'navigation':\r\n            return Navigation;\r\n        case 'header':\r\n            return Menu;\r\n        case 'footer':\r\n            return Layout;\r\n        case 'social':\r\n            return Share2;\r\n        case 'breadcrumbs':\r\n            return ArrowRight;\r\n        case 'divider':\r\n            return Minus;\r\n        case 'spacer':\r\n            return Box;\r\n        default:\r\n            return Box;\r\n    }\r\n};\r\n\r\nconst getCategoryColor = (category: string) => {\r\n    const cat = category.toLowerCase().replace('_', '');\r\n    switch (cat) {\r\n        case 'hero':\r\n            return 'bg-gradient-to-br from-purple-50 to-purple-100 text-purple-600';\r\n        case 'features':\r\n            return 'bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600';\r\n        case 'cta':\r\n        case 'calltoaction':\r\n            return 'bg-gradient-to-br from-orange-50 to-orange-100 text-orange-600';\r\n        case 'testimonials':\r\n            return 'bg-gradient-to-br from-green-50 to-green-100 text-green-600';\r\n        case 'pricing':\r\n            return 'bg-gradient-to-br from-yellow-50 to-yellow-100 text-yellow-600';\r\n        case 'team':\r\n            return 'bg-gradient-to-br from-pink-50 to-pink-100 text-pink-600';\r\n        case 'faq':\r\n            return 'bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600';\r\n        case 'form':\r\n            return 'bg-gradient-to-br from-teal-50 to-teal-100 text-teal-600';\r\n        case 'navigation':\r\n            return 'bg-gradient-to-br from-slate-50 to-slate-100 text-slate-600';\r\n        case 'header':\r\n            return 'bg-gradient-to-br from-slate-50 to-slate-100 text-slate-600';\r\n        case 'footer':\r\n            return 'bg-gradient-to-br from-slate-50 to-slate-100 text-slate-600';\r\n        case 'social':\r\n            return 'bg-gradient-to-br from-pink-50 to-pink-100 text-pink-600';\r\n        case 'breadcrumbs':\r\n            return 'bg-gradient-to-br from-gray-50 to-gray-100 text-gray-600';\r\n        case 'divider':\r\n            return 'bg-gradient-to-br from-gray-50 to-gray-100 text-gray-600';\r\n        case 'spacer':\r\n            return 'bg-gradient-to-br from-gray-50 to-gray-100 text-gray-600';\r\n        default:\r\n            return 'bg-gradient-to-br from-gray-50 to-gray-100 text-gray-600';\r\n    }\r\n};\r\n\r\nexport const SidebarBlock: React.FC<SidebarBlockProps> = ({ template, onAdd }) => {\r\n    const Icon = getIconForCategory(template.category);\r\n    const colorClass = getCategoryColor(template.category);\r\n\r\n    return (\r\n        <div\r\n            className=\"group relative flex flex-col items-center justify-center p-3 rounded-lg border-2 bg-white hover:border-primary hover:shadow-lg transition-all cursor-pointer h-28 text-center gap-2 overflow-hidden\"\r\n            onClick={onAdd}\r\n        >\r\n            {/* Background gradient on hover */}\r\n            <div className={cn(\r\n                \"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200\",\r\n                colorClass\r\n            )} />\r\n            \r\n            {/* Content */}\r\n            <div className=\"relative z-10 flex flex-col items-center gap-2 w-full\">\r\n                <div className={cn(\r\n                    \"p-2.5 rounded-lg transition-all duration-200\",\r\n                    colorClass,\r\n                    \"group-hover:scale-110 group-hover:shadow-md\"\r\n                )}>\r\n                    <Icon className=\"h-5 w-5\" />\r\n                </div>\r\n                <span className=\"text-xs font-semibold text-gray-700 group-hover:text-gray-900 line-clamp-2 leading-tight px-1\">\r\n                    {template.name}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Add button */}\r\n            <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all transform translate-x-1 group-hover:translate-x-0\">\r\n                <div className=\"bg-primary text-white rounded-full p-1.5 shadow-lg\">\r\n                    <Plus className=\"h-3.5 w-3.5\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAOA,MAAM,qBAAqB,CAAC;IACxB,MAAM,MAAM,SAAS,WAAW,GAAG,OAAO,CAAC,KAAK;IAChD,OAAQ;QACJ,KAAK;YACD,OAAO,yNAAQ;QACnB,KAAK;QACL,KAAK;YACD,OAAO,6NAAQ;QACnB,KAAK;YACD,OAAO,0NAAO;QAClB,KAAK;QACL,KAAK;YACD,OAAO,4NAAS;QACpB,KAAK;YACD,OAAO,4OAAa;QACxB,KAAK;YACD,OAAO,mOAAU;QACrB,KAAK;YACD,OAAO,gNAAK;QAChB,KAAK;YACD,OAAO,+OAAU;QACrB,KAAK;QACL,KAAK;YACD,OAAO,gNAAS;QACpB,KAAK;YACD,OAAO,gNAAK;QAChB,KAAK;YACD,OAAO,6NAAQ;QACnB,KAAK;QACL,KAAK;YACD,OAAO,0NAAO;QAClB,KAAK;YACD,OAAO,0NAAO;QAClB,KAAK;YACD,OAAO,kOAAM;QACjB,KAAK;YACD,OAAO,+NAAU;QACrB,KAAK;YACD,OAAO,6MAAI;QACf,KAAK;YACD,OAAO,kOAAM;QACjB,KAAK;YACD,OAAO,uNAAM;QACjB,KAAK;YACD,OAAO,mOAAU;QACrB,KAAK;YACD,OAAO,gNAAK;QAChB,KAAK;YACD,OAAO,0MAAG;QACd;YACI,OAAO,0MAAG;IAClB;AACJ;AAEA,MAAM,mBAAmB,CAAC;IACtB,MAAM,MAAM,SAAS,WAAW,GAAG,OAAO,CAAC,KAAK;IAChD,OAAQ;QACJ,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;QACL,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX;YACI,OAAO;IACf;AACJ;AAEO,MAAM,eAA4C,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE;IACzE,MAAM,OAAO,mBAAmB,SAAS,QAAQ;IACjD,MAAM,aAAa,iBAAiB,SAAS,QAAQ;IAErD,qBACI,6LAAC;QACG,WAAU;QACV,SAAS;;0BAGT,6LAAC;gBAAI,WAAW,IAAA,4HAAE,EACd,sFACA;;;;;;0BAIJ,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAW,IAAA,4HAAE,EACd,gDACA,YACA;kCAEA,cAAA,6LAAC;4BAAK,WAAU;;;;;;;;;;;kCAEpB,6LAAC;wBAAK,WAAU;kCACX,SAAS,IAAI;;;;;;;;;;;;0BAKtB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC,6MAAI;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAKpC;KArCa"}},{"offset":{"line":206,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/BlockPreview.tsx"],"sourcesContent":["import React from 'react';\r\nimport { NextIntlClientProvider } from 'next-intl';\r\nimport { Card } from '@/components/ui/card';\r\nimport { HeroBackgroundImage } from '@/components/landing-page/blocks/HeroBackgroundImage';\r\nimport { HeroVideoBackground } from '@/components/landing-page/blocks/HeroVideoBackground';\r\nimport { HeroSplitLayout } from '@/components/landing-page/blocks/HeroSplitLayout';\r\nimport { HeroMinimal } from '@/components/landing-page/blocks/HeroMinimal';\r\nimport { HeroGradient } from '@/components/landing-page/blocks/HeroGradient';\r\nimport { FeaturesGrid } from '@/components/landing-page/blocks/FeaturesGrid';\r\nimport { FeaturesAlternating } from '@/components/landing-page/blocks/FeaturesAlternating';\r\nimport { FeaturesIconBoxes } from '@/components/landing-page/blocks/FeaturesIconBoxes';\r\nimport { FeaturesScreenshots } from '@/components/landing-page/blocks/FeaturesScreenshots';\r\nimport { CTABanner } from '@/components/landing-page/blocks/CTABanner';\r\nimport { CTACard } from '@/components/landing-page/blocks/CTACard';\r\nimport { CTASplit } from '@/components/landing-page/blocks/CTASplit';\r\nimport { TestimonialsCarousel } from '@/components/landing-page/blocks/TestimonialsCarousel';\r\nimport { TestimonialsGrid } from '@/components/landing-page/blocks/TestimonialsGrid';\r\nimport { PricingTable } from '@/components/landing-page/blocks/PricingTable';\r\nimport { PricingComparison } from '@/components/landing-page/blocks/PricingComparison';\r\nimport { TeamGrid } from '@/components/landing-page/blocks/TeamGrid';\r\nimport { StatsShowcase } from '@/components/landing-page/blocks/StatsShowcase';\r\nimport { LogoGrid } from '@/components/landing-page/blocks/LogoGrid';\r\nimport { NewsletterSignup } from '@/components/landing-page/blocks/NewsletterSignup';\r\nimport { ContactForm } from '@/components/landing-page/blocks/ContactForm';\r\nimport { FAQAccordion } from '@/components/landing-page/blocks/FAQAccordion';\r\nimport { GalleryGrid } from '@/components/landing-page/blocks/GalleryGrid';\r\nimport { NavigationBar } from '@/components/landing-page/blocks/NavigationBar';\r\nimport { PageHeader } from '@/components/landing-page/blocks/PageHeader';\r\nimport { Footer } from '@/components/landing-page/blocks/Footer';\r\nimport { SocialLinks } from '@/components/landing-page/blocks/SocialLinks';\r\nimport { Breadcrumbs } from '@/components/landing-page/blocks/Breadcrumbs';\r\nimport { Divider } from '@/components/landing-page/blocks/Divider';\r\nimport { Spacer } from '@/components/landing-page/blocks/Spacer';\r\nimport { VideoPlayer } from '@/components/landing-page/blocks/VideoPlayer';\r\nimport { TextContent } from '@/components/landing-page/blocks/TextContent';\r\nimport { ProductGrid } from '@/components/landing-page/blocks/ProductGrid';\r\nimport { ProductCardBlock } from '@/components/landing-page/blocks/ProductCardBlock';\r\nimport { ProductDescription } from '@/components/landing-page/blocks/ProductDescription';\r\nimport { AddToCartButton } from '@/components/landing-page/blocks/AddToCartButton';\r\nimport { CartSummary } from '@/components/landing-page/blocks/CartSummary';\r\nimport { ProductImageGallery } from '@/components/landing-page/blocks/ProductImageGallery';\r\nimport { ProductReviews } from '@/components/landing-page/blocks/ProductReviews';\r\nimport { RelatedProducts } from '@/components/landing-page/blocks/RelatedProducts';\r\nimport { ProductTabs } from '@/components/landing-page/blocks/ProductTabs';\r\nimport { BlogGrid } from '@/components/landing-page/blocks/BlogGrid';\r\nimport { BlogPostCard } from '@/components/landing-page/blocks/BlogPostCard';\r\nimport { BlogPostContent } from '@/components/landing-page/blocks/BlogPostContent';\r\nimport { BlogCategories } from '@/components/landing-page/blocks/BlogCategories';\r\nimport { RecentPostsWidget } from '@/components/landing-page/blocks/RecentPostsWidget';\r\n\r\n// New Elementor-style widgets\r\nimport { Heading } from '@/components/landing-page/blocks/Heading';\r\nimport { TextEditor } from '@/components/landing-page/blocks/TextEditor';\r\nimport { ButtonBlock } from '@/components/landing-page/blocks/Button';\r\nimport { Icon } from '@/components/landing-page/blocks/Icon';\r\nimport { ImageBlock } from '@/components/landing-page/blocks/Image';\r\nimport { DividerWidget } from '@/components/landing-page/blocks/DividerWidget';\r\nimport { SpacerWidget } from '@/components/landing-page/blocks/SpacerWidget';\r\nimport { AccordionWidget } from '@/components/landing-page/blocks/AccordionWidget';\r\nimport { TabsWidget } from '@/components/landing-page/blocks/TabsWidget';\r\nimport { Counter } from '@/components/landing-page/blocks/Counter';\r\nimport { ProgressBar } from '@/components/landing-page/blocks/ProgressBar';\r\nimport { SocialIconsWidget } from '@/components/landing-page/blocks/SocialIconsWidget';\r\n\r\ninterface BlockPreviewProps {\r\n    template: {\r\n        name: string;\r\n        category: string;\r\n        slug?: string;\r\n        componentCode?: string;\r\n    };\r\n    config: any;\r\n}\r\n\r\nexport const BlockPreview: React.FC<BlockPreviewProps> = ({\r\n    template,\r\n    config\r\n}) => {\r\n    // Debug logging to check template data\r\n    // console.log('BlockPreview template:', template);\r\n    // console.log('BlockPreview config:', config);\r\n\r\n    // Use config as a key to force re-render when config changes\r\n    const configKey = JSON.stringify(config);\r\n\r\n    const renderBlockContent = () => {\r\n        // If we have a slug, try to match it to a component\r\n        if (template.slug) {\r\n            switch (template.slug) {\r\n                case 'hero-background-image':\r\n                    return <HeroBackgroundImage config={config} />;\r\n                case 'hero-video-background':\r\n                    return <HeroVideoBackground config={config} />;\r\n                case 'hero-split-layout':\r\n                    return <HeroSplitLayout config={config} />;\r\n                case 'hero-minimal-badge':\r\n                    return <HeroMinimal config={config} />;\r\n                case 'hero-gradient':\r\n                    return <HeroGradient config={config} />;\r\n                case 'features-3-column-grid':\r\n                case 'features-grid':\r\n                    return <FeaturesGrid config={config} />;\r\n                case 'features-alternating':\r\n                    return <FeaturesAlternating config={config} />;\r\n                case 'features-icon-boxes':\r\n                    return <FeaturesIconBoxes config={config} />;\r\n                case 'features-screenshots':\r\n                    return <FeaturesScreenshots config={config} />;\r\n                case 'cta-full-width':\r\n                case 'cta-banner':\r\n                    return <CTABanner config={config} />;\r\n                case 'cta-card':\r\n                    return <CTACard config={config} />;\r\n                case 'cta-split':\r\n                    return <CTASplit config={config} />;\r\n                case 'testimonials-carousel':\r\n                    return <TestimonialsCarousel config={config} />;\r\n                case 'testimonials-grid':\r\n                    return <TestimonialsGrid config={config} />;\r\n                case 'pricing-table':\r\n                case 'pricing-3-tier':\r\n                    return <PricingTable config={config} />;\r\n                case 'pricing-comparison':\r\n                    return <PricingComparison config={config} />;\r\n                case 'team-grid':\r\n                    return <TeamGrid config={config} />;\r\n                case 'stats-showcase':\r\n                    return <StatsShowcase config={config} />;\r\n                case 'logo-grid':\r\n                    return <LogoGrid config={config} />;\r\n                case 'newsletter-signup':\r\n                    return <NewsletterSignup config={config} />;\r\n                case 'contact-form':\r\n                    return <ContactForm config={config} />;\r\n                case 'faq-accordion':\r\n                    return <FAQAccordion config={config} />;\r\n                case 'gallery-grid':\r\n                    return <GalleryGrid config={config} />;\r\n                case 'navigation-bar':\r\n                    return <NavigationBar config={config} />;\r\n                case 'page-header':\r\n                    return <PageHeader config={config} />;\r\n                case 'footer':\r\n                    return <Footer config={config} />;\r\n                case 'social-links':\r\n                    return <SocialLinks config={config} />;\r\n                case 'breadcrumbs':\r\n                    return <Breadcrumbs config={config} />;\r\n                case 'divider':\r\n                    return <Divider config={config} />;\r\n                case 'spacer':\r\n                    return <Spacer config={config} />;\r\n                case 'video-player':\r\n                    return <VideoPlayer config={config} />;\r\n                case 'text-content':\r\n                    return <TextContent config={config} />;\r\n                \r\n                // Product blocks\r\n                case 'product-grid':\r\n                    return <ProductGrid config={config} />;\r\n                case 'product-card':\r\n                    return <ProductCardBlock config={config} />;\r\n                case 'product-description':\r\n                    return <ProductDescription config={config} />;\r\n                case 'add-to-cart-button':\r\n                    return <AddToCartButton config={config} />;\r\n                case 'cart-summary':\r\n                    return <CartSummary config={config} />;\r\n                case 'product-image-gallery':\r\n                    return <ProductImageGallery config={config} />;\r\n                case 'product-reviews':\r\n                    return <ProductReviews config={config} />;\r\n                case 'related-products':\r\n                    return <RelatedProducts config={config} />;\r\n                case 'product-tabs':\r\n                    return <ProductTabs config={config} />;\r\n                \r\n                // Blog blocks\r\n                case 'blog-grid':\r\n                    return <BlogGrid config={config} />;\r\n                case 'blog-post-card':\r\n                    return <BlogPostCard config={config} />;\r\n                case 'blog-post-content':\r\n                    return <BlogPostContent config={config} />;\r\n                case 'blog-categories':\r\n                    return <BlogCategories config={config} />;\r\n                case 'recent-posts-widget':\r\n                    return <RecentPostsWidget config={config} />;\r\n\r\n                // New Elementor-style widgets\r\n                case 'heading':\r\n                    return <Heading config={config} />;\r\n                case 'text-editor':\r\n                    return <TextEditor config={config} />;\r\n                case 'button':\r\n                    return <ButtonBlock config={config} />;\r\n                case 'icon':\r\n                    return <Icon config={config} />;\r\n                case 'image':\r\n                    return <ImageBlock config={config} />;\r\n                case 'divider-widget':\r\n                    return <DividerWidget config={config} />;\r\n                case 'spacer-widget':\r\n                    return <SpacerWidget config={config} />;\r\n                case 'accordion':\r\n                    return <AccordionWidget config={config} />;\r\n                case 'tabs':\r\n                    return <TabsWidget config={config} />;\r\n                case 'counter':\r\n                    return <Counter config={config} />;\r\n                case 'progress-bar':\r\n                    return <ProgressBar config={config} />;\r\n                case 'social-icons':\r\n                    return <SocialIconsWidget config={config} />;\r\n            }\r\n        }\r\n\r\n        // Fallback for unknown blocks or missing slugs\r\n        return (\r\n            <div className=\"p-8 text-center space-y-4\">\r\n                <p className=\"text-muted-foreground\">\r\n                    Preview not available for this block type.\r\n                </p>\r\n                <div className=\"text-xs text-left bg-gray-100 p-4 rounded overflow-auto max-h-[200px]\">\r\n                    <pre>{JSON.stringify(config, null, 2)}</pre>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // Minimal messages for preview context\r\n    // These provide fallback translations for components that use useTranslations()\r\n    const minimalMessages = {\r\n        product: {\r\n            addedToCart: 'Added to cart',\r\n            addToCart: 'Add to Cart',\r\n            outOfStock: 'Out of Stock',\r\n            featured: 'Featured',\r\n        },\r\n        cart: {\r\n            emptyCart: 'Your cart is empty',\r\n            addProducts: 'Add some products to your cart',\r\n            continueShopping: 'Continue Shopping',\r\n            item: 'item',\r\n            items: 'items',\r\n            subtotal: 'Subtotal',\r\n            total: 'Total',\r\n            proceedToCheckout: 'Proceed to Checkout',\r\n            remove: 'Remove',\r\n            each: 'each',\r\n            orderSummary: 'Order Summary',\r\n            tax: 'Tax',\r\n            shipping: 'Shipping',\r\n            free: 'Free',\r\n            freeShippingProgress: 'Add {amount} more for free shipping',\r\n            trustBadges: {\r\n                secureCheckout: 'Secure Checkout',\r\n            },\r\n            freeReturns: 'Free Returns',\r\n            shippingTime: 'Shipping: 3-5 Business Days',\r\n        },\r\n        wishlist: {\r\n            title: 'My Wishlist',\r\n            empty: 'Your wishlist is empty',\r\n            emptyDesc: 'Save your favorite products to your wishlist and shop them later!',\r\n            startShopping: 'Start Shopping',\r\n            removed: 'Removed from wishlist',\r\n            removeFailed: 'Failed to remove from wishlist',\r\n            itemCount: '{count, plural, =0 {No items} one {1 item} other {# items}} saved',\r\n            signInRequired: 'Please sign in to use the wishlist',\r\n            added: 'Added to wishlist',\r\n            addFailed: 'Failed to add to wishlist',\r\n            saved: 'Saved',\r\n            save: 'Save',\r\n            removeFromWishlist: 'Remove from wishlist',\r\n            addToWishlist: 'Add to wishlist',\r\n        },\r\n        common: {\r\n            error: 'An error occurred',\r\n            loading: 'Loading...',\r\n        },\r\n    };\r\n\r\n    return (\r\n        <NextIntlClientProvider locale=\"en\" messages={minimalMessages}>\r\n            <div className=\"w-full\" key={configKey}>\r\n                {/* We wrap the preview in a div that prevents interaction (links, buttons) \r\n                    so they don't interfere with the editor UI */}\r\n                <div className=\"pointer-events-none select-none\">\r\n                    {renderBlockContent()}\r\n                </div>\r\n            </div>\r\n        </NextIntlClientProvider>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":932,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/Container.tsx"],"sourcesContent":["/**\r\n * Container Component\r\n *\r\n * Renders different types of container blocks (Section, Flexbox, Grid)\r\n * with support for nested children and layout customization.\r\n */\r\n\r\nimport React from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { ContainerType, EditorBlock, FlexboxSettings, GridSettings } from '@/types/editor';\r\nimport { Plus } from 'lucide-react';\r\n\r\ninterface ContainerProps {\r\n  block: EditorBlock;\r\n  children?: React.ReactNode;\r\n  isSelected?: boolean;\r\n  isHovered?: boolean;\r\n  className?: string;\r\n  onAddBlockToContainer?: (containerId: string) => void;\r\n}\r\n\r\nexport const Container: React.FC<ContainerProps> = ({\r\n  block,\r\n  children,\r\n  isSelected = false,\r\n  isHovered = false,\r\n  className,\r\n  onAddBlockToContainer,\r\n}) => {\r\n  const { containerType, layoutSettings, styleConfig, advancedConfig } = block;\r\n\r\n  // Get container-specific styles\r\n  const getContainerStyles = (): React.CSSProperties => {\r\n    const styles: React.CSSProperties = {};\r\n\r\n    // Apply style config\r\n    if (styleConfig) {\r\n      if (styleConfig.backgroundColor) styles.backgroundColor = styleConfig.backgroundColor;\r\n      if (styleConfig.padding) {\r\n        const p = styleConfig.padding;\r\n        styles.padding = `${p.top || 0}px ${p.right || 0}px ${p.bottom || 0}px ${p.left || 0}px`;\r\n      }\r\n      if (styleConfig.margin) {\r\n        const m = styleConfig.margin;\r\n        styles.margin = `${m.top || 0}px ${m.right || 0}px ${m.bottom || 0}px ${m.left || 0}px`;\r\n      }\r\n      if (styleConfig.borderRadius) {\r\n        const br = styleConfig.borderRadius;\r\n        styles.borderRadius = `${br.topLeft || 0}px ${br.topRight || 0}px ${br.bottomRight || 0}px ${br.bottomLeft || 0}px`;\r\n      }\r\n      if (styleConfig.borderWidth && styleConfig.borderStyle && styleConfig.borderColor) {\r\n        styles.border = `${styleConfig.borderWidth}px ${styleConfig.borderStyle} ${styleConfig.borderColor}`;\r\n      }\r\n      if (styleConfig.boxShadow) styles.boxShadow = styleConfig.boxShadow;\r\n      if (styleConfig.backgroundImage) {\r\n        styles.backgroundImage = `url(${styleConfig.backgroundImage})`;\r\n        if (styleConfig.backgroundSize) styles.backgroundSize = styleConfig.backgroundSize;\r\n        if (styleConfig.backgroundPosition) styles.backgroundPosition = styleConfig.backgroundPosition;\r\n        if (styleConfig.backgroundRepeat) styles.backgroundRepeat = styleConfig.backgroundRepeat;\r\n      }\r\n      if (styleConfig.width) styles.width = styleConfig.width;\r\n      if (styleConfig.height) styles.height = styleConfig.height;\r\n      if (styleConfig.maxWidth) styles.maxWidth = styleConfig.maxWidth;\r\n      if (styleConfig.minHeight) styles.minHeight = styleConfig.minHeight;\r\n    }\r\n\r\n    // Apply advanced config\r\n    if (advancedConfig) {\r\n      if (advancedConfig.position) styles.position = advancedConfig.position;\r\n      if (advancedConfig.zIndex !== undefined) styles.zIndex = advancedConfig.zIndex;\r\n      if (advancedConfig.overflow) styles.overflow = advancedConfig.overflow;\r\n    }\r\n\r\n    return styles;\r\n  };\r\n\r\n  // Get layout-specific styles and classes\r\n  const getLayoutConfig = () => {\r\n    if (!layoutSettings) {\r\n      return { styles: {}, classes: '' };\r\n    }\r\n\r\n    const styles: React.CSSProperties = {};\r\n    let classes = '';\r\n\r\n    switch (containerType) {\r\n      case ContainerType.FLEXBOX: {\r\n        const flexSettings = layoutSettings as FlexboxSettings;\r\n        styles.display = 'flex';\r\n        styles.flexDirection = flexSettings.direction || 'row';\r\n        styles.flexWrap = flexSettings.wrap || 'nowrap';\r\n        styles.justifyContent = flexSettings.justifyContent || 'flex-start';\r\n        styles.alignItems = flexSettings.alignItems || 'stretch';\r\n        if (flexSettings.alignContent) styles.alignContent = flexSettings.alignContent;\r\n        if (flexSettings.gap) styles.gap = `${flexSettings.gap}px`;\r\n        break;\r\n      }\r\n\r\n      case ContainerType.GRID: {\r\n        const gridSettings = layoutSettings as GridSettings;\r\n        styles.display = 'grid';\r\n\r\n        // Handle grid columns\r\n        if (typeof gridSettings.columns === 'number') {\r\n          styles.gridTemplateColumns = `repeat(${gridSettings.columns}, 1fr)`;\r\n        } else if (gridSettings.columns) {\r\n          styles.gridTemplateColumns = gridSettings.columns;\r\n        }\r\n\r\n        // Handle grid rows\r\n        if (typeof gridSettings.rows === 'number') {\r\n          styles.gridTemplateRows = `repeat(${gridSettings.rows}, 1fr)`;\r\n        } else if (gridSettings.rows) {\r\n          styles.gridTemplateRows = gridSettings.rows;\r\n        }\r\n\r\n        if (gridSettings.columnGap) styles.columnGap = `${gridSettings.columnGap}px`;\r\n        if (gridSettings.rowGap) styles.rowGap = `${gridSettings.rowGap}px`;\r\n        if (gridSettings.autoFlow) styles.gridAutoFlow = gridSettings.autoFlow;\r\n        if (gridSettings.justifyItems) styles.justifyItems = gridSettings.justifyItems;\r\n        if (gridSettings.alignItems) styles.alignItems = gridSettings.alignItems;\r\n        break;\r\n      }\r\n\r\n      case ContainerType.SECTION: {\r\n        // Section is full-width container\r\n        classes = 'w-full';\r\n        const flexSettings = layoutSettings as FlexboxSettings;\r\n        if (flexSettings) {\r\n          styles.display = 'flex';\r\n          styles.flexDirection = flexSettings.direction || 'column';\r\n          styles.alignItems = flexSettings.alignItems || 'stretch';\r\n          if (flexSettings.gap) styles.gap = `${flexSettings.gap}px`;\r\n        }\r\n        break;\r\n      }\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return { styles, classes };\r\n  };\r\n\r\n  const containerStyles = getContainerStyles();\r\n  const layoutConfig = getLayoutConfig();\r\n  const combinedStyles = { ...layoutConfig.styles, ...containerStyles };\r\n\r\n  // Visibility classes based on responsive settings\r\n  const getVisibilityClasses = () => {\r\n    const classes: string[] = [];\r\n\r\n    if (advancedConfig?.hideOnMobile) classes.push('hidden md:block');\r\n    else if (advancedConfig?.hideOnTablet) classes.push('block md:hidden lg:block');\r\n    else if (advancedConfig?.hideOnDesktop) classes.push('block lg:hidden');\r\n\r\n    return classes.join(' ');\r\n  };\r\n\r\n  const visibilityClasses = getVisibilityClasses();\r\n\r\n  return (\r\n    <div\r\n      data-block-id={block.id}\r\n      data-container-type={containerType}\r\n      className={cn(\r\n        'transition-all duration-200',\r\n        layoutConfig.classes,\r\n        visibilityClasses,\r\n        advancedConfig?.customClasses,\r\n        // Selection and hover states\r\n        isSelected && 'ring-2 ring-primary ring-offset-2',\r\n        isHovered && !isSelected && 'ring-1 ring-gray-300',\r\n        className\r\n      )}\r\n      style={combinedStyles}\r\n    >\r\n      {/* Custom CSS via style tag */}\r\n      {advancedConfig?.customCss && (\r\n        <style\r\n          dangerouslySetInnerHTML={{\r\n            __html: `[data-block-id=\"${block.id}\"] { ${advancedConfig.customCss} }`,\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Container children */}\r\n      {children}\r\n\r\n      {/* Empty container placeholder */}\r\n      {(!children || React.Children.count(children) === 0) && containerType !== ContainerType.BLOCK && (\r\n        <div className=\"min-h-[120px] border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50/50 hover:bg-gray-100/50 hover:border-primary/50 transition-all group/empty\">\r\n          <div className=\"text-center p-4\">\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                if (onAddBlockToContainer) {\r\n                  onAddBlockToContainer(block.id);\r\n                }\r\n              }}\r\n              className=\"inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-primary hover:text-white border-2 border-dashed border-gray-300 hover:border-primary rounded-lg text-gray-500 hover:text-white transition-all group-hover/empty:border-primary/50\"\r\n            >\r\n              <Plus className=\"h-4 w-4\" />\r\n              <span className=\"text-sm font-medium\">Add Block to {containerType}</span>\r\n            </button>\r\n            <div className=\"text-xs text-gray-400 mt-2\">or drag blocks here</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Container Label Component\r\n * Shows the container type label in the editor\r\n */\r\ninterface ContainerLabelProps {\r\n  containerType: ContainerType;\r\n  blockName?: string;\r\n}\r\n\r\nexport const ContainerLabel: React.FC<ContainerLabelProps> = ({ containerType, blockName }) => {\r\n  const getIcon = () => {\r\n    switch (containerType) {\r\n      case ContainerType.SECTION:\r\n        return (\r\n          <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 5h16M4 12h16M4 19h16\" />\r\n          </svg>\r\n        );\r\n      case ContainerType.FLEXBOX:\r\n        return (\r\n          <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7\" />\r\n          </svg>\r\n        );\r\n      case ContainerType.GRID:\r\n        return (\r\n          <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z\" />\r\n          </svg>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  if (containerType === ContainerType.BLOCK) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"inline-flex items-center gap-1.5 bg-purple-600 text-white text-[10px] font-semibold px-2 py-0.5 rounded-full shadow-sm uppercase tracking-wider\">\r\n      {getIcon()}\r\n      <span>{containerType}</span>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":1262,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/NestedSortableBlock.tsx"],"sourcesContent":["/**\r\n * Nested Sortable Block Component\r\n *\r\n * Enhanced version of SortableBlock with support for nested containers,\r\n * drop zones, and Elementor-style interactions.\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { useSortable, SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\r\nimport { useDroppable } from '@dnd-kit/core';\r\nimport { CSS } from '@dnd-kit/utilities';\r\nimport {\r\n  GripVertical,\r\n  Trash2,\r\n  Settings,\r\n  Move,\r\n  Copy,\r\n  Eye,\r\n  EyeOff,\r\n  ChevronDown,\r\n  ChevronRight,\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { cn } from '@/lib/utils';\r\nimport { BlockPreview } from '../block-editor/BlockPreview';\r\nimport { Container, ContainerLabel } from './Container';\r\nimport { EditorBlock, ContainerType } from '@/types/editor';\r\nimport { isContainer } from '@/lib/editor-utils';\r\n\r\ninterface NestedSortableBlockProps {\r\n  block: EditorBlock;\r\n  isSelected: boolean;\r\n  isHovered?: boolean;\r\n  onSelect: () => void;\r\n  onHover?: (blockId: string | null) => void;\r\n  onToggleSettings?: () => void;\r\n  onRemove: () => void;\r\n  onDuplicate?: () => void;\r\n  onToggleVisibility?: () => void;\r\n  onAddBlockToContainer?: (containerId: string) => void;\r\n  depth?: number;\r\n  renderChildren?: (blocks: EditorBlock[]) => React.ReactNode;\r\n}\r\n\r\nexport const NestedSortableBlock: React.FC<NestedSortableBlockProps> = ({\r\n  block,\r\n  isSelected,\r\n  isHovered = false,\r\n  onSelect,\r\n  onHover,\r\n  onToggleSettings,\r\n  onRemove,\r\n  onDuplicate,\r\n  onToggleVisibility,\r\n  onAddBlockToContainer,\r\n  depth = 0,\r\n  renderChildren,\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  const hasChildren = block.children && block.children.length > 0;\r\n  const blockIsContainer = isContainer(block);\r\n\r\n  // Sortable for dragging the block itself\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: block.id });\r\n\r\n  // Droppable for accepting children (only if it's a container)\r\n  const { setNodeRef: setDroppableRef, isOver } = useDroppable({\r\n    id: `droppable-${block.id}`,\r\n    disabled: !blockIsContainer,\r\n    data: {\r\n      type: 'container',\r\n      accepts: 'block',\r\n      blockId: block.id,\r\n    },\r\n  });\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    zIndex: isDragging ? 100 : 'auto',\r\n    opacity: isDragging ? 0.5 : 1,\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    if (onHover && !isDragging) {\r\n      onHover(block.id);\r\n    }\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    if (onHover && !isDragging) {\r\n      onHover(null);\r\n    }\r\n  };\r\n\r\n  // Render block content (either preview or container with children)\r\n  const renderBlockContent = () => {\r\n    if (blockIsContainer) {\r\n      return (\r\n        <Container\r\n          block={block}\r\n          isSelected={isSelected}\r\n          isHovered={isHovered}\r\n          onAddBlockToContainer={onAddBlockToContainer}\r\n          className={cn(\r\n            'min-h-[80px]',\r\n            isOver && 'ring-2 ring-blue-400 ring-offset-2 bg-blue-50/20'\r\n          )}\r\n        >\r\n          {hasChildren && isExpanded && renderChildren && (\r\n            <div className=\"space-y-2 p-2\">\r\n              {renderChildren(block.children!)}\r\n            </div>\r\n          )}\r\n        </Container>\r\n      );\r\n    }\r\n\r\n    // Merge all config objects for the preview\r\n    // Support both old single config and new three-tab config system\r\n    const mergedConfig = block.config || {\r\n      ...block.contentConfig,\r\n      ...block.styleConfig,\r\n      ...block.advancedConfig,\r\n    };\r\n\r\n    // Regular block preview\r\n    return (\r\n      <div className=\"pointer-events-none min-h-[100px] bg-white\">\r\n        {block.template ? (\r\n          <BlockPreview\r\n            template={block.template}\r\n            config={mergedConfig}\r\n          />\r\n        ) : (\r\n          <div className=\"flex items-center justify-center h-24 bg-gray-50 text-gray-400\">\r\n            Unknown Block Template\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      style={style}\r\n      className={cn(\r\n        'relative group transition-all',\r\n        depth > 0 && 'ml-4 border-l-2 border-gray-200 pl-3',\r\n        !block.isVisible && 'opacity-50'\r\n      )}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        onSelect();\r\n      }}\r\n    >\r\n      {/* Block Label and Controls */}\r\n      <div\r\n        className={cn(\r\n          'absolute -top-3 left-0 right-0 flex items-center justify-between z-20 transition-all px-2',\r\n          (isSelected || isHovered) ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'\r\n        )}\r\n      >\r\n        {/* Left: Block Name & Type Label */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {hasChildren && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-6 w-6 hover:bg-white/90 bg-white border shadow-sm\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setIsExpanded(!isExpanded);\r\n              }}\r\n              title={isExpanded ? 'Collapse' : 'Expand'}\r\n            >\r\n              {isExpanded ? (\r\n                <ChevronDown className=\"h-3 w-3\" />\r\n              ) : (\r\n                <ChevronRight className=\"h-3 w-3\" />\r\n              )}\r\n            </Button>\r\n          )}\r\n\r\n          {isSelected && (\r\n            <div className=\"bg-primary text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm uppercase tracking-wider\">\r\n              {block.template?.name || 'Block'}\r\n            </div>\r\n          )}\r\n\r\n          <ContainerLabel\r\n            containerType={block.containerType}\r\n            blockName={block.template?.name}\r\n          />\r\n        </div>\r\n\r\n        {/* Right: Action Buttons */}\r\n        <div\r\n          className={cn(\r\n            'flex items-center gap-1 bg-white shadow-md border rounded-lg p-1',\r\n            (isSelected || isDragging) ? 'opacity-100' : 'opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto'\r\n          )}\r\n        >\r\n          {/* Drag Handle */}\r\n          <div\r\n            {...attributes}\r\n            {...listeners}\r\n            className=\"cursor-move p-1.5 hover:bg-gray-100 rounded-md text-gray-500 hover:text-gray-900 transition-colors\"\r\n            title=\"Drag to reorder\"\r\n          >\r\n            <Move className=\"h-3.5 w-3.5\" />\r\n          </div>\r\n\r\n          <div className=\"w-px h-4 bg-gray-200\" />\r\n\r\n          {/* Settings */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            className={cn(\r\n              'h-7 w-7 transition-colors',\r\n              isSelected\r\n                ? 'text-primary bg-primary/10'\r\n                : 'text-gray-500 hover:text-primary hover:bg-primary/5'\r\n            )}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              if (onToggleSettings) {\r\n                onToggleSettings();\r\n              } else {\r\n                onSelect();\r\n              }\r\n            }}\r\n            title={isSelected ? 'Close Settings' : 'Open Settings'}\r\n          >\r\n            <Settings className=\"h-3.5 w-3.5\" />\r\n          </Button>\r\n\r\n          <div className=\"w-px h-4 bg-gray-200\" />\r\n\r\n          {/* Visibility Toggle */}\r\n          {onToggleVisibility && (\r\n            <>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-7 w-7 text-gray-500 hover:text-gray-900 hover:bg-gray-100\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onToggleVisibility();\r\n                }}\r\n                title={block.isVisible ? 'Hide block' : 'Show block'}\r\n              >\r\n                {block.isVisible ? (\r\n                  <Eye className=\"h-3.5 w-3.5\" />\r\n                ) : (\r\n                  <EyeOff className=\"h-3.5 w-3.5\" />\r\n                )}\r\n              </Button>\r\n              <div className=\"w-px h-4 bg-gray-200\" />\r\n            </>\r\n          )}\r\n\r\n          {/* Duplicate */}\r\n          {onDuplicate && (\r\n            <>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"h-7 w-7 text-gray-500 hover:text-blue-600 hover:bg-blue-50\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onDuplicate();\r\n                }}\r\n                title=\"Duplicate block\"\r\n              >\r\n                <Copy className=\"h-3.5 w-3.5\" />\r\n              </Button>\r\n              <div className=\"w-px h-4 bg-gray-200\" />\r\n            </>\r\n          )}\r\n\r\n          {/* Remove */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            className=\"h-7 w-7 text-gray-500 hover:text-red-600 hover:bg-red-50\"\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onRemove();\r\n            }}\r\n            title=\"Remove block\"\r\n          >\r\n            <Trash2 className=\"h-3.5 w-3.5\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Block Content Wrapper */}\r\n      <div\r\n        ref={blockIsContainer ? setDroppableRef : undefined}\r\n        className={cn(\r\n          'bg-white rounded-lg border shadow-sm overflow-hidden transition-all mt-2',\r\n          isSelected ? 'border-primary/30 shadow-primary/10' : 'border-gray-200 hover:border-gray-300',\r\n          isOver && 'border-blue-400 shadow-blue-100',\r\n          !isExpanded && hasChildren && 'border-dashed'\r\n        )}\r\n      >\r\n        {renderBlockContent()}\r\n      </div>\r\n\r\n      {/* Drop Zone Indicator */}\r\n      {isOver && blockIsContainer && (\r\n        <div className=\"absolute inset-0 pointer-events-none rounded-lg ring-2 ring-blue-400 ring-offset-2 bg-blue-50/10 flex items-center justify-center z-10\">\r\n          <div className=\"bg-blue-500 text-white px-3 py-1.5 rounded-full text-xs font-semibold shadow-lg\">\r\n            Drop here to add to container\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Depth Indicator */}\r\n      {depth > 0 && (\r\n        <div\r\n          className=\"absolute left-0 top-0 bottom-0 w-0.5 bg-gradient-to-b from-gray-300 to-transparent\"\r\n          style={{ left: `-${depth * 16}px` }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":1675,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/NestedCanvas.tsx"],"sourcesContent":["/**\r\n * Enhanced Canvas Component with Nested Drag-and-Drop\r\n *\r\n * Supports:\r\n * - Nested containers with children\r\n * - Drag-and-drop between containers\r\n * - Visual drop indicators\r\n * - Multiple device preview modes\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n  DragOverEvent,\r\n  DragStartEvent,\r\n  DragOverlay,\r\n  closestCorners,\r\n} from '@dnd-kit/core';\r\nimport {\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable';\r\nimport { NestedSortableBlock } from './NestedSortableBlock';\r\nimport { EditorBlock, ContainerType } from '@/types/editor';\r\nimport { DeviceType } from './DevicePreview';\r\nimport { cn } from '@/lib/utils';\r\nimport { buildBlockTree, findBlockById, isContainer, canDropInto } from '@/lib/editor-utils';\r\n\r\ninterface NestedCanvasProps {\r\n  blocks: EditorBlock[];\r\n  selectedBlockId: string | null;\r\n  hoveredBlockId?: string | null;\r\n  onSelectBlock: (id: string) => void;\r\n  onHoverBlock?: (id: string | null) => void;\r\n  onToggleBlockSettings?: (id: string) => void;\r\n  onRemoveBlock: (id: string) => void;\r\n  onReorderBlocks: (blocks: EditorBlock[]) => void;\r\n  onMoveBlock?: (blockId: string, newParentId: string | null, newOrder: number) => void;\r\n  onDuplicateBlock?: (blockId: string) => void;\r\n  onToggleVisibility?: (blockId: string) => void;\r\n  onAddBlockToContainer?: (containerId: string) => void;\r\n  device: DeviceType;\r\n}\r\n\r\nexport const NestedCanvas: React.FC<NestedCanvasProps> = ({\r\n  blocks,\r\n  selectedBlockId,\r\n  hoveredBlockId,\r\n  onSelectBlock,\r\n  onHoverBlock,\r\n  onToggleBlockSettings,\r\n  onRemoveBlock,\r\n  onReorderBlocks,\r\n  onMoveBlock,\r\n  onDuplicateBlock,\r\n  onToggleVisibility,\r\n  onAddBlockToContainer,\r\n  device,\r\n}) => {\r\n  const [activeId, setActiveId] = useState<string | null>(null);\r\n  const [overId, setOverId] = useState<string | null>(null);\r\n\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8, // Require 8px of movement before dragging starts\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  );\r\n\r\n  // Build hierarchical tree from flat blocks\r\n  const blockTree = buildBlockTree(blocks);\r\n\r\n  const handleDragStart = (event: DragStartEvent) => {\r\n    setActiveId(event.active.id as string);\r\n  };\r\n\r\n  const handleDragOver = (event: DragOverEvent) => {\r\n    const { over } = event;\r\n    setOverId(over?.id as string | null);\r\n  };\r\n\r\n  const handleDragEnd = (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n\r\n    setActiveId(null);\r\n    setOverId(null);\r\n\r\n    if (!over || active.id === over.id) {\r\n      return;\r\n    }\r\n\r\n    const activeBlock = findBlockById(blocks, active.id as string);\r\n    const overBlock = findBlockById(blocks, over.id as string);\r\n\r\n    if (!activeBlock) {\r\n      return;\r\n    }\r\n\r\n    // Check if dropping into a container\r\n    if (over.data.current?.type === 'container' && overBlock) {\r\n      // Validate drop\r\n      if (canDropInto(activeBlock, overBlock)) {\r\n        // Move block into container\r\n        if (onMoveBlock) {\r\n          onMoveBlock(activeBlock.id, overBlock.id, 0);\r\n        }\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Otherwise, reorder at the same level\r\n    if (overBlock && activeBlock.parentId === overBlock.parentId) {\r\n      const parentBlocks = activeBlock.parentId\r\n        ? findBlockById(blocks, activeBlock.parentId)?.children || []\r\n        : blockTree;\r\n\r\n      const oldIndex = parentBlocks.findIndex((b) => b.id === active.id);\r\n      const newIndex = parentBlocks.findIndex((b) => b.id === over.id);\r\n\r\n      if (oldIndex !== -1 && newIndex !== -1 && oldIndex !== newIndex) {\r\n        // Reorder blocks\r\n        const reordered = [...parentBlocks];\r\n        const [removed] = reordered.splice(oldIndex, 1);\r\n        reordered.splice(newIndex, 0, removed);\r\n\r\n        // Update order values\r\n        const withUpdatedOrder = reordered.map((block, index) => ({\r\n          ...block,\r\n          order: index,\r\n        }));\r\n\r\n        // If at root level, update directly\r\n        if (!activeBlock.parentId) {\r\n          onReorderBlocks(withUpdatedOrder);\r\n        } else {\r\n          // Update parent's children\r\n          // This needs to bubble up to update the full blocks array\r\n          // For now, we'll call onReorderBlocks with the full updated tree\r\n          // (This will be handled better by the usePageEditor hook)\r\n          const updatedBlocks = blocks.map((b) => {\r\n            if (b.parentId === activeBlock.parentId) {\r\n              const newBlock = withUpdatedOrder.find((ub) => ub.id === b.id);\r\n              return newBlock || b;\r\n            }\r\n            return b;\r\n          });\r\n          onReorderBlocks(updatedBlocks);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDragCancel = () => {\r\n    setActiveId(null);\r\n    setOverId(null);\r\n  };\r\n\r\n  const getWidthClass = () => {\r\n    switch (device) {\r\n      case 'mobile':\r\n        return 'max-w-[375px]';\r\n      case 'tablet':\r\n        return 'max-w-[768px]';\r\n      default:\r\n        return 'max-w-full';\r\n    }\r\n  };\r\n\r\n  // Recursively render blocks and their children\r\n  const renderBlocks = (blocksToRender: EditorBlock[], depth = 0): React.ReactNode => {\r\n    return blocksToRender.map((block) => (\r\n      <NestedSortableBlock\r\n        key={block.id}\r\n        block={block}\r\n        isSelected={selectedBlockId === block.id}\r\n        isHovered={hoveredBlockId === block.id}\r\n        onSelect={() => onSelectBlock(block.id)}\r\n        onHover={onHoverBlock}\r\n        onToggleSettings={\r\n          onToggleBlockSettings\r\n            ? () => onToggleBlockSettings(block.id)\r\n            : undefined\r\n        }\r\n        onRemove={() => onRemoveBlock(block.id)}\r\n        onDuplicate={\r\n          onDuplicateBlock ? () => onDuplicateBlock(block.id) : undefined\r\n        }\r\n        onToggleVisibility={\r\n          onToggleVisibility ? () => onToggleVisibility(block.id) : undefined\r\n        }\r\n        onAddBlockToContainer={onAddBlockToContainer}\r\n        depth={depth}\r\n        renderChildren={(children) => renderBlocks(children, depth + 1)}\r\n      />\r\n    ));\r\n  };\r\n\r\n  const activeBlock = activeId ? findBlockById(blocks, activeId) : null;\r\n\r\n  return (\r\n    <div\r\n      className={cn('transition-all duration-300 ease-in-out w-full mx-auto', getWidthClass())}\r\n    >\r\n      <DndContext\r\n        sensors={sensors}\r\n        collisionDetection={closestCorners}\r\n        onDragStart={handleDragStart}\r\n        onDragOver={handleDragOver}\r\n        onDragEnd={handleDragEnd}\r\n        onDragCancel={handleDragCancel}\r\n      >\r\n        <SortableContext\r\n          items={blocks.map((b) => b.id)}\r\n          strategy={verticalListSortingStrategy}\r\n        >\r\n          <div\r\n            className={cn(\r\n              'min-h-[600px] bg-white shadow-lg border border-gray-200 transition-all',\r\n              device === 'desktop' && 'rounded-none',\r\n              device === 'tablet' && 'rounded-lg border-[3px] border-gray-400 my-8',\r\n              device === 'mobile' && 'rounded-[2rem] border-[12px] border-gray-800 my-8 shadow-2xl'\r\n            )}\r\n            style={{\r\n              minHeight: device === 'desktop' ? '100vh' : '600px'\r\n            }}\r\n          >\r\n            {/* Canvas Content */}\r\n            <div className={cn(\r\n              'min-h-full',\r\n              device === 'mobile' && 'rounded-[1.5rem] overflow-hidden'\r\n            )}>\r\n              {/* Render block tree */}\r\n              <div className=\"space-y-0\">{renderBlocks(blockTree)}</div>\r\n\r\n              {/* Empty state */}\r\n              {blocks.length === 0 && (\r\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-16 m-4 text-center bg-gradient-to-br from-gray-50 to-gray-100/50\">\r\n                  <div className=\"max-w-md mx-auto\">\r\n                    <div className=\"mb-4 inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary\">\r\n                      <svg\r\n                        className=\"w-8 h-8\"\r\n                        fill=\"none\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        stroke=\"currentColor\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          strokeWidth={2}\r\n                          d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\r\n                        />\r\n                      </svg>\r\n                    </div>\r\n                    <p className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                      Start Building Your Page\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-600 mb-4\">\r\n                      Drag blocks from the left panel to add them to your canvas.\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      Click blocks to configure  Drag to reorder  Nest in containers\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </SortableContext>\r\n\r\n        {/* Drag Overlay - shows dragged block while dragging */}\r\n        <DragOverlay>\r\n          {activeBlock ? (\r\n            <div className=\"bg-white rounded-lg border-2 border-primary shadow-2xl p-4 opacity-90 rotate-2 scale-105\">\r\n              <div className=\"flex items-center gap-2 text-sm font-semibold text-primary\">\r\n                <div className=\"w-2 h-2 bg-primary rounded-full animate-pulse\" />\r\n                {activeBlock.template?.name || 'Block'}\r\n                {isContainer(activeBlock) && (\r\n                  <span className=\"text-xs text-gray-500\">\r\n                    ({activeBlock.containerType})\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </DragOverlay>\r\n      </DndContext>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":1999,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/Navigator.tsx"],"sourcesContent":["/**\r\n * Navigator Panel Component\r\n *\r\n * Tree view displaying the hierarchical structure of blocks on the page.\r\n * Similar to Elementor's Navigator panel.\r\n *\r\n * Features:\r\n * - Hierarchical tree view of blocks\r\n * - Expand/collapse containers\r\n * - Drag-and-drop reordering\r\n * - Click to select blocks\r\n * - Visibility toggle\r\n * - Search/filter\r\n */\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport {\r\n  ChevronRight,\r\n  ChevronDown,\r\n  Eye,\r\n  EyeOff,\r\n  Search,\r\n  Layers,\r\n  Trash2,\r\n  Copy,\r\n  X,\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { cn } from '@/lib/utils';\r\nimport { EditorBlock, NavigatorNode, ContainerType } from '@/types/editor';\r\nimport { blocksToNavigatorNodes, searchBlocks } from '@/lib/editor-utils';\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n} from '@dnd-kit/core';\r\nimport {\r\n  SortableContext,\r\n  useSortable,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\n\r\ninterface NavigatorProps {\r\n  blocks: EditorBlock[];\r\n  selectedBlockId: string | null;\r\n  onSelectBlock: (id: string) => void;\r\n  onRemoveBlock?: (id: string) => void;\r\n  onDuplicateBlock?: (id: string) => void;\r\n  onToggleVisibility?: (id: string) => void;\r\n  onReorderBlocks?: (blocks: EditorBlock[]) => void;\r\n  className?: string;\r\n}\r\n\r\nexport const Navigator: React.FC<NavigatorProps> = ({\r\n  blocks,\r\n  selectedBlockId,\r\n  onSelectBlock,\r\n  onRemoveBlock,\r\n  onDuplicateBlock,\r\n  onToggleVisibility,\r\n  onReorderBlocks,\r\n  className,\r\n}) => {\r\n  const [expandedIds, setExpandedIds] = useState<Set<string>>(new Set());\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  // Convert blocks to navigator nodes\r\n  const navigatorNodes = useMemo(() => {\r\n    if (searchQuery) {\r\n      // Filter blocks by search\r\n      const matchingBlocks = searchBlocks(blocks, searchQuery);\r\n      const matchingIds = new Set(matchingBlocks.map((b) => b.id));\r\n\r\n      // Auto-expand parents of matching blocks\r\n      const newExpandedIds = new Set(expandedIds);\r\n      matchingBlocks.forEach((block) => {\r\n        let currentBlock = block;\r\n        while (currentBlock.parentId) {\r\n          newExpandedIds.add(currentBlock.parentId);\r\n          currentBlock = blocks.find((b) => b.id === currentBlock.parentId)!;\r\n          if (!currentBlock) break;\r\n        }\r\n      });\r\n      setExpandedIds(newExpandedIds);\r\n\r\n      return blocksToNavigatorNodes(blocks, selectedBlockId, newExpandedIds).filter((node) =>\r\n        matchingIds.has(node.id)\r\n      );\r\n    }\r\n\r\n    return blocksToNavigatorNodes(blocks, selectedBlockId, expandedIds);\r\n  }, [blocks, selectedBlockId, expandedIds, searchQuery]);\r\n\r\n  const toggleExpand = (nodeId: string) => {\r\n    setExpandedIds((prev) => {\r\n      const next = new Set(prev);\r\n      if (next.has(nodeId)) {\r\n        next.delete(nodeId);\r\n      } else {\r\n        next.add(nodeId);\r\n      }\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const expandAll = () => {\r\n    const allContainerIds = blocks\r\n      .filter((b) => b.containerType !== ContainerType.BLOCK && b.children && b.children.length > 0)\r\n      .map((b) => b.id);\r\n    setExpandedIds(new Set(allContainerIds));\r\n  };\r\n\r\n  const collapseAll = () => {\r\n    setExpandedIds(new Set());\r\n  };\r\n\r\n  return (\r\n    <div className={cn('flex flex-col h-full bg-white border-r', className)}>\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <div className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <Layers className=\"w-4 h-4\" />\r\n            <span>Navigator</span>\r\n            <span className=\"text-xs text-gray-500\">({blocks.length})</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={expandAll}\r\n              className=\"h-7 px-2 text-xs\"\r\n              title=\"Expand all\"\r\n            >\r\n              Expand\r\n            </Button>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={collapseAll}\r\n              className=\"h-7 px-2 text-xs\"\r\n              title=\"Collapse all\"\r\n            >\r\n              Collapse\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Search */}\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n          <Input\r\n            type=\"text\"\r\n            placeholder=\"Search blocks...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"pl-9 pr-8 h-9\"\r\n          />\r\n          {searchQuery && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7\"\r\n              onClick={() => setSearchQuery('')}\r\n            >\r\n              <X className=\"w-3 h-3\" />\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tree View */}\r\n      <div className=\"flex-1 overflow-y-auto p-2\">\r\n        {navigatorNodes.length > 0 ? (\r\n          <div className=\"space-y-0.5\">\r\n            {navigatorNodes.map((node) => (\r\n              <NavigatorTreeNode\r\n                key={node.id}\r\n                node={node}\r\n                onSelect={onSelectBlock}\r\n                onToggleExpand={toggleExpand}\r\n                onRemove={onRemoveBlock}\r\n                onDuplicate={onDuplicateBlock}\r\n                onToggleVisibility={onToggleVisibility}\r\n              />\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-center p-4\">\r\n            <Layers className=\"w-12 h-12 text-gray-300 mb-2\" />\r\n            <p className=\"text-sm text-gray-500\">\r\n              {searchQuery ? 'No blocks found' : 'No blocks yet'}\r\n            </p>\r\n            <p className=\"text-xs text-gray-400 mt-1\">\r\n              {searchQuery ? 'Try a different search' : 'Add blocks to your page'}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Navigator Tree Node Component\r\n * Represents a single node in the tree view\r\n */\r\ninterface NavigatorTreeNodeProps {\r\n  node: NavigatorNode;\r\n  onSelect: (id: string) => void;\r\n  onToggleExpand: (id: string) => void;\r\n  onRemove?: (id: string) => void;\r\n  onDuplicate?: (id: string) => void;\r\n  onToggleVisibility?: (id: string) => void;\r\n}\r\n\r\nconst NavigatorTreeNode: React.FC<NavigatorTreeNodeProps> = ({\r\n  node,\r\n  onSelect,\r\n  onToggleExpand,\r\n  onRemove,\r\n  onDuplicate,\r\n  onToggleVisibility,\r\n}) => {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const hasChildren = node.children && node.children.length > 0;\r\n\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: node.id });\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (node.type) {\r\n      case ContainerType.SECTION:\r\n        return (\r\n          <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 5h16M4 12h16M4 19h16\" />\r\n          </svg>\r\n        );\r\n      case ContainerType.FLEXBOX:\r\n        return (\r\n          <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7\" />\r\n          </svg>\r\n        );\r\n      case ContainerType.GRID:\r\n        return (\r\n          <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z\" />\r\n          </svg>\r\n        );\r\n      default:\r\n        return (\r\n          <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n          </svg>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={setNodeRef} style={style}>\r\n      <div\r\n        className={cn(\r\n          'group relative flex items-center gap-1 px-2 py-1.5 rounded-md text-sm transition-colors cursor-pointer',\r\n          node.isSelected && 'bg-primary/10 text-primary font-medium',\r\n          !node.isSelected && isHovered && 'bg-gray-100',\r\n          !node.isVisible && 'opacity-50'\r\n        )}\r\n        style={{ paddingLeft: `${node.depth * 20 + 8}px` }}\r\n        onClick={() => onSelect(node.id)}\r\n        onMouseEnter={() => setIsHovered(true)}\r\n        onMouseLeave={() => setIsHovered(false)}\r\n      >\r\n        {/* Expand/Collapse Button */}\r\n        {hasChildren && (\r\n          <button\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onToggleExpand(node.id);\r\n            }}\r\n            className=\"flex-shrink-0 p-0.5 hover:bg-gray-200 rounded transition-colors\"\r\n          >\r\n            {node.isExpanded ? (\r\n              <ChevronDown className=\"w-3 h-3\" />\r\n            ) : (\r\n              <ChevronRight className=\"w-3 h-3\" />\r\n            )}\r\n          </button>\r\n        )}\r\n        {!hasChildren && <div className=\"w-4\" />}\r\n\r\n        {/* Icon */}\r\n        <div className=\"flex-shrink-0 text-gray-500\">{getIcon()}</div>\r\n\r\n        {/* Label */}\r\n        <div className=\"flex-1 truncate text-xs\">{node.label}</div>\r\n\r\n        {/* Action Buttons */}\r\n        <div\r\n          className={cn(\r\n            'flex-shrink-0 flex items-center gap-0.5 transition-opacity',\r\n            (isHovered || node.isSelected) ? 'opacity-100' : 'opacity-0'\r\n          )}\r\n        >\r\n          {/* Visibility Toggle */}\r\n          {onToggleVisibility && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-6 w-6\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onToggleVisibility(node.id);\r\n              }}\r\n              title={node.isVisible ? 'Hide' : 'Show'}\r\n            >\r\n              {node.isVisible ? (\r\n                <Eye className=\"w-3 h-3\" />\r\n              ) : (\r\n                <EyeOff className=\"w-3 h-3\" />\r\n              )}\r\n            </Button>\r\n          )}\r\n\r\n          {/* Duplicate */}\r\n          {onDuplicate && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-6 w-6\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onDuplicate(node.id);\r\n              }}\r\n              title=\"Duplicate\"\r\n            >\r\n              <Copy className=\"w-3 h-3\" />\r\n            </Button>\r\n          )}\r\n\r\n          {/* Remove */}\r\n          {onRemove && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-6 w-6 text-red-600 hover:text-red-700 hover:bg-red-50\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onRemove(node.id);\r\n              }}\r\n              title=\"Remove\"\r\n            >\r\n              <Trash2 className=\"w-3 h-3\" />\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Children */}\r\n      {hasChildren && node.isExpanded && (\r\n        <div>\r\n          {node.children!.map((child) => (\r\n            <NavigatorTreeNode\r\n              key={child.id}\r\n              node={child}\r\n              onSelect={onSelect}\r\n              onToggleExpand={onToggleExpand}\r\n              onRemove={onRemove}\r\n              onDuplicate={onDuplicate}\r\n              onToggleVisibility={onToggleVisibility}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;CAaC;;;;;AAED;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AASA;AAKA;;;;;;;;;;;;AAaO,MAAM,YAAsC,CAAC,EAClD,MAAM,EACN,eAAe,EACf,aAAa,EACb,aAAa,EACb,gBAAgB,EAChB,kBAAkB,EAClB,eAAe,EACf,SAAS,EACV;;IACC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAc,IAAI;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,oCAAoC;IACpC,MAAM,iBAAiB,IAAA,wKAAO;6CAAC;YAC7B,IAAI,aAAa;gBACf,0BAA0B;gBAC1B,MAAM,iBAAiB,IAAA,gJAAY,EAAC,QAAQ;gBAC5C,MAAM,cAAc,IAAI,IAAI,eAAe,GAAG;yDAAC,CAAC,IAAM,EAAE,EAAE;;gBAE1D,yCAAyC;gBACzC,MAAM,iBAAiB,IAAI,IAAI;gBAC/B,eAAe,OAAO;yDAAC,CAAC;wBACtB,IAAI,eAAe;wBACnB,MAAO,aAAa,QAAQ,CAAE;4BAC5B,eAAe,GAAG,CAAC,aAAa,QAAQ;4BACxC,eAAe,OAAO,IAAI;qEAAC,CAAC,IAAM,EAAE,EAAE,KAAK,aAAa,QAAQ;;4BAChE,IAAI,CAAC,cAAc;wBACrB;oBACF;;gBACA,eAAe;gBAEf,OAAO,IAAA,0JAAsB,EAAC,QAAQ,iBAAiB,gBAAgB,MAAM;yDAAC,CAAC,OAC7E,YAAY,GAAG,CAAC,KAAK,EAAE;;YAE3B;YAEA,OAAO,IAAA,0JAAsB,EAAC,QAAQ,iBAAiB;QACzD;4CAAG;QAAC;QAAQ;QAAiB;QAAa;KAAY;IAEtD,MAAM,eAAe,CAAC;QACpB,eAAe,CAAC;YACd,MAAM,OAAO,IAAI,IAAI;YACrB,IAAI,KAAK,GAAG,CAAC,SAAS;gBACpB,KAAK,MAAM,CAAC;YACd,OAAO;gBACL,KAAK,GAAG,CAAC;YACX;YACA,OAAO;QACT;IACF;IAEA,MAAM,YAAY;QAChB,MAAM,kBAAkB,OACrB,MAAM,CAAC,CAAC,IAAM,EAAE,aAAa,KAAK,0IAAa,CAAC,KAAK,IAAI,EAAE,QAAQ,IAAI,EAAE,QAAQ,CAAC,MAAM,GAAG,GAC3F,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;QAClB,eAAe,IAAI,IAAI;IACzB;IAEA,MAAM,cAAc;QAClB,eAAe,IAAI;IACrB;IAEA,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,0CAA0C;;0BAE3D,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,mNAAM;wCAAC,WAAU;;;;;;kDAClB,6LAAC;kDAAK;;;;;;kDACN,6LAAC;wCAAK,WAAU;;4CAAwB;4CAAE,OAAO,MAAM;4CAAC;;;;;;;;;;;;;0CAE1D,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,+IAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,SAAS;wCACT,WAAU;wCACV,OAAM;kDACP;;;;;;kDAGD,6LAAC,+IAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,SAAS;wCACT,WAAU;wCACV,OAAM;kDACP;;;;;;;;;;;;;;;;;;kCAOL,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,mNAAM;gCAAC,WAAU;;;;;;0CAClB,6LAAC,6IAAK;gCACJ,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;;;;;;4BAEX,6BACC,6LAAC,+IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,eAAe;0CAE9B,cAAA,6LAAC,oMAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAOrB,6LAAC;gBAAI,WAAU;0BACZ,eAAe,MAAM,GAAG,kBACvB,6LAAC;oBAAI,WAAU;8BACZ,eAAe,GAAG,CAAC,CAAC,qBACnB,6LAAC;4BAEC,MAAM;4BACN,UAAU;4BACV,gBAAgB;4BAChB,UAAU;4BACV,aAAa;4BACb,oBAAoB;2BANf,KAAK,EAAE;;;;;;;;;6EAWlB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,mNAAM;4BAAC,WAAU;;;;;;sCAClB,6LAAC;4BAAE,WAAU;sCACV,cAAc,oBAAoB;;;;;;sCAErC,6LAAC;4BAAE,WAAU;sCACV,cAAc,2BAA2B;;;;;;;;;;;;;;;;;;;;;;;AAOxD;GApJa;KAAA;AAmKb,MAAM,oBAAsD,CAAC,EAC3D,IAAI,EACJ,QAAQ,EACR,cAAc,EACd,QAAQ,EACR,WAAW,EACX,kBAAkB,EACnB;;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,cAAc,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG;IAE5D,MAAM,EACJ,UAAU,EACV,SAAS,EACT,UAAU,EACV,SAAS,EACT,UAAU,EACV,UAAU,EACX,GAAG,IAAA,qLAAW,EAAC;QAAE,IAAI,KAAK,EAAE;IAAC;IAE9B,MAAM,QAAQ;QACZ,WAAW,+KAAG,CAAC,SAAS,CAAC,QAAQ,CAAC;QAClC;QACA,SAAS,aAAa,MAAM;IAC9B;IAEA,MAAM,UAAU;QACd,OAAQ,KAAK,IAAI;YACf,KAAK,0IAAa,CAAC,OAAO;gBACxB,qBACE,6LAAC;oBAAI,WAAU;oBAAc,MAAK;oBAAO,SAAQ;oBAAY,QAAO;8BAClE,cAAA,6LAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,aAAa;wBAAG,GAAE;;;;;;;;;;;YAG3E,KAAK,0IAAa,CAAC,OAAO;gBACxB,qBACE,6LAAC;oBAAI,WAAU;oBAAc,MAAK;oBAAO,SAAQ;oBAAY,QAAO;8BAClE,cAAA,6LAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,aAAa;wBAAG,GAAE;;;;;;;;;;;YAG3E,KAAK,0IAAa,CAAC,IAAI;gBACrB,qBACE,6LAAC;oBAAI,WAAU;oBAAc,MAAK;oBAAO,SAAQ;oBAAY,QAAO;8BAClE,cAAA,6LAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,aAAa;wBAAG,GAAE;;;;;;;;;;;YAG3E;gBACE,qBACE,6LAAC;oBAAI,WAAU;oBAAc,MAAK;oBAAO,SAAQ;oBAAY,QAAO;8BAClE,cAAA,6LAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,aAAa;wBAAG,GAAE;;;;;;;;;;;QAG7E;IACF;IAEA,qBACE,6LAAC;QAAI,KAAK;QAAY,OAAO;;0BAC3B,6LAAC;gBACC,WAAW,IAAA,4HAAE,EACX,0GACA,KAAK,UAAU,IAAI,0CACnB,CAAC,KAAK,UAAU,IAAI,aAAa,eACjC,CAAC,KAAK,SAAS,IAAI;gBAErB,OAAO;oBAAE,aAAa,GAAG,KAAK,KAAK,GAAG,KAAK,EAAE,EAAE,CAAC;gBAAC;gBACjD,SAAS,IAAM,SAAS,KAAK,EAAE;gBAC/B,cAAc,IAAM,aAAa;gBACjC,cAAc,IAAM,aAAa;;oBAGhC,6BACC,6LAAC;wBACC,SAAS,CAAC;4BACR,EAAE,eAAe;4BACjB,eAAe,KAAK,EAAE;wBACxB;wBACA,WAAU;kCAET,KAAK,UAAU,iBACd,6LAAC,sOAAW;4BAAC,WAAU;;;;;qFAEvB,6LAAC,yOAAY;4BAAC,WAAU;;;;;;;;;;;oBAI7B,CAAC,6BAAe,6LAAC;wBAAI,WAAU;;;;;;kCAGhC,6LAAC;wBAAI,WAAU;kCAA+B;;;;;;kCAG9C,6LAAC;wBAAI,WAAU;kCAA2B,KAAK,KAAK;;;;;;kCAGpD,6LAAC;wBACC,WAAW,IAAA,4HAAE,EACX,8DACA,AAAC,aAAa,KAAK,UAAU,GAAI,gBAAgB;;4BAIlD,oCACC,6LAAC,+IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,mBAAmB,KAAK,EAAE;gCAC5B;gCACA,OAAO,KAAK,SAAS,GAAG,SAAS;0CAEhC,KAAK,SAAS,iBACb,6LAAC,0MAAG;oCAAC,WAAU;;;;;6FAEf,6LAAC,uNAAM;oCAAC,WAAU;;;;;;;;;;;4BAMvB,6BACC,6LAAC,+IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,YAAY,KAAK,EAAE;gCACrB;gCACA,OAAM;0CAEN,cAAA,6LAAC,6MAAI;oCAAC,WAAU;;;;;;;;;;;4BAKnB,0BACC,6LAAC,+IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,CAAC;oCACR,EAAE,eAAe;oCACjB,SAAS,KAAK,EAAE;gCAClB;gCACA,OAAM;0CAEN,cAAA,6LAAC,uNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;YAOzB,eAAe,KAAK,UAAU,kBAC7B,6LAAC;0BACE,KAAK,QAAQ,CAAE,GAAG,CAAC,CAAC,sBACnB,6LAAC;wBAEC,MAAM;wBACN,UAAU;wBACV,gBAAgB;wBAChB,UAAU;wBACV,aAAa;wBACb,oBAAoB;uBANf,MAAM,EAAE;;;;;;;;;;;;;;;;AAa3B;IA5KM;;QAkBA,qLAAW;;;MAlBX"}},{"offset":{"line":2587,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/TextField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\n\r\ninterface TextFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    placeholder?: string;\r\n    required?: boolean;\r\n    type?: 'text' | 'email' | 'url' | 'number';\r\n    maxLength?: number;\r\n    error?: string;\r\n}\r\n\r\nexport const TextField: React.FC<TextFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    placeholder,\r\n    required,\r\n    type = 'text',\r\n    maxLength,\r\n    error\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label>\r\n                {label}\r\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n            </Label>\r\n            <Input\r\n                type={type}\r\n                value={value || ''}\r\n                onChange={(e) => onChange(e.target.value)}\r\n                placeholder={placeholder}\r\n                maxLength={maxLength}\r\n                className={error ? 'border-red-500' : ''}\r\n            />\r\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAaO,MAAM,YAAsC,CAAC,EAChD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,QAAQ,EACR,OAAO,MAAM,EACb,SAAS,EACT,KAAK,EACR;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,6IAAK;;oBACD;oBACA,0BAAY,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAErD,6LAAC,6IAAK;gBACF,MAAM;gBACN,OAAO,SAAS;gBAChB,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,aAAa;gBACb,WAAW;gBACX,WAAW,QAAQ,mBAAmB;;;;;;YAEzC,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG3D;KA3Ba"}},{"offset":{"line":2655,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/TextareaField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Label } from '@/components/ui/label';\r\n\r\ninterface TextareaFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    placeholder?: string;\r\n    required?: boolean;\r\n    rows?: number;\r\n    maxLength?: number;\r\n    error?: string;\r\n}\r\n\r\nexport const TextareaField: React.FC<TextareaFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    placeholder,\r\n    required,\r\n    rows = 3,\r\n    maxLength,\r\n    error\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label>\r\n                {label}\r\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n            </Label>\r\n            <Textarea\r\n                value={value || ''}\r\n                onChange={(e) => onChange(e.target.value)}\r\n                placeholder={placeholder}\r\n                rows={rows}\r\n                maxLength={maxLength}\r\n                className={error ? 'border-red-500' : ''}\r\n            />\r\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAaO,MAAM,gBAA8C,CAAC,EACxD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,QAAQ,EACR,OAAO,CAAC,EACR,SAAS,EACT,KAAK,EACR;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,6IAAK;;oBACD;oBACA,0BAAY,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAErD,6LAAC,mJAAQ;gBACL,OAAO,SAAS;gBAChB,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,aAAa;gBACb,MAAM;gBACN,WAAW;gBACX,WAAW,QAAQ,mBAAmB;;;;;;YAEzC,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG3D;KA3Ba"}},{"offset":{"line":2723,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/ImageField.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Button } from '@/components/ui/button';\r\nimport { MediaPicker } from '@/components/media-manager/MediaPicker/MediaPicker';\r\nimport { MediaItem } from '@/components/media-manager/types';\r\nimport { X, Image as ImageIcon } from 'lucide-react';\r\nimport Image from 'next/image';\r\n\r\ninterface ImageFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    required?: boolean;\r\n    recommended?: string; // e.g., \"1920x1080px\"\r\n    error?: string;\r\n}\r\n\r\nexport const ImageField: React.FC<ImageFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    required,\r\n    recommended,\r\n    error\r\n}) => {\r\n    const [pickerOpen, setPickerOpen] = useState(false);\r\n\r\n    const handleSelect = (media: MediaItem[]) => {\r\n        if (media.length > 0) {\r\n            onChange(media[0].url);\r\n        }\r\n    };\r\n\r\n    const handleClear = () => {\r\n        onChange('');\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <Label>\r\n                    {label}\r\n                    {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n                </Label>\r\n                {recommended && (\r\n                    <span className=\"text-xs text-muted-foreground\">{recommended}</span>\r\n                )}\r\n            </div>\r\n\r\n            <div className={`border-2 border-dashed rounded-lg p-4 transition-colors ${error ? 'border-red-500 bg-red-50' : 'border-gray-200 hover:border-gray-300'}`}>\r\n                {value ? (\r\n                    <div className=\"relative group\">\r\n                        <div className=\"relative aspect-video w-full overflow-hidden rounded-md bg-gray-100\">\r\n                            <Image\r\n                                src={value}\r\n                                alt=\"Preview\"\r\n                                fill\r\n                                className=\"object-cover\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                            <Button\r\n                                variant=\"secondary\"\r\n                                size=\"sm\"\r\n                                onClick={() => setPickerOpen(true)}\r\n                            >\r\n                                Change\r\n                            </Button>\r\n                            <Button\r\n                                variant=\"destructive\"\r\n                                size=\"sm\"\r\n                                onClick={handleClear}\r\n                            >\r\n                                <X className=\"h-4 w-4\" />\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex flex-col items-center justify-center py-8 text-center\">\r\n                        <div className=\"bg-gray-100 p-3 rounded-full mb-3\">\r\n                            <ImageIcon className=\"h-6 w-6 text-gray-500\" />\r\n                        </div>\r\n                        <p className=\"text-sm text-muted-foreground mb-3\">\r\n                            No image selected\r\n                        </p>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => setPickerOpen(true)}\r\n                        >\r\n                            Select Image\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n\r\n            <MediaPicker\r\n                open={pickerOpen}\r\n                onOpenChange={setPickerOpen}\r\n                onSelect={handleSelect}\r\n                type=\"IMAGE\"\r\n                multiple={false}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEA;AAAA;AACA;;;;;;;;;AAWO,MAAM,aAAwC,CAAC,EAClD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,KAAK,EACR;;IACG,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,eAAe,CAAC;QAClB,IAAI,MAAM,MAAM,GAAG,GAAG;YAClB,SAAS,KAAK,CAAC,EAAE,CAAC,GAAG;QACzB;IACJ;IAEA,MAAM,cAAc;QAChB,SAAS;IACb;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,6IAAK;;4BACD;4BACA,0BAAY,6LAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;oBAEpD,6BACG,6LAAC;wBAAK,WAAU;kCAAiC;;;;;;;;;;;;0BAIzD,6LAAC;gBAAI,WAAW,CAAC,wDAAwD,EAAE,QAAQ,6BAA6B,yCAAyC;0BACpJ,sBACG,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,2IAAK;gCACF,KAAK;gCACL,KAAI;gCACJ,IAAI;gCACJ,WAAU;;;;;;;;;;;sCAGlB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,+IAAM;oCACH,SAAQ;oCACR,MAAK;oCACL,SAAS,IAAM,cAAc;8CAChC;;;;;;8CAGD,6LAAC,+IAAM;oCACH,SAAQ;oCACR,MAAK;oCACL,SAAS;8CAET,cAAA,6LAAC,oMAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;6EAKzB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,gNAAS;gCAAC,WAAU;;;;;;;;;;;sCAEzB,6LAAC;4BAAE,WAAU;sCAAqC;;;;;;sCAGlD,6LAAC,+IAAM;4BACH,SAAQ;4BACR,SAAS,IAAM,cAAc;sCAChC;;;;;;;;;;;;;;;;;YAOZ,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;0BAE/C,6LAAC,sLAAW;gBACR,MAAM;gBACN,cAAc;gBACd,UAAU;gBACV,MAAK;gBACL,UAAU;;;;;;;;;;;;AAI1B;GAzFa;KAAA"}},{"offset":{"line":2935,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/ColorField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { ColorPicker } from '@/components/ui/color-picker';\r\nimport { Label } from '@/components/ui/label';\r\n\r\ninterface ColorFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    required?: boolean;\r\n    error?: string;\r\n}\r\n\r\nexport const ColorField: React.FC<ColorFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    required,\r\n    error\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label>\r\n                {label}\r\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n            </Label>\r\n            <ColorPicker\r\n                value={value || '#000000'}\r\n                onChange={onChange}\r\n                showPresets={true}\r\n            />\r\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAUO,MAAM,aAAwC,CAAC,EAClD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,KAAK,EACR;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,6IAAK;;oBACD;oBACA,0BAAY,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAErD,6LAAC,6JAAW;gBACR,OAAO,SAAS;gBAChB,UAAU;gBACV,aAAa;;;;;;YAEhB,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG3D;KArBa"}},{"offset":{"line":3000,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/SelectField.tsx"],"sourcesContent":["import React from 'react';\nimport { Label } from '@/components/ui/label';\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from '@/components/ui/select';\n\ninterface SelectOption {\n    value: string | number;\n    label: string;\n}\n\ninterface SelectFieldProps {\n    label: string;\n    value: string;\n    onChange: (value: string) => void;\n    options: SelectOption[];\n    required?: boolean;\n    placeholder?: string;\n    error?: string;\n}\n\nexport const SelectField: React.FC<SelectFieldProps> = ({\n    label,\n    value,\n    onChange,\n    options,\n    required,\n    placeholder = 'Select an option',\n    error\n}) => {\n    return (\n        <div className=\"space-y-2\">\n            <Label>\n                {label}\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\n            </Label>\n            <Select value={value || undefined} onValueChange={onChange}>\n                <SelectTrigger className={error ? 'border-red-500' : ''}>\n                    <SelectValue placeholder={placeholder} />\n                </SelectTrigger>\n                <SelectContent>\n                    {options\n                        .filter(option => {\n                            const optionValue = String(option.value);\n                            return optionValue && optionValue.trim() !== '';\n                        })\n                        .map((option) => (\n                            <SelectItem key={option.value} value={String(option.value)}>\n                                {option.label}\n                            </SelectItem>\n                        ))}\n                </SelectContent>\n            </Select>\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAuBO,MAAM,cAA0C,CAAC,EACpD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,cAAc,kBAAkB,EAChC,KAAK,EACR;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,6IAAK;;oBACD;oBACA,0BAAY,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAErD,6LAAC,+IAAM;gBAAC,OAAO,SAAS;gBAAW,eAAe;;kCAC9C,6LAAC,sJAAa;wBAAC,WAAW,QAAQ,mBAAmB;kCACjD,cAAA,6LAAC,oJAAW;4BAAC,aAAa;;;;;;;;;;;kCAE9B,6LAAC,sJAAa;kCACT,QACI,MAAM,CAAC,CAAA;4BACJ,MAAM,cAAc,OAAO,OAAO,KAAK;4BACvC,OAAO,eAAe,YAAY,IAAI,OAAO;wBACjD,GACC,GAAG,CAAC,CAAC,uBACF,6LAAC,mJAAU;gCAAoB,OAAO,OAAO,OAAO,KAAK;0CACpD,OAAO,KAAK;+BADA,OAAO,KAAK;;;;;;;;;;;;;;;;YAM5C,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG3D;KAnCa"}},{"offset":{"line":3097,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/ToggleField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Switch } from '@/components/ui/switch';\r\n\r\ninterface ToggleFieldProps {\r\n    label: string;\r\n    value: boolean;\r\n    onChange: (value: boolean) => void;\r\n    description?: string;\r\n}\r\n\r\nexport const ToggleField: React.FC<ToggleFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    description\r\n}) => {\r\n    return (\r\n        <div className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\r\n            <div className=\"space-y-0.5\">\r\n                <Label className=\"text-base\">{label}</Label>\r\n                {description && (\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                        {description}\r\n                    </p>\r\n                )}\r\n            </div>\r\n            <Switch\r\n                checked={value}\r\n                onCheckedChange={onChange}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AASO,MAAM,cAA0C,CAAC,EACpD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACd;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,6IAAK;wBAAC,WAAU;kCAAa;;;;;;oBAC7B,6BACG,6LAAC;wBAAE,WAAU;kCACR;;;;;;;;;;;;0BAIb,6LAAC,+IAAM;gBACH,SAAS;gBACT,iBAAiB;;;;;;;;;;;;AAIjC;KAtBa"}},{"offset":{"line":3161,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/SliderField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Slider } from '@/components/ui/slider';\r\n\r\ninterface SliderFieldProps {\r\n    label: string;\r\n    value: number;\r\n    onChange: (value: number) => void;\r\n    min?: number;\r\n    max?: number;\r\n    step?: number;\r\n    unit?: string;\r\n}\r\n\r\nexport const SliderField: React.FC<SliderFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    min = 0,\r\n    max = 100,\r\n    step = 1,\r\n    unit = ''\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <Label>{label}</Label>\r\n                <span className=\"text-sm text-muted-foreground font-mono\">\r\n                    {value}{unit}\r\n                </span>\r\n            </div>\r\n            <Slider\r\n                value={[value || min]}\r\n                min={min}\r\n                max={max}\r\n                step={step}\r\n                onValueChange={(vals) => onChange(vals[0])}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAYO,MAAM,cAA0C,CAAC,EACpD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,MAAM,CAAC,EACP,MAAM,GAAG,EACT,OAAO,CAAC,EACR,OAAO,EAAE,EACZ;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,6IAAK;kCAAE;;;;;;kCACR,6LAAC;wBAAK,WAAU;;4BACX;4BAAO;;;;;;;;;;;;;0BAGhB,6LAAC,+IAAM;gBACH,OAAO;oBAAC,SAAS;iBAAI;gBACrB,KAAK;gBACL,KAAK;gBACL,MAAM;gBACN,eAAe,CAAC,OAAS,SAAS,IAAI,CAAC,EAAE;;;;;;;;;;;;AAIzD;KA1Ba"}},{"offset":{"line":3232,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/RepeaterField.tsx"],"sourcesContent":["import React from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2, GripVertical, ChevronDown, ChevronUp } from 'lucide-react';\nimport {\n    Collapsible,\n    CollapsibleContent,\n    CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport { ConfigForm } from '../ConfigForm';\n\ninterface RepeaterFieldProps {\n    label: string;\n    value: any[];\n    onChange: (value: any[]) => void;\n    fields: any[]; // Schema for the repeated items\n    itemLabel?: string; // e.g., \"Feature\"\n}\n\nexport const RepeaterField: React.FC<RepeaterFieldProps> = ({\n    label,\n    value,\n    onChange,\n    fields,\n    itemLabel = 'Item'\n}) => {\n    // Ensure value is always an array\n    const arrayValue = Array.isArray(value) ? value : (value ? [value] : []);\n\n    const handleAdd = () => {\n        // Create empty object based on fields\n        const newItem: any = {};\n        fields.forEach(field => {\n            if (field.type === 'checkbox') {\n                newItem[field.name] = field.default || false;\n            } else if (field.type === 'repeater') {\n                newItem[field.name] = [];\n            } else {\n                newItem[field.name] = field.default || '';\n            }\n        });\n        onChange([...arrayValue, newItem]);\n    };\n\n    const handleRemove = (index: number) => {\n        const newValue = [...arrayValue];\n        newValue.splice(index, 1);\n        onChange(newValue);\n    };\n\n    const handleChange = (index: number, itemData: any) => {\n        const newValue = [...arrayValue];\n        newValue[index] = itemData;\n        onChange(newValue);\n    };\n\n    const handleMove = (index: number, direction: 'up' | 'down') => {\n        if (\n            (direction === 'up' && index === 0) ||\n            (direction === 'down' && index === arrayValue.length - 1)\n        ) {\n            return;\n        }\n\n        const newValue = [...arrayValue];\n        const targetIndex = direction === 'up' ? index - 1 : index + 1;\n        [newValue[index], newValue[targetIndex]] = [newValue[targetIndex], newValue[index]];\n        onChange(newValue);\n    };\n\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n                <Label className=\"text-base font-semibold\">{label}</Label>\n                <Button variant=\"outline\" size=\"sm\" onClick={handleAdd}>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add {itemLabel}\n                </Button>\n            </div>\n\n            <div className=\"space-y-2\">\n                {arrayValue.map((item, index) => (\n                    <RepeaterItem\n                        key={index}\n                        index={index}\n                        data={item}\n                        fields={fields}\n                        label={`${itemLabel} ${index + 1}`}\n                        onChange={(data) => handleChange(index, data)}\n                        onRemove={() => handleRemove(index)}\n                        onMoveUp={() => handleMove(index, 'up')}\n                        onMoveDown={() => handleMove(index, 'down')}\n                        isFirst={index === 0}\n                        isLast={index === arrayValue.length - 1}\n                    />\n                ))}\n\n                {arrayValue.length === 0 && (\n                    <div className=\"text-center py-8 border-2 border-dashed rounded-lg text-muted-foreground bg-gray-50\">\n                        No items yet. Click \"Add {itemLabel}\" to start.\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\ninterface RepeaterItemProps {\n    index: number;\n    data: any;\n    fields: any[];\n    label: string;\n    onChange: (data: any) => void;\n    onRemove: () => void;\n    onMoveUp: () => void;\n    onMoveDown: () => void;\n    isFirst: boolean;\n    isLast: boolean;\n}\n\nconst RepeaterItem: React.FC<RepeaterItemProps> = ({\n    data,\n    fields,\n    label,\n    onChange,\n    onRemove,\n    onMoveUp,\n    onMoveDown,\n    isFirst,\n    isLast\n}) => {\n    const [isOpen, setIsOpen] = React.useState(false);\n\n    // Try to find a title field to use as the label\n    const titleField = fields.find(f => f.name === 'title' || f.name === 'heading' || f.name === 'name');\n    const displayLabel = titleField && data[titleField.name] ? data[titleField.name] : label;\n\n    return (\n        <Collapsible\n            open={isOpen}\n            onOpenChange={setIsOpen}\n            className=\"border rounded-md bg-white shadow-sm\"\n        >\n            <div className=\"flex items-center justify-between p-2 pl-4\">\n                <div className=\"flex items-center gap-2 flex-1\">\n                    <GripVertical className=\"h-4 w-4 text-gray-400 cursor-move\" />\n                    <CollapsibleTrigger className=\"flex-1 text-left font-medium hover:text-primary transition-colors\">\n                        {displayLabel}\n                    </CollapsibleTrigger>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                    <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8\"\n                        onClick={onMoveUp}\n                        disabled={isFirst}\n                    >\n                        <ChevronUp className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8\"\n                        onClick={onMoveDown}\n                        disabled={isLast}\n                    >\n                        <ChevronDown className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-50\"\n                        onClick={onRemove}\n                    >\n                        <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                    <CollapsibleTrigger asChild>\n                        <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\n                            {isOpen ? (\n                                <ChevronUp className=\"h-4 w-4\" />\n                            ) : (\n                                <ChevronDown className=\"h-4 w-4\" />\n                            )}\n                        </Button>\n                    </CollapsibleTrigger>\n                </div>\n            </div>\n            <CollapsibleContent className=\"border-t p-4 bg-gray-50/50\">\n                <ConfigForm\n                    schema={{ fields }}\n                    data={data}\n                    onChange={onChange}\n                />\n            </CollapsibleContent>\n        </Collapsible>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;;;;;;;;;AAUO,MAAM,gBAA8C,CAAC,EACxD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,MAAM,EACN,YAAY,MAAM,EACrB;IACG,kCAAkC;IAClC,MAAM,aAAa,MAAM,OAAO,CAAC,SAAS,QAAS,QAAQ;QAAC;KAAM,GAAG,EAAE;IAEvE,MAAM,YAAY;QACd,sCAAsC;QACtC,MAAM,UAAe,CAAC;QACtB,OAAO,OAAO,CAAC,CAAA;YACX,IAAI,MAAM,IAAI,KAAK,YAAY;gBAC3B,OAAO,CAAC,MAAM,IAAI,CAAC,GAAG,MAAM,OAAO,IAAI;YAC3C,OAAO,IAAI,MAAM,IAAI,KAAK,YAAY;gBAClC,OAAO,CAAC,MAAM,IAAI,CAAC,GAAG,EAAE;YAC5B,OAAO;gBACH,OAAO,CAAC,MAAM,IAAI,CAAC,GAAG,MAAM,OAAO,IAAI;YAC3C;QACJ;QACA,SAAS;eAAI;YAAY;SAAQ;IACrC;IAEA,MAAM,eAAe,CAAC;QAClB,MAAM,WAAW;eAAI;SAAW;QAChC,SAAS,MAAM,CAAC,OAAO;QACvB,SAAS;IACb;IAEA,MAAM,eAAe,CAAC,OAAe;QACjC,MAAM,WAAW;eAAI;SAAW;QAChC,QAAQ,CAAC,MAAM,GAAG;QAClB,SAAS;IACb;IAEA,MAAM,aAAa,CAAC,OAAe;QAC/B,IACI,AAAC,cAAc,QAAQ,UAAU,KAChC,cAAc,UAAU,UAAU,WAAW,MAAM,GAAG,GACzD;YACE;QACJ;QAEA,MAAM,WAAW;eAAI;SAAW;QAChC,MAAM,cAAc,cAAc,OAAO,QAAQ,IAAI,QAAQ;QAC7D,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,YAAY,CAAC,GAAG;YAAC,QAAQ,CAAC,YAAY;YAAE,QAAQ,CAAC,MAAM;SAAC;QACnF,SAAS;IACb;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,6IAAK;wBAAC,WAAU;kCAA2B;;;;;;kCAC5C,6LAAC,+IAAM;wBAAC,SAAQ;wBAAU,MAAK;wBAAK,SAAS;;0CACzC,6LAAC,6MAAI;gCAAC,WAAU;;;;;;4BAAiB;4BAC5B;;;;;;;;;;;;;0BAIb,6LAAC;gBAAI,WAAU;;oBACV,WAAW,GAAG,CAAC,CAAC,MAAM,sBACnB,6LAAC;4BAEG,OAAO;4BACP,MAAM;4BACN,QAAQ;4BACR,OAAO,GAAG,UAAU,CAAC,EAAE,QAAQ,GAAG;4BAClC,UAAU,CAAC,OAAS,aAAa,OAAO;4BACxC,UAAU,IAAM,aAAa;4BAC7B,UAAU,IAAM,WAAW,OAAO;4BAClC,YAAY,IAAM,WAAW,OAAO;4BACpC,SAAS,UAAU;4BACnB,QAAQ,UAAU,WAAW,MAAM,GAAG;2BAVjC;;;;;oBAcZ,WAAW,MAAM,KAAK,mBACnB,6LAAC;wBAAI,WAAU;;4BAAsF;4BACvE;4BAAU;;;;;;;;;;;;;;;;;;;AAM5D;KAtFa;AAqGb,MAAM,eAA4C,CAAC,EAC/C,IAAI,EACJ,MAAM,EACN,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,UAAU,EACV,OAAO,EACP,MAAM,EACT;;IACG,MAAM,CAAC,QAAQ,UAAU,GAAG,wKAAK,CAAC,QAAQ,CAAC;IAE3C,gDAAgD;IAChD,MAAM,aAAa,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,WAAW,EAAE,IAAI,KAAK,aAAa,EAAE,IAAI,KAAK;IAC7F,MAAM,eAAe,cAAc,IAAI,CAAC,WAAW,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,IAAI,CAAC,GAAG;IAEnF,qBACI,6LAAC,yJAAW;QACR,MAAM;QACN,cAAc;QACd,WAAU;;0BAEV,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,yOAAY;gCAAC,WAAU;;;;;;0CACxB,6LAAC,gKAAkB;gCAAC,WAAU;0CACzB;;;;;;;;;;;;kCAGT,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,+IAAM;gCACH,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;gCACT,UAAU;0CAEV,cAAA,6LAAC,gOAAS;oCAAC,WAAU;;;;;;;;;;;0CAEzB,6LAAC,+IAAM;gCACH,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;gCACT,UAAU;0CAEV,cAAA,6LAAC,sOAAW;oCAAC,WAAU;;;;;;;;;;;0CAE3B,6LAAC,+IAAM;gCACH,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;0CAET,cAAA,6LAAC,uNAAM;oCAAC,WAAU;;;;;;;;;;;0CAEtB,6LAAC,gKAAkB;gCAAC,OAAO;0CACvB,cAAA,6LAAC,+IAAM;oCAAC,SAAQ;oCAAQ,MAAK;oCAAO,WAAU;8CACzC,uBACG,6LAAC,gOAAS;wCAAC,WAAU;;;;;iGAErB,6LAAC,sOAAW;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAM3C,6LAAC,gKAAkB;gBAAC,WAAU;0BAC1B,cAAA,6LAAC,oLAAU;oBACP,QAAQ;wBAAE;oBAAO;oBACjB,MAAM;oBACN,UAAU;;;;;;;;;;;;;;;;;AAK9B;GA7EM;MAAA"}},{"offset":{"line":3562,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/RichTextEditor.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Image from '@tiptap/extension-image';\r\nimport Link from '@tiptap/extension-link';\r\nimport Placeholder from '@tiptap/extension-placeholder';\r\nimport Table from '@tiptap/extension-table';\r\nimport TableRow from '@tiptap/extension-table-row';\r\nimport TableCell from '@tiptap/extension-table-cell';\r\nimport TableHeader from '@tiptap/extension-table-header';\r\nimport TextAlign from '@tiptap/extension-text-align';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    Bold,\r\n    Italic,\r\n    Strikethrough,\r\n    Code,\r\n    List,\r\n    ListOrdered,\r\n    Quote,\r\n    Undo,\r\n    Redo,\r\n    Link as LinkIcon,\r\n    Image as ImageIcon,\r\n    Minus,\r\n    Table as TableIcon,\r\n    Plus,\r\n    Trash2,\r\n    AlignLeft,\r\n    AlignCenter,\r\n    AlignRight,\r\n    Columns,\r\n} from 'lucide-react';\r\nimport { MediaPicker } from '@/components/media-manager/MediaPicker/MediaPicker';\r\nimport { useCallback, useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface RichTextEditorProps {\r\n    content: string;\r\n    onChange: (content: string) => void;\r\n    placeholder?: string;\r\n}\r\n\r\nexport function RichTextEditor({ content, onChange, placeholder = 'Create compelling product description with images, tables, and formatting...' }: RichTextEditorProps) {\r\n    const [isMediaPickerOpen, setIsMediaPickerOpen] = useState(false);\r\n    const [isLinkDialogOpen, setIsLinkDialogOpen] = useState(false);\r\n    const [isTableDialogOpen, setIsTableDialogOpen] = useState(false);\r\n    const [tableRows, setTableRows] = useState(3);\r\n    const [tableCols, setTableCols] = useState(3);\r\n    const [linkUrl, setLinkUrl] = useState('');\r\n    const [linkText, setLinkText] = useState('');\r\n\r\n    const editor = useEditor({\r\n        extensions: [\r\n            StarterKit,\r\n            Image.configure({\r\n                inline: false,\r\n                allowBase64: false,\r\n                HTMLAttributes: {\r\n                    class: 'max-w-full h-auto rounded-lg my-4 block',\r\n                    style: 'display: block; max-width: 100%; height: auto;',\r\n                },\r\n            }),\r\n            Link.configure({\r\n                openOnClick: false,\r\n            }),\r\n            Placeholder.configure({\r\n                placeholder,\r\n            }),\r\n            Table.configure({\r\n                resizable: true,\r\n                HTMLAttributes: {\r\n                    class: 'border-collapse border border-gray-300 my-4',\r\n                },\r\n            }),\r\n            TableRow.configure({\r\n                HTMLAttributes: {\r\n                    class: 'border border-gray-300',\r\n                },\r\n            }),\r\n            TableHeader.configure({\r\n                HTMLAttributes: {\r\n                    class: 'border border-gray-300 bg-gray-100 font-semibold p-2',\r\n                },\r\n            }),\r\n            TableCell.configure({\r\n                HTMLAttributes: {\r\n                    class: 'border border-gray-300 p-2',\r\n                },\r\n            }),\r\n            TextAlign.configure({\r\n                types: ['heading', 'paragraph'],\r\n            }),\r\n        ],\r\n        content,\r\n        immediatelyRender: false,\r\n        onUpdate: ({ editor }) => {\r\n            onChange(editor.getHTML());\r\n        },\r\n        editorProps: {\r\n            attributes: {\r\n                class: 'prose prose-lg dark:prose-invert max-w-none focus:outline-none min-h-[300px] px-4 py-2',\r\n            },\r\n        },\r\n    });\r\n\r\n    const handleMediaSelect = useCallback((media: any[]) => {\r\n        if (media.length > 0) {\r\n            const image = media[0];\r\n            editor?.chain().focus().setImage({ src: image.url, alt: image.alt || '' }).run();\r\n        }\r\n        setIsMediaPickerOpen(false);\r\n    }, [editor]);\r\n\r\n    const openLinkDialog = useCallback(() => {\r\n        const previousUrl = editor?.getAttributes('link').href || '';\r\n        const { from, to } = editor?.state.selection || { from: 0, to: 0 };\r\n        const text = editor?.state.doc.textBetween(from, to, '');\r\n\r\n        setLinkUrl(previousUrl);\r\n        setLinkText(text || '');\r\n        setIsLinkDialogOpen(true);\r\n    }, [editor]);\r\n\r\n    const handleInsertLink = useCallback(() => {\r\n        if (!linkUrl) {\r\n            editor?.chain().focus().extendMarkRange('link').unsetLink().run();\r\n        } else {\r\n            if (linkText && !editor?.state.selection.empty) {\r\n                editor?.chain().focus().extendMarkRange('link').setLink({ href: linkUrl }).run();\r\n            } else if (linkText) {\r\n                editor?.chain().focus().insertContent(`<a href=\"${linkUrl}\">${linkText}</a>`).run();\r\n            } else {\r\n                editor?.chain().focus().extendMarkRange('link').setLink({ href: linkUrl }).run();\r\n            }\r\n        }\r\n        setIsLinkDialogOpen(false);\r\n        setLinkUrl('');\r\n        setLinkText('');\r\n    }, [editor, linkUrl, linkText]);\r\n\r\n    const setHeading = useCallback((level: 1 | 2 | 3 | 4 | 5 | 6) => {\r\n        editor?.chain().focus().toggleHeading({ level }).run();\r\n    }, [editor]);\r\n\r\n    const setParagraph = useCallback(() => {\r\n        editor?.chain().focus().setParagraph().run();\r\n    }, [editor]);\r\n\r\n    const insertTable = useCallback(() => {\r\n        editor?.chain().focus().insertTable({ rows: tableRows, cols: tableCols, withHeaderRow: true }).run();\r\n        setIsTableDialogOpen(false);\r\n    }, [editor, tableRows, tableCols]);\r\n\r\n    const addColumnBefore = useCallback(() => {\r\n        editor?.chain().focus().addColumnBefore().run();\r\n    }, [editor]);\r\n\r\n    const addColumnAfter = useCallback(() => {\r\n        editor?.chain().focus().addColumnAfter().run();\r\n    }, [editor]);\r\n\r\n    const deleteColumn = useCallback(() => {\r\n        editor?.chain().focus().deleteColumn().run();\r\n    }, [editor]);\r\n\r\n    const addRowBefore = useCallback(() => {\r\n        editor?.chain().focus().addRowBefore().run();\r\n    }, [editor]);\r\n\r\n    const addRowAfter = useCallback(() => {\r\n        editor?.chain().focus().addRowAfter().run();\r\n    }, [editor]);\r\n\r\n    const deleteRow = useCallback(() => {\r\n        editor?.chain().focus().deleteRow().run();\r\n    }, [editor]);\r\n\r\n    const deleteTable = useCallback(() => {\r\n        editor?.chain().focus().deleteTable().run();\r\n    }, [editor]);\r\n\r\n    const insertImageTextLayout = useCallback((imagePosition: 'left' | 'right') => {\r\n        // Insert a side-by-side layout with image and text\r\n        const layoutClass = imagePosition === 'left' ? 'image-text-layout image-left' : 'image-text-layout image-right';\r\n        const htmlContent = `<div class=\"${layoutClass}\">\r\n            <div class=\"layout-image\">\r\n                <p style=\"text-align: center; color: #6b7280; font-style: italic; padding: 2rem;\">Click here and use the image button to insert an image</p>\r\n            </div>\r\n            <div class=\"layout-text\">\r\n                <p>Your text content here. You can format this text with headings, lists, and other formatting options.</p>\r\n            </div>\r\n        </div>`;\r\n        editor?.chain().focus().insertContent(htmlContent).run();\r\n    }, [editor]);\r\n\r\n    if (!editor) {\r\n        return null;\r\n    }\r\n\r\n    const ToolbarButton = ({\r\n        onClick,\r\n        isActive,\r\n        children,\r\n        title\r\n    }: {\r\n        onClick: () => void;\r\n        isActive?: boolean;\r\n        children: React.ReactNode;\r\n        title: string;\r\n    }) => (\r\n        <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={onClick}\r\n            className={cn(\r\n                \"h-8 px-2 hover:bg-muted\",\r\n                isActive && \"bg-muted text-primary\"\r\n            )}\r\n            title={title}\r\n        >\r\n            {children}\r\n        </Button>\r\n    );\r\n\r\n    const ToolbarSeparator = () => (\r\n        <div className=\"w-px h-6 bg-border\" />\r\n    );\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            {/* Toolbar */}\r\n            <div className=\"sticky top-0 z-10 bg-background border-b border-border mb-4\">\r\n                <div className=\"flex items-center gap-1 p-2 flex-wrap\">\r\n                    {/* Heading Selector */}\r\n                    <Select\r\n                        value={\r\n                            editor.isActive('heading', { level: 1 }) ? 'h1' :\r\n                                editor.isActive('heading', { level: 2 }) ? 'h2' :\r\n                                    editor.isActive('heading', { level: 3 }) ? 'h3' :\r\n                                        editor.isActive('heading', { level: 4 }) ? 'h4' :\r\n                                            editor.isActive('heading', { level: 5 }) ? 'h5' :\r\n                                                editor.isActive('heading', { level: 6 }) ? 'h6' :\r\n                                                    'paragraph'\r\n                        }\r\n                        onValueChange={(value) => {\r\n                            if (value === 'paragraph') setParagraph();\r\n                            else setHeading(parseInt(value.replace('h', '')) as 1 | 2 | 3 | 4 | 5 | 6);\r\n                        }}\r\n                    >\r\n                        <SelectTrigger className=\"w-[120px] h-8\">\r\n                            <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"paragraph\">Paragraph</SelectItem>\r\n                            <SelectItem value=\"h1\">Heading 1</SelectItem>\r\n                            <SelectItem value=\"h2\">Heading 2</SelectItem>\r\n                            <SelectItem value=\"h3\">Heading 3</SelectItem>\r\n                            <SelectItem value=\"h4\">Heading 4</SelectItem>\r\n                            <SelectItem value=\"h5\">Heading 5</SelectItem>\r\n                            <SelectItem value=\"h6\">Heading 6</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n\r\n                    <ToolbarSeparator />\r\n\r\n                    {/* Text Formatting */}\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleBold().run()}\r\n                        isActive={editor.isActive('bold')}\r\n                        title=\"Bold (Ctrl+B)\"\r\n                    >\r\n                        <Bold className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleItalic().run()}\r\n                        isActive={editor.isActive('italic')}\r\n                        title=\"Italic (Ctrl+I)\"\r\n                    >\r\n                        <Italic className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleStrike().run()}\r\n                        isActive={editor.isActive('strike')}\r\n                        title=\"Strikethrough\"\r\n                    >\r\n                        <Strikethrough className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleCode().run()}\r\n                        isActive={editor.isActive('code')}\r\n                        title=\"Inline Code\"\r\n                    >\r\n                        <Code className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n\r\n                    <ToolbarSeparator />\r\n\r\n                    {/* Lists */}\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n                        isActive={editor.isActive('bulletList')}\r\n                        title=\"Bullet List\"\r\n                    >\r\n                        <List className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleOrderedList().run()}\r\n                        isActive={editor.isActive('orderedList')}\r\n                        title=\"Numbered List\"\r\n                    >\r\n                        <ListOrdered className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n\r\n                    <ToolbarSeparator />\r\n\r\n                    {/* Blocks */}\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleBlockquote().run()}\r\n                        isActive={editor.isActive('blockquote')}\r\n                        title=\"Quote\"\r\n                    >\r\n                        <Quote className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().toggleCodeBlock().run()}\r\n                        isActive={editor.isActive('codeBlock')}\r\n                        title=\"Code Block\"\r\n                    >\r\n                        <Code className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().setHorizontalRule().run()}\r\n                        title=\"Horizontal Rule\"\r\n                    >\r\n                        <Minus className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n\r\n                    <ToolbarSeparator />\r\n\r\n                    {/* Text Alignment */}\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().setTextAlign('left').run()}\r\n                        isActive={editor.isActive({ textAlign: 'left' })}\r\n                        title=\"Align Left\"\r\n                    >\r\n                        <AlignLeft className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().setTextAlign('center').run()}\r\n                        isActive={editor.isActive({ textAlign: 'center' })}\r\n                        title=\"Align Center\"\r\n                    >\r\n                        <AlignCenter className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().setTextAlign('right').run()}\r\n                        isActive={editor.isActive({ textAlign: 'right' })}\r\n                        title=\"Align Right\"\r\n                    >\r\n                        <AlignRight className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n\r\n                    <ToolbarSeparator />\r\n\r\n                    {/* Insert */}\r\n                    <ToolbarButton\r\n                        onClick={openLinkDialog}\r\n                        isActive={editor.isActive('link')}\r\n                        title=\"Insert Link\"\r\n                    >\r\n                        <LinkIcon className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => setIsMediaPickerOpen(true)}\r\n                        title=\"Insert Image\"\r\n                    >\r\n                        <ImageIcon className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => setIsTableDialogOpen(true)}\r\n                        title=\"Insert Table\"\r\n                    >\r\n                        <TableIcon className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n\r\n                    <ToolbarSeparator />\r\n\r\n                    {/* Table Controls (only show when in table) */}\r\n                    {editor.isActive('table') && (\r\n                        <>\r\n                            <ToolbarButton\r\n                                onClick={addColumnBefore}\r\n                                title=\"Add Column Before\"\r\n                            >\r\n                                <Plus className=\"w-4 h-4\" />\r\n                            </ToolbarButton>\r\n                            <ToolbarButton\r\n                                onClick={addColumnAfter}\r\n                                title=\"Add Column After\"\r\n                            >\r\n                                <Plus className=\"w-4 h-4 rotate-90\" />\r\n                            </ToolbarButton>\r\n                            <ToolbarButton\r\n                                onClick={deleteColumn}\r\n                                title=\"Delete Column\"\r\n                            >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                            </ToolbarButton>\r\n                            <ToolbarSeparator />\r\n                            <ToolbarButton\r\n                                onClick={addRowBefore}\r\n                                title=\"Add Row Before\"\r\n                            >\r\n                                <Plus className=\"w-4 h-4 rotate-90\" />\r\n                            </ToolbarButton>\r\n                            <ToolbarButton\r\n                                onClick={addRowAfter}\r\n                                title=\"Add Row After\"\r\n                            >\r\n                                <Plus className=\"w-4 h-4 rotate-90\" />\r\n                            </ToolbarButton>\r\n                            <ToolbarButton\r\n                                onClick={deleteRow}\r\n                                title=\"Delete Row\"\r\n                            >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                            </ToolbarButton>\r\n                            <ToolbarButton\r\n                                onClick={deleteTable}\r\n                                title=\"Delete Table\"\r\n                            >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                            </ToolbarButton>\r\n                            <ToolbarSeparator />\r\n                        </>\r\n                    )}\r\n\r\n                    {/* Image + Text Layouts */}\r\n                    <ToolbarButton\r\n                        onClick={() => insertImageTextLayout('left')}\r\n                        title=\"Image Left + Text Right\"\r\n                    >\r\n                        <ImageIcon className=\"w-4 h-4\" />\r\n                        <span className=\"ml-1 text-xs\">L</span>\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => insertImageTextLayout('right')}\r\n                        title=\"Text Left + Image Right\"\r\n                    >\r\n                        <ImageIcon className=\"w-4 h-4\" />\r\n                        <span className=\"ml-1 text-xs\">R</span>\r\n                    </ToolbarButton>\r\n\r\n                    <ToolbarSeparator />\r\n\r\n                    {/* Undo/Redo */}\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().undo().run()}\r\n                        title=\"Undo (Ctrl+Z)\"\r\n                    >\r\n                        <Undo className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                    <ToolbarButton\r\n                        onClick={() => editor.chain().focus().redo().run()}\r\n                        title=\"Redo (Ctrl+Shift+Z)\"\r\n                    >\r\n                        <Redo className=\"w-4 h-4\" />\r\n                    </ToolbarButton>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Editor */}\r\n            <EditorContent editor={editor} />\r\n\r\n            <MediaPicker\r\n                open={isMediaPickerOpen}\r\n                onOpenChange={setIsMediaPickerOpen}\r\n                onSelect={handleMediaSelect}\r\n                type=\"IMAGE\"\r\n                multiple={false}\r\n            />\r\n\r\n            <Dialog open={isLinkDialogOpen} onOpenChange={setIsLinkDialogOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Insert Link</DialogTitle>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"link-text\">Link Text (optional)</Label>\r\n                            <Input id=\"link-text\" placeholder=\"Click here\" value={linkText} onChange={(e) => setLinkText(e.target.value)} />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"link-url\">URL</Label>\r\n                            <Input id=\"link-url\" placeholder=\"https://example.com\" value={linkUrl} onChange={(e) => setLinkUrl(e.target.value)} onKeyDown={(e) => { if (e.key === 'Enter') { e.preventDefault(); handleInsertLink(); } }} />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setIsLinkDialogOpen(false)}>Cancel</Button>\r\n                        {editor?.isActive('link') && (\r\n                            <Button variant=\"destructive\" onClick={() => { editor?.chain().focus().extendMarkRange('link').unsetLink().run(); setIsLinkDialogOpen(false); }}>Remove Link</Button>\r\n                        )}\r\n                        <Button onClick={handleInsertLink}>{editor?.isActive('link') ? 'Update' : 'Insert'}</Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <Dialog open={isTableDialogOpen} onOpenChange={setIsTableDialogOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Insert Table</DialogTitle>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"table-rows\">Rows</Label>\r\n                                <Input \r\n                                    id=\"table-rows\" \r\n                                    type=\"number\" \r\n                                    min=\"1\" \r\n                                    max=\"10\" \r\n                                    value={tableRows} \r\n                                    onChange={(e) => setTableRows(parseInt(e.target.value) || 3)} \r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"table-cols\">Columns</Label>\r\n                                <Input \r\n                                    id=\"table-cols\" \r\n                                    type=\"number\" \r\n                                    min=\"1\" \r\n                                    max=\"10\" \r\n                                    value={tableCols} \r\n                                    onChange={(e) => setTableCols(parseInt(e.target.value) || 3)} \r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => setIsTableDialogOpen(false)}>Cancel</Button>\r\n                        <Button onClick={insertTable}>Insert Table</Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":4765,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/RichTextField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Label } from '@/components/ui/label';\r\nimport { RichTextEditor } from '@/components/admin/RichTextEditor';\r\n\r\ninterface RichTextFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    placeholder?: string;\r\n    required?: boolean;\r\n    error?: string;\r\n}\r\n\r\nexport const RichTextField: React.FC<RichTextFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    placeholder,\r\n    required,\r\n    error\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label>\r\n                {label}\r\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n            </Label>\r\n            <div className={error ? 'border border-red-500 rounded-md' : 'border rounded-md'}>\r\n                <RichTextEditor\r\n                    content={value || ''}\r\n                    onChange={onChange}\r\n                />\r\n            </div>\r\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAWO,MAAM,gBAA8C,CAAC,EACxD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,QAAQ,EACR,KAAK,EACR;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,6IAAK;;oBACD;oBACA,0BAAY,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAErD,6LAAC;gBAAI,WAAW,QAAQ,qCAAqC;0BACzD,cAAA,6LAAC,kKAAc;oBACX,SAAS,SAAS;oBAClB,UAAU;;;;;;;;;;;YAGjB,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG3D;KAvBa"}},{"offset":{"line":4836,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/NumberField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\n\r\ninterface NumberFieldProps {\r\n    label: string;\r\n    value: number | string;\r\n    onChange: (value: number) => void;\r\n    placeholder?: string;\r\n    required?: boolean;\r\n    min?: number;\r\n    max?: number;\r\n    step?: number;\r\n    unit?: string;\r\n    error?: string;\r\n}\r\n\r\nexport const NumberField: React.FC<NumberFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    placeholder,\r\n    required,\r\n    min,\r\n    max,\r\n    step,\r\n    unit,\r\n    error\r\n}) => {\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const numValue = parseFloat(e.target.value);\r\n        if (!isNaN(numValue)) {\r\n            onChange(numValue);\r\n        } else if (e.target.value === '') {\r\n            onChange(0);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label>\r\n                {label}\r\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n            </Label>\r\n            <div className=\"flex items-center gap-2\">\r\n                <Input\r\n                    type=\"number\"\r\n                    value={value || ''}\r\n                    onChange={handleChange}\r\n                    placeholder={placeholder}\r\n                    min={min}\r\n                    max={max}\r\n                    step={step}\r\n                    className={error ? 'border-red-500' : ''}\r\n                />\r\n                {unit && (\r\n                    <span className=\"text-sm text-muted-foreground whitespace-nowrap\">{unit}</span>\r\n                )}\r\n            </div>\r\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAeO,MAAM,cAA0C,CAAC,EACpD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,QAAQ,EACR,GAAG,EACH,GAAG,EACH,IAAI,EACJ,IAAI,EACJ,KAAK,EACR;IACG,MAAM,eAAe,CAAC;QAClB,MAAM,WAAW,WAAW,EAAE,MAAM,CAAC,KAAK;QAC1C,IAAI,CAAC,MAAM,WAAW;YAClB,SAAS;QACb,OAAO,IAAI,EAAE,MAAM,CAAC,KAAK,KAAK,IAAI;YAC9B,SAAS;QACb;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,6IAAK;;oBACD;oBACA,0BAAY,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAErD,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,6IAAK;wBACF,MAAK;wBACL,OAAO,SAAS;wBAChB,UAAU;wBACV,aAAa;wBACb,KAAK;wBACL,KAAK;wBACL,MAAM;wBACN,WAAW,QAAQ,mBAAmB;;;;;;oBAEzC,sBACG,6LAAC;wBAAK,WAAU;kCAAmD;;;;;;;;;;;;YAG1E,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG3D;KA7Ca"}},{"offset":{"line":4931,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/fields/DateField.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\n\r\ninterface DateFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    placeholder?: string;\r\n    required?: boolean;\r\n    type?: 'date' | 'datetime-local' | 'time';\r\n    error?: string;\r\n}\r\n\r\nexport const DateField: React.FC<DateFieldProps> = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    placeholder,\r\n    required,\r\n    type = 'date',\r\n    error\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            <Label>\r\n                {label}\r\n                {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n            </Label>\r\n            <Input\r\n                type={type}\r\n                value={value || ''}\r\n                onChange={(e) => onChange(e.target.value)}\r\n                placeholder={placeholder}\r\n                className={error ? 'border-red-500' : ''}\r\n            />\r\n            {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAYO,MAAM,YAAsC,CAAC,EAChD,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,QAAQ,EACR,OAAO,MAAM,EACb,KAAK,EACR;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,6IAAK;;oBACD;oBACA,0BAAY,6LAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;0BAErD,6LAAC,6IAAK;gBACF,MAAM;gBACN,OAAO,SAAS;gBAChB,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,aAAa;gBACb,WAAW,QAAQ,mBAAmB;;;;;;YAEzC,uBAAS,6LAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAG3D;KAzBa"}},{"offset":{"line":4998,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/block-editor/ConfigForm.tsx"],"sourcesContent":["import React from 'react';\nimport { TextField } from './fields/TextField';\nimport { TextareaField } from './fields/TextareaField';\nimport { ImageField } from './fields/ImageField';\nimport { ColorField } from './fields/ColorField';\nimport { SelectField } from './fields/SelectField';\nimport { ToggleField } from './fields/ToggleField';\nimport { SliderField } from './fields/SliderField';\nimport { RepeaterField } from './fields/RepeaterField';\nimport { RichTextField } from './fields/RichTextField';\nimport { NumberField } from './fields/NumberField';\nimport { DateField } from './fields/DateField';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';\nimport { Accordion, AccordionItem, AccordionTrigger, AccordionContent } from '@/components/ui/accordion';\nimport { Separator } from '@/components/ui/separator';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { X } from 'lucide-react';\n\ninterface ConfigFormProps {\n    schema: {\n        fields?: any[];\n        tabs?: Array<{\n            id: string;\n            label: string;\n            icon?: string;\n            fields: any[];\n        }>;\n        sections?: Array<{\n            id: string;\n            label: string;\n            description?: string;\n            fields: any[];\n            collapsible?: boolean;\n            defaultOpen?: boolean;\n        }>;\n    };\n    data?: any;\n    config?: any;\n    onChange: (data: any) => void;\n}\n\n// Helper function to check if a field should be visible based on conditions\nconst shouldShowField = (field: any, data: any): boolean => {\n    if (!field.condition) return true;\n\n    const { field: conditionField, operator, value: conditionValue } = field.condition;\n    const fieldValue = data?.[conditionField];\n\n    switch (operator) {\n        case 'equals':\n            return fieldValue === conditionValue;\n        case 'notEquals':\n            return fieldValue !== conditionValue;\n        case 'contains':\n            return String(fieldValue || '').includes(String(conditionValue || ''));\n        case 'notContains':\n            return !String(fieldValue || '').includes(String(conditionValue || ''));\n        case 'greaterThan':\n            return Number(fieldValue) > Number(conditionValue);\n        case 'lessThan':\n            return Number(fieldValue) < Number(conditionValue);\n        case 'isEmpty':\n            return !fieldValue || fieldValue === '';\n        case 'isNotEmpty':\n            return fieldValue && fieldValue !== '';\n        case 'in':\n            return Array.isArray(conditionValue) && conditionValue.includes(fieldValue);\n        case 'notIn':\n            return Array.isArray(conditionValue) && !conditionValue.includes(fieldValue);\n        default:\n            return true;\n    }\n};\n\n// Render a single field\nconst renderField = (field: any, data: any, handleChange: (name: string, value: any) => void) => {\n    if (!shouldShowField(field, data)) {\n        return null;\n    }\n\n    const value = data?.[field.name];\n\n    switch (field.type) {\n        case 'text':\n        case 'email':\n        case 'url':\n            return (\n                <TextField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    placeholder={field.placeholder}\n                    required={field.required}\n                    type={field.type}\n                    maxLength={field.maxLength}\n                    error={field.error}\n                />\n            );\n        case 'number':\n            return (\n                <NumberField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    placeholder={field.placeholder}\n                    required={field.required}\n                    min={field.min}\n                    max={field.max}\n                    step={field.step}\n                    unit={field.unit}\n                    error={field.error}\n                />\n            );\n        case 'textarea':\n            return (\n                <TextareaField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    placeholder={field.placeholder}\n                    required={field.required}\n                    rows={field.rows}\n                    maxLength={field.maxLength}\n                />\n            );\n        case 'image':\n            return (\n                <ImageField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    required={field.required}\n                    recommended={field.recommended}\n                />\n            );\n        case 'color':\n            return (\n                <ColorField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    required={field.required}\n                />\n            );\n        case 'select':\n            return (\n                <SelectField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    options={field.options}\n                    required={field.required}\n                    placeholder={field.placeholder}\n                />\n            );\n        case 'checkbox':\n        case 'boolean':\n        case 'toggle':\n            return (\n                <ToggleField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    description={field.description}\n                />\n            );\n        case 'array':\n            // Simple array field - allows adding/removing string items\n            const arrayValue = Array.isArray(value) ? value : (value ? [value] : []);\n            return (\n                <div key={field.name} className=\"space-y-2\">\n                    <Label>{field.label}</Label>\n                    {field.description && (\n                        <p className=\"text-xs text-muted-foreground mb-2\">{field.description}</p>\n                    )}\n                    <div className=\"space-y-2\">\n                        {arrayValue.map((item: any, index: number) => (\n                            <div key={index} className=\"flex items-center gap-2\">\n                                <Input\n                                    value={typeof item === 'string' ? item : String(item)}\n                                    onChange={(e) => {\n                                        const newArray = [...arrayValue];\n                                        newArray[index] = e.target.value;\n                                        handleChange(field.name, newArray);\n                                    }}\n                                    placeholder={field.placeholder || 'Enter value'}\n                                    className=\"flex-1\"\n                                />\n                                <Button\n                                    type=\"button\"\n                                    variant=\"ghost\"\n                                    size=\"icon\"\n                                    onClick={() => {\n                                        const newArray = arrayValue.filter((_: any, i: number) => i !== index);\n                                        handleChange(field.name, newArray);\n                                    }}\n                                    className=\"h-8 w-8\"\n                                >\n                                    <X className=\"h-4 w-4\" />\n                                </Button>\n                            </div>\n                        ))}\n                        <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                                handleChange(field.name, [...arrayValue, '']);\n                            }}\n                            className=\"w-full\"\n                        >\n                            + Add Item\n                        </Button>\n                    </div>\n                </div>\n            );\n        case 'slider':\n            return (\n                <SliderField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    min={field.min}\n                    max={field.max}\n                    step={field.step}\n                    unit={field.unit}\n                />\n            );\n        case 'repeater':\n            // Ensure value is always an array for repeater fields\n            const repeaterValue = Array.isArray(value) ? value : (value ? [value] : []);\n            return (\n                <RepeaterField\n                    key={field.name}\n                    label={field.label}\n                    value={repeaterValue}\n                    onChange={(val) => handleChange(field.name, val)}\n                    fields={field.fields}\n                    itemLabel={field.itemLabel}\n                />\n            );\n        case 'richtext':\n        case 'richText':\n            return (\n                <RichTextField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    placeholder={field.placeholder}\n                    required={field.required}\n                    error={field.error}\n                />\n            );\n        case 'date':\n        case 'datetime':\n        case 'time':\n            return (\n                <DateField\n                    key={field.name}\n                    label={field.label}\n                    value={value}\n                    onChange={(val) => handleChange(field.name, val)}\n                    placeholder={field.placeholder}\n                    required={field.required}\n                    type={field.type === 'datetime' ? 'datetime-local' : field.type === 'time' ? 'time' : 'date'}\n                    error={field.error}\n                />\n            );\n        case 'separator':\n            return <Separator key={field.name} className=\"my-4\" />;\n        case 'heading':\n            return (\n                <div key={field.name} className=\"space-y-1\">\n                    <h3 className=\"text-sm font-semibold text-foreground\">{field.label}</h3>\n                    {field.description && (\n                        <p className=\"text-xs text-muted-foreground\">{field.description}</p>\n                    )}\n                </div>\n            );\n        default:\n            return (\n                <div key={field.name} className=\"p-4 border border-red-200 bg-red-50 rounded text-red-600 text-sm\">\n                    Unknown field type: {field.type}\n                </div>\n            );\n    }\n};\n\nexport const ConfigForm: React.FC<ConfigFormProps> = ({\n    schema,\n    data,\n    config,\n    onChange\n}) => {\n    // Support both data and config props for backward compatibility\n    const actualData = data ?? config ?? {};\n\n    const handleChange = (fieldName: string, value: any) => {\n        onChange({\n            ...actualData,\n            [fieldName]: value\n        });\n    };\n\n    // Render fields in a flat list\n    const renderFields = (fields: any[]) => {\n        return (\n            <div className=\"space-y-6\">\n                {fields.map((field) => renderField(field, actualData, handleChange))}\n            </div>\n        );\n    };\n\n    // Render fields organized in sections\n    const renderSections = (sections: any[]) => {\n        if (sections.some(s => s.collapsible)) {\n            // Use accordion for collapsible sections\n            return (\n                <Accordion type=\"multiple\" defaultValue={sections.filter(s => s.defaultOpen).map(s => s.id)} className=\"space-y-2\">\n                    {sections.map((section) => {\n                        const visibleFields = section.fields.filter((f: any) => shouldShowField(f, actualData));\n                        if (visibleFields.length === 0) return null;\n\n                        return (\n                            <AccordionItem key={section.id} value={section.id} className=\"border rounded-lg px-4\">\n                                <AccordionTrigger className=\"hover:no-underline\">\n                                    <div className=\"text-left\">\n                                        <div className=\"font-semibold text-sm\">{section.label}</div>\n                                        {section.description && (\n                                            <div className=\"text-xs text-muted-foreground font-normal mt-0.5\">\n                                                {section.description}\n                                            </div>\n                                        )}\n                                    </div>\n                                </AccordionTrigger>\n                                <AccordionContent>\n                                    <div className=\"space-y-6 pt-2\">\n                                        {section.fields.map((field: any) => renderField(field, actualData, handleChange))}\n                                    </div>\n                                </AccordionContent>\n                            </AccordionItem>\n                        );\n                    })}\n                </Accordion>\n            );\n        } else {\n            // Use simple sections with separators\n            return (\n                <div className=\"space-y-8\">\n                    {sections.map((section, index) => {\n                        const visibleFields = section.fields.filter((f: any) => shouldShowField(f, actualData));\n                        if (visibleFields.length === 0) return null;\n\n                        return (\n                            <div key={section.id} className=\"space-y-4\">\n                                <div className=\"space-y-1\">\n                                    <h3 className=\"text-sm font-semibold text-foreground\">{section.label}</h3>\n                                    {section.description && (\n                                        <p className=\"text-xs text-muted-foreground\">{section.description}</p>\n                                    )}\n                                </div>\n                                <div className=\"space-y-6 pl-4 border-l-2 border-border\">\n                                    {section.fields.map((field: any) => renderField(field, actualData, handleChange))}\n                                </div>\n                                {index < sections.length - 1 && <Separator className=\"my-6\" />}\n                            </div>\n                        );\n                    })}\n                </div>\n            );\n        }\n    };\n\n    // Render fields organized in tabs\n    const renderTabs = (tabs: any[]) => {\n        return (\n            <Tabs defaultValue={tabs[0]?.id} className=\"w-full\">\n                <TabsList className=\"grid w-full\" style={{ gridTemplateColumns: `repeat(${tabs.length}, minmax(0, 1fr))` }}>\n                    {tabs.map((tab) => (\n                        <TabsTrigger key={tab.id} value={tab.id} className=\"text-xs\">\n                            {tab.label}\n                        </TabsTrigger>\n                    ))}\n                </TabsList>\n                {tabs.map((tab) => {\n                    const visibleFields = tab.fields.filter((f: any) => shouldShowField(f, actualData));\n                    if (visibleFields.length === 0) return null;\n\n                    return (\n                        <TabsContent key={tab.id} value={tab.id} className=\"mt-4 space-y-6\">\n                            {tab.fields.map((field: any) => renderField(field, actualData, handleChange))}\n                        </TabsContent>\n                    );\n                })}\n            </Tabs>\n        );\n    };\n\n    if (!schema) {\n        return (\n            <div className=\"p-4 border border-amber-200 bg-amber-50 rounded-lg\">\n                <div className=\"flex items-start gap-3\">\n                    <div className=\"flex-shrink-0 mt-0.5\">\n                        <svg className=\"w-5 h-5 text-amber-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                        </svg>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                        <h4 className=\"text-sm font-semibold text-amber-900 mb-1\">\n                            Configuration Schema Missing\n                        </h4>\n                        <p className=\"text-xs text-amber-800 mb-2\">\n                            This block template doesn't have a configuration schema defined. The block will still render, but you won't be able to customize its settings.\n                        </p>\n                        <p className=\"text-xs text-amber-700\">\n                            To enable configuration options, update the block template in the Templates section.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    // Priority: tabs > sections > fields\n    if (schema.tabs && schema.tabs.length > 0) {\n        return renderTabs(schema.tabs);\n    }\n\n    if (schema.sections && schema.sections.length > 0) {\n        return renderSections(schema.sections);\n    }\n\n    if (schema.fields && schema.fields.length > 0) {\n        return renderFields(schema.fields);\n    }\n\n    return (\n        <div className=\"p-4 border border-amber-200 bg-amber-50 rounded-lg\">\n            <div className=\"flex items-start gap-3\">\n                <div className=\"flex-shrink-0 mt-0.5\">\n                    <svg className=\"w-5 h-5 text-amber-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                    </svg>\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                    <h4 className=\"text-sm font-semibold text-amber-900 mb-1\">\n                        No Configuration Fields\n                    </h4>\n                    <p className=\"text-xs text-amber-800\">\n                        This block template has a schema but no configuration fields are defined. The block will render with default settings.\n                    </p>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},{"offset":{"line":5752,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/SettingsTabs.tsx"],"sourcesContent":["/**\r\n * Settings Tabs Component\r\n *\r\n * Three-tab configuration panel matching Elementor's UX:\r\n * - Content Tab: Text, images, links, and content settings\r\n * - Style Tab: Colors, typography, spacing, backgrounds\r\n * - Advanced Tab: Custom CSS, animations, positioning, responsive visibility\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { FileText, Palette, Settings2 } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { ConfigForm } from '../block-editor/ConfigForm';\r\nimport { EditorBlock } from '@/types/editor';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\n\r\ninterface SettingsTabsProps {\r\n  block: EditorBlock;\r\n  onUpdateConfig: (tab: 'content' | 'style' | 'advanced', config: any) => void;\r\n  className?: string;\r\n}\r\n\r\nexport const SettingsTabs: React.FC<SettingsTabsProps> = ({\r\n  block,\r\n  onUpdateConfig,\r\n  className,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState<'content' | 'style' | 'advanced'>('content');\r\n\r\n  // Get schema for the block\r\n  const schema = block.template?.configSchema;\r\n\r\n  // If schema has tabs defined, use them\r\n  if (schema?.tabs) {\r\n    return (\r\n      <div className={cn('h-full flex flex-col overflow-hidden', className)}>\r\n        <Tabs value={activeTab} onValueChange={(value) => setActiveTab(value as any)} className=\"flex-1 flex flex-col overflow-hidden\">\r\n          <TabsList className=\"grid w-full grid-cols-3 h-auto p-1 bg-gray-100 shrink-0\">\r\n            {schema.tabs.map((tab: any) => (\r\n              <TabsTrigger\r\n                key={tab.id}\r\n                value={tab.id}\r\n                className={cn(\r\n                  'flex items-center gap-2 py-2.5 text-xs font-medium transition-all',\r\n                  'data-[state=active]:bg-white data-[state=active]:shadow-sm'\r\n                )}\r\n              >\r\n                {getTabIcon(tab.id)}\r\n                <span>{tab.label}</span>\r\n              </TabsTrigger>\r\n            ))}\r\n          </TabsList>\r\n\r\n          <div className=\"flex-1 overflow-hidden min-h-0\">\r\n            {schema.tabs.map((tab: any) => (\r\n              <TabsContent\r\n                key={tab.id}\r\n                value={tab.id}\r\n                className=\"h-full mt-0 data-[state=inactive]:hidden\"\r\n              >\r\n                <ScrollArea className=\"h-full\">\r\n                  <div className=\"p-4 pb-8\">\r\n                    {tab.sections ? (\r\n                      // Render sections\r\n                      <div className=\"space-y-4\">\r\n                        {tab.sections.map((section: any) => (\r\n                          <div key={section.id} className=\"space-y-3\">\r\n                            <h3 className=\"text-sm font-semibold text-gray-900 flex items-center gap-2\">\r\n                              {section.icon && <span>{section.icon}</span>}\r\n                              {section.label}\r\n                            </h3>\r\n                            <ConfigForm\r\n                              schema={{ fields: section.fields }}\r\n                              config={getConfigForTab(block, tab.id)}\r\n                              onChange={(newConfig) => onUpdateConfig(tab.id, newConfig)}\r\n                            />\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    ) : tab.fields ? (\r\n                      // Render fields directly\r\n                      <ConfigForm\r\n                        schema={{ fields: tab.fields }}\r\n                        config={getConfigForTab(block, tab.id)}\r\n                        onChange={(newConfig) => onUpdateConfig(tab.id, newConfig)}\r\n                      />\r\n                    ) : null}\r\n                  </div>\r\n                </ScrollArea>\r\n              </TabsContent>\r\n            ))}\r\n          </div>\r\n        </Tabs>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Fallback: Auto-organize fields into tabs based on naming conventions\r\n  const contentFields = schema?.fields?.filter((f: any) => !isStyleField(f) && !isAdvancedField(f)) || [];\r\n  const styleFields = schema?.fields?.filter((f: any) => isStyleField(f)) || [];\r\n  const advancedFields = schema?.fields?.filter((f: any) => isAdvancedField(f)) || [];\r\n\r\n  return (\r\n    <div className={cn('h-full flex flex-col overflow-hidden', className)}>\r\n      <Tabs value={activeTab} onValueChange={(value) => setActiveTab(value as any)} className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <TabsList className=\"grid w-full grid-cols-3 h-auto p-1 bg-gray-100 shrink-0\">\r\n          <TabsTrigger\r\n            value=\"content\"\r\n            className=\"flex items-center gap-2 py-2.5 text-xs font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm\"\r\n          >\r\n            <FileText className=\"w-3.5 h-3.5\" />\r\n            <span>Content</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger\r\n            value=\"style\"\r\n            className=\"flex items-center gap-2 py-2.5 text-xs font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm\"\r\n          >\r\n            <Palette className=\"w-3.5 h-3.5\" />\r\n            <span>Style</span>\r\n          </TabsTrigger>\r\n          <TabsTrigger\r\n            value=\"advanced\"\r\n            className=\"flex items-center gap-2 py-2.5 text-xs font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm\"\r\n          >\r\n            <Settings2 className=\"w-3.5 h-3.5\" />\r\n            <span>Advanced</span>\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <div className=\"flex-1 overflow-hidden min-h-0\">\r\n          <TabsContent value=\"content\" className=\"h-full mt-0 data-[state=inactive]:hidden\">\r\n            <ScrollArea className=\"h-full\">\r\n              <div className=\"p-4 pb-8\">\r\n                {contentFields.length > 0 ? (\r\n                  <ConfigForm\r\n                    schema={{ fields: contentFields }}\r\n                    config={block.contentConfig}\r\n                    onChange={(newConfig) => onUpdateConfig('content', newConfig)}\r\n                  />\r\n                ) : (\r\n                  <EmptyTabState\r\n                    title=\"No Content Settings\"\r\n                    description=\"This block doesn't have any content settings to configure.\"\r\n                  />\r\n                )}\r\n              </div>\r\n            </ScrollArea>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"style\" className=\"h-full mt-0 data-[state=inactive]:hidden\">\r\n            <ScrollArea className=\"h-full\">\r\n              <div className=\"p-4 pb-8\">\r\n                {styleFields.length > 0 ? (\r\n                  <ConfigForm\r\n                    schema={{ fields: styleFields }}\r\n                    config={block.styleConfig || {}}\r\n                    onChange={(newConfig) => onUpdateConfig('style', newConfig)}\r\n                  />\r\n                ) : (\r\n                  <>\r\n                    <StyleTabDefaults\r\n                      config={block.styleConfig || {}}\r\n                      onChange={(newConfig) => onUpdateConfig('style', newConfig)}\r\n                    />\r\n                  </>\r\n                )}\r\n              </div>\r\n            </ScrollArea>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"advanced\" className=\"h-full mt-0 data-[state=inactive]:hidden\">\r\n            <ScrollArea className=\"h-full\">\r\n              <div className=\"p-4 pb-8\">\r\n                {advancedFields.length > 0 ? (\r\n                  <ConfigForm\r\n                    schema={{ fields: advancedFields }}\r\n                    config={block.advancedConfig || {}}\r\n                    onChange={(newConfig) => onUpdateConfig('advanced', newConfig)}\r\n                  />\r\n                ) : (\r\n                  <AdvancedTabDefaults\r\n                    config={block.advancedConfig || {}}\r\n                    onChange={(newConfig) => onUpdateConfig('advanced', newConfig)}\r\n                  />\r\n                )}\r\n              </div>\r\n            </ScrollArea>\r\n          </TabsContent>\r\n        </div>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Get icon for tab\r\n */\r\nfunction getTabIcon(tabId: string) {\r\n  switch (tabId) {\r\n    case 'content':\r\n      return <FileText className=\"w-3.5 h-3.5\" />;\r\n    case 'style':\r\n      return <Palette className=\"w-3.5 h-3.5\" />;\r\n    case 'advanced':\r\n      return <Settings2 className=\"w-3.5 h-3.5\" />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Get config for specific tab\r\n */\r\nfunction getConfigForTab(block: EditorBlock, tabId: string): any {\r\n  switch (tabId) {\r\n    case 'content':\r\n      return block.contentConfig;\r\n    case 'style':\r\n      return block.styleConfig || {};\r\n    case 'advanced':\r\n      return block.advancedConfig || {};\r\n    default:\r\n      return {};\r\n  }\r\n}\r\n\r\n/**\r\n * Check if field belongs to style tab\r\n */\r\nfunction isStyleField(field: any): boolean {\r\n  const styleKeywords = [\r\n    'color',\r\n    'background',\r\n    'font',\r\n    'text',\r\n    'padding',\r\n    'margin',\r\n    'border',\r\n    'shadow',\r\n    'size',\r\n    'width',\r\n    'height',\r\n    'spacing',\r\n    'typography',\r\n    'align',\r\n    'radius',\r\n  ];\r\n\r\n  return styleKeywords.some((keyword) =>\r\n    field.name.toLowerCase().includes(keyword)\r\n  );\r\n}\r\n\r\n/**\r\n * Check if field belongs to advanced tab\r\n */\r\nfunction isAdvancedField(field: any): boolean {\r\n  const advancedKeywords = [\r\n    'animation',\r\n    'custom',\r\n    'css',\r\n    'class',\r\n    'position',\r\n    'zindex',\r\n    'overflow',\r\n    'transform',\r\n    'transition',\r\n  ];\r\n\r\n  return advancedKeywords.some((keyword) =>\r\n    field.name.toLowerCase().includes(keyword)\r\n  );\r\n}\r\n\r\n/**\r\n * Empty tab state component\r\n */\r\ninterface EmptyTabStateProps {\r\n  title: string;\r\n  description: string;\r\n}\r\n\r\nconst EmptyTabState: React.FC<EmptyTabStateProps> = ({ title, description }) => (\r\n  <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n    <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-3\">\r\n      <Settings2 className=\"w-6 h-6 text-gray-400\" />\r\n    </div>\r\n    <h3 className=\"text-sm font-medium text-gray-900 mb-1\">{title}</h3>\r\n    <p className=\"text-xs text-gray-500 max-w-xs\">{description}</p>\r\n  </div>\r\n);\r\n\r\n/**\r\n * Style tab with default controls\r\n */\r\ninterface StyleTabDefaultsProps {\r\n  config: any;\r\n  onChange: (config: any) => void;\r\n}\r\n\r\nconst StyleTabDefaults: React.FC<StyleTabDefaultsProps> = ({ config, onChange }) => {\r\n  const defaultStyleSchema = {\r\n    fields: [\r\n      {\r\n        type: 'color',\r\n        name: 'backgroundColor',\r\n        label: 'Background Color',\r\n        defaultValue: '',\r\n      },\r\n      {\r\n        type: 'color',\r\n        name: 'textColor',\r\n        label: 'Text Color',\r\n        defaultValue: '',\r\n      },\r\n      {\r\n        type: 'number',\r\n        name: 'padding',\r\n        label: 'Padding (px)',\r\n        min: 0,\r\n        max: 200,\r\n        defaultValue: 0,\r\n      },\r\n      {\r\n        type: 'number',\r\n        name: 'margin',\r\n        label: 'Margin (px)',\r\n        min: 0,\r\n        max: 200,\r\n        defaultValue: 0,\r\n      },\r\n    ],\r\n  };\r\n\r\n  return <ConfigForm schema={defaultStyleSchema} config={config} onChange={onChange} />;\r\n};\r\n\r\n/**\r\n * Advanced tab with default controls\r\n */\r\ninterface AdvancedTabDefaultsProps {\r\n  config: any;\r\n  onChange: (config: any) => void;\r\n}\r\n\r\nconst AdvancedTabDefaults: React.FC<AdvancedTabDefaultsProps> = ({ config, onChange }) => {\r\n  const defaultAdvancedSchema = {\r\n    fields: [\r\n      {\r\n        type: 'textarea',\r\n        name: 'customCss',\r\n        label: 'Custom CSS',\r\n        placeholder: '/* Add custom CSS here */',\r\n        defaultValue: '',\r\n      },\r\n      {\r\n        type: 'text',\r\n        name: 'customClasses',\r\n        label: 'CSS Classes',\r\n        placeholder: 'class-1 class-2',\r\n        defaultValue: '',\r\n      },\r\n      {\r\n        type: 'toggle',\r\n        name: 'hideOnMobile',\r\n        label: 'Hide on Mobile',\r\n        defaultValue: false,\r\n      },\r\n      {\r\n        type: 'toggle',\r\n        name: 'hideOnTablet',\r\n        label: 'Hide on Tablet',\r\n        defaultValue: false,\r\n      },\r\n      {\r\n        type: 'toggle',\r\n        name: 'hideOnDesktop',\r\n        label: 'Hide on Desktop',\r\n        defaultValue: false,\r\n      },\r\n    ],\r\n  };\r\n\r\n  return <ConfigForm schema={defaultAdvancedSchema} config={config} onChange={onChange} />;\r\n};\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":6381,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/Finder.tsx"],"sourcesContent":["/**\r\n * Finder Command Palette\r\n *\r\n * Quick access to blocks, pages, settings, and actions.\r\n * Similar to Elementor's Finder (Ctrl+E) and modern command palettes.\r\n */\r\n\r\nimport React, { useState, useMemo, useEffect, useRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport {\r\n  Search,\r\n  FileText,\r\n  Plus,\r\n  Settings,\r\n  Layers,\r\n  Book,\r\n  ExternalLink,\r\n  ChevronRight,\r\n  Command,\r\n} from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { cn } from '@/lib/utils';\r\nimport { BlockTemplate } from '@/types/editor';\r\n\r\ninterface FinderItem {\r\n  id: string;\r\n  type: 'block' | 'page' | 'action' | 'setting' | 'recent';\r\n  label: string;\r\n  description?: string;\r\n  icon?: React.ReactNode;\r\n  action: () => void;\r\n  keywords?: string[];\r\n}\r\n\r\ninterface FinderProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  blockTemplates?: BlockTemplate[];\r\n  onAddBlock?: (template: BlockTemplate) => void;\r\n  recentBlocks?: BlockTemplate[];\r\n  onNavigate?: (path: string) => void;\r\n}\r\n\r\nexport const Finder: React.FC<FinderProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  blockTemplates = [],\r\n  onAddBlock,\r\n  recentBlocks = [],\r\n  onNavigate,\r\n}) => {\r\n  const [query, setQuery] = useState('');\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const itemsRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Build all available items\r\n  const allItems = useMemo(() => {\r\n    const items: FinderItem[] = [];\r\n\r\n    // Recent blocks\r\n    if (recentBlocks.length > 0) {\r\n      items.push(\r\n        ...recentBlocks.slice(0, 5).map((template) => ({\r\n          id: `recent-${template.id}`,\r\n          type: 'recent' as const,\r\n          label: template.name,\r\n          description: 'Recently used',\r\n          icon: <Layers className=\"w-4 h-4 text-blue-500\" />,\r\n          action: () => {\r\n            if (onAddBlock) onAddBlock(template);\r\n            onClose();\r\n          },\r\n          keywords: [template.name, template.category, 'recent'],\r\n        }))\r\n      );\r\n    }\r\n\r\n    // All block templates\r\n    items.push(\r\n      ...blockTemplates.map((template) => ({\r\n        id: `block-${template.id}`,\r\n        type: 'block' as const,\r\n        label: template.name,\r\n        description: template.description || template.category,\r\n        icon: <Layers className=\"w-4 h-4 text-purple-500\" />,\r\n        action: () => {\r\n          if (onAddBlock) onAddBlock(template);\r\n          onClose();\r\n        },\r\n        keywords: [template.name, template.category, template.slug],\r\n      }))\r\n    );\r\n\r\n    // Actions\r\n    items.push(\r\n      {\r\n        id: 'create-page',\r\n        type: 'action',\r\n        label: 'Create New Page',\r\n        description: 'Create a new CMS page',\r\n        icon: <Plus className=\"w-4 h-4 text-green-500\" />,\r\n        action: () => {\r\n          if (onNavigate) onNavigate('/admin/cms/pages/new');\r\n          onClose();\r\n        },\r\n        keywords: ['create', 'new', 'page'],\r\n      },\r\n      {\r\n        id: 'view-pages',\r\n        type: 'action',\r\n        label: 'View All Pages',\r\n        description: 'Go to pages list',\r\n        icon: <FileText className=\"w-4 h-4 text-blue-500\" />,\r\n        action: () => {\r\n          if (onNavigate) onNavigate('/admin/cms/pages');\r\n          onClose();\r\n        },\r\n        keywords: ['pages', 'list', 'view'],\r\n      }\r\n    );\r\n\r\n    // Settings\r\n    items.push(\r\n      {\r\n        id: 'page-settings',\r\n        type: 'setting',\r\n        label: 'Page Settings',\r\n        description: 'Edit page metadata and SEO',\r\n        icon: <Settings className=\"w-4 h-4 text-gray-500\" />,\r\n        action: () => {\r\n          // This would open the page settings panel\r\n          onClose();\r\n        },\r\n        keywords: ['settings', 'page', 'seo', 'metadata'],\r\n      },\r\n      {\r\n        id: 'help',\r\n        type: 'setting',\r\n        label: 'Help & Documentation',\r\n        description: 'View editor documentation',\r\n        icon: <Book className=\"w-4 h-4 text-orange-500\" />,\r\n        action: () => {\r\n          window.open('https://code.claude.com/docs', '_blank');\r\n          onClose();\r\n        },\r\n        keywords: ['help', 'docs', 'documentation', 'guide'],\r\n      }\r\n    );\r\n\r\n    return items;\r\n  }, [blockTemplates, recentBlocks, onAddBlock, onClose, onNavigate]);\r\n\r\n  // Filter items based on query\r\n  const filteredItems = useMemo(() => {\r\n    if (!query.trim()) {\r\n      // Show recent items first when no query\r\n      return allItems.sort((a, b) => {\r\n        if (a.type === 'recent' && b.type !== 'recent') return -1;\r\n        if (a.type !== 'recent' && b.type === 'recent') return 1;\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    const lowerQuery = query.toLowerCase();\r\n    return allItems\r\n      .filter((item) => {\r\n        const searchText = [\r\n          item.label,\r\n          item.description,\r\n          ...(item.keywords || []),\r\n        ]\r\n          .filter(Boolean)\r\n          .join(' ')\r\n          .toLowerCase();\r\n\r\n        return searchText.includes(lowerQuery);\r\n      })\r\n      .sort((a, b) => {\r\n        // Prioritize exact label matches\r\n        const aLabelMatch = a.label.toLowerCase().startsWith(lowerQuery);\r\n        const bLabelMatch = b.label.toLowerCase().startsWith(lowerQuery);\r\n        if (aLabelMatch && !bLabelMatch) return -1;\r\n        if (!aLabelMatch && bLabelMatch) return 1;\r\n        return 0;\r\n      });\r\n  }, [allItems, query]);\r\n\r\n  // Handle keyboard navigation\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      } else if (e.key === 'ArrowDown') {\r\n        e.preventDefault();\r\n        setSelectedIndex((prev) => Math.min(prev + 1, filteredItems.length - 1));\r\n      } else if (e.key === 'ArrowUp') {\r\n        e.preventDefault();\r\n        setSelectedIndex((prev) => Math.max(prev - 1, 0));\r\n      } else if (e.key === 'Enter') {\r\n        e.preventDefault();\r\n        if (filteredItems[selectedIndex]) {\r\n          filteredItems[selectedIndex].action();\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [isOpen, filteredItems, selectedIndex, onClose]);\r\n\r\n  // Reset selection when filtered items change\r\n  useEffect(() => {\r\n    setSelectedIndex(0);\r\n  }, [filteredItems]);\r\n\r\n  // Focus input when opened\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Scroll selected item into view\r\n  useEffect(() => {\r\n    if (itemsRef.current) {\r\n      const selectedElement = itemsRef.current.children[selectedIndex] as HTMLElement;\r\n      if (selectedElement) {\r\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\r\n      }\r\n    }\r\n  }, [selectedIndex]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  if (typeof window === 'undefined') return null;\r\n\r\n  return createPortal(\r\n    <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-[10vh] bg-black/50 backdrop-blur-sm animate-in fade-in duration-200\">\r\n      <div className=\"w-full max-w-2xl bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden animate-in zoom-in-95 slide-in-from-top-4 duration-200\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center gap-3 px-4 py-3 border-b bg-gray-50\">\r\n          <Search className=\"w-5 h-5 text-gray-400\" />\r\n          <Input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            placeholder=\"Search blocks, pages, and actions...\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            className=\"border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 text-base\"\r\n          />\r\n          <kbd className=\"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs font-mono text-gray-500 bg-gray-100 border rounded\">\r\n            <Command className=\"w-3 h-3\" />\r\n            <span>E</span>\r\n          </kbd>\r\n        </div>\r\n\r\n        {/* Results */}\r\n        <div ref={itemsRef} className=\"max-h-[60vh] overflow-y-auto\">\r\n          {filteredItems.length > 0 ? (\r\n            <div className=\"py-2\">\r\n              {filteredItems.map((item, index) => (\r\n                <FinderItem\r\n                  key={item.id}\r\n                  item={item}\r\n                  isSelected={index === selectedIndex}\r\n                  onClick={() => {\r\n                    setSelectedIndex(index);\r\n                    item.action();\r\n                  }}\r\n                  onMouseEnter={() => setSelectedIndex(index)}\r\n                />\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n              <Search className=\"w-12 h-12 text-gray-300 mb-3\" />\r\n              <p className=\"text-sm text-gray-500\">No results found</p>\r\n              <p className=\"text-xs text-gray-400 mt-1\">\r\n                Try searching for blocks, pages, or actions\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-between px-4 py-2 border-t bg-gray-50 text-xs text-gray-500\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"flex items-center gap-1\">\r\n              <kbd className=\"px-1.5 py-0.5 bg-white border rounded font-mono\"></kbd>\r\n              <kbd className=\"px-1.5 py-0.5 bg-white border rounded font-mono\"></kbd>\r\n              Navigate\r\n            </span>\r\n            <span className=\"flex items-center gap-1\">\r\n              <kbd className=\"px-1.5 py-0.5 bg-white border rounded font-mono\">Enter</kbd>\r\n              Select\r\n            </span>\r\n            <span className=\"flex items-center gap-1\">\r\n              <kbd className=\"px-1.5 py-0.5 bg-white border rounded font-mono\">Esc</kbd>\r\n              Close\r\n            </span>\r\n          </div>\r\n          <span>{filteredItems.length} results</span>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n\r\n/**\r\n * Finder Item Component\r\n */\r\ninterface FinderItemProps {\r\n  item: FinderItem;\r\n  isSelected: boolean;\r\n  onClick: () => void;\r\n  onMouseEnter: () => void;\r\n}\r\n\r\nconst FinderItem: React.FC<FinderItemProps> = ({ item, isSelected, onClick, onMouseEnter }) => {\r\n  const getTypeLabel = () => {\r\n    switch (item.type) {\r\n      case 'block':\r\n        return 'Block';\r\n      case 'recent':\r\n        return 'Recent';\r\n      case 'action':\r\n        return 'Action';\r\n      case 'setting':\r\n        return 'Setting';\r\n      case 'page':\r\n        return 'Page';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      className={cn(\r\n        'w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors',\r\n        isSelected ? 'bg-primary/10 border-l-2 border-primary' : 'hover:bg-gray-50'\r\n      )}\r\n      onClick={onClick}\r\n      onMouseEnter={onMouseEnter}\r\n    >\r\n      {/* Icon */}\r\n      <div className=\"flex-shrink-0\">{item.icon}</div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 min-w-0\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"font-medium text-sm text-gray-900 truncate\">{item.label}</span>\r\n          <span className=\"text-xs text-gray-400 uppercase tracking-wider font-semibold\">\r\n            {getTypeLabel()}\r\n          </span>\r\n        </div>\r\n        {item.description && (\r\n          <p className=\"text-xs text-gray-500 truncate mt-0.5\">{item.description}</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Arrow */}\r\n      <ChevronRight className={cn('w-4 h-4 text-gray-400 flex-shrink-0', isSelected && 'text-primary')} />\r\n    </button>\r\n  );\r\n};\r\n\r\n/**\r\n * useFinder Hook\r\n */\r\nexport function useFinder() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const open = () => setIsOpen(true);\r\n  const close = () => setIsOpen(false);\r\n  const toggle = () => setIsOpen((prev) => !prev);\r\n\r\n  return { isOpen, open, close, toggle };\r\n}\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":7027,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/HistoryPanel.tsx"],"sourcesContent":["/**\r\n * History Panel Component\r\n *\r\n * Visual history of all actions with timestamps.\r\n * Allows clicking any action to restore that state.\r\n * Similar to Elementor's History panel (Ctrl+H).\r\n */\r\n\r\nimport React, { useMemo } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport {\r\n  History,\r\n  Plus,\r\n  Trash2,\r\n  Copy,\r\n  Move,\r\n  Edit,\r\n  Eye,\r\n  EyeOff,\r\n  RotateCcw,\r\n  X,\r\n  Clock,\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { cn } from '@/lib/utils';\r\nimport { EditorHistory } from '@/types/editor';\r\n\r\ninterface HistoryPanelProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  history: EditorHistory[];\r\n  currentIndex: number;\r\n  onRestoreToIndex: (index: number) => void;\r\n  onClearHistory?: () => void;\r\n}\r\n\r\nexport const HistoryPanel: React.FC<HistoryPanelProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  history,\r\n  currentIndex,\r\n  onRestoreToIndex,\r\n  onClearHistory,\r\n}) => {\r\n  // Group history by time periods\r\n  const groupedHistory = useMemo(() => {\r\n    const now = Date.now();\r\n    const groups: {\r\n      label: string;\r\n      items: Array<{ index: number; item: EditorHistory }>;\r\n    }[] = [];\r\n\r\n    const today: Array<{ index: number; item: EditorHistory }> = [];\r\n    const yesterday: Array<{ index: number; item: EditorHistory }> = [];\r\n    const thisWeek: Array<{ index: number; item: EditorHistory }> = [];\r\n    const older: Array<{ index: number; item: EditorHistory }> = [];\r\n\r\n    history.forEach((item, index) => {\r\n      const diff = now - item.timestamp;\r\n      const dayInMs = 24 * 60 * 60 * 1000;\r\n\r\n      if (diff < dayInMs) {\r\n        today.push({ index, item });\r\n      } else if (diff < 2 * dayInMs) {\r\n        yesterday.push({ index, item });\r\n      } else if (diff < 7 * dayInMs) {\r\n        thisWeek.push({ index, item });\r\n      } else {\r\n        older.push({ index, item });\r\n      }\r\n    });\r\n\r\n    if (today.length > 0) groups.push({ label: 'Today', items: today.reverse() });\r\n    if (yesterday.length > 0) groups.push({ label: 'Yesterday', items: yesterday.reverse() });\r\n    if (thisWeek.length > 0) groups.push({ label: 'This Week', items: thisWeek.reverse() });\r\n    if (older.length > 0) groups.push({ label: 'Older', items: older.reverse() });\r\n\r\n    return groups;\r\n  }, [history]);\r\n\r\n  if (!isOpen) return null;\r\n  if (typeof window === 'undefined') return null;\r\n\r\n  return createPortal(\r\n    <div className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200\">\r\n      <div className=\"w-full max-w-md bg-white sm:rounded-xl shadow-2xl border border-gray-200 overflow-hidden animate-in slide-in-from-bottom sm:zoom-in-95 duration-200 max-h-[90vh] sm:max-h-[80vh] flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between px-4 py-3 border-b bg-gray-50\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <History className=\"w-5 h-5 text-gray-700\" />\r\n            <h2 className=\"font-semibold text-gray-900\">History</h2>\r\n            <span className=\"text-xs text-gray-500\">({history.length} actions)</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            {onClearHistory && history.length > 0 && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={onClearHistory}\r\n                className=\"h-8 px-2 text-xs text-red-600 hover:text-red-700 hover:bg-red-50\"\r\n              >\r\n                Clear All\r\n              </Button>\r\n            )}\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"h-8 w-8\">\r\n              <X className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* History List */}\r\n        <ScrollArea className=\"flex-1\">\r\n          {history.length > 0 ? (\r\n            <div className=\"p-2\">\r\n              {groupedHistory.map((group) => (\r\n                <div key={group.label} className=\"mb-4\">\r\n                  <div className=\"px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase tracking-wider\">\r\n                    {group.label}\r\n                  </div>\r\n                  <div className=\"space-y-0.5\">\r\n                    {group.items.map(({ index, item }) => (\r\n                      <HistoryItem\r\n                        key={index}\r\n                        item={item}\r\n                        index={index}\r\n                        isCurrent={index === currentIndex}\r\n                        onClick={() => onRestoreToIndex(index)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n              <Clock className=\"w-12 h-12 text-gray-300 mb-3\" />\r\n              <p className=\"text-sm text-gray-500\">No history yet</p>\r\n              <p className=\"text-xs text-gray-400 mt-1\">\r\n                Actions you perform will appear here\r\n              </p>\r\n            </div>\r\n          )}\r\n        </ScrollArea>\r\n\r\n        {/* Footer */}\r\n        <div className=\"px-4 py-3 border-t bg-gray-50 text-xs text-gray-500\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span>Click any action to restore</span>\r\n            <kbd className=\"px-2 py-1 bg-white border rounded font-mono\">Ctrl+H</kbd>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n\r\n/**\r\n * History Item Component\r\n */\r\ninterface HistoryItemProps {\r\n  item: EditorHistory;\r\n  index: number;\r\n  isCurrent: boolean;\r\n  onClick: () => void;\r\n}\r\n\r\nconst HistoryItem: React.FC<HistoryItemProps> = ({ item, index, isCurrent, onClick }) => {\r\n  const actionLabel = getActionLabel(item);\r\n  const icon = getActionIcon(item);\r\n  const time = formatTime(item.timestamp);\r\n\r\n  return (\r\n    <button\r\n      className={cn(\r\n        'w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all',\r\n        isCurrent\r\n          ? 'bg-primary/10 border-l-2 border-primary'\r\n          : 'hover:bg-gray-100 border-l-2 border-transparent'\r\n      )}\r\n      onClick={onClick}\r\n    >\r\n      {/* Icon */}\r\n      <div\r\n        className={cn(\r\n          'flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center',\r\n          isCurrent ? 'bg-primary/20 text-primary' : 'bg-gray-100 text-gray-600'\r\n        )}\r\n      >\r\n        {icon}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 min-w-0\">\r\n        <p className=\"text-sm font-medium text-gray-900 truncate\">{actionLabel}</p>\r\n        <p className=\"text-xs text-gray-500\">{time}</p>\r\n      </div>\r\n\r\n      {/* Current indicator */}\r\n      {isCurrent && (\r\n        <div className=\"flex-shrink-0 w-2 h-2 bg-primary rounded-full animate-pulse\" />\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\n/**\r\n * Get action label from history item\r\n */\r\nfunction getActionLabel(item: EditorHistory): string {\r\n  const blockCount = item.blocks.length;\r\n\r\n  // Try to determine the action type by comparing with previous state\r\n  // This is simplified - in a real implementation, you'd store the action type\r\n  if (blockCount === 0) {\r\n    return 'Page created';\r\n  }\r\n\r\n  return `${blockCount} block${blockCount !== 1 ? 's' : ''}`;\r\n}\r\n\r\n/**\r\n * Get icon for action type\r\n */\r\nfunction getActionIcon(item: EditorHistory): React.ReactNode {\r\n  // This is simplified - in a real implementation, you'd have the action type stored\r\n  const blockCount = item.blocks.length;\r\n\r\n  if (blockCount === 0) {\r\n    return <Plus className=\"w-4 h-4\" />;\r\n  }\r\n\r\n  return <Edit className=\"w-4 h-4\" />;\r\n}\r\n\r\n/**\r\n * Format timestamp\r\n */\r\nfunction formatTime(timestamp: number): string {\r\n  const date = new Date(timestamp);\r\n  const now = new Date();\r\n  const diff = now.getTime() - date.getTime();\r\n\r\n  // Less than 1 minute\r\n  if (diff < 60000) {\r\n    return 'Just now';\r\n  }\r\n\r\n  // Less than 1 hour\r\n  if (diff < 3600000) {\r\n    const minutes = Math.floor(diff / 60000);\r\n    return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`;\r\n  }\r\n\r\n  // Less than 24 hours\r\n  if (diff < 86400000) {\r\n    const hours = Math.floor(diff / 3600000);\r\n    return `${hours} hour${hours !== 1 ? 's' : ''} ago`;\r\n  }\r\n\r\n  // Same day\r\n  if (date.toDateString() === now.toDateString()) {\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  }\r\n\r\n  // This week\r\n  const daysDiff = Math.floor(diff / 86400000);\r\n  if (daysDiff < 7) {\r\n    return `${daysDiff} day${daysDiff !== 1 ? 's' : ''} ago`;\r\n  }\r\n\r\n  // Older\r\n  return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\r\n}\r\n\r\n/**\r\n * useHistoryPanel Hook\r\n */\r\nexport function useHistoryPanel() {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n\r\n  const open = () => setIsOpen(true);\r\n  const close = () => setIsOpen(false);\r\n  const toggle = () => setIsOpen((prev) => !prev);\r\n\r\n  return { isOpen, open, close, toggle };\r\n}\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":7482,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/PageSettingsForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { PageStatus } from '@prisma/client';\r\n\r\ninterface PageSettingsFormProps {\r\n    pageData: {\r\n        title: string;\r\n        slug: string;\r\n        description?: string;\r\n        seoTitle?: string;\r\n        seoDescription?: string;\r\n        seoKeywords?: string;\r\n        status: PageStatus;\r\n        overridesStorefrontPage?: boolean;\r\n        overriddenPageType?: string | null;\r\n    };\r\n    onChange: (field: string, value: any) => void;\r\n}\r\n\r\nexport const PageSettingsForm: React.FC<PageSettingsFormProps> = ({\r\n    pageData,\r\n    onChange,\r\n}) => {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Basic Info */}\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <h3 className=\"font-semibold text-sm text-gray-900\">Basic Information</h3>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">Configure the basic page details</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"title\">Page Title</Label>\r\n                    <Input\r\n                        id=\"title\"\r\n                        value={pageData.title}\r\n                        onChange={(e) => onChange('title', e.target.value)}\r\n                        placeholder=\"Enter page title\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"slug\">URL Slug</Label>\r\n                    <Input\r\n                        id=\"slug\"\r\n                        value={pageData.slug}\r\n                        onChange={(e) => onChange('slug', e.target.value)}\r\n                        placeholder=\"page-url-slug\"\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                        {pageData.overridesStorefrontPage && pageData.overriddenPageType ? (\r\n                            <>\r\n                                This page overrides the <strong>{pageData.overriddenPageType}</strong> storefront page.\r\n                                {pageData.status !== 'PUBLISHED' && (\r\n                                    <span className=\"block mt-1 text-amber-600 font-medium\">\r\n                                         Page must be Published for override to take effect\r\n                                    </span>\r\n                                )}\r\n                            </>\r\n                        ) : (\r\n                            <>URL: /landing/{pageData.slug}</>\r\n                        )}\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"description\">Description</Label>\r\n                    <Textarea\r\n                        id=\"description\"\r\n                        value={pageData.description || ''}\r\n                        onChange={(e) => onChange('description', e.target.value)}\r\n                        placeholder=\"Brief description of the page\"\r\n                        rows={3}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"status\">Status</Label>\r\n                    <Select\r\n                        value={String(pageData.status || 'DRAFT')}\r\n                        onValueChange={(value) => onChange('status', value as PageStatus)}\r\n                    >\r\n                        <SelectTrigger id=\"status\" className=\"w-full\">\r\n                            <SelectValue placeholder=\"Select status\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent className=\"z-[100]\">\r\n                            <SelectItem value=\"DRAFT\">Draft</SelectItem>\r\n                            <SelectItem value=\"PUBLISHED\">Published</SelectItem>\r\n                            <SelectItem value=\"SCHEDULED\">Scheduled</SelectItem>\r\n                            <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n                    {pageData.overridesStorefrontPage && pageData.status !== 'PUBLISHED' && (\r\n                        <div className=\"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-md\">\r\n                            <p className=\"text-xs text-amber-800\">\r\n                                <strong>Note:</strong> Storefront page overrides only work when the page status is <strong>Published</strong>. \r\n                                Change the status to Published to activate the override.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* SEO Settings */}\r\n            <div className=\"space-y-4 pt-4 border-t\">\r\n                <div>\r\n                    <h3 className=\"font-semibold text-sm text-gray-900\">SEO Settings</h3>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">Optimize your page for search engines</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"seoTitle\">SEO Title</Label>\r\n                    <Input\r\n                        id=\"seoTitle\"\r\n                        value={pageData.seoTitle || ''}\r\n                        onChange={(e) => onChange('seoTitle', e.target.value)}\r\n                        placeholder=\"Title for search engines\"\r\n                        maxLength={60}\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                        {(pageData.seoTitle || '').length}/60 characters\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"seoDescription\">SEO Description</Label>\r\n                    <Textarea\r\n                        id=\"seoDescription\"\r\n                        value={pageData.seoDescription || ''}\r\n                        onChange={(e) => onChange('seoDescription', e.target.value)}\r\n                        placeholder=\"Description for search engines\"\r\n                        rows={3}\r\n                        maxLength={160}\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                        {(pageData.seoDescription || '').length}/160 characters\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"seoKeywords\">SEO Keywords</Label>\r\n                    <Input\r\n                        id=\"seoKeywords\"\r\n                        value={pageData.seoKeywords || ''}\r\n                        onChange={(e) => onChange('seoKeywords', e.target.value)}\r\n                        placeholder=\"keyword1, keyword2, keyword3\"\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                        Comma-separated keywords\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":7928,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/DevicePreview.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Monitor, Tablet, Smartphone } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport type DeviceType = 'desktop' | 'tablet' | 'mobile';\r\n\r\ninterface DevicePreviewProps {\r\n    device: DeviceType;\r\n    onChange: (device: DeviceType) => void;\r\n}\r\n\r\nexport const DevicePreview: React.FC<DevicePreviewProps> = ({\r\n    device,\r\n    onChange\r\n}) => {\r\n    return (\r\n        <div className=\"flex items-center bg-gray-100 p-1 rounded-lg border\">\r\n            <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onChange('desktop')}\r\n                className={cn(\r\n                    \"h-7 w-7 p-0 hover:bg-white hover:shadow-sm transition-all\",\r\n                    device === 'desktop' && \"bg-white shadow-sm text-primary\"\r\n                )}\r\n                title=\"Desktop View\"\r\n            >\r\n                <Monitor className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onChange('tablet')}\r\n                className={cn(\r\n                    \"h-7 w-7 p-0 hover:bg-white hover:shadow-sm transition-all\",\r\n                    device === 'tablet' && \"bg-white shadow-sm text-primary\"\r\n                )}\r\n                title=\"Tablet View\"\r\n            >\r\n                <Tablet className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onChange('mobile')}\r\n                className={cn(\r\n                    \"h-7 w-7 p-0 hover:bg-white hover:shadow-sm transition-all\",\r\n                    device === 'mobile' && \"bg-white shadow-sm text-primary\"\r\n                )}\r\n                title=\"Mobile View\"\r\n            >\r\n                <Smartphone className=\"h-4 w-4\" />\r\n            </Button>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AACA;AACA;AALA;;;;;AAcO,MAAM,gBAA8C,CAAC,EACxD,MAAM,EACN,QAAQ,EACX;IACG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC,+IAAM;gBACH,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,SAAS;gBACxB,WAAW,IAAA,4HAAE,EACT,6DACA,WAAW,aAAa;gBAE5B,OAAM;0BAEN,cAAA,6LAAC,sNAAO;oBAAC,WAAU;;;;;;;;;;;0BAEvB,6LAAC,+IAAM;gBACH,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,SAAS;gBACxB,WAAW,IAAA,4HAAE,EACT,6DACA,WAAW,YAAY;gBAE3B,OAAM;0BAEN,cAAA,6LAAC,mNAAM;oBAAC,WAAU;;;;;;;;;;;0BAEtB,6LAAC,+IAAM;gBACH,SAAQ;gBACR,MAAK;gBACL,SAAS,IAAM,SAAS;gBACxB,WAAW,IAAA,4HAAE,EACT,6DACA,WAAW,YAAY;gBAE3B,OAAM;0BAEN,cAAA,6LAAC,+NAAU;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAItC;KA5Ca"}},{"offset":{"line":8018,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/EnhancedEditorLayout.tsx"],"sourcesContent":["/**\r\n * Enhanced Editor Layout\r\n *\r\n * Complete Elementor-style editor layout with all new features integrated:\r\n * - Navigator panel with tree view\r\n * - Nested canvas with containers\r\n * - Three-tab settings panel\r\n * - Finder command palette (Ctrl+E)\r\n * - History panel (Ctrl+H)\r\n * - Keyboard shortcuts\r\n * - Context menus\r\n */\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Save,\r\n  ArrowLeft,\r\n  Loader2,\r\n  Settings,\r\n  X,\r\n  PanelRightClose,\r\n  PanelRightOpen,\r\n  LayoutTemplate,\r\n  Eye,\r\n  PanelLeftClose,\r\n  PanelLeftOpen,\r\n  Search,\r\n  CheckCircle2,\r\n  AlertCircle,\r\n  Undo2,\r\n  Redo2,\r\n  Command,\r\n  History,\r\n  Plus,\r\n  Grid3x3,\r\n  Layers,\r\n  FileText,\r\n  Image,\r\n  Video,\r\n  Heading,\r\n  Mouse,\r\n  MessageSquare,\r\n  Palette,\r\n  Smartphone,\r\n  ShoppingCart,\r\n  Newspaper,\r\n} from 'lucide-react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { SidebarBlock } from './SidebarBlock';\r\nimport { NestedCanvas } from './NestedCanvas';\r\nimport { Navigator } from './Navigator';\r\nimport { SettingsTabs } from './SettingsTabs';\r\nimport { Finder, useFinder } from './Finder';\r\nimport { HistoryPanel, useHistoryPanel } from './HistoryPanel';\r\nimport { PageSettingsForm } from './PageSettingsForm';\r\nimport { EditorBlock, BlockTemplate, ContainerType, DeviceMode } from '@/types/editor';\r\nimport Link from 'next/link';\r\nimport { DevicePreview, DeviceType } from './DevicePreview';\r\nimport { useAdminSidebar } from '@/components/admin/AdminSidebarContext';\r\nimport { cn } from '@/lib/utils';\r\nimport { useKeyboardShortcuts, createEditorShortcuts } from '@/hooks/useKeyboardShortcuts';\r\nimport { useContextMenu, createBlockContextMenu } from './ContextMenu';\r\nimport { EditorHistory } from '@/types/editor';\r\n\r\ninterface EnhancedEditorLayoutProps {\r\n  pageTitle: string;\r\n  pageId: string;\r\n  pageSlug: string;\r\n  pageData: any;\r\n  blocks: EditorBlock[];\r\n  templates: BlockTemplate[];\r\n  selectedBlockId: string | null;\r\n  hoveredBlockId?: string | null;\r\n  deviceMode?: DeviceMode;\r\n  isSaving: boolean;\r\n  isDirty: boolean;\r\n  autoSaveStatus?: 'idle' | 'saving' | 'saved' | 'error';\r\n  history?: EditorHistory[];\r\n  historyIndex?: number;\r\n  canUndo?: boolean;\r\n  canRedo?: boolean;\r\n  clipboard?: any;\r\n\r\n  // Block operations\r\n  onAddBlock: (template: BlockTemplate, parentId?: string | null) => void;\r\n  onAddContainerBlock?: (containerType: ContainerType) => void;\r\n  onSelectBlock: (id: string) => void;\r\n  onHoverBlock?: (id: string | null) => void;\r\n  onRemoveBlock: (id: string) => void;\r\n  onReorderBlocks: (blocks: EditorBlock[]) => void;\r\n  onMoveBlock?: (blockId: string, newParentId: string | null, newOrder: number) => void;\r\n  onUpdateBlockConfig: (id: string, tab: 'content' | 'style' | 'advanced', config: any) => void;\r\n  onDuplicateBlock?: (blockId: string) => void;\r\n  onToggleVisibility?: (blockId: string) => void;\r\n\r\n  // Clipboard operations\r\n  onCopyBlock?: (blockId: string) => void;\r\n  onPasteBlock?: (parentId?: string | null) => void;\r\n  onCopyStyle?: (blockId: string) => void;\r\n  onPasteStyle?: (blockId: string) => void;\r\n\r\n  // Page operations\r\n  onUpdatePageData: (field: string, value: any) => void;\r\n  onSave: () => void;\r\n  onUndo?: () => void;\r\n  onRedo?: () => void;\r\n  onRestoreHistory?: (index: number) => void;\r\n\r\n  // Device\r\n  onSetDeviceMode?: (mode: DeviceMode) => void;\r\n}\r\n\r\nexport const EnhancedEditorLayout: React.FC<EnhancedEditorLayoutProps> = ({\r\n  pageTitle,\r\n  pageId,\r\n  pageSlug,\r\n  pageData,\r\n  blocks,\r\n  templates,\r\n  selectedBlockId,\r\n  hoveredBlockId,\r\n  deviceMode = DeviceMode.DESKTOP,\r\n  isSaving,\r\n  isDirty,\r\n  autoSaveStatus = 'idle',\r\n  history = [],\r\n  historyIndex = -1,\r\n  canUndo = false,\r\n  canRedo = false,\r\n  clipboard,\r\n  onAddBlock,\r\n  onAddContainerBlock,\r\n  onSelectBlock,\r\n  onHoverBlock,\r\n  onRemoveBlock,\r\n  onReorderBlocks,\r\n  onMoveBlock,\r\n  onUpdateBlockConfig,\r\n  onDuplicateBlock,\r\n  onToggleVisibility,\r\n  onCopyBlock,\r\n  onPasteBlock,\r\n  onCopyStyle,\r\n  onPasteStyle,\r\n  onUpdatePageData,\r\n  onSave,\r\n  onUndo,\r\n  onRedo,\r\n  onRestoreHistory,\r\n  onSetDeviceMode,\r\n}) => {\r\n  const selectedBlock = blocks.find((b) => b.id === selectedBlockId);\r\n  const [device, setDevice] = useState<DeviceType>(deviceMode as DeviceType);\r\n  const { setIsCollapsed } = useAdminSidebar();\r\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n  const [isBlockLibraryOpen, setIsBlockLibraryOpen] = useState(true);\r\n  const [isNavigatorOpen, setIsNavigatorOpen] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  // Finder and History panels\r\n  const finder = useFinder();\r\n  const historyPanel = useHistoryPanel();\r\n\r\n  // Collapse admin sidebar on mount\r\n  useEffect(() => {\r\n    setIsCollapsed(true);\r\n    return () => setIsCollapsed(false);\r\n  }, [setIsCollapsed]);\r\n\r\n  // Sync device mode\r\n  useEffect(() => {\r\n    if (onSetDeviceMode) {\r\n      onSetDeviceMode(device as DeviceMode);\r\n    }\r\n  }, [device, onSetDeviceMode]);\r\n\r\n  // Keyboard shortcuts\r\n  const shortcuts = useMemo(\r\n    () =>\r\n      createEditorShortcuts({\r\n        onSave: () => {\r\n          if (isDirty && !isSaving) {\r\n            onSave();\r\n          }\r\n        },\r\n        onUndo,\r\n        onRedo,\r\n        onCopy: selectedBlockId && onCopyBlock ? () => onCopyBlock(selectedBlockId) : undefined,\r\n        onPaste: onPasteBlock,\r\n        onDuplicate: selectedBlockId && onDuplicateBlock ? () => onDuplicateBlock(selectedBlockId) : undefined,\r\n        onDelete: selectedBlockId ? () => onRemoveBlock(selectedBlockId) : undefined,\r\n        onOpenFinder: finder.open,\r\n        onOpenHistory: historyPanel.open,\r\n        onToggleDeviceMode: () => {\r\n          const modes: DeviceType[] = ['desktop', 'tablet', 'mobile'];\r\n          const currentIndex = modes.indexOf(device);\r\n          const nextIndex = (currentIndex + 1) % modes.length;\r\n          setDevice(modes[nextIndex]);\r\n        },\r\n        onDeselectAll: () => onSelectBlock(''),\r\n      }),\r\n    [isDirty, isSaving, onSave, onUndo, onRedo, selectedBlockId, onCopyBlock, onPasteBlock, onDuplicateBlock, onRemoveBlock, finder, historyPanel, device]\r\n  );\r\n\r\n  useKeyboardShortcuts({\r\n    enabled: true,\r\n    shortcuts,\r\n  });\r\n\r\n  // Toggle settings when block is selected\r\n  const handleBlockSelect = (id: string) => {\r\n    if (selectedBlockId === id && isSettingsOpen) {\r\n      setIsSettingsOpen(false);\r\n    } else {\r\n      onSelectBlock(id);\r\n      setIsSettingsOpen(true);\r\n    }\r\n  };\r\n\r\n  // Filter templates based on search query\r\n  const filteredTemplates = useMemo(() => {\r\n    if (!searchQuery.trim()) {\r\n      return templates;\r\n    }\r\n    const query = searchQuery.toLowerCase().trim();\r\n    return templates.filter((template) => {\r\n      const nameMatch = template.name?.toLowerCase().includes(query);\r\n      const descriptionMatch = template.description?.toLowerCase().includes(query);\r\n      const categoryMatch = template.category?.toLowerCase().replace('_', ' ').includes(query);\r\n      const slugMatch = template.slug?.toLowerCase().includes(query);\r\n      return nameMatch || descriptionMatch || categoryMatch || slugMatch;\r\n    });\r\n  }, [templates, searchQuery]);\r\n\r\n  // Group templates by category\r\n  const templatesByCategory = useMemo(() => {\r\n    return filteredTemplates.reduce((acc, template) => {\r\n      const category = template.category;\r\n      if (!acc[category]) acc[category] = [];\r\n      acc[category].push(template);\r\n      return acc;\r\n    }, {} as Record<string, BlockTemplate[]>);\r\n  }, [filteredTemplates]);\r\n\r\n  // Get icon for category\r\n  const getCategoryIcon = (category: string) => {\r\n    const iconClass = \"h-3.5 w-3.5 text-gray-500\";\r\n    switch (category) {\r\n      case 'HERO':\r\n        return <Heading className={iconClass} />;\r\n      case 'CONTENT':\r\n        return <FileText className={iconClass} />;\r\n      case 'FEATURES':\r\n        return <Layers className={iconClass} />;\r\n      case 'CTA':\r\n        return <Mouse className={iconClass} />;\r\n      case 'SOCIAL_PROOF':\r\n        return <MessageSquare className={iconClass} />;\r\n      case 'PRICING':\r\n        return <ShoppingCart className={iconClass} />;\r\n      case 'TEAM':\r\n      case 'STATS':\r\n        return <Palette className={iconClass} />;\r\n      case 'FORM':\r\n        return <MessageSquare className={iconClass} />;\r\n      case 'FAQ':\r\n        return <MessageSquare className={iconClass} />;\r\n      case 'GALLERY':\r\n        return <Image className={iconClass} />;\r\n      case 'NAVIGATION':\r\n      case 'LAYOUT':\r\n        return <LayoutTemplate className={iconClass} />;\r\n      case 'PRODUCT':\r\n        return <ShoppingCart className={iconClass} />;\r\n      case 'BLOG':\r\n        return <Newspaper className={iconClass} />;\r\n      case 'MEDIA':\r\n        return <Video className={iconClass} />;\r\n      default:\r\n        return <Layers className={iconClass} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 lg:left-[70px] z-30 bg-background flex flex-col\">\r\n      {/* Header */}\r\n      <header className=\"h-16 border-b flex items-center justify-between px-4 sm:px-6 bg-white/95 backdrop-blur-sm shrink-0 z-20 shadow-sm\">\r\n        <div className=\"flex items-center gap-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Link\r\n              href=\"/admin/cms/pages\"\r\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors text-muted-foreground hover:text-foreground\"\r\n            >\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n            </Link>\r\n            <div className=\"flex flex-col\">\r\n              <h1 className=\"font-semibold text-base\">{pageData.title || pageTitle}</h1>\r\n              <span className=\"text-xs text-muted-foreground\">Page Editor</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"h-6 w-px bg-gray-200\" />\r\n\r\n          <DevicePreview device={device} onChange={setDevice} />\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2 sm:gap-3 flex-wrap\">\r\n          {/* Finder Button */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={finder.open}\r\n            className=\"gap-2\"\r\n            title=\"Open Finder (Ctrl+E)\"\r\n          >\r\n            <Command className=\"h-4 w-4\" />\r\n            <span className=\"hidden md:inline\">Finder</span>\r\n          </Button>\r\n\r\n          {/* History Button */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={historyPanel.open}\r\n            className=\"gap-2\"\r\n            title=\"Open History (Ctrl+H)\"\r\n          >\r\n            <History className=\"h-4 w-4\" />\r\n            <span className=\"hidden md:inline\">History</span>\r\n          </Button>\r\n\r\n          <div className=\"h-6 w-px bg-gray-200\" />\r\n\r\n          {/* Container buttons */}\r\n          {onAddContainerBlock && (\r\n            <>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onAddContainerBlock(ContainerType.SECTION)}\r\n                className=\"gap-2\"\r\n                title=\"Add Section Container\"\r\n              >\r\n                <Layers className=\"h-4 w-4\" />\r\n                <span className=\"hidden lg:inline\">Section</span>\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onAddContainerBlock(ContainerType.GRID)}\r\n                className=\"gap-2\"\r\n                title=\"Add Grid Container\"\r\n              >\r\n                <Grid3x3 className=\"h-4 w-4\" />\r\n                <span className=\"hidden lg:inline\">Grid</span>\r\n              </Button>\r\n              <div className=\"h-6 w-px bg-gray-200\" />\r\n            </>\r\n          )}\r\n\r\n          {/* Page Settings */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => {\r\n              if (isSettingsOpen && !selectedBlockId) {\r\n                setIsSettingsOpen(false);\r\n              } else {\r\n                onSelectBlock('');\r\n                setIsSettingsOpen(true);\r\n              }\r\n            }}\r\n            className={cn('gap-2', isSettingsOpen && !selectedBlockId && 'bg-accent')}\r\n            title=\"Page Settings\"\r\n          >\r\n            <Settings className=\"h-4 w-4\" />\r\n            <span className=\"hidden md:inline\">Page</span>\r\n          </Button>\r\n\r\n          <div className=\"h-6 w-px bg-gray-200\" />\r\n\r\n          {/* Undo/Redo */}\r\n          {onUndo && onRedo && (\r\n            <>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={onUndo}\r\n                disabled={!canUndo}\r\n                title=\"Undo (Ctrl+Z)\"\r\n                className=\"h-8 w-8\"\r\n              >\r\n                <Undo2 className={cn('h-4 w-4', !canUndo && 'opacity-40')} />\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={onRedo}\r\n                disabled={!canRedo}\r\n                title=\"Redo (Ctrl+Y)\"\r\n                className=\"h-8 w-8\"\r\n              >\r\n                <Redo2 className={cn('h-4 w-4', !canRedo && 'opacity-40')} />\r\n              </Button>\r\n              <div className=\"h-6 w-px bg-gray-200\" />\r\n            </>\r\n          )}\r\n\r\n          {/* Auto-save status */}\r\n          {autoSaveStatus !== 'idle' && (\r\n            <div\r\n              className={cn(\r\n                'flex items-center gap-2 text-xs px-2 sm:px-3 py-1.5 rounded-md',\r\n                autoSaveStatus === 'saving' && 'bg-blue-50 text-blue-700',\r\n                autoSaveStatus === 'saved' && 'bg-green-50 text-green-700',\r\n                autoSaveStatus === 'error' && 'bg-red-50 text-red-700'\r\n              )}\r\n            >\r\n              {autoSaveStatus === 'saving' && (\r\n                <>\r\n                  <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\r\n                  <span className=\"hidden sm:inline\">Saving...</span>\r\n                </>\r\n              )}\r\n              {autoSaveStatus === 'saved' && (\r\n                <>\r\n                  <CheckCircle2 className=\"h-3.5 w-3.5\" />\r\n                  <span className=\"hidden sm:inline\">Saved</span>\r\n                </>\r\n              )}\r\n              {autoSaveStatus === 'error' && (\r\n                <>\r\n                  <AlertCircle className=\"h-3.5 w-3.5\" />\r\n                  <span className=\"hidden sm:inline\">Error</span>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Preview */}\r\n          <Link href={`/en/landing/${pageSlug}`} target=\"_blank\">\r\n            <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n              <Eye className=\"h-4 w-4\" />\r\n              Preview\r\n            </Button>\r\n          </Link>\r\n\r\n          {/* Save */}\r\n          <Button\r\n            size=\"sm\"\r\n            onClick={onSave}\r\n            disabled={!isDirty || isSaving}\r\n            className=\"min-w-[100px]\"\r\n            title={!isDirty ? 'No changes' : 'Save (Ctrl+S)'}\r\n          >\r\n            {isSaving ? (\r\n              <>\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                Saving...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Save className=\"mr-2 h-4 w-4\" />\r\n                Save\r\n              </>\r\n            )}\r\n          </Button>\r\n\r\n          {/* Toggle settings panel */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={() => setIsSettingsOpen(!isSettingsOpen)}\r\n            title={isSettingsOpen ? 'Close settings' : 'Open settings'}\r\n          >\r\n            {isSettingsOpen ? <PanelRightClose className=\"h-5 w-5\" /> : <PanelRightOpen className=\"h-5 w-5\" />}\r\n          </Button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"flex-1 flex overflow-hidden relative min-h-0\">\r\n        {/* Left Sidebar - Navigator + Block Library */}\r\n        <div\r\n          className={cn(\r\n            'border-r flex flex-col bg-white shrink-0 shadow-sm transition-all duration-300 min-h-0',\r\n            isBlockLibraryOpen || isNavigatorOpen ? 'w-80' : 'w-0 border-r-0 overflow-hidden'\r\n          )}\r\n        >\r\n          {/* Navigator Panel */}\r\n          {isNavigatorOpen && (\r\n            <div className=\"h-1/2 border-b flex flex-col min-h-0\">\r\n              <Navigator\r\n                blocks={blocks}\r\n                selectedBlockId={selectedBlockId}\r\n                onSelectBlock={onSelectBlock}\r\n                onRemoveBlock={onRemoveBlock}\r\n                onDuplicateBlock={onDuplicateBlock}\r\n                onToggleVisibility={onToggleVisibility}\r\n                onReorderBlocks={onReorderBlocks}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Block Library */}\r\n          {isBlockLibraryOpen && (\r\n            <div className=\"flex-1 flex flex-col min-h-0 bg-white\">\r\n              <div className=\"p-3 border-b shrink-0\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"p-1.5 bg-primary/10 rounded\">\r\n                      <LayoutTemplate className=\"h-3.5 w-3.5 text-primary\" />\r\n                    </div>\r\n                    <h2 className=\"font-semibold text-sm\">Elements</h2>\r\n                  </div>\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    {filteredTemplates.length} items\r\n                  </span>\r\n                </div>\r\n                <div className=\"relative\">\r\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-400\" />\r\n                  <Input\r\n                    type=\"text\"\r\n                    placeholder=\"Search widgets...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"pl-9 h-8 text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <ScrollArea className=\"flex-1 min-h-0\">\r\n                <div className=\"p-3 space-y-4\">\r\n                  {Object.entries(templatesByCategory).length === 0 ? (\r\n                    <div className=\"text-center py-8 text-sm text-muted-foreground\">\r\n                      No widgets found\r\n                    </div>\r\n                  ) : (\r\n                    Object.entries(templatesByCategory).map(([category, categoryTemplates]) => (\r\n                      <div key={category}>\r\n                        <div className=\"flex items-center gap-2 mb-2 px-1\">\r\n                          {getCategoryIcon(category)}\r\n                          <h3 className=\"text-xs font-semibold text-gray-700 uppercase tracking-wide\">\r\n                            {category.replace('_', ' ')}\r\n                          </h3>\r\n                          <span className=\"text-xs text-gray-400\">\r\n                            ({categoryTemplates.length})\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-1.5\">\r\n                          {categoryTemplates.map((template) => (\r\n                            <SidebarBlock\r\n                              key={template.id}\r\n                              template={template}\r\n                              onAdd={() => {\r\n                                // Check if selected block is a container\r\n                                const selectedBlock = blocks.find(b => b.id === selectedBlockId);\r\n                                const isSelectedContainer = selectedBlock &&\r\n                                  (selectedBlock.containerType === 'SECTION' ||\r\n                                   selectedBlock.containerType === 'FLEXBOX' ||\r\n                                   selectedBlock.containerType === 'GRID');\r\n\r\n                                // If selected block is a container, add block to it\r\n                                if (isSelectedContainer) {\r\n                                  onAddBlock(template, selectedBlockId);\r\n                                } else {\r\n                                  onAddBlock(template);\r\n                                }\r\n                              }}\r\n                            />\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    ))\r\n                  )}\r\n                </div>\r\n              </ScrollArea>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Center - Canvas */}\r\n        <div className=\"flex-1 flex flex-col overflow-hidden bg-gradient-to-br from-gray-50 via-gray-100 to-gray-50\">\r\n          <ScrollArea className=\"flex-1 min-h-0\">\r\n            <div className={cn(\r\n              'min-h-full flex justify-center',\r\n              device === 'desktop' ? 'p-0' : 'py-6 px-4'\r\n            )}>\r\n              <NestedCanvas\r\n                blocks={blocks}\r\n                selectedBlockId={selectedBlockId}\r\n                hoveredBlockId={hoveredBlockId}\r\n                onSelectBlock={onSelectBlock}\r\n                onHoverBlock={onHoverBlock}\r\n                onToggleBlockSettings={handleBlockSelect}\r\n                onRemoveBlock={onRemoveBlock}\r\n                onReorderBlocks={onReorderBlocks}\r\n                onMoveBlock={onMoveBlock}\r\n                onDuplicateBlock={onDuplicateBlock}\r\n                onToggleVisibility={onToggleVisibility}\r\n                onAddBlockToContainer={(containerId) => {\r\n                  // Select the container\r\n                  onSelectBlock(containerId);\r\n                  // Open block library if closed\r\n                  if (!isBlockLibraryOpen) {\r\n                    setIsBlockLibraryOpen(true);\r\n                  }\r\n                }}\r\n                device={device}\r\n              />\r\n            </div>\r\n          </ScrollArea>\r\n        </div>\r\n\r\n        {/* Right Sidebar - Settings */}\r\n        <div\r\n          className={cn(\r\n            'w-96 border-l flex flex-col bg-white shrink-0 transition-all duration-300 min-h-0',\r\n            !isSettingsOpen && 'w-0 border-l-0 overflow-hidden'\r\n          )}\r\n        >\r\n          <div className=\"p-4 border-b flex items-center justify-between shrink-0\">\r\n            <h2 className=\"font-semibold text-sm\">\r\n              {selectedBlock ? selectedBlock.template?.name || 'Block' : 'Page Settings'}\r\n            </h2>\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={() => setIsSettingsOpen(false)} className=\"h-8 w-8\">\r\n              <X className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n          {isSettingsOpen && (\r\n            <div className=\"flex-1 min-h-0\">\r\n              {selectedBlock ? (\r\n                <SettingsTabs\r\n                  block={selectedBlock}\r\n                  onUpdateConfig={(tab, config) => onUpdateBlockConfig(selectedBlock.id, tab, config)}\r\n                />\r\n              ) : (\r\n                <ScrollArea className=\"h-full\">\r\n                  <div className=\"p-4\">\r\n                    <PageSettingsForm pageData={pageData} onChange={onUpdatePageData} />\r\n                  </div>\r\n                </ScrollArea>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Finder Dialog */}\r\n      <Finder\r\n        isOpen={finder.isOpen}\r\n        onClose={finder.close}\r\n        blockTemplates={templates}\r\n        onAddBlock={onAddBlock}\r\n      />\r\n\r\n      {/* History Panel */}\r\n      <HistoryPanel\r\n        isOpen={historyPanel.isOpen}\r\n        onClose={historyPanel.close}\r\n        history={history}\r\n        currentIndex={historyIndex}\r\n        onRestoreToIndex={onRestoreHistory || (() => {})}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},{"offset":{"line":9219,"column":0},"url":null,"map":{"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/cms/editor/PageEditor.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { EnhancedEditorLayout } from './EnhancedEditorLayout';\nimport { useEnhancedPageEditor } from '@/hooks/useEnhancedPageEditor';\nimport { normalizeBlockConfig } from '@/lib/normalizeBlockConfig';\nimport { EditorBlock, ContainerType } from '@/types/editor';\nimport { splitConfigIntoTabs } from '@/lib/editor-utils';\n\ninterface PageEditorProps {\n    page: {\n        id: string;\n        title: string;\n        slug: string;\n        blocks: any[];\n        overridesStorefrontPage?: boolean;\n        overriddenPageType?: string | null;\n        description?: string;\n        seoTitle?: string;\n        seoDescription?: string;\n        seoKeywords?: string;\n        status?: string;\n    };\n    templates: any[];\n}\n\nexport const PageEditor: React.FC<PageEditorProps> = ({\n    page,\n    templates\n}) => {\n    // Transform initial blocks to match new EditorBlock interface\n    const initialBlocks: EditorBlock[] = page.blocks.map(block => {\n        // Normalize config to ensure repeater fields are arrays\n        const normalizedConfig = block.template?.configSchema\n            ? normalizeBlockConfig(block.config || {}, block.template.configSchema)\n            : (block.config || {});\n\n        // If block has new structure, use it; otherwise split old config\n        let contentConfig, styleConfig, advancedConfig;\n\n        if (block.contentConfig) {\n            // Block already has new structure\n            contentConfig = block.contentConfig;\n            styleConfig = block.styleConfig || {};\n            advancedConfig = block.advancedConfig || {};\n        } else {\n            // Migrate from old config structure\n            const split = splitConfigIntoTabs(normalizedConfig, block.template?.configSchema);\n            contentConfig = split.contentConfig;\n            styleConfig = split.styleConfig;\n            advancedConfig = split.advancedConfig;\n        }\n\n        return {\n            id: block.id,\n            templateId: block.templateId,\n            containerType: block.containerType || ContainerType.BLOCK,\n            parentId: block.parentId || null,\n            contentConfig,\n            styleConfig,\n            advancedConfig,\n            layoutSettings: block.layoutSettings || undefined,\n            config: normalizedConfig, // Keep for backwards compatibility\n            order: block.order,\n            isVisible: block.isVisible !== false,\n            template: block.template\n        };\n    });\n\n    const editor = useEnhancedPageEditor({\n        pageId: page.id,\n        initialBlocks,\n        initialPageData: {\n            id: page.id,\n            title: page.title,\n            slug: page.slug,\n            description: page.description,\n            seoTitle: page.seoTitle,\n            seoDescription: page.seoDescription,\n            seoKeywords: page.seoKeywords,\n            status: page.status as any,\n            useBlockEditor: true,\n            overridesStorefrontPage: page.overridesStorefrontPage ?? false,\n            overriddenPageType: page.overriddenPageType || null,\n        },\n        templates: templates,\n        autoSaveEnabled: true,\n        autoSaveDelay: 2000,\n    });\n\n    return (\n        <EnhancedEditorLayout\n            pageTitle={editor.pageData.title || page.title}\n            pageId={page.id}\n            pageSlug={editor.pageData.slug || page.slug}\n            pageData={{\n                ...editor.pageData,\n                overridesStorefrontPage: editor.pageData.overridesStorefrontPage ?? page.overridesStorefrontPage ?? false,\n                overriddenPageType: editor.pageData.overriddenPageType ?? page.overriddenPageType ?? null,\n            }}\n            blocks={editor.blocks}\n            templates={templates}\n            selectedBlockId={editor.selectedBlockId}\n            hoveredBlockId={editor.hoveredBlockId}\n            deviceMode={editor.deviceMode}\n            isSaving={editor.isSaving}\n            isDirty={editor.isDirty}\n            autoSaveStatus={editor.autoSaveStatus}\n            canUndo={editor.canUndo}\n            canRedo={editor.canRedo}\n            clipboard={editor.clipboard}\n\n            // Block operations\n            onAddBlock={editor.addBlock}\n            onAddContainerBlock={editor.addContainerBlock}\n            onSelectBlock={editor.setSelectedBlockId}\n            onHoverBlock={editor.setHoveredBlockId}\n            onRemoveBlock={editor.removeBlock}\n            onReorderBlocks={editor.reorderBlocks}\n            onMoveBlock={editor.moveBlock}\n            onUpdateBlockConfig={editor.updateBlockConfig}\n            onDuplicateBlock={editor.duplicateBlock}\n            onToggleVisibility={editor.toggleBlockVisibility}\n\n            // Clipboard operations\n            onCopyBlock={editor.copyBlock}\n            onPasteBlock={editor.pasteBlock}\n            onCopyStyle={editor.copyStyle}\n            onPasteStyle={editor.pasteStyle}\n\n            // Page operations\n            onUpdatePageData={editor.updatePageData}\n            onSave={() => editor.savePage(false)}\n            onUndo={editor.undo}\n            onRedo={editor.redo}\n\n            // Device mode\n            onSetDeviceMode={editor.setDeviceMode}\n        />\n    );\n};\n"],"names":[],"mappings":"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"}}],"debugId":"11fd739e-29fe-5785-97a7-b6d3119e67d9"}