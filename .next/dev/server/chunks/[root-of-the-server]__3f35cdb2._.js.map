{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/app/api/blog/posts/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/prisma';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const searchParams = request.nextUrl.searchParams;\r\n    const idsParam = searchParams.get('ids');\r\n    const statusParam = searchParams.get('status');\r\n    const categoryParam = searchParams.get('category');\r\n    const latestParam = searchParams.get('latest');\r\n    const sortParam = searchParams.get('sort') || 'newest';\r\n    const limitParam = searchParams.get('limit');\r\n    const limit = limitParam ? parseInt(limitParam, 10) : undefined;\r\n\r\n    // If ids parameter is provided, fetch specific posts\r\n    if (idsParam) {\r\n      const ids = idsParam.split(',').filter(id => id.trim());\r\n      if (ids.length > 0) {\r\n        const posts = await prisma.blogPost.findMany({\r\n          where: {\r\n            id: { in: ids },\r\n            ...(statusParam ? { status: statusParam as any } : {}),\r\n          },\r\n          include: {\r\n            author: {\r\n              select: { name: true },\r\n            },\r\n            category: true,\r\n            tags: true,\r\n          },\r\n          orderBy: {\r\n            createdAt: 'desc',\r\n          },\r\n        });\r\n\r\n        return NextResponse.json(posts);\r\n      }\r\n    }\r\n\r\n    // Build where clause\r\n    const where: any = {};\r\n    if (statusParam) {\r\n      where.status = statusParam;\r\n    }\r\n    if (categoryParam) {\r\n      where.category = { slug: categoryParam };\r\n    }\r\n    if (latestParam === 'true') {\r\n      where.publishedAt = { not: null };\r\n    }\r\n\r\n    // Build orderBy clause\r\n    let orderBy: any = { publishedAt: 'desc' };\r\n    if (sortParam === 'oldest') {\r\n      orderBy = { publishedAt: 'asc' };\r\n    } else if (sortParam === 'title') {\r\n      orderBy = { title: 'asc' };\r\n    }\r\n\r\n    // Fetch posts\r\n    const posts = await prisma.blogPost.findMany({\r\n      where,\r\n      include: {\r\n        author: {\r\n          select: { name: true },\r\n        },\r\n        category: true,\r\n        tags: true,\r\n      },\r\n      orderBy,\r\n      take: limit,\r\n    });\r\n\r\n    return NextResponse.json(posts);\r\n  } catch (error) {\r\n    console.error('Error fetching blog posts:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch blog posts' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,WAAW,aAAa,GAAG,CAAC;QAClC,MAAM,cAAc,aAAa,GAAG,CAAC;QACrC,MAAM,gBAAgB,aAAa,GAAG,CAAC;QACvC,MAAM,cAAc,aAAa,GAAG,CAAC;QACrC,MAAM,YAAY,aAAa,GAAG,CAAC,WAAW;QAC9C,MAAM,aAAa,aAAa,GAAG,CAAC;QACpC,MAAM,QAAQ,aAAa,SAAS,YAAY,MAAM;QAEtD,qDAAqD;QACrD,IAAI,UAAU;YACZ,MAAM,MAAM,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC,CAAA,KAAM,GAAG,IAAI;YACpD,IAAI,IAAI,MAAM,GAAG,GAAG;gBAClB,MAAM,QAAQ,MAAM,gIAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;oBAC3C,OAAO;wBACL,IAAI;4BAAE,IAAI;wBAAI;wBACd,GAAI,cAAc;4BAAE,QAAQ;wBAAmB,IAAI,CAAC,CAAC;oBACvD;oBACA,SAAS;wBACP,QAAQ;4BACN,QAAQ;gCAAE,MAAM;4BAAK;wBACvB;wBACA,UAAU;wBACV,MAAM;oBACR;oBACA,SAAS;wBACP,WAAW;oBACb;gBACF;gBAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAC3B;QACF;QAEA,qBAAqB;QACrB,MAAM,QAAa,CAAC;QACpB,IAAI,aAAa;YACf,MAAM,MAAM,GAAG;QACjB;QACA,IAAI,eAAe;YACjB,MAAM,QAAQ,GAAG;gBAAE,MAAM;YAAc;QACzC;QACA,IAAI,gBAAgB,QAAQ;YAC1B,MAAM,WAAW,GAAG;gBAAE,KAAK;YAAK;QAClC;QAEA,uBAAuB;QACvB,IAAI,UAAe;YAAE,aAAa;QAAO;QACzC,IAAI,cAAc,UAAU;YAC1B,UAAU;gBAAE,aAAa;YAAM;QACjC,OAAO,IAAI,cAAc,SAAS;YAChC,UAAU;gBAAE,OAAO;YAAM;QAC3B;QAEA,cAAc;QACd,MAAM,QAAQ,MAAM,gIAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;YAC3C;YACA,SAAS;gBACP,QAAQ;oBACN,QAAQ;wBAAE,MAAM;oBAAK;gBACvB;gBACA,UAAU;gBACV,MAAM;YACR;YACA;YACA,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}