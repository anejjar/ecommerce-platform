{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,2EACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,oZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/ui/table.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        \"text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        \"p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,8OAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,8OAAC;YACC,aAAU;YACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,sJACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/admin/OrderNotes.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Trash2, MessageSquare } from 'lucide-react';\n\ninterface OrderNote {\n  id: string;\n  note: string;\n  isInternal: boolean;\n  createdAt: Date;\n  user: {\n    name: string | null;\n    email: string;\n  };\n}\n\ninterface OrderNotesProps {\n  orderId: string;\n}\n\nexport function OrderNotes({ orderId }: OrderNotesProps) {\n  const [notes, setNotes] = useState<OrderNote[]>([]);\n  const [newNote, setNewNote] = useState('');\n  const [isInternal, setIsInternal] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    fetchNotes();\n  }, [orderId]);\n\n  const fetchNotes = async () => {\n    try {\n      const response = await fetch(`/api/orders/${orderId}/notes`);\n      if (response.ok) {\n        const data = await response.json();\n        setNotes(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch notes');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAddNote = async () => {\n    if (!newNote.trim()) return;\n\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(`/api/orders/${orderId}/notes`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          note: newNote,\n          isInternal,\n        }),\n      });\n\n      if (response.ok) {\n        const note = await response.json();\n        setNotes([note, ...notes]);\n        setNewNote('');\n      } else {\n        alert('Failed to add note');\n      }\n    } catch (error) {\n      alert('An error occurred');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleDeleteNote = async (noteId: string) => {\n    if (!confirm('Are you sure you want to delete this note?')) return;\n\n    try {\n      const response = await fetch(`/api/orders/notes/${noteId}`, {\n        method: 'DELETE',\n      });\n\n      if (response.ok) {\n        setNotes(notes.filter((note) => note.id !== noteId));\n      } else {\n        alert('Failed to delete note');\n      }\n    } catch (error) {\n      alert('An error occurred');\n    }\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <MessageSquare className=\"w-5 h-5\" />\n          Order Notes\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Add Note Form */}\n        <div className=\"space-y-3 p-4 bg-gray-50 rounded-lg\">\n          <textarea\n            value={newNote}\n            onChange={(e) => setNewNote(e.target.value)}\n            placeholder=\"Add a note about this order...\"\n            className=\"w-full px-3 py-2 border rounded-md min-h-[80px] resize-y\"\n            disabled={isSubmitting}\n          />\n          <div className=\"flex items-center justify-between\">\n            <label className=\"flex items-center gap-2 text-sm\">\n              <input\n                type=\"checkbox\"\n                checked={isInternal}\n                onChange={(e) => setIsInternal(e.target.checked)}\n                disabled={isSubmitting}\n              />\n              <span>Internal note (not visible to customer)</span>\n            </label>\n            <Button\n              onClick={handleAddNote}\n              disabled={isSubmitting || !newNote.trim()}\n            >\n              {isSubmitting ? 'Adding...' : 'Add Note'}\n            </Button>\n          </div>\n        </div>\n\n        {/* Notes List */}\n        <div className=\"space-y-3\">\n          {isLoading ? (\n            <p className=\"text-gray-500 text-center py-4\">Loading notes...</p>\n          ) : notes.length === 0 ? (\n            <p className=\"text-gray-500 text-center py-4\">No notes yet</p>\n          ) : (\n            notes.map((note) => (\n              <div\n                key={note.id}\n                className={`p-4 rounded-lg border ${\n                  note.isInternal\n                    ? 'bg-blue-50 border-blue-200'\n                    : 'bg-white border-gray-200'\n                }`}\n              >\n                <div className=\"flex items-start justify-between gap-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <span className=\"font-medium text-sm\">\n                        {note.user.name || note.user.email}\n                      </span>\n                      {note.isInternal && (\n                        <span className=\"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded\">\n                          Internal\n                        </span>\n                      )}\n                      <span className=\"text-xs text-gray-500\">\n                        {new Date(note.createdAt).toLocaleString()}\n                      </span>\n                    </div>\n                    <p className=\"text-gray-700 whitespace-pre-wrap\">{note.note}</p>\n                  </div>\n                  <button\n                    onClick={() => handleDeleteNote(note.id)}\n                    className=\"text-red-600 hover:text-red-800 p-1\"\n                    title=\"Delete note\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/formatting.ts"],"sourcesContent":["/**\r\n * Localized formatting utilities for currency, dates, and numbers\r\n */\r\n\r\n/**\r\n * Format currency based on locale\r\n */\r\nexport function formatCurrency(\r\n  amount: number | string,\r\n  locale: string = 'en',\r\n  currency: string = 'USD'\r\n): string {\r\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\r\n\r\n  try {\r\n    return new Intl.NumberFormat(locale, {\r\n      style: 'currency',\r\n      currency,\r\n    }).format(numAmount);\r\n  } catch (error) {\r\n    // Fallback to USD if currency not supported\r\n    return new Intl.NumberFormat(locale, {\r\n      style: 'currency',\r\n      currency: 'USD',\r\n    }).format(numAmount);\r\n  }\r\n}\r\n\r\n/**\r\n * Format date based on locale\r\n */\r\nexport function formatDate(\r\n  date: Date | string,\r\n  locale: string = 'en',\r\n  options?: Intl.DateTimeFormatOptions\r\n): string {\r\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n\r\n  const defaultOptions: Intl.DateTimeFormatOptions = {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    ...options,\r\n  };\r\n\r\n  return new Intl.DateTimeFormat(locale, defaultOptions).format(dateObj);\r\n}\r\n\r\n/**\r\n * Format date and time based on locale\r\n */\r\nexport function formatDateTime(\r\n  date: Date | string,\r\n  locale: string = 'en',\r\n  options?: Intl.DateTimeFormatOptions\r\n): string {\r\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n\r\n  const defaultOptions: Intl.DateTimeFormatOptions = {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    ...options,\r\n  };\r\n\r\n  return new Intl.DateTimeFormat(locale, defaultOptions).format(dateObj);\r\n}\r\n\r\n/**\r\n * Format number based on locale\r\n */\r\nexport function formatNumber(\r\n  number: number | string,\r\n  locale: string = 'en',\r\n  options?: Intl.NumberFormatOptions\r\n): string {\r\n  const num = typeof number === 'string' ? parseFloat(number) : number;\r\n\r\n  return new Intl.NumberFormat(locale, options).format(num);\r\n}\r\n\r\n/**\r\n * Format percentage based on locale\r\n */\r\nexport function formatPercentage(\r\n  value: number | string,\r\n  locale: string = 'en',\r\n  decimals: number = 0\r\n): string {\r\n  const num = typeof value === 'string' ? parseFloat(value) : value;\r\n\r\n  return new Intl.NumberFormat(locale, {\r\n    style: 'percent',\r\n    minimumFractionDigits: decimals,\r\n    maximumFractionDigits: decimals,\r\n  }).format(num / 100);\r\n}\r\n\r\n/**\r\n * Format relative time (e.g., \"2 days ago\", \"in 3 hours\")\r\n */\r\nexport function formatRelativeTime(\r\n  date: Date | string,\r\n  locale: string = 'en'\r\n): string {\r\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\r\n  const now = new Date();\r\n  const diffInSeconds = Math.floor((now.getTime() - dateObj.getTime()) / 1000);\r\n\r\n  const rtf = new Intl.RelativeTimeFormat(locale, { numeric: 'auto' });\r\n\r\n  const intervals: { unit: Intl.RelativeTimeFormatUnit; seconds: number }[] = [\r\n    { unit: 'year', seconds: 31536000 },\r\n    { unit: 'month', seconds: 2592000 },\r\n    { unit: 'week', seconds: 604800 },\r\n    { unit: 'day', seconds: 86400 },\r\n    { unit: 'hour', seconds: 3600 },\r\n    { unit: 'minute', seconds: 60 },\r\n    { unit: 'second', seconds: 1 },\r\n  ];\r\n\r\n  for (const interval of intervals) {\r\n    const count = Math.floor(Math.abs(diffInSeconds) / interval.seconds);\r\n    if (count >= 1) {\r\n      return rtf.format(diffInSeconds > 0 ? -count : count, interval.unit);\r\n    }\r\n  }\r\n\r\n  return rtf.format(0, 'second');\r\n}\r\n\r\n/**\r\n * Format file size with locale-specific number formatting\r\n */\r\nexport function formatFileSize(\r\n  bytes: number,\r\n  locale: string = 'en',\r\n  decimals: number = 2\r\n): string {\r\n  if (bytes === 0) return '0 Bytes';\r\n\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n  const value = bytes / Math.pow(k, i);\r\n  const formatted = formatNumber(value, locale, {\r\n    minimumFractionDigits: decimals,\r\n    maximumFractionDigits: decimals,\r\n  });\r\n\r\n  return `${formatted} ${sizes[i]}`;\r\n}\r\n\r\n/**\r\n * Get locale-specific currency symbol\r\n */\r\nexport function getCurrencySymbol(locale: string = 'en', currency: string = 'USD'): string {\r\n  const formatted = new Intl.NumberFormat(locale, {\r\n    style: 'currency',\r\n    currency,\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  }).format(0);\r\n\r\n  // Extract symbol by removing the number\r\n  return formatted.replace(/\\d/g, '').trim();\r\n}\r\n\r\n/**\r\n * Format currency amount with custom symbol\r\n * This is used when you want to use the currency symbol from settings\r\n */\r\nexport function formatCurrencyWithSymbol(\r\n  amount: number | string,\r\n  symbol: string = '$',\r\n  locale: string = 'en-US'\r\n): string {\r\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\r\n  \r\n  if (isNaN(numAmount)) {\r\n    return `${symbol}0.00`;\r\n  }\r\n\r\n  // Format the number with locale-specific formatting\r\n  const formatted = new Intl.NumberFormat(locale, {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  }).format(numAmount);\r\n\r\n  return `${symbol}${formatted}`;\r\n}\r\n\r\n/**\r\n * Format currency amount with custom symbol (no decimals)\r\n */\r\nexport function formatCurrencyWithSymbolNoDecimals(\r\n  amount: number | string,\r\n  symbol: string = '$',\r\n  locale: string = 'en-US'\r\n): string {\r\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\r\n  \r\n  if (isNaN(numAmount)) {\r\n    return `${symbol}0`;\r\n  }\r\n\r\n  // Format the number with locale-specific formatting\r\n  const formatted = new Intl.NumberFormat(locale, {\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  }).format(numAmount);\r\n\r\n  return `${symbol}${formatted}`;\r\n}\r\n\r\n/**\r\n * Format list of items based on locale\r\n */\r\nexport function formatList(\r\n  items: string[],\r\n  locale: string = 'en',\r\n  type: 'conjunction' | 'disjunction' = 'conjunction'\r\n): string {\r\n  if (items.length === 0) return '';\r\n  if (items.length === 1) return items[0];\r\n\r\n  const formatter = new Intl.ListFormat(locale, {\r\n    style: 'long',\r\n    type,\r\n  });\r\n\r\n  return formatter.format(items);\r\n}\r\n\r\n/**\r\n * Format compact number (e.g., 1K, 1M)\r\n */\r\nexport function formatCompactNumber(\r\n  number: number | string,\r\n  locale: string = 'en'\r\n): string {\r\n  const num = typeof number === 'string' ? parseFloat(number) : number;\r\n\r\n  return new Intl.NumberFormat(locale, {\r\n    notation: 'compact',\r\n    compactDisplay: 'short',\r\n  }).format(num);\r\n}\r\n\r\n/**\r\n * Locale configuration for specific locales\r\n */\r\nexport const localeConfigs = {\r\n  en: {\r\n    currency: 'USD',\r\n    dateFormat: 'MM/DD/YYYY',\r\n    timeFormat: '12h',\r\n  },\r\n  fr: {\r\n    currency: 'EUR',\r\n    dateFormat: 'DD/MM/YYYY',\r\n    timeFormat: '24h',\r\n  },\r\n} as const;\r\n\r\n/**\r\n * Get locale configuration\r\n */\r\nexport function getLocaleConfig(locale: string) {\r\n  return localeConfigs[locale as keyof typeof localeConfigs] || localeConfigs.en;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 806, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/invoice-generator.ts"],"sourcesContent":["import jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\nimport { formatCurrencyWithSymbol } from './formatting';\r\nimport { Invoice, InvoiceSettings, InvoiceTemplate } from '@/types/invoice';\r\n\r\n// Define types based on the Prisma schema and what we expect to be passed\r\ninterface Address {\r\n    firstName: string;\r\n    lastName: string;\r\n    company?: string | null;\r\n    address1: string;\r\n    address2?: string | null;\r\n    city: string;\r\n    state?: string | null;\r\n    postalCode: string;\r\n    country: string;\r\n    phone?: string | null;\r\n}\r\n\r\ninterface OrderItem {\r\n    quantity: number;\r\n    price: number | string; // Can be Decimal or number\r\n    total: number | string;\r\n    product: {\r\n        name: string;\r\n        sku?: string | null;\r\n    };\r\n    variant?: {\r\n        sku?: string | null;\r\n        optionValues?: string; // JSON string\r\n    } | null;\r\n}\r\n\r\ninterface Order {\r\n    id: string;\r\n    orderNumber: string;\r\n    createdAt: Date | string;\r\n    status: string;\r\n    subtotal: number | string;\r\n    tax: number | string;\r\n    shipping: number | string;\r\n    total: number | string;\r\n    discountAmount?: number | string;\r\n    items: OrderItem[];\r\n    shippingAddress?: Address | null;\r\n    billingAddress?: Address | null;\r\n    user?: {\r\n        email: string;\r\n        firstName?: string | null;\r\n        lastName?: string | null;\r\n    } | null;\r\n}\r\n\r\n// Helper function to get currency symbol from settings\r\nconst getCurrencySymbol = async (): Promise<string> => {\r\n    try {\r\n        const response = await fetch('/api/settings?category=general');\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            return data.general_currency_symbol || '$';\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching currency symbol:', error);\r\n    }\r\n    return '$';\r\n};\r\n\r\n// Helper function to format currency with symbol from settings\r\nconst formatCurrency = async (amount: number | string, symbol: string): Promise<string> => {\r\n    return formatCurrencyWithSymbol(amount, symbol);\r\n};\r\n\r\n// Helper function to format date\r\nconst formatDate = (date: Date | string): string => {\r\n    const d = typeof date === 'string' ? new Date(date) : date;\r\n    return d.toLocaleDateString('en-US', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n    });\r\n};\r\n\r\n// Helper function to format address\r\nconst formatAddress = (address: Address | null | undefined): string => {\r\n    if (!address) return 'N/A';\r\n\r\n    const lines = [\r\n        `${address.firstName} ${address.lastName}`,\r\n        address.company || '',\r\n        address.address1,\r\n        address.address2 || '',\r\n        `${address.city}, ${address.state || ''} ${address.postalCode}`,\r\n        address.country,\r\n        address.phone || ''\r\n    ].filter(line => line.trim() !== '');\r\n\r\n    return lines.join('\\n');\r\n};\r\n\r\nexport const generateInvoice = async (order: Order) => {\r\n    const doc = new jsPDF();\r\n    const currencySymbol = await getCurrencySymbol();\r\n\r\n    // Header\r\n    doc.setFontSize(24);\r\n    doc.text('INVOICE', 105, 20, { align: 'center' });\r\n\r\n    // Order info\r\n    doc.setFontSize(12);\r\n    doc.text(`Order Number: ${order.orderNumber}`, 20, 40);\r\n    doc.text(`Date: ${formatDate(order.createdAt)}`, 20, 47);\r\n    doc.text(`Status: ${order.status}`, 20, 54);\r\n\r\n    // Customer info\r\n    doc.setFontSize(10);\r\n    doc.text('Bill To:', 20, 70);\r\n    const billingText = formatAddress(order.billingAddress);\r\n    doc.text(billingText, 20, 77);\r\n\r\n    doc.text('Ship To:', 110, 70);\r\n    const shippingText = formatAddress(order.shippingAddress);\r\n    doc.text(shippingText, 110, 77);\r\n\r\n    // Items table\r\n    const tableData = await Promise.all(order.items.map(async item => [\r\n        item.product.name,\r\n        item.product.sku || item.variant?.sku || '-',\r\n        item.quantity.toString(),\r\n        await formatCurrency(item.price, currencySymbol),\r\n        await formatCurrency(item.total, currencySymbol)\r\n    ]));\r\n\r\n    autoTable(doc, {\r\n        startY: 120,\r\n        head: [['Product', 'SKU', 'Qty', 'Price', 'Total']],\r\n        body: tableData,\r\n        theme: 'striped',\r\n        headStyles: { fillColor: [66, 66, 66] }\r\n    });\r\n\r\n    // Totals\r\n    const finalY = (doc as any).lastAutoTable.finalY || 120;\r\n    doc.text(`Subtotal: ${await formatCurrency(order.subtotal, currencySymbol)}`, 150, finalY + 10);\r\n    doc.text(`Tax: ${await formatCurrency(order.tax, currencySymbol)}`, 150, finalY + 17);\r\n    doc.text(`Shipping: ${await formatCurrency(order.shipping, currencySymbol)}`, 150, finalY + 24);\r\n    if (order.discountAmount) {\r\n        doc.text(`Discount: -${await formatCurrency(order.discountAmount, currencySymbol)}`, 150, finalY + 31);\r\n    }\r\n    doc.setFontSize(14);\r\n    doc.text(`Total: ${await formatCurrency(order.total, currencySymbol)}`, 150, finalY + (order.discountAmount ? 41 : 34));\r\n\r\n    // Footer\r\n    doc.setFontSize(10);\r\n    doc.text('Thank you for your business!', 105, 280, { align: 'center' });\r\n\r\n    doc.save(`Invoice-${order.orderNumber}.pdf`);\r\n};\r\n\r\nexport const generatePackingSlip = async (order: Order) => {\r\n    const doc = new jsPDF();\r\n\r\n    // Header\r\n    doc.setFontSize(24);\r\n    doc.text('PACKING SLIP', 105, 20, { align: 'center' });\r\n\r\n    // Order info\r\n    doc.setFontSize(12);\r\n    doc.text(`Order Number: ${order.orderNumber}`, 20, 40);\r\n    doc.text(`Date: ${formatDate(order.createdAt)}`, 20, 47);\r\n\r\n    // Shipping address\r\n    doc.setFontSize(10);\r\n    doc.text('Ship To:', 20, 65);\r\n    const shippingText = formatAddress(order.shippingAddress);\r\n    doc.text(shippingText, 20, 72);\r\n\r\n    // Items table\r\n    const tableData = order.items.map(item => [\r\n        item.product.name,\r\n        item.product.sku || item.variant?.sku || '-',\r\n        item.quantity.toString(),\r\n        '[ ]' // Checkbox for picked items\r\n    ]);\r\n\r\n    autoTable(doc, {\r\n        startY: 110,\r\n        head: [['Product', 'SKU', 'Quantity', 'Picked']],\r\n        body: tableData,\r\n        theme: 'grid',\r\n        headStyles: { fillColor: [66, 66, 66] }\r\n    });\r\n\r\n    // Footer\r\n    doc.setFontSize(10);\r\n    doc.text('Please check contents against this slip.', 105, 280, { align: 'center' });\r\n\r\n    doc.save(`PackingSlip-${order.orderNumber}.pdf`);\r\n};\r\n\r\n// Enhanced invoice generation for premium invoice system\r\nexport const generateInvoicePDF = async (\r\n    invoice: Invoice,\r\n    template?: InvoiceTemplate | null,\r\n    settings?: InvoiceSettings | null\r\n): Promise<Buffer> => {\r\n    const doc = new jsPDF();\r\n    \r\n    // Get settings defaults\r\n    const primaryColor = settings?.primaryColor || '#000000';\r\n    const secondaryColor = settings?.secondaryColor || '#666666';\r\n    const accentColor = settings?.accentColor || '#3182ce';\r\n    const fontFamily = settings?.fontFamily || 'Helvetica';\r\n    const fontSize = settings?.fontSize || 10;\r\n    const currencySymbol = invoice.currencySymbol || settings?.currencySymbol || '$';\r\n    \r\n    // Parse colors\r\n    const parseColor = (color: string): [number, number, number] => {\r\n        const hex = color.replace('#', '');\r\n        const r = parseInt(hex.substring(0, 2), 16);\r\n        const g = parseInt(hex.substring(2, 4), 16);\r\n        const b = parseInt(hex.substring(4, 6), 16);\r\n        return [r, g, b];\r\n    };\r\n    \r\n    const primaryRGB = parseColor(primaryColor);\r\n    const accentRGB = parseColor(accentColor);\r\n    \r\n    // Set font\r\n    doc.setFont(fontFamily);\r\n    doc.setFontSize(fontSize);\r\n    \r\n    let yPos = 20;\r\n    \r\n    // Header with logo\r\n    if (settings?.logoUrl) {\r\n        try {\r\n            // Note: jsPDF doesn't directly support images from URLs in server-side\r\n            // In production, you'd need to fetch and convert the image\r\n            // For now, we'll just add space for the logo\r\n            yPos += 20;\r\n        } catch (error) {\r\n            console.error('Error loading logo:', error);\r\n        }\r\n    }\r\n    \r\n    // Company information\r\n    if (settings?.companyName) {\r\n        doc.setFontSize(18);\r\n        doc.setTextColor(...primaryRGB);\r\n        doc.text(settings.companyName, 20, yPos);\r\n        yPos += 8;\r\n    }\r\n    \r\n    if (settings?.companyAddress) {\r\n        doc.setFontSize(fontSize);\r\n        doc.setTextColor(0, 0, 0);\r\n        const addressLines = settings.companyAddress.split('\\n');\r\n        addressLines.forEach((line: string) => {\r\n            if (line.trim()) {\r\n                doc.text(line, 20, yPos);\r\n                yPos += 5;\r\n            }\r\n        });\r\n    }\r\n    \r\n    if (settings?.companyPhone || settings?.companyEmail || settings?.companyWebsite) {\r\n        yPos += 2;\r\n        if (settings.companyPhone) {\r\n            doc.text(`Phone: ${settings.companyPhone}`, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n        if (settings.companyEmail) {\r\n            doc.text(`Email: ${settings.companyEmail}`, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n        if (settings.companyWebsite) {\r\n            doc.text(`Website: ${settings.companyWebsite}`, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n    }\r\n    \r\n    // Invoice title and number\r\n    yPos = 20;\r\n    doc.setFontSize(24);\r\n    doc.setTextColor(...primaryRGB);\r\n    doc.text('INVOICE', 150, yPos, { align: 'right' });\r\n    \r\n    yPos += 10;\r\n    doc.setFontSize(12);\r\n    doc.setTextColor(0, 0, 0);\r\n    doc.text(`Invoice #: ${invoice.invoiceNumber}`, 150, yPos, { align: 'right' });\r\n    \r\n    yPos += 6;\r\n    doc.text(`Date: ${formatDate(invoice.invoiceDate)}`, 150, yPos, { align: 'right' });\r\n    \r\n    if (invoice.dueDate) {\r\n        yPos += 6;\r\n        doc.text(`Due Date: ${formatDate(invoice.dueDate)}`, 150, yPos, { align: 'right' });\r\n    }\r\n    \r\n    yPos += 6;\r\n    doc.text(`Status: ${invoice.status}`, 150, yPos, { align: 'right' });\r\n    \r\n    // Customer information\r\n    yPos = Math.max(yPos + 10, 80);\r\n    doc.setFontSize(12);\r\n    doc.setTextColor(...primaryRGB);\r\n    doc.text('Bill To:', 20, yPos);\r\n    \r\n    yPos += 7;\r\n    doc.setFontSize(fontSize);\r\n    doc.setTextColor(0, 0, 0);\r\n    \r\n    if (invoice.customerName) {\r\n        doc.text(invoice.customerName, 20, yPos);\r\n        yPos += 5;\r\n    }\r\n    \r\n    if (invoice.customerCompany) {\r\n        doc.text(invoice.customerCompany, 20, yPos);\r\n        yPos += 5;\r\n    }\r\n    \r\n    if (invoice.customerEmail) {\r\n        doc.text(invoice.customerEmail, 20, yPos);\r\n        yPos += 5;\r\n    }\r\n    \r\n    if (invoice.billingAddress) {\r\n        const address = typeof invoice.billingAddress === 'string' \r\n            ? JSON.parse(invoice.billingAddress) \r\n            : invoice.billingAddress;\r\n        \r\n        if (address.address1) {\r\n            doc.text(address.address1, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n        if (address.address2) {\r\n            doc.text(address.address2, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n        if (address.city || address.state || address.postalCode) {\r\n            const cityState = [\r\n                address.city,\r\n                address.state,\r\n                address.postalCode\r\n            ].filter(Boolean).join(', ');\r\n            doc.text(cityState, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n        if (address.country) {\r\n            doc.text(address.country, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n        if (address.phone) {\r\n            doc.text(`Phone: ${address.phone}`, 20, yPos);\r\n            yPos += 5;\r\n        }\r\n    }\r\n    \r\n    // Items table\r\n    const startY = yPos + 10;\r\n    const tableData = invoice.items?.map(item => [\r\n        item.description || 'Item',\r\n        item.sku || '-',\r\n        item.quantity.toString(),\r\n        formatCurrencyWithSymbol(item.unitPrice, currencySymbol),\r\n        formatCurrencyWithSymbol(item.total, currencySymbol)\r\n    ]) || [];\r\n    \r\n    autoTable(doc, {\r\n        startY,\r\n        head: [['Description', 'SKU', 'Qty', 'Price', 'Total']],\r\n        body: tableData,\r\n        theme: 'striped',\r\n        headStyles: { \r\n            fillColor: primaryRGB,\r\n            textColor: [255, 255, 255],\r\n            fontStyle: 'bold'\r\n        },\r\n        styles: {\r\n            fontSize: fontSize,\r\n            font: fontFamily,\r\n        },\r\n        alternateRowStyles: {\r\n            fillColor: [245, 245, 245]\r\n        }\r\n    });\r\n    \r\n    // Totals\r\n    const finalY = (doc as any).lastAutoTable.finalY || startY;\r\n    let totalsY = finalY + 10;\r\n    \r\n    doc.setFontSize(fontSize);\r\n    doc.setTextColor(0, 0, 0);\r\n    \r\n    // Subtotal\r\n    doc.text('Subtotal:', 150, totalsY, { align: 'right' });\r\n    doc.text(formatCurrencyWithSymbol(invoice.subtotal, currencySymbol), 190, totalsY, { align: 'right' });\r\n    totalsY += 6;\r\n    \r\n    // Tax\r\n    if (invoice.tax > 0) {\r\n        const taxLabel = settings?.taxLabel || 'Tax';\r\n        doc.text(`${taxLabel}:`, 150, totalsY, { align: 'right' });\r\n        doc.text(formatCurrencyWithSymbol(invoice.tax, currencySymbol), 190, totalsY, { align: 'right' });\r\n        totalsY += 6;\r\n    }\r\n    \r\n    // Shipping\r\n    if (invoice.shipping > 0) {\r\n        doc.text('Shipping:', 150, totalsY, { align: 'right' });\r\n        doc.text(formatCurrencyWithSymbol(invoice.shipping, currencySymbol), 190, totalsY, { align: 'right' });\r\n        totalsY += 6;\r\n    }\r\n    \r\n    // Discount\r\n    if (invoice.discount > 0) {\r\n        doc.text('Discount:', 150, totalsY, { align: 'right' });\r\n        doc.text(`-${formatCurrencyWithSymbol(invoice.discount, currencySymbol)}`, 190, totalsY, { align: 'right' });\r\n        totalsY += 6;\r\n    }\r\n    \r\n    // Total\r\n    totalsY += 3;\r\n    doc.setFontSize(14);\r\n    doc.setTextColor(...primaryRGB);\r\n    doc.setFont(fontFamily, 'bold');\r\n    doc.text('Total:', 150, totalsY, { align: 'right' });\r\n    doc.text(formatCurrencyWithSymbol(invoice.total, currencySymbol), 190, totalsY, { align: 'right' });\r\n    \r\n    // Payment information\r\n    if (invoice.amountPaid > 0 || invoice.balanceDue > 0) {\r\n        totalsY += 8;\r\n        doc.setFontSize(fontSize);\r\n        doc.setFont(fontFamily, 'normal');\r\n        doc.setTextColor(0, 0, 0);\r\n        \r\n        if (invoice.amountPaid > 0) {\r\n            doc.text('Amount Paid:', 150, totalsY, { align: 'right' });\r\n            doc.text(formatCurrencyWithSymbol(invoice.amountPaid, currencySymbol), 190, totalsY, { align: 'right' });\r\n            totalsY += 6;\r\n        }\r\n        \r\n        if (invoice.balanceDue > 0) {\r\n            doc.setFont(fontFamily, 'bold');\r\n            doc.setTextColor(...accentRGB);\r\n            doc.text('Balance Due:', 150, totalsY, { align: 'right' });\r\n            doc.text(formatCurrencyWithSymbol(invoice.balanceDue, currencySymbol), 190, totalsY, { align: 'right' });\r\n        }\r\n    }\r\n    \r\n    // Terms and conditions\r\n    if (invoice.termsAndConditions || settings?.defaultTerms) {\r\n        totalsY += 15;\r\n        doc.setFontSize(fontSize - 1);\r\n        doc.setTextColor(0, 0, 0);\r\n        doc.setFont(fontFamily, 'normal');\r\n        \r\n        const terms = invoice.termsAndConditions || settings?.defaultTerms || '';\r\n        const termsLines = doc.splitTextToSize(terms, 170);\r\n        doc.text('Terms & Conditions:', 20, totalsY);\r\n        totalsY += 6;\r\n        doc.text(termsLines, 20, totalsY);\r\n        totalsY += termsLines.length * 5;\r\n    }\r\n    \r\n    // Notes\r\n    if (invoice.notes) {\r\n        totalsY += 5;\r\n        doc.setFontSize(fontSize - 1);\r\n        const notesLines = doc.splitTextToSize(invoice.notes, 170);\r\n        doc.text('Notes:', 20, totalsY);\r\n        totalsY += 6;\r\n        doc.text(notesLines, 20, totalsY);\r\n    }\r\n    \r\n    // Footer\r\n    const pageHeight = doc.internal.pageSize.height;\r\n    const footerY = pageHeight - 20;\r\n    \r\n    if (settings?.footerText && settings?.showFooter) {\r\n        doc.setFontSize(fontSize - 2);\r\n        doc.setTextColor(100, 100, 100);\r\n        const footerLines = doc.splitTextToSize(settings.footerText, 170);\r\n        doc.text(footerLines, 105, footerY, { align: 'center' });\r\n    } else {\r\n        doc.setFontSize(fontSize - 2);\r\n        doc.setTextColor(100, 100, 100);\r\n        doc.text('Thank you for your business!', 105, footerY, { align: 'center' });\r\n    }\r\n    \r\n    // Convert to buffer\r\n    const pdfOutput = doc.output('arraybuffer');\r\n    return Buffer.from(pdfOutput);\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1294, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/hooks/useCurrency.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useSettings } from '@/contexts/SettingsContext';\r\nimport { formatCurrencyWithSymbol, formatCurrencyWithSymbolNoDecimals } from '@/lib/formatting';\r\n\r\n/**\r\n * Custom hook to format currency using the currency symbol from settings\r\n * This hook should be used throughout the application instead of hardcoding currency symbols\r\n */\r\nexport function useCurrency() {\r\n  const { settings } = useSettings();\r\n  const currencySymbol = settings.general_currency_symbol || '$';\r\n\r\n  /**\r\n   * Format currency with 2 decimal places\r\n   */\r\n  const format = (amount: number | string): string => {\r\n    return formatCurrencyWithSymbol(amount, currencySymbol);\r\n  };\r\n\r\n  /**\r\n   * Format currency without decimal places\r\n   */\r\n  const formatNoDecimals = (amount: number | string): string => {\r\n    return formatCurrencyWithSymbolNoDecimals(amount, currencySymbol);\r\n  };\r\n\r\n  /**\r\n   * Get the currency symbol\r\n   */\r\n  const symbol = currencySymbol;\r\n\r\n  /**\r\n   * Format a number with the currency symbol (for custom formatting)\r\n   */\r\n  const formatWithSymbol = (amount: number | string, options?: { decimals?: number }): string => {\r\n    const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\r\n    \r\n    if (isNaN(numAmount)) {\r\n      return `${currencySymbol}0${options?.decimals === 0 ? '' : '.00'}`;\r\n    }\r\n\r\n    const formatted = new Intl.NumberFormat('en-US', {\r\n      minimumFractionDigits: options?.decimals ?? 2,\r\n      maximumFractionDigits: options?.decimals ?? 2,\r\n    }).format(numAmount);\r\n\r\n    return `${currencySymbol}${formatted}`;\r\n  };\r\n\r\n  return {\r\n    format,\r\n    formatNoDecimals,\r\n    symbol,\r\n    formatWithSymbol,\r\n  };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AASO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,kJAAW;IAChC,MAAM,iBAAiB,SAAS,uBAAuB,IAAI;IAE3D;;GAEC,GACD,MAAM,SAAS,CAAC;QACd,OAAO,IAAA,oJAAwB,EAAC,QAAQ;IAC1C;IAEA;;GAEC,GACD,MAAM,mBAAmB,CAAC;QACxB,OAAO,IAAA,8JAAkC,EAAC,QAAQ;IACpD;IAEA;;GAEC,GACD,MAAM,SAAS;IAEf;;GAEC,GACD,MAAM,mBAAmB,CAAC,QAAyB;QACjD,MAAM,YAAY,OAAO,WAAW,WAAW,WAAW,UAAU;QAEpE,IAAI,MAAM,YAAY;YACpB,OAAO,GAAG,eAAe,CAAC,EAAE,SAAS,aAAa,IAAI,KAAK,OAAO;QACpE;QAEA,MAAM,YAAY,IAAI,KAAK,YAAY,CAAC,SAAS;YAC/C,uBAAuB,SAAS,YAAY;YAC5C,uBAAuB,SAAS,YAAY;QAC9C,GAAG,MAAM,CAAC;QAEV,OAAO,GAAG,iBAAiB,WAAW;IACxC;IAEA,OAAO;QACL;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 1343, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/app/admin/%28protected%29/orders/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, use } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table';\r\nimport toast from 'react-hot-toast';\r\nimport { OrderNotes } from '@/components/admin/OrderNotes';\r\nimport { generatePackingSlip } from '@/lib/invoice-generator';\r\nimport { FileText, Package } from 'lucide-react';\r\nimport { useCurrency } from '@/hooks/useCurrency';\r\n\r\nconst statusOptions = [\r\n  'PENDING',\r\n  'PROCESSING',\r\n  'SHIPPED',\r\n  'DELIVERED',\r\n  'CANCELLED',\r\n];\r\n\r\nconst statusColors: Record<string, string> = {\r\n  PENDING: 'bg-yellow-100 text-yellow-800',\r\n  PROCESSING: 'bg-blue-100 text-blue-800',\r\n  SHIPPED: 'bg-purple-100 text-purple-800',\r\n  DELIVERED: 'bg-green-100 text-green-800',\r\n  CANCELLED: 'bg-red-100 text-red-800',\r\n};\r\n\r\nexport default function OrderDetailPage({ params }: { params: Promise<{ id: string }> }) {\r\n  const { id } = use(params);\r\n  const router = useRouter();\r\n  const [order, setOrder] = useState<any>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [selectedStatus, setSelectedStatus] = useState('');\r\n  const [invoiceFeatureEnabled, setInvoiceFeatureEnabled] = useState(false);\r\n  const { format } = useCurrency();\r\n\r\n  useEffect(() => {\r\n    fetchOrder();\r\n    checkInvoiceFeature();\r\n  }, []);\r\n\r\n  const fetchOrder = async () => {\r\n    try {\r\n      const response = await fetch(`/api/orders/${id}`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setOrder(data);\r\n        setSelectedStatus(data.status);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch order');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkInvoiceFeature = async () => {\r\n    try {\r\n      const response = await fetch('/api/features/enabled');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setInvoiceFeatureEnabled(data.features?.includes('invoice_generator') || false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to check invoice feature');\r\n    }\r\n  };\r\n\r\n  const handleDownloadInvoice = async () => {\r\n    if (!order) return;\r\n    try {\r\n      const response = await fetch(`/api/orders/${id}/invoice/download`);\r\n      if (response.ok) {\r\n        const blob = await response.blob();\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `Invoice-${order.orderNumber}.pdf`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(a);\r\n        toast.success('Invoice downloaded successfully');\r\n      } else {\r\n        toast.error('Failed to generate invoice');\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to generate invoice:', error);\r\n      toast.error('Failed to generate invoice');\r\n    }\r\n  };\r\n\r\n  const handleDownloadPackingSlip = async () => {\r\n    if (!order) return;\r\n    try {\r\n      await generatePackingSlip(order);\r\n      toast.success('Packing slip downloaded successfully');\r\n    } catch (error) {\r\n      console.error('Failed to generate packing slip:', error);\r\n      toast.error('Failed to generate packing slip');\r\n    }\r\n  };\r\n\r\n  const handleUpdateStatus = async () => {\r\n    setIsUpdating(true);\r\n    try {\r\n      const response = await fetch(`/api/orders/${id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ status: selectedStatus }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const updated = await response.json();\r\n        setOrder(updated);\r\n        toast.success('Order status updated successfully');\r\n      } else {\r\n        toast.error('Failed to update order');\r\n      }\r\n    } catch (error) {\r\n      toast.error('An error occurred');\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"text-center py-12\">Loading...</div>;\r\n  }\r\n\r\n  if (!order) {\r\n    return <div className=\"text-center py-12\">Order not found</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold\">Order {order.orderNumber}</h1>\r\n          <p className=\"text-gray-600 mt-2\">\r\n            Placed on {new Date(order.createdAt).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          {invoiceFeatureEnabled && (\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleDownloadInvoice}\r\n              >\r\n                <FileText className=\"w-4 h-4 mr-2\" />\r\n                Download Invoice\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleDownloadPackingSlip}\r\n              >\r\n                <Package className=\"w-4 h-4 mr-2\" />\r\n                Download Packing Slip\r\n              </Button>\r\n            </>\r\n          )}\r\n          <Button variant=\"outline\" onClick={() => router.back()}>\r\n            Back\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6 md:grid-cols-3\">\r\n        {/* Order Status */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Order Status</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"text-sm font-medium\">Current Status</label>\r\n              <Badge className={`ml-2 ${statusColors[order.status]}`}>\r\n                {order.status}\r\n              </Badge>\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm font-medium\">Payment Status</label>\r\n              <Badge className={`ml-2 ${order.paymentStatus === 'PAID' ? 'bg-green-100 text-green-800' :\r\n                order.paymentStatus === 'FAILED' ? 'bg-red-100 text-red-800' :\r\n                  order.paymentStatus === 'REFUNDED' ? 'bg-gray-100 text-gray-800' :\r\n                    'bg-yellow-100 text-yellow-800'\r\n                }`}>\r\n                {order.paymentStatus}\r\n              </Badge>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium\">Update Status</label>\r\n              <select\r\n                value={selectedStatus}\r\n                onChange={(e) => setSelectedStatus(e.target.value)}\r\n                className=\"w-full px-3 py-2 border rounded-md\"\r\n              >\r\n                {statusOptions.map((status) => (\r\n                  <option key={status} value={status}>\r\n                    {status}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <Button\r\n              onClick={handleUpdateStatus}\r\n              disabled={isUpdating || selectedStatus === order.status}\r\n              className=\"w-full\"\r\n            >\r\n              {isUpdating ? 'Updating...' : 'Update Status'}\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Customer Info */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Customer Information</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-2\">\r\n            <div>\r\n              <p className=\"text-sm text-gray-600\">Name</p>\r\n              <p className=\"font-medium\">\r\n                {order.user?.name ||\r\n                  (order.shippingAddress ? `${order.shippingAddress.firstName} ${order.shippingAddress.lastName}` : 'Guest')}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-600\">Email</p>\r\n              <p className=\"font-medium\">{order.user?.email || order.guestEmail || 'N/A'}</p>\r\n            </div>\r\n            {order.isGuest && (\r\n              <div>\r\n                <Badge className=\"bg-gray-100 text-gray-600\">Guest Order</Badge>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Shipping Address */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Shipping Address</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {order.shippingAddress ? (\r\n              <div className=\"text-sm space-y-1\">\r\n                <p className=\"font-medium\">{order.shippingAddress.firstName} {order.shippingAddress.lastName}</p>\r\n                <p>{order.shippingAddress.address1}</p>\r\n                {order.shippingAddress.address2 && <p>{order.shippingAddress.address2}</p>}\r\n                <p>{order.shippingAddress.city}, {order.shippingAddress.state} {order.shippingAddress.postalCode}</p>\r\n                <p>{order.shippingAddress.country}</p>\r\n                {order.shippingAddress.phone && <p className=\"mt-2\">Phone: {order.shippingAddress.phone}</p>}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-sm text-gray-500\">No shipping address</p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Order Items */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Order Items</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Product</TableHead>\r\n                <TableHead>Price</TableHead>\r\n                <TableHead>Quantity</TableHead>\r\n                <TableHead>Total</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {order.items.map((item: any) => (\r\n                <TableRow key={item.id}>\r\n                  <TableCell>{item.product.name}</TableCell>\r\n                  <TableCell>{format(Number(item.price))}</TableCell>\r\n                  <TableCell>{item.quantity}</TableCell>\r\n                  <TableCell>{format(Number(item.total))}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n          <div className=\"mt-4 space-y-2 text-right\">\r\n            <div className=\"flex justify-end gap-4\">\r\n              <span className=\"text-gray-600\">Subtotal:</span>\r\n              <span className=\"font-medium\">{format(Number(order.subtotal))}</span>\r\n            </div>\r\n            <div className=\"flex justify-end gap-4\">\r\n              <span className=\"text-gray-600\">Tax:</span>\r\n              <span className=\"font-medium\">{format(Number(order.tax))}</span>\r\n            </div>\r\n            <div className=\"flex justify-end gap-4\">\r\n              <span className=\"text-gray-600\">Shipping:</span>\r\n              <span className=\"font-medium\">{format(Number(order.shipping))}</span>\r\n            </div>\r\n            <div className=\"flex justify-end gap-4 text-lg font-bold border-t pt-2\">\r\n              <span>Total:</span>\r\n              <span>{format(Number(order.total))}</span>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Order Notes */}\r\n      <OrderNotes orderId={id} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}