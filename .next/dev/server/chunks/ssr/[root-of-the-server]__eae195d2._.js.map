{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/navigation.ts"],"sourcesContent":["import { createNavigation } from 'next-intl/navigation';\r\nimport { locales } from './i18n';\r\n\r\nexport const { Link, redirect, usePathname, useRouter } =\r\n    createNavigation({ locales });\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE,GACnD,IAAA,kRAAgB,EAAC;IAAE,SAAA,sHAAO;AAAC"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from 'next-auth';\nimport CredentialsProvider from 'next-auth/providers/credentials';\nimport { PrismaAdapter } from '@next-auth/prisma-adapter';\nimport { prisma } from './prisma';\nimport { compare } from 'bcryptjs';\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  session: {\n    strategy: 'jwt',\n  },\n  pages: {\n    signIn: '/admin/login',\n  },\n  providers: [\n    CredentialsProvider({\n      name: 'credentials',\n      credentials: {\n        email: { label: 'Email', type: 'email' },\n        password: { label: 'Password', type: 'password' },\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        const user = await prisma.user.findUnique({\n          where: {\n            email: credentials.email,\n          },\n        });\n\n        if (!user || !user.password) {\n          return null;\n        }\n\n        const isPasswordValid = await compare(\n          credentials.password,\n          user.password\n        );\n\n        if (!isPasswordValid) {\n          return null;\n        }\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          role: user.role,\n        };\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user, trigger }) {\n      if (user) {\n        return {\n          ...token,\n          id: user.id,\n          role: user.role,\n        };\n      }\n\n      // Validate session hasn't been invalidated\n      if (token.id) {\n        const dbUser = await prisma.user.findUnique({\n          where: { id: token.id as string },\n          select: { sessionsInvalidatedAt: true, role: true },\n        });\n\n        if (dbUser) {\n          // Check if JWT was issued before sessions were invalidated\n          if (dbUser.sessionsInvalidatedAt) {\n            const tokenIssuedAt = token.iat ? token.iat * 1000 : 0; // Convert to milliseconds\n            const invalidatedAt = new Date(dbUser.sessionsInvalidatedAt).getTime();\n\n            if (tokenIssuedAt < invalidatedAt) {\n              // Session has been invalidated - return null to force re-login\n              return null as any;\n            }\n          }\n\n          // Update role in token if it changed\n          token.role = dbUser.role;\n        } else {\n          // User no longer exists\n          return null as any;\n        }\n      }\n\n      return token;\n    },\n    async session({ session, token }) {\n      // If token is null, session is invalid\n      if (!token) {\n        return null as any;\n      }\n\n      return {\n        ...session,\n        user: {\n          ...session.user,\n          id: token.id,\n          role: token.role,\n        },\n      };\n    },\n  },\n};\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,qLAAa,EAAC,8HAAM;IAC7B,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,IAAA,mKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,8HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBACL,OAAO,YAAY,KAAK;oBAC1B;gBACF;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBAC3B,OAAO;gBACT;gBAEA,MAAM,kBAAkB,MAAM,IAAA,4IAAO,EACnC,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGf,IAAI,CAAC,iBAAiB;oBACpB,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE;YAChC,IAAI,MAAM;gBACR,OAAO;oBACL,GAAG,KAAK;oBACR,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;gBACjB;YACF;YAEA,2CAA2C;YAC3C,IAAI,MAAM,EAAE,EAAE;gBACZ,MAAM,SAAS,MAAM,8HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBAC1C,OAAO;wBAAE,IAAI,MAAM,EAAE;oBAAW;oBAChC,QAAQ;wBAAE,uBAAuB;wBAAM,MAAM;oBAAK;gBACpD;gBAEA,IAAI,QAAQ;oBACV,2DAA2D;oBAC3D,IAAI,OAAO,qBAAqB,EAAE;wBAChC,MAAM,gBAAgB,MAAM,GAAG,GAAG,MAAM,GAAG,GAAG,OAAO,GAAG,0BAA0B;wBAClF,MAAM,gBAAgB,IAAI,KAAK,OAAO,qBAAqB,EAAE,OAAO;wBAEpE,IAAI,gBAAgB,eAAe;4BACjC,+DAA+D;4BAC/D,OAAO;wBACT;oBACF;oBAEA,qCAAqC;oBACrC,MAAM,IAAI,GAAG,OAAO,IAAI;gBAC1B,OAAO;oBACL,wBAAwB;oBACxB,OAAO;gBACT;YACF;YAEA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,uCAAuC;YACvC,IAAI,CAAC,OAAO;gBACV,OAAO;YACT;YAEA,OAAO;gBACL,GAAG,OAAO;gBACV,MAAM;oBACJ,GAAG,QAAQ,IAAI;oBACf,IAAI,MAAM,EAAE;oBACZ,MAAM,MAAM,IAAI;gBAClB;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Header = registerClientReference(\n    function() { throw new Error(\"Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Header.tsx <module evaluation>\",\n    \"Header\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,kEACA","ignoreList":[0]}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Header = registerClientReference(\n    function() { throw new Error(\"Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Header.tsx\",\n    \"Header\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,8CACA","ignoreList":[0]}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Footer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Footer = registerClientReference(\n    function() { throw new Error(\"Attempted to call Footer() from the server but Footer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Footer.tsx <module evaluation>\",\n    \"Footer\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,kEACA","ignoreList":[0]}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Footer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Footer = registerClientReference(\n    function() { throw new Error(\"Attempted to call Footer() from the server but Footer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Footer.tsx\",\n    \"Footer\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,8CACA","ignoreList":[0]}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,oZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,2EACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/customer/RefundRequestButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RefundRequestButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call RefundRequestButton() from the server but RefundRequestButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/customer/RefundRequestButton.tsx <module evaluation>\",\n    \"RefundRequestButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,iFACA","ignoreList":[0]}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/customer/RefundRequestButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RefundRequestButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call RefundRequestButton() from the server but RefundRequestButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/customer/RefundRequestButton.tsx\",\n    \"RefundRequestButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,6DACA","ignoreList":[0]}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/customer/DownloadInvoiceButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DownloadInvoiceButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call DownloadInvoiceButton() from the server but DownloadInvoiceButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/customer/DownloadInvoiceButton.tsx <module evaluation>\",\n    \"DownloadInvoiceButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,mFACA","ignoreList":[0]}},
    {"offset": {"line": 558, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/customer/DownloadInvoiceButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DownloadInvoiceButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call DownloadInvoiceButton() from the server but DownloadInvoiceButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/customer/DownloadInvoiceButton.tsx\",\n    \"DownloadInvoiceButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,wBAAwB,IAAA,wQAAuB,EACxD;IAAa,MAAM,IAAI,MAAM;AAA0P,GACvR,+DACA","ignoreList":[0]}},
    {"offset": {"line": 572, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/features.ts"],"sourcesContent":["import { prisma } from './prisma'\n\n/**\n * Check if a feature is enabled\n */\nexport async function isFeatureEnabled(featureName: string): Promise<boolean> {\n  try {\n    const feature = await prisma.featureFlag.findUnique({\n      where: { name: featureName },\n    })\n    return feature?.enabled ?? false\n  } catch (error) {\n    console.error(`Error checking feature flag ${featureName}:`, error)\n    return false\n  }\n}\n\n/**\n * Get all enabled features\n */\nexport async function getEnabledFeatures(): Promise<string[]> {\n  try {\n    const features = await prisma.featureFlag.findMany({\n      where: { enabled: true },\n      select: { name: true },\n    })\n    return features.map(f => f.name)\n  } catch (error) {\n    console.error('Error getting enabled features:', error)\n    return []\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAKO,eAAe,iBAAiB,WAAmB;IACxD,IAAI;QACF,MAAM,UAAU,MAAM,8HAAM,CAAC,WAAW,CAAC,UAAU,CAAC;YAClD,OAAO;gBAAE,MAAM;YAAY;QAC7B;QACA,OAAO,SAAS,WAAW;IAC7B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,4BAA4B,EAAE,YAAY,CAAC,CAAC,EAAE;QAC7D,OAAO;IACT;AACF;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,8HAAM,CAAC,WAAW,CAAC,QAAQ,CAAC;YACjD,OAAO;gBAAE,SAAS;YAAK;YACvB,QAAQ;gBAAE,MAAM;YAAK;QACvB;QACA,OAAO,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;IACjC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,EAAE;IACX;AACF"}},
    {"offset": {"line": 621, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/formatting.ts"],"sourcesContent":["/**\n * Localized formatting utilities for currency, dates, and numbers\n */\n\n/**\n * Format currency based on locale\n */\nexport function formatCurrency(\n  amount: number | string,\n  locale: string = 'en',\n  currency: string = 'USD'\n): string {\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\n\n  try {\n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency,\n    }).format(numAmount);\n  } catch (error) {\n    // Fallback to USD if currency not supported\n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency: 'USD',\n    }).format(numAmount);\n  }\n}\n\n/**\n * Format date based on locale\n */\nexport function formatDate(\n  date: Date | string,\n  locale: string = 'en',\n  options?: Intl.DateTimeFormatOptions\n): string {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n\n  const defaultOptions: Intl.DateTimeFormatOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    ...options,\n  };\n\n  return new Intl.DateTimeFormat(locale, defaultOptions).format(dateObj);\n}\n\n/**\n * Format date and time based on locale\n */\nexport function formatDateTime(\n  date: Date | string,\n  locale: string = 'en',\n  options?: Intl.DateTimeFormatOptions\n): string {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n\n  const defaultOptions: Intl.DateTimeFormatOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    ...options,\n  };\n\n  return new Intl.DateTimeFormat(locale, defaultOptions).format(dateObj);\n}\n\n/**\n * Format number based on locale\n */\nexport function formatNumber(\n  number: number | string,\n  locale: string = 'en',\n  options?: Intl.NumberFormatOptions\n): string {\n  const num = typeof number === 'string' ? parseFloat(number) : number;\n\n  return new Intl.NumberFormat(locale, options).format(num);\n}\n\n/**\n * Format percentage based on locale\n */\nexport function formatPercentage(\n  value: number | string,\n  locale: string = 'en',\n  decimals: number = 0\n): string {\n  const num = typeof value === 'string' ? parseFloat(value) : value;\n\n  return new Intl.NumberFormat(locale, {\n    style: 'percent',\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  }).format(num / 100);\n}\n\n/**\n * Format relative time (e.g., \"2 days ago\", \"in 3 hours\")\n */\nexport function formatRelativeTime(\n  date: Date | string,\n  locale: string = 'en'\n): string {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n  const now = new Date();\n  const diffInSeconds = Math.floor((now.getTime() - dateObj.getTime()) / 1000);\n\n  const rtf = new Intl.RelativeTimeFormat(locale, { numeric: 'auto' });\n\n  const intervals: { unit: Intl.RelativeTimeFormatUnit; seconds: number }[] = [\n    { unit: 'year', seconds: 31536000 },\n    { unit: 'month', seconds: 2592000 },\n    { unit: 'week', seconds: 604800 },\n    { unit: 'day', seconds: 86400 },\n    { unit: 'hour', seconds: 3600 },\n    { unit: 'minute', seconds: 60 },\n    { unit: 'second', seconds: 1 },\n  ];\n\n  for (const interval of intervals) {\n    const count = Math.floor(Math.abs(diffInSeconds) / interval.seconds);\n    if (count >= 1) {\n      return rtf.format(diffInSeconds > 0 ? -count : count, interval.unit);\n    }\n  }\n\n  return rtf.format(0, 'second');\n}\n\n/**\n * Format file size with locale-specific number formatting\n */\nexport function formatFileSize(\n  bytes: number,\n  locale: string = 'en',\n  decimals: number = 2\n): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  const value = bytes / Math.pow(k, i);\n  const formatted = formatNumber(value, locale, {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  });\n\n  return `${formatted} ${sizes[i]}`;\n}\n\n/**\n * Get locale-specific currency symbol\n */\nexport function getCurrencySymbol(locale: string = 'en', currency: string = 'USD'): string {\n  const formatted = new Intl.NumberFormat(locale, {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(0);\n\n  // Extract symbol by removing the number\n  return formatted.replace(/\\d/g, '').trim();\n}\n\n/**\n * Format currency amount with custom symbol\n * This is used when you want to use the currency symbol from settings\n */\nexport function formatCurrencyWithSymbol(\n  amount: number | string,\n  symbol: string = '$',\n  locale: string = 'en-US'\n): string {\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\n  \n  if (isNaN(numAmount)) {\n    return `${symbol}0.00`;\n  }\n\n  // Format the number with locale-specific formatting\n  const formatted = new Intl.NumberFormat(locale, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(numAmount);\n\n  return `${symbol}${formatted}`;\n}\n\n/**\n * Format currency amount with custom symbol (no decimals)\n */\nexport function formatCurrencyWithSymbolNoDecimals(\n  amount: number | string,\n  symbol: string = '$',\n  locale: string = 'en-US'\n): string {\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\n  \n  if (isNaN(numAmount)) {\n    return `${symbol}0`;\n  }\n\n  // Format the number with locale-specific formatting\n  const formatted = new Intl.NumberFormat(locale, {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(numAmount);\n\n  return `${symbol}${formatted}`;\n}\n\n/**\n * Format list of items based on locale\n */\nexport function formatList(\n  items: string[],\n  locale: string = 'en',\n  type: 'conjunction' | 'disjunction' = 'conjunction'\n): string {\n  if (items.length === 0) return '';\n  if (items.length === 1) return items[0];\n\n  const formatter = new Intl.ListFormat(locale, {\n    style: 'long',\n    type,\n  });\n\n  return formatter.format(items);\n}\n\n/**\n * Format compact number (e.g., 1K, 1M)\n */\nexport function formatCompactNumber(\n  number: number | string,\n  locale: string = 'en'\n): string {\n  const num = typeof number === 'string' ? parseFloat(number) : number;\n\n  return new Intl.NumberFormat(locale, {\n    notation: 'compact',\n    compactDisplay: 'short',\n  }).format(num);\n}\n\n/**\n * Locale configuration for specific locales\n */\nexport const localeConfigs = {\n  en: {\n    currency: 'USD',\n    dateFormat: 'MM/DD/YYYY',\n    timeFormat: '12h',\n  },\n  fr: {\n    currency: 'EUR',\n    dateFormat: 'DD/MM/YYYY',\n    timeFormat: '24h',\n  },\n} as const;\n\n/**\n * Get locale configuration\n */\nexport function getLocaleConfig(locale: string) {\n  return localeConfigs[locale as keyof typeof localeConfigs] || localeConfigs.en;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 836, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/server-currency.ts"],"sourcesContent":["import { prisma } from '@/lib/prisma';\r\nimport { formatCurrencyWithSymbol, formatCurrencyWithSymbolNoDecimals } from '@/lib/formatting';\r\n\r\n/**\r\n * Get currency symbol from settings (server-side)\r\n */\r\nexport async function getCurrencySymbol(): Promise<string> {\r\n  try {\r\n    const setting = await prisma.storeSetting.findUnique({\r\n      where: { key: 'general_currency_symbol' },\r\n    });\r\n    return setting?.value || '$';\r\n  } catch (error) {\r\n    console.error('Error fetching currency symbol:', error);\r\n    return '$';\r\n  }\r\n}\r\n\r\n/**\r\n * Format currency with symbol from settings (server-side)\r\n */\r\nexport async function formatCurrencyServer(amount: number | string): Promise<string> {\r\n  const symbol = await getCurrencySymbol();\r\n  return formatCurrencyWithSymbol(amount, symbol);\r\n}\r\n\r\n/**\r\n * Format currency with symbol from settings, no decimals (server-side)\r\n */\r\nexport async function formatCurrencyServerNoDecimals(amount: number | string): Promise<string> {\r\n  const symbol = await getCurrencySymbol();\r\n  return formatCurrencyWithSymbolNoDecimals(amount, symbol);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAKO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,8HAAM,CAAC,YAAY,CAAC,UAAU,CAAC;YACnD,OAAO;gBAAE,KAAK;YAA0B;QAC1C;QACA,OAAO,SAAS,SAAS;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACT;AACF;AAKO,eAAe,qBAAqB,MAAuB;IAChE,MAAM,SAAS,MAAM;IACrB,OAAO,IAAA,oJAAwB,EAAC,QAAQ;AAC1C;AAKO,eAAe,+BAA+B,MAAuB;IAC1E,MAAM,SAAS,MAAM;IACrB,OAAO,IAAA,8JAAkC,EAAC,QAAQ;AACpD"}},
    {"offset": {"line": 873, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/app/%5Blocale%5D/account/orders/%5Bid%5D/page.tsx"],"sourcesContent":["import { redirect, notFound } from 'next/navigation';\nimport { getServerSession } from 'next-auth';\nimport { Link } from '@/navigation';\nimport { authOptions } from '@/lib/auth';\nimport { Header } from '@/components/public/Header';\nimport { Footer } from '@/components/public/Footer';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { RefundRequestButton } from '@/components/customer/RefundRequestButton';\nimport { DownloadInvoiceButton } from '@/components/customer/DownloadInvoiceButton';\nimport { isFeatureEnabled } from '@/lib/features';\nimport { prisma } from '@/lib/prisma';\nimport { getTranslations } from 'next-intl/server';\nimport { formatCurrencyServer, getCurrencySymbol } from '@/lib/server-currency';\nimport { formatCurrencyWithSymbol } from '@/lib/formatting';\n\nconst statusColors: Record<string, string> = {\n  PENDING: 'bg-yellow-100 text-yellow-800',\n  PROCESSING: 'bg-blue-100 text-blue-800',\n  SHIPPED: 'bg-purple-100 text-purple-800',\n  DELIVERED: 'bg-green-100 text-green-800',\n  CANCELLED: 'bg-red-100 text-red-800',\n};\n\nexport async function generateMetadata({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { id } = await params;\n  const t = await getTranslations('metadata.account.orderDetails');\n  const order = await prisma.order.findUnique({\n    where: { id },\n    select: { orderNumber: true },\n  });\n\n  if (!order) {\n    return {\n      title: 'Order Not Found',\n    };\n  }\n\n  return {\n    title: t('title', { orderNumber: order.orderNumber }),\n    description: t('description', { orderNumber: order.orderNumber }),\n  };\n}\n\nexport default async function OrderDetailPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const session = await getServerSession(authOptions);\n  const t = await getTranslations();\n\n  if (!session) {\n    redirect('/auth/signin');\n  }\n\n  const { id } = await params;\n\n  const order = await prisma.order.findUnique({\n    where: { id },\n    include: {\n      items: {\n        include: {\n          product: true,\n          variant: true,\n        },\n      },\n      shippingAddress: true,\n      orderNotes: {\n        where: {\n          isInternal: false, // Only fetch public notes for customers\n        },\n        include: {\n          user: {\n            select: {\n              name: true,\n              email: true,\n            },\n          },\n        },\n        orderBy: {\n          createdAt: 'desc',\n        },\n      },\n      refunds: {\n        where: {\n          status: { in: ['PENDING', 'APPROVED', 'COMPLETED'] },\n        },\n      },\n    },\n  });\n\n  // Check if user owns this order (handle guest orders)\n  if (!order) {\n    notFound();\n  }\n\n  // For guest orders, redirect to sign in (they can't access /account anyway)\n  // For user orders, ensure they own the order\n  // Check if refund feature is enabled\n  const refundFeatureEnabled = await isFeatureEnabled('refund_management');\n\n  if (order.userId !== session.user.id) {\n    notFound();\n  }\n  // Convert Decimal fields to numbers for client components\n  const orderItemsForRefund = order.items.map(item => ({\n    ...item,\n    price: Number(item.price),\n    total: Number(item.total),\n  }));\n\n  // Get currency symbol for formatting\n  const currencySymbol = await getCurrencySymbol();\n  \n  // Format order totals\n  const formattedSubtotal = formatCurrencyWithSymbol(Number(order.subtotal), currencySymbol);\n  const formattedTax = formatCurrencyWithSymbol(Number(order.tax), currencySymbol);\n  const formattedShipping = formatCurrencyWithSymbol(Number(order.shipping), currencySymbol);\n  const formattedTotal = formatCurrencyWithSymbol(Number(order.total), currencySymbol);\n  \n  // Format item prices\n  const formattedItems = await Promise.all(\n    order.items.map(async (item) => ({\n      ...item,\n      formattedPrice: await formatCurrencyServer(Number(item.price)),\n      formattedTotal: await formatCurrencyServer(Number(item.total)),\n    }))\n  );\n\n  return (\n    <div className=\"flex flex-col min-h-screen\">\n      <Header />\n      <main className=\"flex-1 bg-gray-50 py-8\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-bold\">{t('account.orderNumber')} #{order.orderNumber}</h1>\n              <p className=\"text-gray-600 mt-1\">\n                {t('account.orderDate')} {new Date(order.createdAt).toLocaleDateString()}\n              </p>\n            </div>\n            <div className=\"flex gap-3\">\n              <DownloadInvoiceButton order={order} />\n              {refundFeatureEnabled && (\n                <RefundRequestButton\n                  orderId={order.id}\n                  orderNumber={order.orderNumber}\n                  orderItems={orderItemsForRefund}\n                  paymentStatus={order.paymentStatus}\n                  existingRefund={order.refunds?.[0]}\n                />\n              )}\n              <Link href=\"/account/orders\">\n                <Button variant=\"outline\">← {t('account.backToOrders')}</Button>\n              </Link>\n            </div>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n            {/* Order Status */}\n            <Card>\n              <CardHeader>\n                <CardTitle>{t('account.status')}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div>\n                    <p className=\"text-sm text-gray-600 mb-1\">{t('account.status')}</p>\n                    <Badge className={statusColors[order.status]}>\n                      {order.status}\n                    </Badge>\n                  </div>\n                  {/* Payment Status - HIDDEN per user request */}\n                  {/* <div>\n                    <p className=\"text-sm text-gray-600 mb-1\">{t('account.paymentStatus')}</p>\n                    <Badge\n                      className={\n                        order.paymentStatus === 'PAID'\n                          ? 'bg-green-100 text-green-800'\n                          : order.paymentStatus === 'FAILED'\n                            ? 'bg-red-100 text-red-800'\n                            : 'bg-yellow-100 text-yellow-800'\n                      }\n                    >\n                      {order.paymentStatus}\n                    </Badge>\n                  </div> */}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Shipping Address */}\n            <Card>\n              <CardHeader>\n                <CardTitle>{t('checkout.shippingAddress')}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {order.shippingAddress ? (\n                  <div className=\"text-sm\">\n                    <p>{order.shippingAddress.address1}</p>\n                    {order.shippingAddress.address2 && (\n                      <p>{order.shippingAddress.address2}</p>\n                    )}\n                    <p>\n                      {order.shippingAddress.city}, {order.shippingAddress.state}{' '}\n                      {order.shippingAddress.postalCode}\n                    </p>\n                    <p>{order.shippingAddress.country}</p>\n                  </div>\n                ) : (\n                  <p className=\"text-gray-500\">{t('account.noAddress')}</p>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Order Items */}\n          <Card className=\"mb-6\">\n            <CardHeader>\n              <CardTitle>{t('account.items')}</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {formattedItems.map((item, index) => (\n                  <div\n                    key={item.id}\n                    className=\"flex items-center justify-between py-3 border-b last:border-b-0\"\n                  >\n                    <div className=\"flex-1\">\n                      <p className=\"font-medium\">{item.product.name}</p>\n                      {item.variant && (\n                        <p className=\"text-sm text-gray-500\">{t('cart.variant')} {item.variant.optionValues}</p>\n                      )}\n                      <p className=\"text-sm text-gray-600\">\n                        {item.formattedPrice} × {item.quantity}\n                      </p>\n                    </div>\n                    <p className=\"font-bold\">\n                      {item.formattedTotal}\n                    </p>\n                  </div>\n                ))}\n\n                <div className=\"space-y-2 pt-4\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">{t('cart.subtotal')}</span>\n                    <span className=\"font-medium\">\n                      {formattedSubtotal}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">{t('cart.tax')}</span>\n                    <span className=\"font-medium\">\n                      {formattedTax}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">{t('cart.shipping')}</span>\n                    <span className=\"font-medium\">\n                      {formattedShipping}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between text-lg font-bold pt-2 border-t\">\n                    <span>{t('cart.total')}</span>\n                    <span>{formattedTotal}</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Order Notes */}\n          {order.orderNotes && order.orderNotes.length > 0 && (\n            <Card className=\"mb-6\">\n              <CardHeader>\n                <CardTitle>{t('account.orderNotes')}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {order.orderNotes.map((note) => (\n                    <div\n                      key={note.id}\n                      className=\"bg-blue-50 border-l-4 border-blue-500 p-4 rounded\"\n                    >\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-blue-900\">\n                          {note.user.name || note.user.email || t('account.supportTeam')}\n                        </span>\n                        <span className=\"text-xs text-blue-700\">\n                          {new Date(note.createdAt).toLocaleDateString('en-US', {\n                            year: 'numeric',\n                            month: 'long',\n                            day: 'numeric',\n                            hour: '2-digit',\n                            minute: '2-digit',\n                          })}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-blue-900 whitespace-pre-wrap\">\n                        {note.note}\n                      </p>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Help Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle>{t('account.needHelp')}</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                {t('account.contactSupportDesc')}\n              </p>\n              <Link href=\"/contact\">\n                <Button variant=\"outline\">{t('account.contactSupport')}</Button>\n              </Link>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}