{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Header = registerClientReference(\n    function() { throw new Error(\"Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Header.tsx <module evaluation>\",\n    \"Header\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,kEACA","ignoreList":[0]}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Header.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Header = registerClientReference(\n    function() { throw new Error(\"Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Header.tsx\",\n    \"Header\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,8CACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Footer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Footer = registerClientReference(\n    function() { throw new Error(\"Attempted to call Footer() from the server but Footer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Footer.tsx <module evaluation>\",\n    \"Footer\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,kEACA","ignoreList":[0]}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/Footer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Footer = registerClientReference(\n    function() { throw new Error(\"Attempted to call Footer() from the server but Footer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Footer.tsx\",\n    \"Footer\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,wQAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,8CACA","ignoreList":[0]}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/ShopContent.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ShopContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call ShopContent() from the server but ShopContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/ShopContent.tsx <module evaluation>\",\n    \"ShopContent\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,uEACA","ignoreList":[0]}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/ShopContent.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ShopContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call ShopContent() from the server but ShopContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/ShopContent.tsx\",\n    \"ShopContent\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,wQAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,mDACA","ignoreList":[0]}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/landing-page/BlockRenderer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BlockRenderer = registerClientReference(\n    function() { throw new Error(\"Attempted to call BlockRenderer() from the server but BlockRenderer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/landing-page/BlockRenderer.tsx <module evaluation>\",\n    \"BlockRenderer\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,+EACA","ignoreList":[0]}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/landing-page/BlockRenderer.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BlockRenderer = registerClientReference(\n    function() { throw new Error(\"Attempted to call BlockRenderer() from the server but BlockRenderer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/landing-page/BlockRenderer.tsx\",\n    \"BlockRenderer\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,wQAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,2DACA","ignoreList":[0]}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/components/public/PageOverrideRenderer.tsx"],"sourcesContent":["import { Page } from '@prisma/client';\r\nimport { Header } from './Header';\r\nimport { Footer } from './Footer';\r\nimport { BlockRenderer } from '@/components/landing-page/BlockRenderer';\r\n\r\ninterface PageOverrideRendererProps {\r\n  page: Page & {\r\n    blocks?: any[];\r\n  };\r\n}\r\n\r\nexport function PageOverrideRenderer({ page }: PageOverrideRendererProps) {\r\n  const useLayout = page.useStorefrontLayout ?? true;\r\n  const hasBlocks = page.useBlockEditor && page.blocks && page.blocks.length > 0;\r\n  const hasContent = page.content && page.content.trim().length > 0;\r\n\r\n  const content = (\r\n    <>\r\n      {/* Custom CSS */}\r\n      {page.customCss && (\r\n        <style dangerouslySetInnerHTML={{ __html: page.customCss }} />\r\n      )}\r\n\r\n      {/* Render rich text content if present */}\r\n      {hasContent && (\r\n        <div className=\"prose prose-lg max-w-none mb-8\">\r\n          <div dangerouslySetInnerHTML={{ __html: page.content || '' }} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Render blocks if present */}\r\n      {hasBlocks && (\r\n        <div className=\"page-blocks\">\r\n          {page.blocks\r\n            ?.filter((block: any) => block.isVisible !== false)\r\n            .sort((a: any, b: any) => (a.order || 0) - (b.order || 0))\r\n            .map((block: any) => (\r\n              <BlockRenderer key={block.id} block={block} />\r\n            ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Custom JS */}\r\n      {page.customJs && (\r\n        <script dangerouslySetInnerHTML={{ __html: page.customJs }} />\r\n      )}\r\n    </>\r\n  );\r\n\r\n  if (useLayout) {\r\n    return (\r\n      <div className=\"flex flex-col min-h-screen\">\r\n        <Header />\r\n        <main className=\"flex-1 bg-gray-50\">\r\n          <div className=\"container mx-auto px-4 py-12\">\r\n            {content}\r\n          </div>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      <div className=\"container mx-auto px-4 py-12\">\r\n        {content}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;AAQO,SAAS,qBAAqB,EAAE,IAAI,EAA6B;IACtE,MAAM,YAAY,KAAK,mBAAmB,IAAI;IAC9C,MAAM,YAAY,KAAK,cAAc,IAAI,KAAK,MAAM,IAAI,KAAK,MAAM,CAAC,MAAM,GAAG;IAC7E,MAAM,aAAa,KAAK,OAAO,IAAI,KAAK,OAAO,CAAC,IAAI,GAAG,MAAM,GAAG;IAEhE,MAAM,wBACJ;;YAEG,KAAK,SAAS,kBACb,8OAAC;gBAAM,yBAAyB;oBAAE,QAAQ,KAAK,SAAS;gBAAC;;;;;;YAI1D,4BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,yBAAyB;wBAAE,QAAQ,KAAK,OAAO,IAAI;oBAAG;;;;;;;;;;;YAK9D,2BACC,8OAAC;gBAAI,WAAU;0BACZ,KAAK,MAAM,EACR,OAAO,CAAC,QAAe,MAAM,SAAS,KAAK,OAC5C,KAAK,CAAC,GAAQ,IAAW,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,GACvD,IAAI,CAAC,sBACJ,8OAAC,uKAAa;wBAAgB,OAAO;uBAAjB,MAAM,EAAE;;;;;;;;;;YAMnC,KAAK,QAAQ,kBACZ,8OAAC;gBAAO,yBAAyB;oBAAE,QAAQ,KAAK,QAAQ;gBAAC;;;;;;;;IAK/D,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,gJAAM;;;;;8BACP,8OAAC;oBAAK,WAAU;8BACd,cAAA,8OAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;8BAGL,8OAAC,gJAAM;;;;;;;;;;;IAGb;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/translations.ts"],"sourcesContent":["import { prisma } from './prisma'\nimport type { Product, Category, ProductTranslation, CategoryTranslation } from '@prisma/client'\n\n/**\n * Apply product translation to a product object\n * If translation exists for the locale, use it; otherwise use the default values\n */\nexport function applyProductTranslation<\n  T extends Product & { translations?: ProductTranslation[] }\n>(product: T, locale: string): T {\n  if (!product.translations || product.translations.length === 0) {\n    return product\n  }\n\n  const translation = product.translations.find(t => t.locale === locale)\n\n  if (!translation) {\n    return product\n  }\n\n  return {\n    ...product,\n    name: translation.name,\n    description: translation.description || product.description,\n    slug: translation.slug,\n  }\n}\n\n/**\n * Apply category translation to a category object\n */\nexport function applyCategoryTranslation<\n  T extends Category & { translations?: CategoryTranslation[] }\n>(category: T, locale: string): T {\n  if (!category.translations || category.translations.length === 0) {\n    return category\n  }\n\n  const translation = category.translations.find(t => t.locale === locale)\n\n  if (!translation) {\n    return category\n  }\n\n  return {\n    ...category,\n    name: translation.name,\n    description: translation.description || category.description,\n    slug: translation.slug,\n  }\n}\n\n/**\n * Fetch a product by slug with translations applied for the given locale\n */\nexport async function getProductBySlug(slug: string, locale: string) {\n  // Try to find by translated slug first\n  const translatedProduct = await prisma.product.findFirst({\n    where: {\n      translations: {\n        some: {\n          slug,\n          locale,\n        },\n      },\n    },\n    include: {\n      images: {\n        orderBy: { position: 'asc' },\n      },\n      category: {\n        include: {\n          translations: true,\n        },\n      },\n      variantOptions: {\n        include: {\n          values: {\n            orderBy: { position: 'asc' },\n          },\n        },\n        orderBy: { position: 'asc' },\n      },\n      variants: {\n        orderBy: { createdAt: 'asc' },\n      },\n      translations: true,\n    },\n  })\n\n  if (translatedProduct) {\n    return {\n      ...applyProductTranslation(translatedProduct, locale),\n      category: translatedProduct.category\n        ? applyCategoryTranslation(translatedProduct.category, locale)\n        : null,\n    }\n  }\n\n  // Fallback to default slug\n  const product = await prisma.product.findUnique({\n    where: { slug },\n    include: {\n      images: {\n        orderBy: { position: 'asc' },\n      },\n      category: {\n        include: {\n          translations: true,\n        },\n      },\n      variantOptions: {\n        include: {\n          values: {\n            orderBy: { position: 'asc' },\n          },\n        },\n        orderBy: { position: 'asc' },\n      },\n      variants: {\n        orderBy: { createdAt: 'asc' },\n      },\n      translations: true,\n    },\n  })\n\n  if (!product) {\n    return null\n  }\n\n  return {\n    ...applyProductTranslation(product, locale),\n    category: product.category\n      ? applyCategoryTranslation(product.category, locale)\n      : null,\n  }\n}\n\n/**\n * Fetch products with translations applied for the given locale\n */\nexport async function getProducts(\n  options: {\n    where?: any\n    orderBy?: any\n    take?: number\n    skip?: number\n  },\n  locale: string\n) {\n  const products = await prisma.product.findMany({\n    ...options,\n    include: {\n      images: {\n        orderBy: { position: 'asc' },\n        take: 1,\n      },\n      category: {\n        include: {\n          translations: true,\n        },\n      },\n      translations: true,\n    },\n  })\n\n  return products.map(product => ({\n    ...applyProductTranslation(product, locale),\n    category: product.category\n      ? applyCategoryTranslation(product.category, locale)\n      : null,\n  }))\n}\n\n/**\n * Count products matching the given where clause\n */\nexport async function countProducts(where: any) {\n  return prisma.product.count({ where })\n}\n\n/**\n * Fetch categories with translations applied for the given locale\n */\nexport async function getCategories(locale: string) {\n  const categories = await prisma.category.findMany({\n    include: {\n      translations: true,\n    },\n    orderBy: { name: 'asc' },\n  })\n\n  return categories.map(category => applyCategoryTranslation(category, locale))\n}\n\n/**\n * Fetch a category by slug with translations applied for the given locale\n */\nexport async function getCategoryBySlug(slug: string, locale: string) {\n  // Try to find by translated slug first\n  const translatedCategory = await prisma.category.findFirst({\n    where: {\n      translations: {\n        some: {\n          slug,\n          locale,\n        },\n      },\n    },\n    include: {\n      translations: true,\n    },\n  })\n\n  if (translatedCategory) {\n    return applyCategoryTranslation(translatedCategory, locale)\n  }\n\n  // Fallback to default slug\n  const category = await prisma.category.findUnique({\n    where: { slug },\n    include: {\n      translations: true,\n    },\n  })\n\n  if (!category) {\n    return null\n  }\n\n  return applyCategoryTranslation(category, locale)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/page-overrides.ts"],"sourcesContent":["import { prisma } from './prisma';\r\n\r\nexport type PageOverrideType = 'HOME' | 'SHOP' | 'PRODUCT' | 'CART' | 'CHECKOUT' | 'BLOG' | 'BLOG_POST';\r\n\r\n/**\r\n * Get a published page that overrides a specific storefront page type\r\n * @param pageType The type of page to check for override\r\n * @returns The override page if found, null otherwise\r\n */\r\nexport async function getPageOverride(pageType: PageOverrideType) {\r\n  try {\r\n    const overridePage = await prisma.page.findFirst({\r\n      where: {\r\n        overridesStorefrontPage: true,\r\n        overriddenPageType: pageType,\r\n        status: 'PUBLISHED',\r\n      },\r\n      include: {\r\n        blocks: {\r\n          include: {\r\n            template: true,\r\n          },\r\n          orderBy: {\r\n            order: 'asc',\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    return overridePage;\r\n  } catch (error) {\r\n    console.error(`Error fetching page override for ${pageType}:`, error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Get all page override types that are currently active\r\n * @returns Array of page types that have active overrides\r\n */\r\nexport async function getActiveOverrides(): Promise<PageOverrideType[]> {\r\n  try {\r\n    const overrides = await prisma.page.findMany({\r\n      where: {\r\n        overridesStorefrontPage: true,\r\n        status: 'PUBLISHED',\r\n        overriddenPageType: {\r\n          not: null,\r\n        },\r\n      },\r\n      select: {\r\n        overriddenPageType: true,\r\n      },\r\n    });\r\n\r\n    return overrides\r\n      .map((o) => o.overriddenPageType)\r\n      .filter((type): type is PageOverrideType => type !== null);\r\n  } catch (error) {\r\n    console.error('Error fetching active overrides:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Check if a specific page type has an active override\r\n * @param pageType The page type to check\r\n * @returns true if an override exists, false otherwise\r\n */\r\nexport async function hasPageOverride(pageType: PageOverrideType): Promise<boolean> {\r\n  const override = await getPageOverride(pageType);\r\n  return override !== null;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AASO,eAAe,gBAAgB,QAA0B;IAC9D,IAAI;QACF,MAAM,eAAe,MAAM,8HAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YAC/C,OAAO;gBACL,yBAAyB;gBACzB,oBAAoB;gBACpB,QAAQ;YACV;YACA,SAAS;gBACP,QAAQ;oBACN,SAAS;wBACP,UAAU;oBACZ;oBACA,SAAS;wBACP,OAAO;oBACT;gBACF;YACF;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,iCAAiC,EAAE,SAAS,CAAC,CAAC,EAAE;QAC/D,OAAO;IACT;AACF;AAMO,eAAe;IACpB,IAAI;QACF,MAAM,YAAY,MAAM,8HAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC3C,OAAO;gBACL,yBAAyB;gBACzB,QAAQ;gBACR,oBAAoB;oBAClB,KAAK;gBACP;YACF;YACA,QAAQ;gBACN,oBAAoB;YACtB;QACF;QAEA,OAAO,UACJ,GAAG,CAAC,CAAC,IAAM,EAAE,kBAAkB,EAC/B,MAAM,CAAC,CAAC,OAAmC,SAAS;IACzD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO,EAAE;IACX;AACF;AAOO,eAAe,gBAAgB,QAA0B;IAC9D,MAAM,WAAW,MAAM,gBAAgB;IACvC,OAAO,aAAa;AACtB"}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/app/%5Blocale%5D/shop/page.tsx"],"sourcesContent":["import { Suspense } from 'react';\nimport { Metadata } from 'next';\nimport { Header } from '@/components/public/Header';\nimport { Footer } from '@/components/public/Footer';\nimport { ShopContent } from '@/components/public/ShopContent';\nimport { PageOverrideRenderer } from '@/components/public/PageOverrideRenderer';\nimport { getProducts, getCategories, getCategoryBySlug, countProducts } from '@/lib/translations';\nimport { getPageOverride } from '@/lib/page-overrides';\n\nimport { getTranslations } from 'next-intl/server';\n\nexport async function generateMetadata() {\n  const t = await getTranslations('metadata.shop');\n\n  return {\n    title: t('title'),\n    description: t('description'),\n    openGraph: {\n      title: t('ogTitle'),\n      description: t('ogDescription'),\n      type: 'website',\n    },\n  };\n}\n\nexport default async function ShopPage({\n  params,\n  searchParams,\n}: {\n  params: Promise<{ locale: string }>;\n  searchParams: Promise<{ [key: string]: string | string[] | undefined }>;\n}) {\n  const { locale } = await params;\n\n  // Check for page override\n  const overridePage = await getPageOverride('SHOP');\n  if (overridePage) {\n    return <PageOverrideRenderer page={overridePage} />;\n  }\n  const urlParams = await searchParams;\n  \n  const search = typeof urlParams.search === 'string' ? urlParams.search : '';\n  const category = typeof urlParams.category === 'string' ? urlParams.category : '';\n  const featured = urlParams.featured === 'true';\n  const sort = typeof urlParams.sort === 'string' ? urlParams.sort : 'newest';\n  const pageParam = parseInt(typeof urlParams.page === 'string' ? urlParams.page : '1', 10);\n  const requestedPage = pageParam > 0 ? pageParam : 1; // Ensure page is at least 1\n  const limit = 24; // Products per page\n\n  // Build where clause\n  const where: any = {\n    published: true,\n  };\n\n  if (search) {\n    where.OR = [\n      { name: { contains: search } },\n      { description: { contains: search } },\n      {\n        translations: {\n          some: {\n            locale,\n            OR: [\n              { name: { contains: search } },\n              { description: { contains: search } },\n            ],\n          },\n        },\n      },\n    ];\n  }\n\n  if (category) {\n    const categoryRecord = await getCategoryBySlug(category, locale);\n    if (categoryRecord) {\n      where.categoryId = categoryRecord.id;\n    }\n  }\n\n  if (featured) {\n    where.featured = true;\n  }\n\n  // Build orderBy clause\n  let orderBy: any = { createdAt: 'desc' }; // default\n  if (sort === 'price-asc') {\n    orderBy = { price: 'asc' };\n  } else if (sort === 'price-desc') {\n    orderBy = { price: 'desc' };\n  } else if (sort === 'name') {\n    orderBy = { name: 'asc' };\n  }\n\n  // Get total count first to validate page number\n  const total = await countProducts(where);\n  const totalPages = Math.ceil(total / limit);\n  const page = totalPages > 0 ? Math.min(requestedPage, totalPages) : 1;\n  const skip = (page - 1) * limit;\n\n  // Fetch products with translations and pagination\n  const productsData = await getProducts({ where, orderBy, take: limit, skip }, locale);\n\n  // Convert Decimal fields to strings for client components\n  const products = productsData.map(product => ({\n    ...product,\n    price: product.price.toString(),\n    comparePrice: product.comparePrice ? product.comparePrice.toString() : null,\n  }));\n\n  // Fetch categories with translations\n  const categories = await getCategories(locale);\n\n  return (\n    <div className=\"flex flex-col min-h-screen\">\n      <Header />\n      <main className=\"flex-1 bg-gray-50\">\n        <Suspense fallback={<div>Loading...</div>}>\n          <ShopContent\n            products={products}\n            categories={categories}\n            initialSearch={search}\n            initialCategory={category}\n            initialFeatured={featured}\n            initialSort={sort}\n            pagination={{\n              page,\n              totalPages,\n              total,\n              limit,\n            }}\n          />\n        </Suspense>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}