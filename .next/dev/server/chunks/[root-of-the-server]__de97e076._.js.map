{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from 'next-auth';\nimport CredentialsProvider from 'next-auth/providers/credentials';\nimport { PrismaAdapter } from '@next-auth/prisma-adapter';\nimport { prisma } from './prisma';\nimport { compare } from 'bcryptjs';\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  session: {\n    strategy: 'jwt',\n  },\n  pages: {\n    signIn: '/admin/login',\n  },\n  providers: [\n    CredentialsProvider({\n      name: 'credentials',\n      credentials: {\n        email: { label: 'Email', type: 'email' },\n        password: { label: 'Password', type: 'password' },\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        const user = await prisma.user.findUnique({\n          where: {\n            email: credentials.email,\n          },\n        });\n\n        if (!user || !user.password) {\n          return null;\n        }\n\n        const isPasswordValid = await compare(\n          credentials.password,\n          user.password\n        );\n\n        if (!isPasswordValid) {\n          return null;\n        }\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          role: user.role,\n        };\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user, trigger }) {\n      if (user) {\n        return {\n          ...token,\n          id: user.id,\n          role: user.role,\n        };\n      }\n\n      // Validate session hasn't been invalidated\n      if (token.id) {\n        const dbUser = await prisma.user.findUnique({\n          where: { id: token.id as string },\n          select: { sessionsInvalidatedAt: true, role: true },\n        });\n\n        if (dbUser) {\n          // Check if JWT was issued before sessions were invalidated\n          if (dbUser.sessionsInvalidatedAt) {\n            const tokenIssuedAt = token.iat ? token.iat * 1000 : 0; // Convert to milliseconds\n            const invalidatedAt = new Date(dbUser.sessionsInvalidatedAt).getTime();\n\n            if (tokenIssuedAt < invalidatedAt) {\n              // Session has been invalidated - return null to force re-login\n              return null as any;\n            }\n          }\n\n          // Update role in token if it changed\n          token.role = dbUser.role;\n        } else {\n          // User no longer exists\n          return null as any;\n        }\n      }\n\n      return token;\n    },\n    async session({ session, token }) {\n      // If token is null, session is invalid\n      if (!token) {\n        return null as any;\n      }\n\n      return {\n        ...session,\n        user: {\n          ...session.user,\n          id: token.id,\n          role: token.role,\n        },\n      };\n    },\n  },\n};\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,uLAAa,EAAC,gIAAM;IAC7B,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBACL,OAAO,YAAY,KAAK;oBAC1B;gBACF;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBAC3B,OAAO;gBACT;gBAEA,MAAM,kBAAkB,MAAM,IAAA,8IAAO,EACnC,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGf,IAAI,CAAC,iBAAiB;oBACpB,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE;YAChC,IAAI,MAAM;gBACR,OAAO;oBACL,GAAG,KAAK;oBACR,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;gBACjB;YACF;YAEA,2CAA2C;YAC3C,IAAI,MAAM,EAAE,EAAE;gBACZ,MAAM,SAAS,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBAC1C,OAAO;wBAAE,IAAI,MAAM,EAAE;oBAAW;oBAChC,QAAQ;wBAAE,uBAAuB;wBAAM,MAAM;oBAAK;gBACpD;gBAEA,IAAI,QAAQ;oBACV,2DAA2D;oBAC3D,IAAI,OAAO,qBAAqB,EAAE;wBAChC,MAAM,gBAAgB,MAAM,GAAG,GAAG,MAAM,GAAG,GAAG,OAAO,GAAG,0BAA0B;wBAClF,MAAM,gBAAgB,IAAI,KAAK,OAAO,qBAAqB,EAAE,OAAO;wBAEpE,IAAI,gBAAgB,eAAe;4BACjC,+DAA+D;4BAC/D,OAAO;wBACT;oBACF;oBAEA,qCAAqC;oBACrC,MAAM,IAAI,GAAG,OAAO,IAAI;gBAC1B,OAAO;oBACL,wBAAwB;oBACxB,OAAO;gBACT;YACF;YAEA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,uCAAuC;YACvC,IAAI,CAAC,OAAO;gBACV,OAAO;YACT;YAEA,OAAO;gBACL,GAAG,OAAO;gBACV,MAAM;oBACJ,GAAG,QAAQ,IAAI;oBACf,IAAI,MAAM,EAAE;oBACZ,MAAM,MAAM,IAAI;gBAClB;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/activity-log.ts"],"sourcesContent":["import { prisma } from './prisma'\n\nexport interface ActivityLogInput {\n  userId: string\n  action: string\n  resource: string\n  resourceId?: string\n  details?: string\n  ipAddress?: string\n  userAgent?: string\n}\n\nexport interface ActivityLogFilters {\n  page?: number\n  limit?: number\n  userId?: string\n  action?: string\n  resource?: string\n  resourceId?: string\n  startDate?: Date\n  endDate?: Date\n}\n\nexport interface ActivityLogResult {\n  logs: any[]\n  total: number\n  page: number\n  limit: number\n  totalPages: number\n}\n\n/**\n * Log an admin activity\n */\nexport async function logActivity(input: ActivityLogInput) {\n  try {\n    const log = await prisma.adminActivityLog.create({\n      data: {\n        userId: input.userId,\n        action: input.action,\n        resource: input.resource,\n        resourceId: input.resourceId,\n        details: input.details,\n        ipAddress: input.ipAddress,\n        userAgent: input.userAgent,\n      },\n    })\n    return log\n  } catch (error) {\n    console.error('Error logging activity:', error)\n    throw error\n  }\n}\n\n/**\n * Get activity logs with filters and pagination\n */\nexport async function getActivityLogs(\n  filters: ActivityLogFilters = {}\n): Promise<ActivityLogResult> {\n  const {\n    page = 1,\n    limit = 20,\n    userId,\n    action,\n    resource,\n    resourceId,\n    startDate,\n    endDate,\n  } = filters\n\n  const where: any = {}\n\n  if (userId) {\n    where.userId = userId\n  }\n\n  if (action) {\n    where.action = action\n  }\n\n  if (resource) {\n    where.resource = resource\n  }\n\n  if (resourceId) {\n    where.resourceId = resourceId\n  }\n\n  if (startDate || endDate) {\n    where.createdAt = {}\n    if (startDate) {\n      where.createdAt.gte = startDate\n    }\n    if (endDate) {\n      where.createdAt.lte = endDate\n    }\n  }\n\n  const [logs, total] = await Promise.all([\n    prisma.adminActivityLog.findMany({\n      where,\n      include: {\n        user: {\n          select: {\n            name: true,\n            email: true,\n            role: true,\n          },\n        },\n      },\n      orderBy: { createdAt: 'desc' },\n      skip: (page - 1) * limit,\n      take: limit,\n    }),\n    prisma.adminActivityLog.count({ where }),\n  ])\n\n  return {\n    logs,\n    total,\n    page,\n    limit,\n    totalPages: Math.ceil(total / limit) || 0,\n  }\n}\n\n/**\n * Get activity logs by user ID\n */\nexport async function getActivityLogsByUser(\n  userId: string,\n  options: { page?: number; limit?: number } = {}\n): Promise<ActivityLogResult> {\n  return getActivityLogs({\n    userId,\n    page: options.page,\n    limit: options.limit,\n  })\n}\n\n/**\n * Get activity logs by resource\n */\nexport async function getActivityLogsByResource(\n  resource: string,\n  resourceId?: string,\n  options: { page?: number; limit?: number } = {}\n): Promise<ActivityLogResult> {\n  return getActivityLogs({\n    resource,\n    resourceId,\n    page: options.page,\n    limit: options.limit,\n  })\n}\n\n/**\n * Helper to extract IP address from request\n */\nexport function getClientIp(request: Request): string | undefined {\n  const forwardedFor = request.headers.get('x-forwarded-for')\n  if (forwardedFor) {\n    return forwardedFor.split(',')[0].trim()\n  }\n  const realIp = request.headers.get('x-real-ip')\n  if (realIp) {\n    return realIp\n  }\n  return undefined\n}\n\n/**\n * Helper to extract user agent from request\n */\nexport function getUserAgent(request: Request): string | undefined {\n  return request.headers.get('user-agent') || undefined\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAkCO,eAAe,YAAY,KAAuB;IACvD,IAAI;QACF,MAAM,MAAM,MAAM,gIAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;YAC/C,MAAM;gBACJ,QAAQ,MAAM,MAAM;gBACpB,QAAQ,MAAM,MAAM;gBACpB,UAAU,MAAM,QAAQ;gBACxB,YAAY,MAAM,UAAU;gBAC5B,SAAS,MAAM,OAAO;gBACtB,WAAW,MAAM,SAAS;gBAC1B,WAAW,MAAM,SAAS;YAC5B;QACF;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACR;AACF;AAKO,eAAe,gBACpB,UAA8B,CAAC,CAAC;IAEhC,MAAM,EACJ,OAAO,CAAC,EACR,QAAQ,EAAE,EACV,MAAM,EACN,MAAM,EACN,QAAQ,EACR,UAAU,EACV,SAAS,EACT,OAAO,EACR,GAAG;IAEJ,MAAM,QAAa,CAAC;IAEpB,IAAI,QAAQ;QACV,MAAM,MAAM,GAAG;IACjB;IAEA,IAAI,QAAQ;QACV,MAAM,MAAM,GAAG;IACjB;IAEA,IAAI,UAAU;QACZ,MAAM,QAAQ,GAAG;IACnB;IAEA,IAAI,YAAY;QACd,MAAM,UAAU,GAAG;IACrB;IAEA,IAAI,aAAa,SAAS;QACxB,MAAM,SAAS,GAAG,CAAC;QACnB,IAAI,WAAW;YACb,MAAM,SAAS,CAAC,GAAG,GAAG;QACxB;QACA,IAAI,SAAS;YACX,MAAM,SAAS,CAAC,GAAG,GAAG;QACxB;IACF;IAEA,MAAM,CAAC,MAAM,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;QACtC,gIAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC;YAC/B;YACA,SAAS;gBACP,MAAM;oBACJ,QAAQ;wBACN,MAAM;wBACN,OAAO;wBACP,MAAM;oBACR;gBACF;YACF;YACA,SAAS;gBAAE,WAAW;YAAO;YAC7B,MAAM,CAAC,OAAO,CAAC,IAAI;YACnB,MAAM;QACR;QACA,gIAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC;YAAE;QAAM;KACvC;IAED,OAAO;QACL;QACA;QACA;QACA;QACA,YAAY,KAAK,IAAI,CAAC,QAAQ,UAAU;IAC1C;AACF;AAKO,eAAe,sBACpB,MAAc,EACd,UAA6C,CAAC,CAAC;IAE/C,OAAO,gBAAgB;QACrB;QACA,MAAM,QAAQ,IAAI;QAClB,OAAO,QAAQ,KAAK;IACtB;AACF;AAKO,eAAe,0BACpB,QAAgB,EAChB,UAAmB,EACnB,UAA6C,CAAC,CAAC;IAE/C,OAAO,gBAAgB;QACrB;QACA;QACA,MAAM,QAAQ,IAAI;QAClB,OAAO,QAAQ,KAAK;IACtB;AACF;AAKO,SAAS,YAAY,OAAgB;IAC1C,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC;IACzC,IAAI,cAAc;QAChB,OAAO,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;IACxC;IACA,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC;IACnC,IAAI,QAAQ;QACV,OAAO;IACT;IACA,OAAO;AACT;AAKO,SAAS,aAAa,OAAgB;IAC3C,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,iBAAiB;AAC9C"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/app/api/pos/orders/%5Bid%5D/complete/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { getServerSession } from 'next-auth';\r\nimport { authOptions } from '@/lib/auth';\r\nimport { prisma } from '@/lib/prisma';\r\nimport { logActivity, getClientIp, getUserAgent } from '@/lib/activity-log';\r\n\r\nasync function generateOrderNumber(): Promise<string> {\r\n  const date = new Date();\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n\r\n  const startOfDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n  const endOfDay = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1);\r\n\r\n  const todayOrders = await prisma.order.count({\r\n    where: {\r\n      createdAt: {\r\n        gte: startOfDay,\r\n        lt: endOfDay,\r\n      },\r\n    },\r\n  });\r\n\r\n  const sequence = String(todayOrders + 1).padStart(4, '0');\r\n  return `ORD-${year}${month}${day}-${sequence}`;\r\n}\r\n\r\nexport async function POST(\r\n  request: NextRequest,\r\n  { params }: { params: Promise<{ id: string }> }\r\n) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n\r\n    if (!session || !['ADMIN', 'SUPERADMIN', 'MANAGER'].includes(session.user.role)) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    const { id } = await params;\r\n    const body = await request.json();\r\n    const { items, subtotal, tax, discount, discountCode, total, customerEmail, customerName } = body;\r\n\r\n    // Get POS order\r\n    const posOrder = await prisma.posOrder.findUnique({\r\n      where: { id },\r\n      include: {\r\n        location: true,\r\n        cashier: {\r\n          include: {\r\n            user: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!posOrder) {\r\n      return NextResponse.json({ error: 'POS order not found' }, { status: 404 });\r\n    }\r\n\r\n    if (posOrder.orderId) {\r\n      return NextResponse.json(\r\n        { error: 'POS order already completed' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Validate items and check stock\r\n    for (const item of items) {\r\n      if (item.variantId) {\r\n        const variant = await prisma.productVariant.findUnique({\r\n          where: { id: item.variantId },\r\n        });\r\n        if (!variant || variant.stock < item.quantity) {\r\n          return NextResponse.json(\r\n            { error: `Insufficient stock for variant ${item.variantId}` },\r\n            { status: 400 }\r\n          );\r\n        }\r\n      } else {\r\n        const product = await prisma.product.findUnique({\r\n          where: { id: item.productId },\r\n        });\r\n        if (!product || product.stock < item.quantity) {\r\n          return NextResponse.json(\r\n            { error: `Insufficient stock for product ${item.productId}` },\r\n            { status: 400 }\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    // Create main order\r\n    const orderNumber = await generateOrderNumber();\r\n\r\n    // Create shipping address (minimal for POS orders)\r\n    const address = await prisma.address.create({\r\n      data: {\r\n        firstName: customerName || 'POS',\r\n        lastName: 'Customer',\r\n        address1: posOrder.location.address || 'Store Location',\r\n        city: 'N/A',\r\n        postalCode: '00000',\r\n        country: 'USA',\r\n      },\r\n    });\r\n\r\n    // Get discount code if provided\r\n    let discountCodeId = null;\r\n    if (discountCode && discountCode !== 'MANUAL-PERCENTAGE' && discountCode !== 'MANUAL-FIXED_AMOUNT') {\r\n      const discount = await prisma.discountCode.findUnique({\r\n        where: { code: discountCode },\r\n      });\r\n      if (discount) {\r\n        discountCodeId = discount.id;\r\n        // Increment usage count\r\n        await prisma.discountCode.update({\r\n          where: { id: discount.id },\r\n          data: { usedCount: { increment: 1 } },\r\n        });\r\n      }\r\n    }\r\n\r\n    const order = await prisma.order.create({\r\n      data: {\r\n        orderNumber,\r\n        status: 'PROCESSING',\r\n        paymentStatus: posOrder.paymentMethod === 'CASH' ? 'PAID' : 'PAID',\r\n        subtotal,\r\n        tax: tax || 0,\r\n        shipping: 0,\r\n        total,\r\n        discountAmount: discount || 0,\r\n        discountCodeId,\r\n        isGuest: !customerEmail,\r\n        guestEmail: customerEmail || null,\r\n        isPosOrder: true,\r\n        shippingAddressId: address.id,\r\n        items: {\r\n          create: items.map((item: any) => ({\r\n            productId: item.productId,\r\n            variantId: item.variantId || null,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n            total: item.price * item.quantity,\r\n          })),\r\n        },\r\n      },\r\n      include: {\r\n        items: {\r\n          include: {\r\n            product: true,\r\n            variant: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    // Update stock\r\n    for (const item of items) {\r\n      if (item.variantId) {\r\n        await prisma.$transaction([\r\n          prisma.productVariant.update({\r\n            where: { id: item.variantId },\r\n            data: {\r\n              stock: {\r\n                decrement: item.quantity,\r\n              },\r\n            },\r\n          }),\r\n          prisma.product.update({\r\n            where: { id: item.productId },\r\n            data: {\r\n              stock: {\r\n                decrement: item.quantity,\r\n              },\r\n            },\r\n          }),\r\n        ]);\r\n      } else {\r\n        await prisma.product.update({\r\n          where: { id: item.productId },\r\n          data: {\r\n            stock: {\r\n              decrement: item.quantity,\r\n            },\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Link POS order to main order\r\n    await prisma.posOrder.update({\r\n      where: { id },\r\n      data: {\r\n        orderId: order.id,\r\n      },\r\n    });\r\n\r\n    await logActivity({\r\n      userId: session.user.id,\r\n      action: 'CREATE',\r\n      resource: 'ORDER',\r\n      resourceId: order.id,\r\n      details: `Completed POS order ${posOrder.id} and created main order: ${order.orderNumber}`,\r\n      ipAddress: getClientIp(request),\r\n      userAgent: getUserAgent(request),\r\n    });\r\n\r\n    return NextResponse.json({\r\n      order,\r\n      posOrder: {\r\n        ...posOrder,\r\n        orderId: order.id,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error('Error completing POS order:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to complete POS order' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}