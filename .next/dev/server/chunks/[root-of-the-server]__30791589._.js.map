{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from 'next-auth';\nimport CredentialsProvider from 'next-auth/providers/credentials';\nimport { PrismaAdapter } from '@next-auth/prisma-adapter';\nimport { prisma } from './prisma';\nimport { compare } from 'bcryptjs';\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  session: {\n    strategy: 'jwt',\n  },\n  pages: {\n    signIn: '/admin/login',\n  },\n  providers: [\n    CredentialsProvider({\n      name: 'credentials',\n      credentials: {\n        email: { label: 'Email', type: 'email' },\n        password: { label: 'Password', type: 'password' },\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        const user = await prisma.user.findUnique({\n          where: {\n            email: credentials.email,\n          },\n        });\n\n        if (!user || !user.password) {\n          return null;\n        }\n\n        const isPasswordValid = await compare(\n          credentials.password,\n          user.password\n        );\n\n        if (!isPasswordValid) {\n          return null;\n        }\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n          role: user.role,\n        };\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user, trigger }) {\n      if (user) {\n        return {\n          ...token,\n          id: user.id,\n          role: user.role,\n        };\n      }\n\n      // Validate session hasn't been invalidated\n      if (token.id) {\n        const dbUser = await prisma.user.findUnique({\n          where: { id: token.id as string },\n          select: { sessionsInvalidatedAt: true, role: true },\n        });\n\n        if (dbUser) {\n          // Check if JWT was issued before sessions were invalidated\n          if (dbUser.sessionsInvalidatedAt) {\n            const tokenIssuedAt = token.iat ? token.iat * 1000 : 0; // Convert to milliseconds\n            const invalidatedAt = new Date(dbUser.sessionsInvalidatedAt).getTime();\n\n            if (tokenIssuedAt < invalidatedAt) {\n              // Session has been invalidated - return null to force re-login\n              return null as any;\n            }\n          }\n\n          // Update role in token if it changed\n          token.role = dbUser.role;\n        } else {\n          // User no longer exists\n          return null as any;\n        }\n      }\n\n      return token;\n    },\n    async session({ session, token }) {\n      // If token is null, session is invalid\n      if (!token) {\n        return null as any;\n      }\n\n      return {\n        ...session,\n        user: {\n          ...session.user,\n          id: token.id,\n          role: token.role,\n        },\n      };\n    },\n  },\n};\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,uLAAa,EAAC,gIAAM;IAC7B,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBACL,OAAO,YAAY,KAAK;oBAC1B;gBACF;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBAC3B,OAAO;gBACT;gBAEA,MAAM,kBAAkB,MAAM,IAAA,8IAAO,EACnC,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGf,IAAI,CAAC,iBAAiB;oBACpB,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE;YAChC,IAAI,MAAM;gBACR,OAAO;oBACL,GAAG,KAAK;oBACR,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;gBACjB;YACF;YAEA,2CAA2C;YAC3C,IAAI,MAAM,EAAE,EAAE;gBACZ,MAAM,SAAS,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBAC1C,OAAO;wBAAE,IAAI,MAAM,EAAE;oBAAW;oBAChC,QAAQ;wBAAE,uBAAuB;wBAAM,MAAM;oBAAK;gBACpD;gBAEA,IAAI,QAAQ;oBACV,2DAA2D;oBAC3D,IAAI,OAAO,qBAAqB,EAAE;wBAChC,MAAM,gBAAgB,MAAM,GAAG,GAAG,MAAM,GAAG,GAAG,OAAO,GAAG,0BAA0B;wBAClF,MAAM,gBAAgB,IAAI,KAAK,OAAO,qBAAqB,EAAE,OAAO;wBAEpE,IAAI,gBAAgB,eAAe;4BACjC,+DAA+D;4BAC/D,OAAO;wBACT;oBACF;oBAEA,qCAAqC;oBACrC,MAAM,IAAI,GAAG,OAAO,IAAI;gBAC1B,OAAO;oBACL,wBAAwB;oBACxB,OAAO;gBACT;YACF;YAEA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,uCAAuC;YACvC,IAAI,CAAC,OAAO;gBACV,OAAO;YACT;YAEA,OAAO;gBACL,GAAG,OAAO;gBACV,MAAM;oBACJ,GAAG,QAAQ,IAAI;oBACf,IAAI,MAAM,EAAE;oBACZ,MAAM,MAAM,IAAI;gBAClB;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/lib/activity-log.ts"],"sourcesContent":["import { prisma } from './prisma'\n\nexport interface ActivityLogInput {\n  userId: string\n  action: string\n  resource: string\n  resourceId?: string\n  details?: string\n  ipAddress?: string\n  userAgent?: string\n}\n\nexport interface ActivityLogFilters {\n  page?: number\n  limit?: number\n  userId?: string\n  action?: string\n  resource?: string\n  resourceId?: string\n  startDate?: Date\n  endDate?: Date\n}\n\nexport interface ActivityLogResult {\n  logs: any[]\n  total: number\n  page: number\n  limit: number\n  totalPages: number\n}\n\n/**\n * Log an admin activity\n */\nexport async function logActivity(input: ActivityLogInput) {\n  try {\n    const log = await prisma.adminActivityLog.create({\n      data: {\n        userId: input.userId,\n        action: input.action,\n        resource: input.resource,\n        resourceId: input.resourceId,\n        details: input.details,\n        ipAddress: input.ipAddress,\n        userAgent: input.userAgent,\n      },\n    })\n    return log\n  } catch (error) {\n    console.error('Error logging activity:', error)\n    throw error\n  }\n}\n\n/**\n * Get activity logs with filters and pagination\n */\nexport async function getActivityLogs(\n  filters: ActivityLogFilters = {}\n): Promise<ActivityLogResult> {\n  const {\n    page = 1,\n    limit = 20,\n    userId,\n    action,\n    resource,\n    resourceId,\n    startDate,\n    endDate,\n  } = filters\n\n  const where: any = {}\n\n  if (userId) {\n    where.userId = userId\n  }\n\n  if (action) {\n    where.action = action\n  }\n\n  if (resource) {\n    where.resource = resource\n  }\n\n  if (resourceId) {\n    where.resourceId = resourceId\n  }\n\n  if (startDate || endDate) {\n    where.createdAt = {}\n    if (startDate) {\n      where.createdAt.gte = startDate\n    }\n    if (endDate) {\n      where.createdAt.lte = endDate\n    }\n  }\n\n  const [logs, total] = await Promise.all([\n    prisma.adminActivityLog.findMany({\n      where,\n      include: {\n        user: {\n          select: {\n            name: true,\n            email: true,\n            role: true,\n          },\n        },\n      },\n      orderBy: { createdAt: 'desc' },\n      skip: (page - 1) * limit,\n      take: limit,\n    }),\n    prisma.adminActivityLog.count({ where }),\n  ])\n\n  return {\n    logs,\n    total,\n    page,\n    limit,\n    totalPages: Math.ceil(total / limit) || 0,\n  }\n}\n\n/**\n * Get activity logs by user ID\n */\nexport async function getActivityLogsByUser(\n  userId: string,\n  options: { page?: number; limit?: number } = {}\n): Promise<ActivityLogResult> {\n  return getActivityLogs({\n    userId,\n    page: options.page,\n    limit: options.limit,\n  })\n}\n\n/**\n * Get activity logs by resource\n */\nexport async function getActivityLogsByResource(\n  resource: string,\n  resourceId?: string,\n  options: { page?: number; limit?: number } = {}\n): Promise<ActivityLogResult> {\n  return getActivityLogs({\n    resource,\n    resourceId,\n    page: options.page,\n    limit: options.limit,\n  })\n}\n\n/**\n * Helper to extract IP address from request\n */\nexport function getClientIp(request: Request): string | undefined {\n  const forwardedFor = request.headers.get('x-forwarded-for')\n  if (forwardedFor) {\n    return forwardedFor.split(',')[0].trim()\n  }\n  const realIp = request.headers.get('x-real-ip')\n  if (realIp) {\n    return realIp\n  }\n  return undefined\n}\n\n/**\n * Helper to extract user agent from request\n */\nexport function getUserAgent(request: Request): string | undefined {\n  return request.headers.get('user-agent') || undefined\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAkCO,eAAe,YAAY,KAAuB;IACvD,IAAI;QACF,MAAM,MAAM,MAAM,gIAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;YAC/C,MAAM;gBACJ,QAAQ,MAAM,MAAM;gBACpB,QAAQ,MAAM,MAAM;gBACpB,UAAU,MAAM,QAAQ;gBACxB,YAAY,MAAM,UAAU;gBAC5B,SAAS,MAAM,OAAO;gBACtB,WAAW,MAAM,SAAS;gBAC1B,WAAW,MAAM,SAAS;YAC5B;QACF;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACR;AACF;AAKO,eAAe,gBACpB,UAA8B,CAAC,CAAC;IAEhC,MAAM,EACJ,OAAO,CAAC,EACR,QAAQ,EAAE,EACV,MAAM,EACN,MAAM,EACN,QAAQ,EACR,UAAU,EACV,SAAS,EACT,OAAO,EACR,GAAG;IAEJ,MAAM,QAAa,CAAC;IAEpB,IAAI,QAAQ;QACV,MAAM,MAAM,GAAG;IACjB;IAEA,IAAI,QAAQ;QACV,MAAM,MAAM,GAAG;IACjB;IAEA,IAAI,UAAU;QACZ,MAAM,QAAQ,GAAG;IACnB;IAEA,IAAI,YAAY;QACd,MAAM,UAAU,GAAG;IACrB;IAEA,IAAI,aAAa,SAAS;QACxB,MAAM,SAAS,GAAG,CAAC;QACnB,IAAI,WAAW;YACb,MAAM,SAAS,CAAC,GAAG,GAAG;QACxB;QACA,IAAI,SAAS;YACX,MAAM,SAAS,CAAC,GAAG,GAAG;QACxB;IACF;IAEA,MAAM,CAAC,MAAM,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;QACtC,gIAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC;YAC/B;YACA,SAAS;gBACP,MAAM;oBACJ,QAAQ;wBACN,MAAM;wBACN,OAAO;wBACP,MAAM;oBACR;gBACF;YACF;YACA,SAAS;gBAAE,WAAW;YAAO;YAC7B,MAAM,CAAC,OAAO,CAAC,IAAI;YACnB,MAAM;QACR;QACA,gIAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC;YAAE;QAAM;KACvC;IAED,OAAO;QACL;QACA;QACA;QACA;QACA,YAAY,KAAK,IAAI,CAAC,QAAQ,UAAU;IAC1C;AACF;AAKO,eAAe,sBACpB,MAAc,EACd,UAA6C,CAAC,CAAC;IAE/C,OAAO,gBAAgB;QACrB;QACA,MAAM,QAAQ,IAAI;QAClB,OAAO,QAAQ,KAAK;IACtB;AACF;AAKO,eAAe,0BACpB,QAAgB,EAChB,UAAmB,EACnB,UAA6C,CAAC,CAAC;IAE/C,OAAO,gBAAgB;QACrB;QACA;QACA,MAAM,QAAQ,IAAI;QAClB,OAAO,QAAQ,KAAK;IACtB;AACF;AAKO,SAAS,YAAY,OAAgB;IAC1C,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC;IACzC,IAAI,cAAc;QAChB,OAAO,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;IACxC;IACA,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC;IACnC,IAAI,QAAQ;QACV,OAAO;IACT;IACA,OAAO;AACT;AAKO,SAAS,aAAa,OAAgB;IAC3C,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,iBAAiB;AAC9C"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///C:/laragon/www/claude/ecommerce-platform/src/app/api/pos/orders/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { getServerSession } from 'next-auth';\r\nimport { authOptions } from '@/lib/auth';\r\nimport { prisma } from '@/lib/prisma';\r\nimport { logActivity, getClientIp, getUserAgent } from '@/lib/activity-log';\r\n\r\nasync function generatePosOrderNumber(): Promise<string> {\r\n  const date = new Date();\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n\r\n  const startOfDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n  const endOfDay = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1);\r\n\r\n  const todayOrders = await prisma.posOrder.count({\r\n    where: {\r\n      createdAt: {\r\n        gte: startOfDay,\r\n        lt: endOfDay,\r\n      },\r\n    },\r\n  });\r\n\r\n  const sequence = String(todayOrders + 1).padStart(4, '0');\r\n  return `POS-${year}${month}${day}-${sequence}`;\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n\r\n    if (!session || !['ADMIN', 'SUPERADMIN', 'MANAGER'].includes(session.user.role)) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    const searchParams = request.nextUrl.searchParams;\r\n    const locationId = searchParams.get('locationId');\r\n    const cashierId = searchParams.get('cashierId');\r\n    const orderType = searchParams.get('orderType');\r\n    const status = searchParams.get('status');\r\n    const startDate = searchParams.get('startDate');\r\n    const endDate = searchParams.get('endDate');\r\n\r\n    const where: any = {};\r\n\r\n    if (locationId) where.locationId = locationId;\r\n    if (cashierId) where.cashierId = cashierId;\r\n    if (orderType) where.orderType = orderType;\r\n    \r\n    // Handle status filter - if status is 'active', show only incomplete orders\r\n    if (status === 'active') {\r\n      where.orderId = null; // Orders not yet synced to main Order system\r\n    } else if (status) {\r\n      // If other status is provided, filter by main order status\r\n      where.order = {\r\n        status: status,\r\n      };\r\n    }\r\n    \r\n    if (startDate || endDate) {\r\n      where.createdAt = {};\r\n      if (startDate) where.createdAt.gte = new Date(startDate);\r\n      if (endDate) where.createdAt.lte = new Date(endDate);\r\n    }\r\n\r\n    const posOrders = await prisma.posOrder.findMany({\r\n      where,\r\n      include: {\r\n        location: {\r\n          select: {\r\n            id: true,\r\n            name: true,\r\n          },\r\n        },\r\n        cashier: {\r\n          include: {\r\n            user: {\r\n              select: {\r\n                id: true,\r\n                name: true,\r\n                email: true,\r\n              },\r\n            },\r\n          },\r\n        },\r\n        customer: {\r\n          select: {\r\n            id: true,\r\n            name: true,\r\n            email: true,\r\n          },\r\n        },\r\n        order: {\r\n          select: {\r\n            id: true,\r\n            orderNumber: true,\r\n            status: true,\r\n            total: true,\r\n          },\r\n        },\r\n      },\r\n      orderBy: {\r\n        createdAt: 'desc',\r\n      },\r\n      take: 100,\r\n    });\r\n\r\n    // Transform orders for frontend\r\n    const transformedOrders = posOrders.map((posOrder) => ({\r\n      id: posOrder.id,\r\n      orderNumber: posOrder.order?.orderNumber || `POS-${posOrder.id.slice(0, 8).toUpperCase()}`,\r\n      orderType: posOrder.orderType,\r\n      paymentMethod: posOrder.paymentMethod,\r\n      total: posOrder.order ? Number(posOrder.order.total) : Number(posOrder.total),\r\n      subtotal: Number(posOrder.subtotal),\r\n      tax: Number(posOrder.tax),\r\n      discount: Number(posOrder.discount),\r\n      status: posOrder.status || (posOrder.orderId ? 'COMPLETED' : 'ACTIVE'),\r\n      location: posOrder.location,\r\n      cashier: posOrder.cashier,\r\n      customer: posOrder.customer,\r\n      notes: posOrder.notes,\r\n      createdAt: posOrder.createdAt.toISOString(),\r\n      orderId: posOrder.orderId,\r\n    }));\r\n\r\n    return NextResponse.json({ orders: transformedOrders });\r\n  } catch (error: any) {\r\n    console.error('Error fetching POS orders:', error);\r\n    \r\n    // Handle Prisma errors gracefully\r\n    if (error.code === 'P2001' || error.message?.includes('does not exist')) {\r\n      return NextResponse.json(\r\n        { error: 'POS tables not found. Please run database migrations.' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n    \r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch POS orders', details: error.message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const session = await getServerSession(authOptions);\r\n\r\n    if (!session || !['ADMIN', 'SUPERADMIN', 'MANAGER'].includes(session.user.role)) {\r\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n    }\r\n\r\n    const body = await request.json();\r\n    const {\r\n      orderType,\r\n      locationId,\r\n      cashierId,\r\n      customerId,\r\n      tableNumber,\r\n      customerName,\r\n      items,\r\n      subtotal,\r\n      tax,\r\n      discount,\r\n      discountCode,\r\n      discountType,\r\n      total,\r\n      paymentMethod,\r\n      paymentDetails,\r\n      notes,\r\n    } = body;\r\n\r\n    // Validation\r\n    if (!orderType || !locationId || !cashierId || !items || items.length === 0) {\r\n      return NextResponse.json(\r\n        { error: 'Missing required fields' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Verify location and cashier\r\n    const [location, cashier] = await Promise.all([\r\n      prisma.location.findUnique({ where: { id: locationId } }),\r\n      prisma.cashier.findUnique({ where: { id: cashierId } }),\r\n    ]);\r\n\r\n    if (!location) {\r\n      return NextResponse.json({ error: 'Location not found' }, { status: 404 });\r\n    }\r\n    if (!cashier) {\r\n      return NextResponse.json({ error: 'Cashier not found' }, { status: 404 });\r\n    }\r\n\r\n    // Verify customer if provided\r\n    if (customerId) {\r\n      const customer = await prisma.user.findUnique({\r\n        where: { id: customerId, role: 'CUSTOMER' },\r\n      });\r\n      if (!customer) {\r\n        return NextResponse.json({ error: 'Customer not found' }, { status: 404 });\r\n      }\r\n    }\r\n\r\n    // Create POS order\r\n    const posOrder = await prisma.posOrder.create({\r\n      data: {\r\n        orderType,\r\n        locationId,\r\n        cashierId,\r\n        customerId: customerId || null,\r\n        tableNumber,\r\n        customerName: customerName || null,\r\n        paymentMethod: paymentMethod || 'CASH',\r\n        paymentDetails: paymentDetails ? JSON.stringify(paymentDetails) : null,\r\n        receiptPrinted: false,\r\n        subtotal: subtotal || 0,\r\n        tax: tax || 0,\r\n        discount: discount || 0,\r\n        discountCode: discountCode || null,\r\n        discountType: discountType || null,\r\n        total: total || 0,\r\n        notes: notes || null,\r\n        status: 'ACTIVE',\r\n      },\r\n      include: {\r\n        location: true,\r\n        cashier: {\r\n          include: {\r\n            user: {\r\n              select: {\r\n                name: true,\r\n                email: true,\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    await logActivity({\r\n      userId: session.user.id,\r\n      action: 'CREATE',\r\n      resource: 'POS_ORDER',\r\n      resourceId: posOrder.id,\r\n      details: `Created POS order: ${posOrder.id}`,\r\n      ipAddress: getClientIp(request),\r\n      userAgent: getUserAgent(request),\r\n    });\r\n\r\n    return NextResponse.json(posOrder, { status: 201 });\r\n  } catch (error) {\r\n    console.error('Error creating POS order:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to create POS order' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}