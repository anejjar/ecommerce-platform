{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,qKAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\nimport { prisma } from '@/lib/prisma';\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  const path = request.nextUrl.pathname;\r\n\r\n  // Skip middleware for static files, API routes, and admin routes\r\n  if (\r\n    path.startsWith('/_next') ||\r\n    path.startsWith('/api') ||\r\n    path.startsWith('/admin') ||\r\n    path.includes('.') // Skip files with extensions\r\n  ) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  try {\r\n    // Check for active redirects\r\n    const redirect = await prisma.urlRedirect.findFirst({\r\n      where: {\r\n        fromPath: path,\r\n        isActive: true,\r\n      },\r\n    });\r\n\r\n    if (redirect) {\r\n      // Update hit count\r\n      await prisma.urlRedirect.update({\r\n        where: { id: redirect.id },\r\n        data: {\r\n          hitCount: { increment: 1 },\r\n          lastHitAt: new Date(),\r\n        },\r\n      });\r\n\r\n      // Determine status code\r\n      const statusCode = redirect.type === 'PERMANENT_301' ? 301 : 302;\r\n\r\n      // Perform redirect\r\n      return NextResponse.redirect(\r\n        new URL(redirect.toPath, request.url),\r\n        statusCode\r\n      );\r\n    }\r\n  } catch (error) {\r\n    console.error('Error in redirect middleware:', error);\r\n    // Continue to the next middleware/handler if there's an error\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     */\r\n    '/((?!_next/static|_next/image|favicon.ico).*)',\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;;;AAEO,eAAe,WAAW,OAAoB;IACnD,MAAM,OAAO,QAAQ,OAAO,CAAC,QAAQ;IAErC,iEAAiE;IACjE,IACE,KAAK,UAAU,CAAC,aAChB,KAAK,UAAU,CAAC,WAChB,KAAK,UAAU,CAAC,aAChB,KAAK,QAAQ,CAAC,KAAK,6BAA6B;MAChD;QACA,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,IAAI;QACF,6BAA6B;QAC7B,MAAM,WAAW,MAAM,sIAAM,CAAC,WAAW,CAAC,SAAS,CAAC;YAClD,OAAO;gBACL,UAAU;gBACV,UAAU;YACZ;QACF;QAEA,IAAI,UAAU;YACZ,mBAAmB;YACnB,MAAM,sIAAM,CAAC,WAAW,CAAC,MAAM,CAAC;gBAC9B,OAAO;oBAAE,IAAI,SAAS,EAAE;gBAAC;gBACzB,MAAM;oBACJ,UAAU;wBAAE,WAAW;oBAAE;oBACzB,WAAW,IAAI;gBACjB;YACF;YAEA,wBAAwB;YACxB,MAAM,aAAa,SAAS,IAAI,KAAK,kBAAkB,MAAM;YAE7D,mBAAmB;YACnB,OAAO,gMAAY,CAAC,QAAQ,CAC1B,IAAI,IAAI,SAAS,MAAM,EAAE,QAAQ,GAAG,GACpC;QAEJ;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;IAC/C,8DAA8D;IAChE;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;KAKC,GACD;KACD;AACH"}}]
}