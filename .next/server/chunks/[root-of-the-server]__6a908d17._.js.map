{"version":3,"sources":["../../../src/lib/prisma.ts","../../../src/lib/features.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query'],\n  });\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n","import { prisma } from './prisma'\n\n/**\n * Check if a feature is enabled\n */\nexport async function isFeatureEnabled(featureName: string): Promise<boolean> {\n  try {\n    const feature = await prisma.featureFlag.findUnique({\n      where: { name: featureName },\n    })\n    return feature?.enabled ?? false\n  } catch (error) {\n    console.error(`Error checking feature flag ${featureName}:`, error)\n    return false\n  }\n}\n\n/**\n * Get all enabled features\n */\nexport async function getEnabledFeatures(): Promise<string[]> {\n  try {\n    const features = await prisma.featureFlag.findMany({\n      where: { enabled: true },\n      select: { name: true },\n    })\n    return features.map(f => f.name)\n  } catch (error) {\n    console.error('Error getting enabled features:', error)\n    return []\n  }\n}\n"],"names":[],"mappings":"+QAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAMO,IAAM,EAJW,AAKtB,WAAgB,MAAM,EACtB,IAAI,EAAA,YAAY,CAAC,CACf,IAAK,CAAC,QACR,AADgB,otCCTlB,IAAA,EAAA,EAAA,CAAA,CAAA,QAKO,eAAe,EAAiB,CAAmB,EACxD,GAAI,CACF,IAAM,EAAU,MAAM,EAAA,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,CAClD,MAAO,CAAE,KAAM,CAAY,CAC7B,GACA,OAAO,GAAS,UAAW,CAC7B,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,CAAC,4BAA4B,EAAE,EAAY,CAAC,CAAC,CAAE,GACtD,EACT,CACF"}