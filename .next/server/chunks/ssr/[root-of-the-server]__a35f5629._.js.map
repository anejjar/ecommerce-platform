{"version":3,"sources":["../../../../src/components/public/PageOverrideRenderer.tsx","../../../../src/components/public/Header.tsx/__nextjs-internal-proxy.mjs","../../../../src/components/public/Footer.tsx/__nextjs-internal-proxy.mjs","../../../../src/components/landing-page/BlockRenderer.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%5Blocale%5D/%5Bslug%5D/page.tsx"],"sourcesContent":["import { Page } from '@prisma/client';\r\nimport { Header } from './Header';\r\nimport { Footer } from './Footer';\r\nimport { BlockRenderer } from '@/components/landing-page/BlockRenderer';\r\n\r\ninterface PageOverrideRendererProps {\r\n  page: Page & {\r\n    blocks?: any[];\r\n  };\r\n}\r\n\r\nexport function PageOverrideRenderer({ page }: PageOverrideRendererProps) {\r\n  const useLayout = page.useStorefrontLayout ?? true;\r\n  const hasBlocks = page.useBlockEditor && page.blocks && page.blocks.length > 0;\r\n  const hasContent = page.content && page.content.trim().length > 0;\r\n\r\n  const content = (\r\n    <>\r\n      {/* Custom CSS */}\r\n      {page.customCss && (\r\n        <style dangerouslySetInnerHTML={{ __html: page.customCss }} />\r\n      )}\r\n\r\n      {/* Render rich text content if present */}\r\n      {hasContent && (\r\n        <div className=\"prose prose-lg max-w-none mb-8\">\r\n          <div dangerouslySetInnerHTML={{ __html: page.content || '' }} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Render blocks if present */}\r\n      {hasBlocks && (\r\n        <div className=\"page-blocks\">\r\n          {page.blocks\r\n            ?.filter((block: any) => block.isVisible !== false)\r\n            .sort((a: any, b: any) => (a.order || 0) - (b.order || 0))\r\n            .map((block: any) => (\r\n              <BlockRenderer key={block.id} block={block} />\r\n            ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Custom JS */}\r\n      {page.customJs && (\r\n        <script dangerouslySetInnerHTML={{ __html: page.customJs }} />\r\n      )}\r\n    </>\r\n  );\r\n\r\n  if (useLayout) {\r\n    return (\r\n      <div className=\"flex flex-col min-h-screen\">\r\n        <Header />\r\n        <main className=\"flex-1 bg-gray-50\">\r\n          <div className=\"container mx-auto px-4 py-12\">\r\n            {content}\r\n          </div>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      <div className=\"container mx-auto px-4 py-12\">\r\n        {content}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Header = registerClientReference(\n    function() { throw new Error(\"Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Header.tsx\",\n    \"Header\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Footer = registerClientReference(\n    function() { throw new Error(\"Attempted to call Footer() from the server but Footer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/public/Footer.tsx\",\n    \"Footer\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BlockRenderer = registerClientReference(\n    function() { throw new Error(\"Attempted to call BlockRenderer() from the server but BlockRenderer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/landing-page/BlockRenderer.tsx\",\n    \"BlockRenderer\",\n);\n","import React from 'react';\r\nimport { notFound } from 'next/navigation';\r\nimport { prisma } from '@/lib/prisma';\r\nimport { BlockRenderer } from '@/components/blocks/BlockRenderer';\r\nimport { Metadata } from 'next';\r\nimport { PageOverrideRenderer } from '@/components/public/PageOverrideRenderer';\r\n\r\ninterface PageProps {\r\n    params: Promise<{\r\n        locale: string;\r\n        slug: string;\r\n    }>;\r\n}\r\n\r\nexport async function generateMetadata({ params }: PageProps): Promise<Metadata> {\r\n    const { slug } = await params;\r\n\r\n    const page = await prisma.page.findUnique({\r\n        where: {\r\n            slug,\r\n            status: 'PUBLISHED'\r\n        },\r\n        select: {\r\n            title: true,\r\n            seoTitle: true,\r\n            seoDescription: true,\r\n            seoKeywords: true,\r\n            ogImage: true,\r\n            ogTitle: true,\r\n            ogDescription: true,\r\n        }\r\n    });\r\n\r\n    if (!page) {\r\n        return {\r\n            title: 'Page Not Found'\r\n        };\r\n    }\r\n\r\n    return {\r\n        title: page.seoTitle || page.title,\r\n        description: page.seoDescription || undefined,\r\n        keywords: page.seoKeywords || undefined,\r\n        openGraph: {\r\n            title: page.ogTitle || page.seoTitle || page.title,\r\n            description: page.ogDescription || page.seoDescription || undefined,\r\n            images: page.ogImage ? [page.ogImage] : undefined,\r\n        }\r\n    };\r\n}\r\n\r\nexport default async function Page({ params }: PageProps) {\r\n    const { slug } = await params;\r\n\r\n    const page = await prisma.page.findUnique({\r\n        where: {\r\n            slug,\r\n            status: 'PUBLISHED'\r\n        },\r\n        include: {\r\n            blocks: {\r\n                include: {\r\n                    template: {\r\n                        select: {\r\n                            id: true,\r\n                            name: true,\r\n                            slug: true,\r\n                            category: true,\r\n                            componentCode: true,\r\n                        }\r\n                    }\r\n                },\r\n                orderBy: {\r\n                    order: 'asc'\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    if (!page) {\r\n        notFound();\r\n    }\r\n\r\n    // Increment view count\r\n    await prisma.page.update({\r\n        where: { id: page.id },\r\n        data: {\r\n            viewCount: {\r\n                increment: 1\r\n            }\r\n        }\r\n    });\r\n\r\n    return <PageOverrideRenderer page={page} />;\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1,2,3]}