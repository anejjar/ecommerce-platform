{"version":3,"sources":["../../../../src/app/admin/%28protected%29/cms/posts/%5Bid%5D/page.tsx","../../../../src/lib/content-stats.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, use, useRef, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    Sheet,\r\n    SheetContent,\r\n    SheetDescription,\r\n    SheetHeader,\r\n    SheetTitle,\r\n    SheetTrigger,\r\n} from '@/components/ui/sheet';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { RichTextEditor } from '@/components/admin/RichTextEditor';\r\nimport { \r\n    ArrowLeft, \r\n    Save, \r\n    Eye, \r\n    Settings, \r\n    Image as ImageIcon,\r\n    X,\r\n    Maximize2,\r\n    Minimize2,\r\n    Loader2,\r\n    CheckCircle2,\r\n    Clock,\r\n    FileText,\r\n    ChevronRight,\r\n    Upload,\r\n    Link2,\r\n    FileText as FileTextIcon,\r\n    Tag,\r\n    Search,\r\n    Info,\r\n    AlertCircle,\r\n} from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\nimport { calculateContentStats, formatReadingTime } from '@/lib/content-stats';\r\nimport Image from 'next/image';\r\nimport { MediaPicker } from '@/components/media-manager/MediaPicker/MediaPicker';\r\nimport { cn } from '@/lib/utils';\r\n\r\nexport default function BlogPostEditorPage({ params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = use(params);\r\n    const router = useRouter();\r\n    const isNew = id === 'new';\r\n    const titleTextareaRef = useRef<HTMLTextAreaElement>(null);\r\n    const autoSaveTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const [loading, setLoading] = useState(!isNew);\r\n    const [saving, setSaving] = useState(false);\r\n    const [autoSaving, setAutoSaving] = useState(false);\r\n    const [lastSaved, setLastSaved] = useState<Date | null>(null);\r\n    const [categories, setCategories] = useState<any[]>([]);\r\n    const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n    const [isFocusMode, setIsFocusMode] = useState(false);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n\r\n    // Form state\r\n    const [title, setTitle] = useState('');\r\n    const [slug, setSlug] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [excerpt, setExcerpt] = useState('');\r\n    const [status, setStatus] = useState('DRAFT');\r\n    const [categoryId, setCategoryId] = useState<string | null>(null);\r\n    const [selectedTags, setSelectedTags] = useState<string[]>([]);\r\n    const [featuredImage, setFeaturedImage] = useState('');\r\n    const [seoTitle, setSeoTitle] = useState('');\r\n    const [seoDescription, setSeoDescription] = useState('');\r\n\r\n    const [isSlugManuallyEdited, setIsSlugManuallyEdited] = useState(false);\r\n    const [isMediaPickerOpen, setIsMediaPickerOpen] = useState(false);\r\n\r\n    // Calculate content stats\r\n    const contentStats = calculateContentStats(content);\r\n    const titleStats = calculateContentStats(title);\r\n\r\n    useEffect(() => {\r\n        fetchCategories();\r\n        if (!isNew) {\r\n            fetchPost();\r\n        } else {\r\n            // Focus title on new post\r\n            setTimeout(() => {\r\n                titleTextareaRef.current?.focus();\r\n            }, 100);\r\n        }\r\n    }, [id]);\r\n\r\n    const handleSave = useCallback(async () => {\r\n        // Auto-generate slug if title exists but slug doesn't\r\n        let finalSlug = slug;\r\n        if (title && !slug) {\r\n            finalSlug = title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)+/g, '');\r\n            setSlug(finalSlug);\r\n            setIsSlugManuallyEdited(false);\r\n        }\r\n\r\n        if (!title || !finalSlug) {\r\n            toast.error('Title is required');\r\n            if (!title) {\r\n                titleTextareaRef.current?.focus();\r\n            } else {\r\n                setIsSettingsOpen(true);\r\n            }\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setSaving(true);\r\n            const url = isNew ? '/api/admin/cms/posts' : `/api/admin/cms/posts/${id}`;\r\n            const method = isNew ? 'POST' : 'PUT';\r\n\r\n            const response = await fetch(url, {\r\n                method,\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    title,\r\n                    slug: finalSlug,\r\n                    content,\r\n                    excerpt,\r\n                    status,\r\n                    categoryId,\r\n                    selectedTags,\r\n                    featuredImage,\r\n                    seoTitle,\r\n                    seoDescription,\r\n                }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                toast.success(isNew ? 'Post created' : 'Post updated');\r\n                setLastSaved(new Date());\r\n                if (isNew) {\r\n                    router.push(`/admin/cms/posts/${data.id}`);\r\n                }\r\n            } else {\r\n                const error = await response.text();\r\n                toast.error(error || 'Failed to save post');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving post:', error);\r\n            toast.error('An error occurred');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    }, [title, slug, content, excerpt, status, categoryId, selectedTags, featuredImage, seoTitle, seoDescription, isNew, id, router]);\r\n\r\n    // Auto-save functionality\r\n    useEffect(() => {\r\n        if (isNew || !title || !slug) return;\r\n\r\n        if (autoSaveTimeoutRef.current) {\r\n            clearTimeout(autoSaveTimeoutRef.current);\r\n        }\r\n\r\n        autoSaveTimeoutRef.current = setTimeout(() => {\r\n            autoSave();\r\n        }, 2000); // Auto-save after 2 seconds of inactivity\r\n\r\n        return () => {\r\n            if (autoSaveTimeoutRef.current) {\r\n                clearTimeout(autoSaveTimeoutRef.current);\r\n            }\r\n        };\r\n    }, [title, slug, content, excerpt, status, categoryId, featuredImage, seoTitle, seoDescription]);\r\n\r\n    // Keyboard shortcuts\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            // Ctrl/Cmd + S to save\r\n            if ((e.ctrlKey || e.metaKey) && e.key === 's') {\r\n                e.preventDefault();\r\n                handleSave();\r\n            }\r\n            // Ctrl/Cmd + K to toggle focus mode\r\n            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\r\n                e.preventDefault();\r\n                setIsFocusMode(prev => !prev);\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [handleSave]);\r\n\r\n    const fetchCategories = async () => {\r\n        try {\r\n            const response = await fetch('/api/admin/cms/categories');\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setCategories(data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching categories:', error);\r\n        }\r\n    };\r\n\r\n    const fetchPost = async () => {\r\n        try {\r\n            const response = await fetch(`/api/admin/cms/posts/${id}`);\r\n            if (response.ok) {\r\n                const post = await response.json();\r\n                setTitle(post.title);\r\n                setSlug(post.slug);\r\n                setContent(post.content);\r\n                setExcerpt(post.excerpt || '');\r\n                setStatus(post.status);\r\n                setCategoryId(post.categoryId);\r\n                setSelectedTags(post.tags?.map((t: any) => t.id) || []);\r\n                setFeaturedImage(post.featuredImage || '');\r\n                setSeoTitle(post.seoTitle || '');\r\n                setSeoDescription(post.seoDescription || '');\r\n                setIsSlugManuallyEdited(true);\r\n                setLastSaved(new Date(post.updatedAt || post.createdAt));\r\n            } else {\r\n                toast.error('Failed to fetch post');\r\n                router.push('/admin/cms/posts');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching post:', error);\r\n            toast.error('An error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const autoSave = async () => {\r\n        if (!title || !slug || saving) return;\r\n\r\n        try {\r\n            setAutoSaving(true);\r\n            const url = `/api/admin/cms/posts/${id}`;\r\n            const response = await fetch(url, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    title,\r\n                    slug,\r\n                    content,\r\n                    excerpt,\r\n                    status,\r\n                    categoryId,\r\n                    selectedTags,\r\n                    featuredImage,\r\n                    seoTitle,\r\n                    seoDescription,\r\n                }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                setLastSaved(new Date());\r\n            }\r\n        } catch (error) {\r\n            console.error('Auto-save failed:', error);\r\n        } finally {\r\n            setAutoSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleTitleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        const newTitle = e.target.value;\r\n        setTitle(newTitle);\r\n\r\n        // Auto-resize textarea\r\n        e.target.style.height = 'auto';\r\n        e.target.style.height = e.target.scrollHeight + 'px';\r\n\r\n        if (isNew && !isSlugManuallyEdited) {\r\n            setSlug(newTitle.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)+/g, ''));\r\n        }\r\n    };\r\n\r\n    const handleMediaSelect = (media: any[]) => {\r\n        if (media.length > 0) {\r\n            setFeaturedImage(media[0].url);\r\n        }\r\n        setIsMediaPickerOpen(false);\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(false);\r\n    };\r\n\r\n    const handleDrop = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(false);\r\n\r\n        const files = Array.from(e.dataTransfer.files);\r\n        const imageFiles = files.filter(file => file.type.startsWith('image/'));\r\n\r\n        if (imageFiles.length > 0) {\r\n            // Open media picker or handle file upload\r\n            setIsMediaPickerOpen(true);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={cn(\r\n            \"min-h-screen bg-background transition-all duration-300\",\r\n            isFocusMode && \"bg-gradient-to-b from-background to-muted/20\"\r\n        )}>\r\n            {/* Header */}\r\n            <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n                <div className=\"container flex h-14 items-center justify-between mx-auto px-4 max-w-7xl\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => router.back()}>\r\n                            <ArrowLeft className=\"w-4 h-4\" />\r\n                        </Button>\r\n                        <div className=\"flex items-center gap-2 text-sm\">\r\n                            {autoSaving ? (\r\n                                <>\r\n                                    <Loader2 className=\"h-3 w-3 animate-spin text-muted-foreground\" />\r\n                                    <span className=\"text-muted-foreground\">Saving...</span>\r\n                                </>\r\n                            ) : lastSaved ? (\r\n                                <>\r\n                                    <CheckCircle2 className=\"h-3 w-3 text-green-600\" />\r\n                                    <span className=\"text-muted-foreground\">\r\n                                        Saved {lastSaved.toLocaleTimeString()}\r\n                                    </span>\r\n                                </>\r\n                            ) : (\r\n                                <span className=\"text-muted-foreground\">Not saved</span>\r\n                            )}\r\n                        </div>\r\n                        {!isNew && (\r\n                            <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    <FileText className=\"h-3 w-3\" />\r\n                                    <span>{contentStats.wordCount} words</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    <Clock className=\"h-3 w-3\" />\r\n                                    <span>{formatReadingTime(contentStats.readingTimeMinutes)}</span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => setIsFocusMode(!isFocusMode)}\r\n                            title=\"Toggle Focus Mode (Ctrl+K)\"\r\n                        >\r\n                            {isFocusMode ? (\r\n                                <Minimize2 className=\"w-4 h-4 mr-2\" />\r\n                            ) : (\r\n                                <Maximize2 className=\"w-4 h-4 mr-2\" />\r\n                            )}\r\n                            Focus\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => window.open(`/en/blog/${slug}`, '_blank')}\r\n                            disabled={!slug}\r\n                        >\r\n                            <Eye className=\"w-4 h-4 mr-2\" />\r\n                            Preview\r\n                        </Button>\r\n\r\n                        <Sheet open={isSettingsOpen} onOpenChange={setIsSettingsOpen}>\r\n                            <SheetTrigger asChild>\r\n                                <Button variant=\"ghost\" size=\"sm\">\r\n                                    <Settings className=\"w-4 h-4 mr-2\" />\r\n                                    Settings\r\n                                </Button>\r\n                            </SheetTrigger>\r\n                            <SheetContent side=\"right\" className=\"w-full sm:max-w-lg overflow-y-auto\">\r\n                                <SheetHeader className=\"pb-4 border-b\">\r\n                                    <SheetTitle className=\"flex items-center gap-2\">\r\n                                        <Settings className=\"w-5 h-5\" />\r\n                                        Post Settings\r\n                                    </SheetTitle>\r\n                                    <SheetDescription>\r\n                                        Configure your post settings, metadata, and SEO\r\n                                    </SheetDescription>\r\n                                </SheetHeader>\r\n                                \r\n                                <div className=\"space-y-6 py-6\">\r\n                                    {/* Basic Information */}\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"flex items-center gap-2 text-sm font-semibold text-foreground\">\r\n                                            <FileTextIcon className=\"w-4 h-4\" />\r\n                                            Basic Information\r\n                                        </div>\r\n                                        \r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"slug\" className=\"flex items-center gap-2\">\r\n                                                <Link2 className=\"w-4 h-4 text-muted-foreground\" />\r\n                                                URL Slug\r\n                                            </Label>\r\n                                            <Input\r\n                                                id=\"slug\"\r\n                                                value={slug}\r\n                                                onChange={(e) => {\r\n                                                    setSlug(e.target.value);\r\n                                                    setIsSlugManuallyEdited(true);\r\n                                                }}\r\n                                                placeholder=\"post-slug\"\r\n                                                className=\"font-mono\"\r\n                                            />\r\n                                            <div className=\"flex items-start gap-2 text-xs text-muted-foreground\">\r\n                                                <Info className=\"w-3 h-3 mt-0.5 flex-shrink-0\" />\r\n                                                <span>URL-friendly identifier. Auto-generated from title if left empty.</span>\r\n                                            </div>\r\n                                            {slug && (\r\n                                                <div className=\"text-xs text-muted-foreground font-mono bg-muted px-2 py-1 rounded\">\r\n                                                    /blog/{slug}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"excerpt\" className=\"flex items-center gap-2\">\r\n                                                <FileTextIcon className=\"w-4 h-4 text-muted-foreground\" />\r\n                                                Excerpt\r\n                                            </Label>\r\n                                            <Textarea\r\n                                                id=\"excerpt\"\r\n                                                value={excerpt}\r\n                                                onChange={(e) => setExcerpt(e.target.value)}\r\n                                                placeholder=\"Short summary for list views and SEO (optional)\"\r\n                                                rows={3}\r\n                                                className=\"resize-none\"\r\n                                            />\r\n                                            <p className=\"text-xs text-muted-foreground\">\r\n                                                {excerpt.length} characters\r\n                                            </p>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"category\" className=\"flex items-center gap-2\">\r\n                                                <Tag className=\"w-4 h-4 text-muted-foreground\" />\r\n                                                Category\r\n                                            </Label>\r\n                                            <Select value={categoryId || ''} onValueChange={setCategoryId}>\r\n                                                <SelectTrigger id=\"category\">\r\n                                                    <SelectValue placeholder=\"Select a category (optional)\" />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"\">No category</SelectItem>\r\n                                                    {categories.map((cat) => (\r\n                                                        <SelectItem key={cat.id} value={cat.id}>\r\n                                                            {cat.name}\r\n                                                        </SelectItem>\r\n                                                    ))}\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <Separator />\r\n\r\n                                    {/* SEO Settings */}\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"flex items-center gap-2 text-sm font-semibold text-foreground\">\r\n                                            <Search className=\"w-4 h-4\" />\r\n                                            SEO Settings\r\n                                        </div>\r\n                                        \r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"seo-title\" className=\"flex items-center gap-2\">\r\n                                                SEO Title\r\n                                                <span className=\"text-xs font-normal text-muted-foreground\">(optional)</span>\r\n                                            </Label>\r\n                                            <Input\r\n                                                id=\"seo-title\"\r\n                                                value={seoTitle}\r\n                                                onChange={(e) => setSeoTitle(e.target.value)}\r\n                                                placeholder=\"Custom meta title for search engines\"\r\n                                                maxLength={60}\r\n                                            />\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <p className={cn(\r\n                                                    \"text-xs\",\r\n                                                    seoTitle.length > 60 ? \"text-red-600\" : \"text-muted-foreground\"\r\n                                                )}>\r\n                                                    {seoTitle.length}/60 characters\r\n                                                </p>\r\n                                                {seoTitle.length > 60 && (\r\n                                                    <div className=\"flex items-center gap-1 text-xs text-red-600\">\r\n                                                        <AlertCircle className=\"w-3 h-3\" />\r\n                                                        <span>Too long</span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            {!seoTitle && (\r\n                                                <p className=\"text-xs text-muted-foreground\">\r\n                                                    If empty, the post title will be used\r\n                                                </p>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-2\">\r\n                                            <Label htmlFor=\"seo-description\" className=\"flex items-center gap-2\">\r\n                                                SEO Description\r\n                                                <span className=\"text-xs font-normal text-muted-foreground\">(optional)</span>\r\n                                            </Label>\r\n                                            <Textarea\r\n                                                id=\"seo-description\"\r\n                                                value={seoDescription}\r\n                                                onChange={(e) => setSeoDescription(e.target.value)}\r\n                                                placeholder=\"Meta description for search engines\"\r\n                                                rows={3}\r\n                                                className=\"resize-none\"\r\n                                                maxLength={160}\r\n                                            />\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <p className={cn(\r\n                                                    \"text-xs\",\r\n                                                    seoDescription.length > 160 ? \"text-red-600\" : \"text-muted-foreground\"\r\n                                                )}>\r\n                                                    {seoDescription.length}/160 characters\r\n                                                </p>\r\n                                                {seoDescription.length > 160 && (\r\n                                                    <div className=\"flex items-center gap-1 text-xs text-red-600\">\r\n                                                        <AlertCircle className=\"w-3 h-3\" />\r\n                                                        <span>Too long</span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            {!seoDescription && (\r\n                                                <p className=\"text-xs text-muted-foreground\">\r\n                                                    If empty, the excerpt will be used\r\n                                                </p>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <Separator />\r\n\r\n                                    {/* Post Status */}\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"flex items-center gap-2 text-sm font-semibold text-foreground\">\r\n                                            <Info className=\"w-4 h-4\" />\r\n                                            Publication Status\r\n                                        </div>\r\n                                        \r\n                                        <div className=\"space-y-2\">\r\n                                            <Label>Status</Label>\r\n                                            <Select value={status} onValueChange={setStatus}>\r\n                                                <SelectTrigger>\r\n                                                    <SelectValue />\r\n                                                </SelectTrigger>\r\n                                                <SelectContent>\r\n                                                    <SelectItem value=\"DRAFT\">Draft</SelectItem>\r\n                                                    <SelectItem value=\"PUBLISHED\">Published</SelectItem>\r\n                                                    <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\r\n                                                </SelectContent>\r\n                                            </Select>\r\n                                            <div className=\"flex items-start gap-2 text-xs text-muted-foreground mt-1\">\r\n                                                <Info className=\"w-3 h-3 mt-0.5 flex-shrink-0\" />\r\n                                                <span>\r\n                                                    {status === 'DRAFT' && 'Post is saved but not visible to the public'}\r\n                                                    {status === 'PUBLISHED' && 'Post is live and visible to all visitors'}\r\n                                                    {status === 'ARCHIVED' && 'Post is hidden from public view'}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </SheetContent>\r\n                        </Sheet>\r\n\r\n                        <Select value={status} onValueChange={setStatus}>\r\n                            <SelectTrigger className=\"w-[130px]\">\r\n                                <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"DRAFT\">Draft</SelectItem>\r\n                                <SelectItem value=\"PUBLISHED\">Published</SelectItem>\r\n                                <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        <Button \r\n                            onClick={handleSave} \r\n                            disabled={saving || autoSaving}\r\n                            className=\"bg-green-600 hover:bg-green-700 text-white\"\r\n                        >\r\n                            {saving ? (\r\n                                <>\r\n                                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                                    Saving...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Save className=\"w-4 h-4 mr-2\" />\r\n                                    {isNew ? 'Publish' : 'Update'}\r\n                                </>\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Main Content */}\r\n            <main className={cn(\r\n                \"container mx-auto px-4 py-8 transition-all duration-300\",\r\n                isFocusMode ? \"max-w-3xl\" : \"max-w-5xl\"\r\n            )}>\r\n                {/* Cover Image */}\r\n                <div \r\n                    className={cn(\r\n                        \"mb-8 group relative transition-all\",\r\n                        isDragging && \"ring-2 ring-primary ring-offset-2\"\r\n                    )}\r\n                    onDragOver={handleDragOver}\r\n                    onDragLeave={handleDragLeave}\r\n                    onDrop={handleDrop}\r\n                >\r\n                    {featuredImage ? (\r\n                        <div className=\"relative aspect-video w-full overflow-hidden rounded-lg shadow-lg border\">\r\n                            <Image\r\n                                src={featuredImage}\r\n                                alt=\"Cover\"\r\n                                fill\r\n                                className=\"object-cover\"\r\n                                priority\r\n                            />\r\n                            <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors\" />\r\n                            <div className=\"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                <Button\r\n                                    variant=\"secondary\"\r\n                                    size=\"sm\"\r\n                                    onClick={() => setIsMediaPickerOpen(true)}\r\n                                >\r\n                                    <Upload className=\"w-4 h-4 mr-2\" />\r\n                                    Change\r\n                                </Button>\r\n                                <Button\r\n                                    variant=\"destructive\"\r\n                                    size=\"sm\"\r\n                                    onClick={() => setFeaturedImage('')}\r\n                                >\r\n                                    <X className=\"w-4 h-4 mr-2\" />\r\n                                    Remove\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setIsMediaPickerOpen(true)}\r\n                            className={cn(\r\n                                \"w-full h-32 border-2 border-dashed rounded-lg transition-all\",\r\n                                \"hover:border-primary hover:bg-muted/50\",\r\n                                \"flex flex-col items-center justify-center gap-2 text-muted-foreground\",\r\n                                \"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2\",\r\n                                isDragging && \"border-primary bg-primary/5\"\r\n                            )}\r\n                        >\r\n                            <ImageIcon className=\"w-8 h-8\" />\r\n                            <span className=\"text-sm font-medium\">Add Cover Image</span>\r\n                            <span className=\"text-xs\">Click or drag and drop</span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <div className=\"mb-6\">\r\n                    <Textarea\r\n                        ref={titleTextareaRef}\r\n                        value={title}\r\n                        onChange={handleTitleChange}\r\n                        placeholder=\"Post title...\"\r\n                        className=\"w-full resize-none overflow-hidden bg-transparent text-4xl font-bold border-none focus-visible:ring-0 p-0 placeholder:text-muted-foreground/50 min-h-[60px] leading-tight\"\r\n                        rows={1}\r\n                    />\r\n                    {title && (\r\n                        <div className=\"mt-2 flex items-center gap-4 text-xs text-muted-foreground\">\r\n                            <span>{titleStats.wordCount} words</span>\r\n                            {slug && (\r\n                                <span className=\"font-mono\">/{slug}</span>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Editor */}\r\n                <div className=\"relative\">\r\n                    <RichTextEditor content={content} onChange={setContent} />\r\n                    {content && (\r\n                        <div className=\"mt-4 flex items-center justify-between text-xs text-muted-foreground border-t pt-4\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <span>{contentStats.wordCount} words</span>\r\n                                <span>{contentStats.characterCount} characters</span>\r\n                                <span>{formatReadingTime(contentStats.readingTimeMinutes)}</span>\r\n                            </div>\r\n                            <div className=\"text-xs\">\r\n                                Press <kbd className=\"px-1.5 py-0.5 bg-muted rounded text-xs\">Ctrl+S</kbd> to save\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </main>\r\n\r\n            <MediaPicker\r\n                open={isMediaPickerOpen}\r\n                onOpenChange={setIsMediaPickerOpen}\r\n                onSelect={handleMediaSelect}\r\n                type=\"IMAGE\"\r\n                multiple={false}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","/**\n * Calculate content statistics for blog posts\n */\n\nexport interface ContentStats {\n    wordCount: number;\n    characterCount: number;\n    readingTimeMinutes: number;\n}\n\n/**\n * Strip HTML tags from content\n */\nfunction stripHtml(html: string): string {\n    return html\n        .replace(/<[^>]*>/g, ' ')\n        .replace(/&nbsp;/g, ' ')\n        .replace(/&[a-z]+;/g, ' ')\n        .replace(/\\s+/g, ' ')\n        .trim();\n}\n\n/**\n * Calculate content statistics\n * @param content - HTML or plain text content\n * @param wordsPerMinute - Reading speed (default: 200)\n */\nexport function calculateContentStats(\n    content: string,\n    wordsPerMinute: number = 200\n): ContentStats {\n    if (!content || content.trim() === '') {\n        return {\n            wordCount: 0,\n            characterCount: 0,\n            readingTimeMinutes: 0,\n        };\n    }\n\n    // Strip HTML tags to get plain text\n    const plainText = stripHtml(content);\n\n    // Calculate character count (without spaces)\n    const characterCount = plainText.replace(/\\s/g, '').length;\n\n    // Calculate word count\n    const words = plainText.split(/\\s+/).filter(word => word.length > 0);\n    const wordCount = words.length;\n\n    // Calculate reading time (in minutes, rounded up)\n    const readingTimeMinutes = Math.ceil(wordCount / wordsPerMinute);\n\n    return {\n        wordCount,\n        characterCount,\n        readingTimeMinutes: Math.max(1, readingTimeMinutes), // Minimum 1 minute\n    };\n}\n\n/**\n * Format reading time for display\n */\nexport function formatReadingTime(minutes: number): string {\n    if (minutes === 0) return '< 1 min read';\n    if (minutes === 1) return '1 min read';\n    return `${minutes} min read`;\n}\n"],"names":[],"mappings":"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"}