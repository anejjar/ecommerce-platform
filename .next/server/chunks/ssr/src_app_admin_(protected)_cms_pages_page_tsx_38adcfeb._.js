module.exports=[601767,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(238246),e=a.i(50944),f=a.i(699570),g=a.i(866718),h=a.i(206015),i=a.i(786304),j=a.i(315055),k=a.i(580701),l=a.i(915618),m=a.i(587532),n=a.i(824569),o=a.i(781560),p=a.i(177156),q=a.i(705151),r=a.i(244494),s=a.i(862722),t=a.i(836575),u=a.i(104720),v=a.i(406704),w=a.i(256711),x=a.i(335732),y=a.i(879360);function z(){let a=(0,e.useRouter)(),z=(0,e.useSearchParams)(),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(z.get("search")||""),[I,J]=(0,c.useState)(z.get("status")||"ALL"),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)(""),O=async()=>{try{F(!0);let a=new URLSearchParams;G&&a.append("search",G),"ALL"!==I&&a.append("status",I);let b=z.get("page")||"1";a.append("page",b);let c=await fetch(`/api/admin/cms/pages?${a.toString()}`);if(c.ok){let a=await c.json();B(a.pages),D(a.pagination)}else v.default.error("Failed to fetch pages")}catch(a){console.error("Error fetching pages:",a),v.default.error("An error occurred")}finally{F(!1)}};(0,c.useEffect)(()=>{O()},[z,I]);let P=async()=>{if(!M||0===K.length)return void v.default.error("Please select pages and an action");if("delete"===M){if(!confirm(`Are you sure you want to delete ${K.length} page(s)?`))return;try{(await fetch("/api/admin/cms/pages/bulk",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:K})})).ok?(v.default.success("Pages deleted"),L([]),N(""),O()):v.default.error("Failed to delete pages")}catch(a){console.error("Error deleting pages:",a),v.default.error("An error occurred")}}else if(M.startsWith("status_")){let a=M.replace("status_","").toUpperCase();try{(await fetch("/api/admin/cms/pages/bulk",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:K,status:a})})).ok?(v.default.success(`Status updated to ${a}`),L([]),N(""),O()):v.default.error("Failed to update status")}catch(a){console.error("Error updating status:",a),v.default.error("An error occurred")}}},Q=async a=>{if(confirm("Are you sure you want to delete this page?"))try{(await fetch(`/api/admin/cms/pages/${a}`,{method:"DELETE"})).ok?(v.default.success("Page deleted"),O()):v.default.error("Failed to delete page")}catch(a){console.error("Error deleting page:",a),v.default.error("An error occurred")}},R=async a=>{try{(await fetch(`/api/admin/cms/pages/${a}/publish`,{method:"POST"})).ok?(v.default.success("Page published"),O()):v.default.error("Failed to publish page")}catch(a){console.error("Error publishing page:",a),v.default.error("An error occurred")}},S=async a=>{try{(await fetch(`/api/admin/cms/pages/${a}/unpublish`,{method:"POST"})).ok?(v.default.success("Page unpublished"),O()):v.default.error("Failed to unpublish page")}catch(a){console.error("Error unpublishing page:",a),v.default.error("An error occurred")}},T=async(a,b)=>{let c=prompt("Enter title for duplicated page:",`${b} (Copy)`);if(!c)return;let d=prompt("Enter slug for duplicated page:",`${b.toLowerCase().replace(/\s+/g,"-")}-copy`);if(d)try{let b=await fetch(`/api/admin/cms/pages/${a}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c,slug:d})});if(b.ok)v.default.success("Page duplicated"),O();else{let a=await b.json();v.default.error(a.error||"Failed to duplicate page")}}catch(a){console.error("Error duplicating page:",a),v.default.error("An error occurred")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Pages"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your custom pages"})]}),(0,b.jsx)(d.default,{href:"/admin/cms/pages/new",children:(0,b.jsxs)(f.Button,{children:[(0,b.jsx)(l.Plus,{className:"w-4 h-4 mr-2"}),"Create Page"]})})]}),K.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:[K.length," selected"]}),(0,b.jsxs)(k.Select,{value:M,onValueChange:N,children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(k.SelectValue,{placeholder:"Bulk Actions"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"status_draft",children:"Set as Draft"}),(0,b.jsx)(k.SelectItem,{value:"status_published",children:"Set as Published"}),(0,b.jsx)(k.SelectItem,{value:"status_scheduled",children:"Set as Scheduled"}),(0,b.jsx)(k.SelectItem,{value:"status_archived",children:"Set as Archived"}),(0,b.jsx)(k.SelectItem,{value:"delete",children:"Delete"})]})]}),(0,b.jsx)(f.Button,{onClick:P,disabled:!M,children:"Apply"}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>L([]),children:"Clear"})]}),(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsxs)("form",{onSubmit:b=>{b.preventDefault();let c=new URLSearchParams(z);G?c.set("search",G):c.delete("search"),c.set("page","1"),a.push(`?${c.toString()}`)},className:"flex-1 flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,b.jsx)(m.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search pages...",className:"pl-8",value:G,onChange:a=>H(a.target.value)})]}),(0,b.jsx)(f.Button,{type:"submit",variant:"secondary",children:"Search"})]}),(0,b.jsxs)(k.Select,{value:I,onValueChange:b=>{J(b);let c=new URLSearchParams(z);"ALL"!==b?c.set("status",b):c.delete("status"),c.set("page","1"),a.push(`?${c.toString()}`)},children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(k.SelectValue,{placeholder:"Filter by status"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"ALL",children:"All Statuses"}),(0,b.jsx)(k.SelectItem,{value:"PUBLISHED",children:"Published"}),(0,b.jsx)(k.SelectItem,{value:"DRAFT",children:"Draft"}),(0,b.jsx)(k.SelectItem,{value:"SCHEDULED",children:"Scheduled"}),(0,b.jsx)(k.SelectItem,{value:"ARCHIVED",children:"Archived"})]})]})]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{className:"w-[50px]",children:(0,b.jsx)(j.Checkbox,{checked:K.length===A.length&&A.length>0,onCheckedChange:()=>{K.length===A.length?L([]):L(A.map(a=>a.id))}})}),(0,b.jsx)(h.TableHead,{children:"Title"}),(0,b.jsx)(h.TableHead,{children:"Type"}),(0,b.jsx)(h.TableHead,{children:"Status"}),(0,b.jsx)(h.TableHead,{children:"Author"}),(0,b.jsx)(h.TableHead,{children:"Views"}),(0,b.jsx)(h.TableHead,{children:"Last Updated"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:E?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):0===A.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No pages found"})}):A.map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(j.Checkbox,{checked:K.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void L(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])}})}),(0,b.jsxs)(h.TableCell,{className:"font-medium",children:[a.title,(0,b.jsxs)("div",{className:"text-xs text-muted-foreground truncate max-w-[300px]",children:["/",a.slug]})]}),(0,b.jsx)(h.TableCell,{children:a.useBlockEditor?(0,b.jsxs)(i.Badge,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[(0,b.jsx)(t.Blocks,{className:"w-3 h-3"}),"Blocks",void 0!==a.blockCount&&(0,b.jsxs)("span",{className:"ml-1",children:["(",a.blockCount,")"]})]}):(0,b.jsxs)(i.Badge,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[(0,b.jsx)(u.FileText,{className:"w-3 h-3"}),"Rich Text"]})}),(0,b.jsx)(h.TableCell,{children:(a=>{switch(a){case"PUBLISHED":return(0,b.jsx)(i.Badge,{className:"bg-green-500",children:"Published"});case"DRAFT":return(0,b.jsx)(i.Badge,{variant:"secondary",children:"Draft"});case"SCHEDULED":return(0,b.jsx)(i.Badge,{className:"bg-blue-500",children:"Scheduled"});case"ARCHIVED":return(0,b.jsx)(i.Badge,{className:"bg-yellow-500",children:"Archived"});default:return(0,b.jsx)(i.Badge,{children:a})}})(a.status)}),(0,b.jsx)(h.TableCell,{children:a.author?(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{children:a.author.name||"Unknown"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.author.email})]}):(0,b.jsx)("span",{className:"text-muted-foreground text-sm",children:"â€”"})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)("span",{className:"text-sm",children:a.viewCount||0})}),(0,b.jsx)(h.TableCell,{children:(0,w.format)(new Date(a.updatedAt),"MMM d, yyyy")}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:["PUBLISHED"===a.status&&(0,b.jsx)(d.default,{href:`/${a.slug}`,target:"_blank",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",title:"View Live",children:(0,b.jsx)(p.Eye,{className:"w-4 h-4"})})}),(0,b.jsx)(d.default,{href:`/admin/cms/pages/${a.id}`,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",title:"Edit",children:(0,b.jsx)(n.Edit,{className:"w-4 h-4"})})}),(0,b.jsxs)(x.DropdownMenu,{children:[(0,b.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(y.MoreVertical,{className:"w-4 h-4"})})}),(0,b.jsxs)(x.DropdownMenuContent,{align:"end",children:["PUBLISHED"!==a.status&&(0,b.jsxs)(x.DropdownMenuItem,{onClick:()=>R(a.id),children:[(0,b.jsx)(r.Globe,{className:"w-4 h-4 mr-2"}),"Publish"]}),"PUBLISHED"===a.status&&(0,b.jsxs)(x.DropdownMenuItem,{onClick:()=>S(a.id),children:[(0,b.jsx)(s.XCircle,{className:"w-4 h-4 mr-2"}),"Unpublish"]}),(0,b.jsxs)(x.DropdownMenuItem,{onClick:()=>T(a.id,a.title),children:[(0,b.jsx)(q.Copy,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),(0,b.jsxs)(x.DropdownMenuItem,{className:"text-red-600",onClick:()=>Q(a.id),children:[(0,b.jsx)(o.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})})]},a.id))})]})}),C&&C.pages>1&&(0,b.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",disabled:1===C.page,onClick:()=>{let b=new URLSearchParams(z);b.set("page",(C.page-1).toString()),a.push(`?${b.toString()}`)},children:"Previous"}),(0,b.jsxs)("span",{className:"flex items-center text-sm text-muted-foreground",children:["Page ",C.page," of ",C.pages]}),(0,b.jsx)(f.Button,{variant:"outline",disabled:C.page===C.pages,onClick:()=>{let b=new URLSearchParams(z);b.set("page",(C.page+1).toString()),a.push(`?${b.toString()}`)},children:"Next"})]})]})}a.s(["default",()=>z])}];

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="22e3d666-2ffa-5f58-84d6-48aed8a585f1")}catch(e){}}();
//# sourceMappingURL=src_app_admin_%28protected%29_cms_pages_page_tsx_38adcfeb._.js.map
//# debugId=22e3d666-2ffa-5f58-84d6-48aed8a585f1
