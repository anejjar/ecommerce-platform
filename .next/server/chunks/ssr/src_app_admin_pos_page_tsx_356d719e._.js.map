{"version":3,"sources":["../../../../src/components/admin/pos/POSLayout.tsx","../../../../src/components/admin/pos/POSHeader.tsx","../../../../src/components/admin/pos/POSSidebar.tsx","../../../../src/components/admin/pos/SalesAnalytics.tsx","../../../../src/components/admin/pos/HeldOrdersList.tsx","../../../../src/components/admin/pos/ProductCard.tsx","../../../../src/components/admin/pos/MenuItems.tsx","../../../../src/components/admin/pos/OrderSummary.tsx","../../../../src/components/admin/pos/QuickPaymentButtons.tsx","../../../../src/components/admin/pos/DiscountInput.tsx","../../../../src/lib/pos/keyboard-shortcuts.ts","../../../../src/components/admin/pos/KeyboardShortcuts.tsx","../../../../src/app/admin/pos/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useSession } from 'next-auth/react';\r\nimport { POSHeader } from './POSHeader';\r\nimport { POSSidebar } from './POSSidebar';\r\nimport { SalesAnalytics } from './SalesAnalytics';\r\nimport { HeldOrdersList } from './HeldOrdersList';\r\nimport { MenuItems } from './MenuItems';\r\nimport { OrderSummary } from './OrderSummary';\r\nimport { KeyboardShortcuts } from './KeyboardShortcuts';\r\nimport { useAppSelector, useAppDispatch } from '@/lib/redux/hooks';\r\nimport { setLocation, setCashier } from '@/lib/redux/features/posSlice';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport function POSLayout() {\r\n  const { data: session } = useSession();\r\n  const dispatch = useAppDispatch();\r\n  const locationId = useAppSelector((state) => state.pos.locationId);\r\n  const cashierId = useAppSelector((state) => state.pos.cashierId);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [locationName, setLocationName] = useState<string | null>(null);\r\n  const placeOrderRef = useRef<() => void>();\r\n\r\n  useEffect(() => {\r\n    // Initialize location and cashier from current user\r\n    const initializePOS = async () => {\r\n      try {\r\n        // Try to get current user's cashier record\r\n        const response = await fetch('/api/pos/cashiers/me');\r\n        if (response.ok) {\r\n          const cashier = await response.json();\r\n          if (cashier) {\r\n            dispatch(setLocation(cashier.locationId));\r\n            dispatch(setCashier(cashier.id));\r\n            setLocationName(cashier.location?.name || null);\r\n          }\r\n        } else if (response.status === 404) {\r\n          // No cashier record found - try to get first available location and cashier\r\n          const [locationsRes, cashiersRes] = await Promise.all([\r\n            fetch('/api/pos/locations'),\r\n            fetch('/api/pos/cashiers'),\r\n          ]);\r\n\r\n          if (locationsRes.ok && cashiersRes.ok) {\r\n            const locations = await locationsRes.json();\r\n            const cashiers = await cashiersRes.json();\r\n\r\n            // Set first active location if available\r\n            const activeLocation = locations?.find((loc: any) => loc.isActive);\r\n            if (activeLocation) {\r\n              dispatch(setLocation(activeLocation.id));\r\n              setLocationName(activeLocation.name);\r\n\r\n              // Set first active cashier for this location\r\n              const locationCashier = cashiers?.find(\r\n                (cashier: any) => cashier.locationId === activeLocation.id && cashier.isActive\r\n              );\r\n              if (locationCashier) {\r\n                dispatch(setCashier(locationCashier.id));\r\n              } else if (cashiers?.length > 0 && cashiers[0]?.isActive) {\r\n                // Fallback to first active cashier\r\n                dispatch(setCashier(cashiers[0].id));\r\n              }\r\n            } else {\r\n              toast.error('No active location found. Please create a location first.');\r\n            }\r\n          }\r\n        } else {\r\n          toast.error('Failed to load POS session');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error initializing POS:', error);\r\n        toast.error('Failed to initialize POS session');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (session) {\r\n      initializePOS();\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [session, dispatch]);\r\n\r\n  const handlePlaceOrder = () => {\r\n    // This will be called by OrderSummary via ref\r\n    placeOrderRef.current?.();\r\n  };\r\n\r\n  const handlePaymentSelect = (method: 'CASH' | 'CARD' | 'DIGITAL_WALLET') => {\r\n    // Payment selection handled in OrderSummary\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex h-screen items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\r\n          <p className=\"mt-4 text-muted-foreground\">Loading POS...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-screen flex flex-col bg-background\">\r\n      <KeyboardShortcuts\r\n        onPlaceOrder={handlePlaceOrder}\r\n        onPaymentSelect={handlePaymentSelect}\r\n        enabled={true}\r\n      />\r\n      <POSHeader locationName={locationName} />\r\n      <div className=\"flex flex-1 overflow-hidden\">\r\n        <POSSidebar />\r\n        <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n          <div className=\"flex-1 overflow-y-auto p-6\">\r\n            <HeldOrdersList />\r\n            <SalesAnalytics />\r\n            <div className=\"mt-6\">\r\n              <MenuItems />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <OrderSummary />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useSession } from 'next-auth/react';\r\nimport { useAppDispatch, useAppSelector } from '@/lib/redux/hooks';\r\nimport { setOrderType } from '@/lib/redux/features/posSlice';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport { Package2, User } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ntype OrderType = 'DINE_IN' | 'TAKE_AWAY' | 'DELIVERY';\r\n\r\nconst orderTypes: { value: OrderType; label: string }[] = [\r\n  { value: 'DINE_IN', label: 'Dine In' },\r\n  { value: 'TAKE_AWAY', label: 'Take Away' },\r\n  { value: 'DELIVERY', label: 'Deliver' },\r\n];\r\n\r\ninterface POSHeaderProps {\r\n  locationName?: string | null;\r\n}\r\n\r\nexport function POSHeader({ locationName }: POSHeaderProps) {\r\n  const { data: session } = useSession();\r\n  const dispatch = useAppDispatch();\r\n  const currentOrderType = useAppSelector((state) => state.pos.orderType);\r\n  const locationId = useAppSelector((state) => state.pos.locationId);\r\n\r\n  return (\r\n    <header className=\"h-20 border-b bg-background flex items-center justify-between px-6 shadow-sm\">\r\n      <div className=\"flex items-center gap-6\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Package2 className=\"h-7 w-7 text-primary\" />\r\n          <span className=\"font-bold text-xl\">POS Terminal</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1 ml-4\">\r\n          {orderTypes.map((type) => (\r\n            <Button\r\n              key={type.value}\r\n              variant={currentOrderType === type.value ? 'default' : 'outline'}\r\n              size=\"lg\"\r\n              onClick={() => dispatch(setOrderType(type.value))}\r\n              className={cn(\r\n                'h-12 px-6 text-base font-semibold rounded-lg',\r\n                currentOrderType === type.value && 'shadow-md'\r\n              )}\r\n            >\r\n              {type.label}\r\n            </Button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex items-center gap-6\">\r\n        {locationId && (\r\n          <div className=\"text-right\">\r\n            <div className=\"text-xs text-muted-foreground\">Location</div>\r\n            <div className=\"text-sm font-semibold\">{locationName || `ID: ${locationId.slice(0, 8)}...`}</div>\r\n          </div>\r\n        )}\r\n        <DropdownMenu>\r\n          <DropdownMenuTrigger asChild>\r\n            <Button variant=\"ghost\" className=\"flex items-center gap-3 h-12 px-3\">\r\n              <Avatar className=\"h-10 w-10\">\r\n                <AvatarImage src={session?.user?.image || ''} />\r\n                <AvatarFallback>\r\n                  {session?.user?.name?.charAt(0) || <User className=\"h-5 w-5\" />}\r\n                </AvatarFallback>\r\n              </Avatar>\r\n              <div className=\"text-left\">\r\n                <div className=\"text-sm font-semibold\">{session?.user?.name || 'Admin'}</div>\r\n                <div className=\"text-xs text-muted-foreground\">Cashier</div>\r\n              </div>\r\n            </Button>\r\n          </DropdownMenuTrigger>\r\n          <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n            <DropdownMenuLabel>My Account</DropdownMenuLabel>\r\n            <DropdownMenuSeparator />\r\n            <DropdownMenuItem>Settings</DropdownMenuItem>\r\n            <DropdownMenuItem>Logout</DropdownMenuItem>\r\n          </DropdownMenuContent>\r\n        </DropdownMenu>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Home,\r\n  ShoppingBag,\r\n  BarChart3,\r\n  Settings,\r\n  RotateCcw,\r\n  LogOut,\r\n} from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { signOut } from 'next-auth/react';\r\n\r\nconst sidebarItems = [\r\n  { icon: Home, label: 'Home', path: '/admin/pos' },\r\n  { icon: ShoppingBag, label: 'Orders', path: '/admin/pos/orders' },\r\n  { icon: BarChart3, label: 'Reports', path: '/admin/pos/reports' },\r\n  { icon: Settings, label: 'Settings', path: '/admin/pos/settings' },\r\n];\r\n\r\nexport function POSSidebar() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [activeItem, setActiveItem] = useState(pathname);\r\n\r\n  const handleItemClick = (path: string) => {\r\n    setActiveItem(path);\r\n    router.push(path);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    signOut({ callbackUrl: '/admin/login' });\r\n  };\r\n\r\n  return (\r\n    <aside className=\"w-16 border-r bg-background flex flex-col items-center py-4 gap-2\">\r\n      {sidebarItems.map((item) => {\r\n        const Icon = item.icon;\r\n        const isActive = activeItem === item.path;\r\n        return (\r\n          <Button\r\n            key={item.path}\r\n            variant={isActive ? 'secondary' : 'ghost'}\r\n            size=\"icon\"\r\n            className={cn(\r\n              'h-12 w-12 rounded-lg',\r\n              isActive && 'bg-primary text-primary-foreground'\r\n            )}\r\n            onClick={() => handleItemClick(item.path)}\r\n            title={item.label}\r\n          >\r\n            <Icon className=\"h-5 w-5\" />\r\n          </Button>\r\n        );\r\n      })}\r\n      <div className=\"flex-1\" />\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className=\"h-12 w-12 rounded-lg\"\r\n        onClick={() => window.location.reload()}\r\n        title=\"Refresh\"\r\n      >\r\n        <RotateCcw className=\"h-5 w-5\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className=\"h-12 w-12 rounded-lg\"\r\n        onClick={handleLogout}\r\n        title=\"Logout\"\r\n      >\r\n        <LogOut className=\"h-5 w-5\" />\r\n      </Button>\r\n    </aside>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport useSWR from 'swr';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { ChevronLeft, ChevronRight, CheckCircle2, Clock } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\nconst fetcher = async (url: string) => {\r\n  const res = await fetch(url);\r\n  if (!res.ok) {\r\n    throw new Error('An error occurred while fetching the data.');\r\n  }\r\n  return res.json();\r\n};\r\n\r\ninterface ActiveOrder {\r\n  id: string;\r\n  orderNumber?: string;\r\n  status: string;\r\n  total: number;\r\n  itemCount: number;\r\n  createdAt: string;\r\n}\r\n\r\nexport function SalesAnalytics() {\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  // Fetch active POS orders (not yet completed)\r\n  const { data: ordersData, error, isLoading, mutate } = useSWR<ActiveOrder[]>(\r\n    '/api/pos/orders?status=active',\r\n    fetcher,\r\n    {\r\n      refreshInterval: 3000, // Poll every 3 seconds\r\n      onError: (err) => {\r\n        console.error('Error fetching POS orders:', err);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Use the data directly (API already filters by status=active)\r\n  const data = Array.isArray(ordersData) ? ordersData : [];\r\n\r\n  useEffect(() => {\r\n    // Refresh data periodically\r\n    const interval = setInterval(() => {\r\n      mutate();\r\n    }, 3000);\r\n    return () => clearInterval(interval);\r\n  }, [mutate]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-lg font-semibold mb-4\">Sales Analytic</h2>\r\n        <div className=\"flex gap-4\">\r\n          {[1, 2, 3].map((i) => (\r\n            <Card key={i} className=\"w-64 animate-pulse\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"h-20 bg-muted rounded\" />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const orders = data || [];\r\n  const ordersPerPage = 3;\r\n  const totalPages = Math.ceil(orders.length / ordersPerPage);\r\n  const startIndex = currentPage * ordersPerPage;\r\n  const displayedOrders = orders.slice(startIndex, startIndex + ordersPerPage);\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-lg font-semibold\">\r\n          Sales Analytic {orders.length > 0 && `(${orders.length})`}\r\n        </h2>\r\n        {totalPages > 1 && (\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"icon\"\r\n              onClick={() => setCurrentPage((p) => Math.max(0, p - 1))}\r\n              disabled={currentPage === 0}\r\n            >\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"icon\"\r\n              onClick={() => setCurrentPage((p) => Math.min(totalPages - 1, p + 1))}\r\n              disabled={currentPage >= totalPages - 1}\r\n            >\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"flex gap-4 overflow-x-auto pb-2\">\r\n        {displayedOrders.length > 0 ? (\r\n          displayedOrders.map((order) => (\r\n            <Card key={order.id} className=\"min-w-[240px] flex-shrink-0\">\r\n              <CardHeader className=\"pb-3\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <CardTitle className=\"text-sm font-medium\">\r\n                    {order.orderNumber || `#${order.id.slice(-6)}`}\r\n                  </CardTitle>\r\n                  <Badge\r\n                    variant={\r\n                      order.status === 'READY' || order.status === 'DELIVERED'\r\n                        ? 'default'\r\n                        : 'secondary'\r\n                    }\r\n                    className=\"text-xs\"\r\n                  >\r\n                    {order.status === 'READY' || order.status === 'DELIVERED' ? (\r\n                      <CheckCircle2 className=\"h-3 w-3 mr-1\" />\r\n                    ) : (\r\n                      <Clock className=\"h-3 w-3 mr-1\" />\r\n                    )}\r\n                    {order.status === 'READY' || order.status === 'DELIVERED'\r\n                      ? 'Ready to serve'\r\n                      : 'In Progress'}\r\n                  </Badge>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-sm text-muted-foreground mb-3\">\r\n                  {order.itemCount} Items\r\n                </div>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant={\r\n                    order.status === 'READY' || order.status === 'DELIVERED'\r\n                      ? 'default'\r\n                      : 'outline'\r\n                  }\r\n                  className=\"w-full\"\r\n                >\r\n                  {order.status === 'READY' || order.status === 'DELIVERED' ? (\r\n                    <>\r\n                      <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                      Ready to serve\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Clock className=\"h-4 w-4 mr-2\" />\r\n                      In Progress\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))\r\n        ) : (\r\n          <Card className=\"w-full\">\r\n            <CardContent className=\"p-6 text-center text-muted-foreground\">\r\n              No active orders\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Clock, Play, Trash2 } from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\nimport { format } from 'date-fns';\r\nimport { useAppSelector } from '@/lib/redux/hooks';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from '@/components/ui/dialog';\r\n\r\ninterface HeldOrder {\r\n  id: string;\r\n  orderNumber: string;\r\n  orderType: string;\r\n  total: number;\r\n  status: string;\r\n  location: {\r\n    id: string;\r\n    name: string;\r\n  } | null;\r\n  cashier: {\r\n    id: string;\r\n    user: {\r\n      name: string | null;\r\n    } | null;\r\n  } | null;\r\n  customer: {\r\n    id: string;\r\n    name: string | null;\r\n    email: string;\r\n  } | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport function HeldOrdersList() {\r\n  const locationId = useAppSelector((state) => state.pos.locationId);\r\n  const [heldOrders, setHeldOrders] = useState<HeldOrder[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState<HeldOrder | null>(null);\r\n  const [isResumeDialogOpen, setIsResumeDialogOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchHeldOrders();\r\n    // Refresh every 5 seconds\r\n    const interval = setInterval(fetchHeldOrders, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [locationId]);\r\n\r\n  const fetchHeldOrders = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (locationId) {\r\n        params.append('locationId', locationId);\r\n      }\r\n\r\n      const response = await fetch(`/api/pos/orders/held?${params.toString()}`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setHeldOrders(data.orders || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching held orders:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleResume = async (order: HeldOrder) => {\r\n    try {\r\n      const response = await fetch(`/api/pos/orders/${order.id}/resume`, {\r\n        method: 'POST',\r\n      });\r\n\r\n      if (response.ok) {\r\n        toast.success('Order resumed');\r\n        fetchHeldOrders();\r\n        setIsResumeDialogOpen(false);\r\n        setSelectedOrder(null);\r\n        // TODO: Load order into cart\r\n      } else {\r\n        toast.error('Failed to resume order');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error resuming order:', error);\r\n      toast.error('An error occurred');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (orderId: string) => {\r\n    if (!confirm('Are you sure you want to delete this held order?')) return;\r\n\r\n    try {\r\n      const response = await fetch(`/api/pos/orders/${orderId}`, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      if (response.ok) {\r\n        toast.success('Order deleted');\r\n        fetchHeldOrders();\r\n      } else {\r\n        toast.error('Failed to delete order');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting order:', error);\r\n      toast.error('An error occurred');\r\n    }\r\n  };\r\n\r\n  if (heldOrders.length === 0 && !isLoading) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"mb-4 p-3 bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-900 rounded-lg\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Clock className=\"h-4 w-4 text-orange-600\" />\r\n            <h3 className=\"font-semibold text-sm\">Held Orders ({heldOrders.length})</h3>\r\n          </div>\r\n        </div>\r\n        <ScrollArea className=\"max-h-[200px]\">\r\n          <div className=\"space-y-2\">\r\n            {heldOrders.map((order) => (\r\n              <div\r\n                key={order.id}\r\n                className=\"flex items-center justify-between p-2 bg-background rounded border hover:bg-muted/50\"\r\n              >\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-xs font-mono font-semibold truncate\">{order.orderNumber}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    ${order.total.toFixed(2)} • {format(new Date(order.createdAt), 'HH:mm')}\r\n                  </p>\r\n                  {order.customer && (\r\n                    <p className=\"text-xs text-muted-foreground truncate\">\r\n                      {order.customer.name || order.customer.email}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-8 w-8\"\r\n                    onClick={() => {\r\n                      setSelectedOrder(order);\r\n                      setIsResumeDialogOpen(true);\r\n                    }}\r\n                    title=\"Resume order\"\r\n                  >\r\n                    <Play className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"h-8 w-8 text-destructive\"\r\n                    onClick={() => handleDelete(order.id)}\r\n                    title=\"Delete order\"\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </ScrollArea>\r\n      </div>\r\n\r\n      <Dialog open={isResumeDialogOpen} onOpenChange={setIsResumeDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Resume Held Order</DialogTitle>\r\n            <DialogDescription>\r\n              This will restore the order to active status. You can then complete the payment.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          {selectedOrder && (\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Order:</span>\r\n                <span className=\"font-semibold\">{selectedOrder.orderNumber}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Total:</span>\r\n                <span className=\"font-semibold\">${selectedOrder.total.toFixed(2)}</span>\r\n              </div>\r\n              {selectedOrder.customer && (\r\n                <div className=\"flex justify-between text-sm\">\r\n                  <span className=\"text-muted-foreground\">Customer:</span>\r\n                  <span className=\"font-semibold\">\r\n                    {selectedOrder.customer.name || selectedOrder.customer.email}\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsResumeDialogOpen(false)}>\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              onClick={() => selectedOrder && handleResume(selectedOrder)}\r\n            >\r\n              Resume Order\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Minus, Plus, Check } from 'lucide-react';\r\nimport { useAppDispatch, useAppSelector } from '@/lib/redux/hooks';\r\nimport { addToPosCart, updatePosCartQuantity, removeFromPosCart } from '@/lib/redux/features/posSlice';\r\nimport { cn } from '@/lib/utils';\r\nimport Image from 'next/image';\r\nimport { useCurrency } from '@/hooks/useCurrency';\r\nimport { PLACEHOLDER_PRODUCT_IMAGE } from '@/lib/image-utils';\r\n\r\ninterface ProductCardProps {\r\n  product: {\r\n    id: string;\r\n    name: string;\r\n    price: number | string;\r\n    images?: Array<{ url: string; alt?: string | null }>;\r\n    stock: number;\r\n    variants?: Array<{ id: string; price?: number | string | null }>;\r\n  };\r\n}\r\n\r\nexport function ProductCard({ product }: ProductCardProps) {\r\n  const dispatch = useAppDispatch();\r\n  const cart = useAppSelector((state) => state.pos.cart);\r\n  const { format } = useCurrency();\r\n  const price = typeof product.price === 'string' ? parseFloat(product.price) : product.price;\r\n  const imageUrl = product.images?.[0]?.url || PLACEHOLDER_PRODUCT_IMAGE;\r\n\r\n  // Check if product is in cart (no variants for now)\r\n  const cartItem = cart.find((item) => item.productId === product.id && !item.variantId);\r\n  const quantity = cartItem?.quantity || 0;\r\n\r\n  const handleAdd = () => {\r\n    if (product.stock <= 0) return;\r\n\r\n    if (quantity === 0) {\r\n      dispatch(\r\n        addToPosCart({\r\n          id: `${product.id}-${Date.now()}`,\r\n          productId: product.id,\r\n          name: product.name,\r\n          price,\r\n          quantity: 1,\r\n          image: imageUrl,\r\n        })\r\n      );\r\n    } else {\r\n      dispatch(\r\n        updatePosCartQuantity({\r\n          id: cartItem.id,\r\n          quantity: quantity + 1,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleDecrease = () => {\r\n    if (cartItem && quantity > 1) {\r\n      dispatch(\r\n        updatePosCartQuantity({\r\n          id: cartItem.id,\r\n          quantity: quantity - 1,\r\n        })\r\n      );\r\n    } else if (cartItem) {\r\n      dispatch(removeFromPosCart(cartItem.id));\r\n    }\r\n  };\r\n\r\n  const isOutOfStock = product.stock <= 0;\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'border-2 rounded-xl overflow-hidden bg-card hover:shadow-lg transition-all cursor-pointer',\r\n        quantity > 0 && 'ring-2 ring-primary border-primary',\r\n        isOutOfStock && 'opacity-60'\r\n      )}\r\n    >\r\n      <div \r\n        className=\"relative aspect-square bg-muted cursor-pointer\"\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          if (!isOutOfStock) {\r\n            handleAdd();\r\n          }\r\n        }}\r\n      >\r\n        <Image\r\n          src={imageUrl}\r\n          alt={product.name}\r\n          fill\r\n          className=\"object-cover\"\r\n          sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\r\n          onError={(e) => {\r\n            const target = e.currentTarget;\r\n            target.onerror = null;\r\n            target.src = PLACEHOLDER_PRODUCT_IMAGE;\r\n          }}\r\n          unoptimized={imageUrl?.startsWith('data:') || false}\r\n        />\r\n        {isOutOfStock && (\r\n          <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center\">\r\n            <span className=\"text-white font-bold text-lg\">Out of Stock</span>\r\n          </div>\r\n        )}\r\n        {quantity > 0 && (\r\n          <div className=\"absolute top-2 right-2 bg-primary text-primary-foreground rounded-full h-10 w-10 flex items-center justify-center font-bold text-lg shadow-lg\">\r\n            {quantity}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"p-5\">\r\n        <h3 className=\"font-semibold text-base mb-2 line-clamp-2 min-h-[3rem]\">{product.name}</h3>\r\n        <p className=\"text-2xl font-bold mb-4 text-primary\">{format(price)}</p>\r\n        {quantity > 0 ? (\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center justify-between gap-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"icon\"\r\n                className=\"h-12 w-12 text-lg font-bold\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleDecrease();\r\n                }}\r\n                disabled={isOutOfStock}\r\n              >\r\n                <Minus className=\"h-5 w-5\" />\r\n              </Button>\r\n              <div className=\"flex-1 text-center\">\r\n                <span className=\"text-2xl font-bold\">{quantity}</span>\r\n              </div>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"icon\"\r\n                className=\"h-12 w-12 text-lg font-bold\"\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleAdd();\r\n                }}\r\n                disabled={isOutOfStock || product.stock <= quantity}\r\n              >\r\n                <Plus className=\"h-5 w-5\" />\r\n              </Button>\r\n            </div>\r\n            <Button\r\n              variant=\"default\"\r\n              size=\"lg\"\r\n              className=\"w-full h-12 text-base font-semibold\"\r\n              disabled={isOutOfStock}\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                handleAdd();\r\n              }}\r\n            >\r\n              <Check className=\"h-5 w-5 mr-2\" />\r\n              In Cart\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <Button\r\n            variant=\"default\"\r\n            size=\"lg\"\r\n            className=\"w-full h-12 text-base font-semibold\"\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              handleAdd();\r\n            }}\r\n            disabled={isOutOfStock}\r\n          >\r\n            <Plus className=\"h-5 w-5 mr-2\" />\r\n            Add Item\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport useSWR from 'swr';\r\nimport { ProductCard } from './ProductCard';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Search, Filter } from 'lucide-react';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu';\r\n\r\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\r\n\r\nexport function MenuItems() {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\r\n  const [categories, setCategories] = useState<Array<{ id: string; name: string }>>([]);\r\n\r\n  const { data: products, error, isLoading } = useSWR(\r\n    `/api/pos/products?${selectedCategory ? `categoryId=${selectedCategory}` : ''}${searchQuery ? `&search=${searchQuery}` : ''}`,\r\n    fetcher\r\n  );\r\n\r\n  useEffect(() => {\r\n    // Fetch categories\r\n    fetch('/api/categories')\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setCategories([{ id: 'all', name: 'All Menu' }, ...(data || [])]);\r\n      })\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  const filteredProducts = products?.filter((product: any) => {\r\n    if (!searchQuery) return true;\r\n    const query = searchQuery.toLowerCase();\r\n    return (\r\n      product.name.toLowerCase().includes(query) ||\r\n      product.description?.toLowerCase().includes(query)\r\n    );\r\n  }) || [];\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-lg font-semibold\">\r\n          Menu Items {products && `(${products.length})`}\r\n        </h2>\r\n        <div className=\"flex items-center gap-2\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n            <Input\r\n              placeholder=\"Search products...\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              className=\"pl-10 w-64\"\r\n            />\r\n          </div>\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button variant=\"outline\" size=\"icon\">\r\n                <Filter className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent>\r\n              <DropdownMenuItem onClick={() => setSelectedCategory(null)}>\r\n                All Categories\r\n              </DropdownMenuItem>\r\n              {categories.slice(1).map((cat) => (\r\n                <DropdownMenuItem\r\n                  key={cat.id}\r\n                  onClick={() => setSelectedCategory(cat.id)}\r\n                >\r\n                  {cat.name}\r\n                </DropdownMenuItem>\r\n              ))}\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n        </div>\r\n      </div>\r\n\r\n      {categories.length > 0 && (\r\n        <Tabs\r\n          value={selectedCategory || 'all'}\r\n          onValueChange={(value) => setSelectedCategory(value === 'all' ? null : value)}\r\n          className=\"mb-4\"\r\n        >\r\n          <TabsList className=\"grid w-full grid-cols-6\">\r\n            {categories.slice(0, 6).map((cat) => (\r\n              <TabsTrigger key={cat.id} value={cat.id === 'all' ? 'all' : cat.id}>\r\n                {cat.name}\r\n              </TabsTrigger>\r\n            ))}\r\n          </TabsList>\r\n        </Tabs>\r\n      )}\r\n\r\n      {isLoading ? (\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n          {[1, 2, 3, 4, 5, 6, 7, 8].map((i) => (\r\n            <div key={i} className=\"border rounded-lg animate-pulse\">\r\n              <div className=\"aspect-square bg-muted\" />\r\n              <div className=\"p-4 space-y-2\">\r\n                <div className=\"h-4 bg-muted rounded w-3/4\" />\r\n                <div className=\"h-4 bg-muted rounded w-1/2\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : error ? (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          Error loading products\r\n        </div>\r\n      ) : filteredProducts.length === 0 ? (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          No products found\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n          {filteredProducts.map((product: any) => (\r\n            <ProductCard key={product.id} product={product} />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAppSelector, useAppDispatch } from '@/lib/redux/hooks';\r\nimport { clearPosCart } from '@/lib/redux/features/posSlice';\r\nimport { Button } from '@/components/ui/button';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Trash2, Maximize2, ShoppingBag } from 'lucide-react';\r\nimport { removeFromPosCart, updatePosCartQuantity } from '@/lib/redux/features/posSlice';\r\nimport { QuickPaymentButtons } from './QuickPaymentButtons';\r\nimport { CustomerSearch } from './CustomerSearch';\r\nimport { DiscountInput } from './DiscountInput';\r\nimport { Save } from 'lucide-react';\r\nimport Image from 'next/image';\r\nimport toast from 'react-hot-toast';\r\nimport { cn } from '@/lib/utils';\r\nimport { useCurrency } from '@/hooks/useCurrency';\r\n\r\nconst TAX_RATE = 0.1; // 10% tax\r\n\r\nexport function OrderSummary() {\r\n  const dispatch = useAppDispatch();\r\n  const cart = useAppSelector((state) => state.pos.cart);\r\n  const orderType = useAppSelector((state) => state.pos.orderType);\r\n  const locationId = useAppSelector((state) => state.pos.locationId);\r\n  const cashierId = useAppSelector((state) => state.pos.cashierId);\r\n  const { format } = useCurrency();\r\n\r\n  const [selectedPaymentMethod] = useState<'CASH' | 'CARD' | 'DIGITAL_WALLET' | 'SPLIT'>('CASH');\r\n  const [cashAmount, setCashAmount] = useState<number | null>(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [orderNumber, setOrderNumber] = useState<string>(`#${Date.now().toString().slice(-6)}`);\r\n  const [selectedCustomer, setSelectedCustomer] = useState<{ id: string; name: string | null; email: string } | null>(null);\r\n  const [orderNotes, setOrderNotes] = useState<string>('');\r\n  const [appliedDiscount, setAppliedDiscount] = useState<{ code: string; type: string; amount: number } | null>(null);\r\n\r\n  const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\r\n  const tax = subtotal * TAX_RATE;\r\n  const discount = appliedDiscount ? appliedDiscount.amount : 0;\r\n  const total = subtotal + tax - discount;\r\n  const change = cashAmount && cashAmount >= total ? cashAmount - total : 0;\r\n\r\n  const handleRemove = (itemId: string) => {\r\n    dispatch(removeFromPosCart(itemId));\r\n  };\r\n\r\n  const handleQuantityChange = (itemId: string, quantity: number) => {\r\n    if (quantity <= 0) {\r\n      dispatch(removeFromPosCart(itemId));\r\n    } else {\r\n      dispatch(updatePosCartQuantity({ id: itemId, quantity }));\r\n    }\r\n  };\r\n\r\n  // Always use CASH payment method - auto-set cash amount to total\r\n  useEffect(() => {\r\n    // Ensure cash amount is set to total if not set and cart has items\r\n    if (cart.length > 0 && total > 0 && !cashAmount) {\r\n      setCashAmount(total);\r\n    }\r\n  }, [cart.length, total]);\r\n\r\n  // Keyboard shortcut: Enter to place order\r\n  useEffect(() => {\r\n    const handleKeyPress = (e: KeyboardEvent) => {\r\n      if (e.key === 'Enter' && cart.length > 0 && !isProcessing) {\r\n        e.preventDefault();\r\n        handlePlaceOrder();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyPress);\r\n    return () => window.removeEventListener('keydown', handleKeyPress);\r\n  }, [cart.length, isProcessing, selectedPaymentMethod, cashAmount, total]);\r\n\r\n  const handlePaymentSelect = (method: 'CASH' | 'CARD' | 'DIGITAL_WALLET' | 'SPLIT', amount?: number) => {\r\n    // Only handle CASH payments\r\n    if (method === 'CASH' && amount) {\r\n      setCashAmount(amount);\r\n    }\r\n  };\r\n\r\n  const handleHoldOrder = async () => {\r\n    if (cart.length === 0) {\r\n      toast.error('Cart is empty');\r\n      return;\r\n    }\r\n\r\n    if (!locationId || !cashierId) {\r\n      toast.error('Location and cashier must be set');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Create POS order\r\n      const posOrderResponse = await fetch('/api/pos/orders', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          orderType,\r\n          locationId,\r\n          cashierId,\r\n          customerId: selectedCustomer?.id || null,\r\n          items: cart.map((item) => ({\r\n            productId: item.productId,\r\n            variantId: item.variantId,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n          })),\r\n          subtotal,\r\n          tax,\r\n          discount,\r\n          discountCode: appliedDiscount?.code || null,\r\n          discountType: appliedDiscount?.type || null,\r\n          total,\r\n          paymentMethod: 'CASH',\r\n          notes: orderNotes || null,\r\n        }),\r\n      });\r\n\r\n      if (!posOrderResponse.ok) {\r\n        const errorData = await posOrderResponse.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to create POS order');\r\n      }\r\n\r\n      const posOrder = await posOrderResponse.json();\r\n\r\n      // Hold the order\r\n      const holdResponse = await fetch(`/api/pos/orders/${posOrder.id}/hold`, {\r\n        method: 'POST',\r\n      });\r\n\r\n      if (!holdResponse.ok) {\r\n        throw new Error('Failed to hold order');\r\n      }\r\n\r\n      toast.success('Order held successfully');\r\n\r\n      // Clear cart and reset\r\n      dispatch(clearPosCart());\r\n      setCashAmount(null);\r\n      setSelectedCustomer(null);\r\n      setOrderNotes('');\r\n      setAppliedDiscount(null);\r\n      setOrderNumber(`#${Date.now().toString().slice(-6)}`);\r\n    } catch (error) {\r\n      console.error('Error holding order:', error);\r\n      toast.error('Failed to hold order');\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handlePlaceOrder = async () => {\r\n    if (cart.length === 0) {\r\n      toast.error('Cart is empty');\r\n      return;\r\n    }\r\n\r\n    if (!locationId || !cashierId) {\r\n      toast.error('Location and cashier must be set');\r\n      return;\r\n    }\r\n\r\n    // Force cash payment method\r\n    const finalPaymentMethod = 'CASH';\r\n    \r\n    // Validate cash payment\r\n    if (!cashAmount || cashAmount < total) {\r\n      toast.error('Cash amount must be at least the total amount');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      // Create POS order\r\n      const posOrderResponse = await fetch('/api/pos/orders', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          orderType,\r\n          locationId,\r\n          cashierId,\r\n          customerId: selectedCustomer?.id || null,\r\n          items: cart.map((item) => ({\r\n            productId: item.productId,\r\n            variantId: item.variantId,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n          })),\r\n          subtotal,\r\n          tax,\r\n          discount,\r\n          discountCode: appliedDiscount?.code || null,\r\n          discountType: appliedDiscount?.type || null,\r\n          total,\r\n          paymentMethod: finalPaymentMethod,\r\n          paymentDetails: cashAmount\r\n            ? { cashAmount, change }\r\n            : null,\r\n          notes: orderNotes || null,\r\n        }),\r\n      });\r\n\r\n      if (!posOrderResponse.ok) {\r\n        const errorData = await posOrderResponse.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to create POS order');\r\n      }\r\n\r\n      const posOrder = await posOrderResponse.json();\r\n\r\n      // Complete the order (sync to main Order system)\r\n      const completeResponse = await fetch(`/api/pos/orders/${posOrder.id}/complete`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          items: cart.map((item) => ({\r\n            productId: item.productId,\r\n            variantId: item.variantId,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n          })),\r\n          subtotal,\r\n          tax,\r\n          discount,\r\n          discountCode: appliedDiscount?.code || null,\r\n          total,\r\n        }),\r\n      });\r\n\r\n      if (!completeResponse.ok) {\r\n        const errorData = await completeResponse.json().catch(() => ({}));\r\n        throw new Error(errorData.error || 'Failed to complete order');\r\n      }\r\n\r\n      const { order } = await completeResponse.json();\r\n\r\n      // Process payment\r\n      const paymentResponse = await fetch('/api/pos/payment/process', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          posOrderId: posOrder.id,\r\n          paymentMethod: finalPaymentMethod,\r\n          amount: total,\r\n          paymentDetails: cashAmount\r\n            ? { cashAmount, change }\r\n            : null,\r\n        }),\r\n      });\r\n\r\n      if (!paymentResponse.ok) {\r\n        console.warn('Payment processing failed, but order was created');\r\n      }\r\n\r\n      toast.success(`Order ${order.orderNumber} placed successfully!`);\r\n\r\n      // Clear cart and reset\r\n      dispatch(clearPosCart());\r\n      setCashAmount(null);\r\n      setSelectedCustomer(null);\r\n      setOrderNotes('');\r\n      setAppliedDiscount(null);\r\n      setOrderNumber(`#${Date.now().toString().slice(-6)}`);\r\n\r\n      // Auto-print receipt if configured (future enhancement)\r\n    } catch (error) {\r\n      console.error('Error processing order:', error);\r\n      toast.error('Failed to process order');\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <aside className=\"w-96 border-l bg-background flex flex-col h-full overflow-hidden\">\r\n      <div className=\"p-3 border-b flex items-center justify-between bg-primary/5 flex-shrink-0\">\r\n        <div>\r\n          <h3 className=\"font-semibold text-base\">Order's Summary</h3>\r\n          <p className=\"text-xs text-muted-foreground font-mono\">{orderNumber}</p>\r\n        </div>\r\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n          <Maximize2 className=\"h-4 w-4\" />\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"px-3 py-2 border-b bg-muted/30 flex-shrink-0\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <ShoppingBag className=\"h-4 w-4 text-muted-foreground\" />\r\n          <p className=\"text-sm font-semibold\">Items ({cart.length})</p>\r\n        </div>\r\n      </div>\r\n\r\n      <ScrollArea className=\"flex-1 min-h-0 overflow-y-auto\">\r\n        <div className=\"p-3\">\r\n          {cart.length === 0 ? (\r\n            <div className=\"text-center text-muted-foreground py-8\">\r\n              <ShoppingBag className=\"h-10 w-10 mx-auto mb-3 opacity-50\" />\r\n              <p className=\"text-sm\">Cart is empty</p>\r\n              <p className=\"text-xs mt-1\">Add items to get started</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-2\">\r\n              {cart.map((item) => (\r\n                <div\r\n                  key={item.id}\r\n                  className=\"flex items-center gap-2 p-2 rounded-lg border hover:bg-muted/50 transition-colors\"\r\n                >\r\n                  <div className=\"relative w-12 h-12 rounded overflow-hidden bg-muted flex-shrink-0 border\">\r\n                    {item.image && (\r\n                      <Image\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        fill\r\n                        className=\"object-cover\"\r\n                        sizes=\"48px\"\r\n                      />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p className=\"text-sm font-medium truncate\">{item.name}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      {format(item.price)} × {item.quantity} = {format(item.price * item.quantity)}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-0.5\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"icon\"\r\n                      className=\"h-8 w-8\"\r\n                      onClick={() => handleQuantityChange(item.id, item.quantity - 1)}\r\n                      title=\"Decrease quantity\"\r\n                    >\r\n                      <span className=\"text-base font-bold\">−</span>\r\n                    </Button>\r\n                    <div className=\"w-8 text-center\">\r\n                      <span className=\"text-sm font-bold\">{item.quantity}</span>\r\n                    </div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"icon\"\r\n                      className=\"h-8 w-8\"\r\n                      onClick={() => handleQuantityChange(item.id, item.quantity + 1)}\r\n                      title=\"Increase quantity\"\r\n                    >\r\n                      <span className=\"text-base font-bold\">+</span>\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      className=\"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                      onClick={() => handleRemove(item.id)}\r\n                      title=\"Remove item\"\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </ScrollArea>\r\n\r\n      <div className=\"p-3 border-t space-y-3 bg-muted/20 flex-shrink-0 overflow-y-auto max-h-[60vh]\">\r\n        {/* Payment Summary */}\r\n        <div className=\"space-y-1.5\">\r\n          <div className=\"flex justify-between text-xs\">\r\n            <span className=\"text-muted-foreground\">Price:</span>\r\n            <span className=\"font-medium\">{format(subtotal)}</span>\r\n          </div>\r\n          <div className=\"flex justify-between text-xs\">\r\n            <span className=\"text-muted-foreground\">Taxes:</span>\r\n            <span className=\"font-medium\">{format(tax)}</span>\r\n          </div>\r\n          {discount > 0 && (\r\n            <div className=\"flex justify-between text-xs\">\r\n              <span className=\"text-muted-foreground\">Discount:</span>\r\n              <span className=\"font-medium text-green-600\">-{format(discount)}</span>\r\n            </div>\r\n          )}\r\n          <div className=\"flex justify-between text-xl font-bold pt-1.5 border-t\">\r\n            <span>Total:</span>\r\n            <span className=\"text-primary\">{format(total)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Discount Input */}\r\n        {cart.length > 0 && (\r\n          <DiscountInput\r\n            subtotal={subtotal}\r\n            onDiscountApply={setAppliedDiscount}\r\n            appliedDiscount={appliedDiscount}\r\n          />\r\n        )}\r\n\r\n        {/* Order Notes */}\r\n        {cart.length > 0 && (\r\n          <div className=\"space-y-2\">\r\n            <Label className=\"text-xs font-semibold\">Order Notes (Optional)</Label>\r\n            <textarea\r\n              className=\"w-full min-h-[60px] p-2 text-sm border rounded-md resize-none\"\r\n              placeholder=\"Add special instructions or notes...\"\r\n              value={orderNotes}\r\n              onChange={(e) => setOrderNotes(e.target.value)}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Quick Payment Buttons */}\r\n        {cart.length > 0 && (\r\n          <div className=\"space-y-2\">\r\n            <Label className=\"text-xs font-semibold\">Payment Method</Label>\r\n            <QuickPaymentButtons\r\n              total={total}\r\n              onPaymentSelect={handlePaymentSelect}\r\n              defaultMethod={selectedPaymentMethod}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            className={cn(\r\n              'flex-1 h-12 text-sm font-semibold',\r\n              cart.length === 0 && 'opacity-50 cursor-not-allowed'\r\n            )}\r\n            onClick={handleHoldOrder}\r\n            disabled={cart.length === 0 || isProcessing}\r\n          >\r\n            <Save className=\"h-4 w-4 mr-2\" />\r\n            Hold\r\n          </Button>\r\n          <Button\r\n            className={cn(\r\n              'flex-1 h-14 text-base font-bold',\r\n              cart.length === 0 && 'opacity-50 cursor-not-allowed'\r\n            )}\r\n            size=\"lg\"\r\n            onClick={handlePlaceOrder}\r\n            disabled={cart.length === 0 || isProcessing || !cashAmount || cashAmount < total}\r\n          >\r\n            {isProcessing ? (\r\n              'Processing...'\r\n            ) : (\r\n              <>\r\n                Place Order {cart.length > 0 && `(${cart.length})`}\r\n                <span className=\"ml-2 text-xs font-normal opacity-75\">(Enter)</span>\r\n              </>\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { DollarSign, CreditCard, Wallet, Split } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface QuickPaymentButtonsProps {\r\n  total: number;\r\n  onPaymentSelect: (method: 'CASH' | 'CARD' | 'DIGITAL_WALLET' | 'SPLIT', amount?: number) => void;\r\n  defaultMethod?: 'CASH' | 'CARD' | 'DIGITAL_WALLET' | 'SPLIT';\r\n}\r\n\r\nexport function QuickPaymentButtons({ total, onPaymentSelect, defaultMethod = 'CASH' }: QuickPaymentButtonsProps) {\r\n  const [selectedMethod, setSelectedMethod] = useState<'CASH' | 'CARD' | 'DIGITAL_WALLET' | 'SPLIT'>(defaultMethod);\r\n  const [cashAmount, setCashAmount] = useState('');\r\n  const [customAmount, setCustomAmount] = useState('');\r\n\r\n  const handleQuickCash = (amount: number) => {\r\n    setSelectedMethod('CASH');\r\n    setCashAmount(amount.toString());\r\n    onPaymentSelect('CASH', amount);\r\n  };\r\n\r\n  const handleExactAmount = () => {\r\n    setSelectedMethod('CASH');\r\n    setCashAmount(total.toString());\r\n    onPaymentSelect('CASH', total);\r\n  };\r\n\r\n  const handleCustomCash = () => {\r\n    const amount = parseFloat(customAmount);\r\n    if (amount >= total) {\r\n      setSelectedMethod('CASH');\r\n      setCashAmount(customAmount);\r\n      onPaymentSelect('CASH', amount);\r\n    }\r\n  };\r\n\r\n  const cashAmountNum = parseFloat(cashAmount) || 0;\r\n  const change = cashAmountNum - total;\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Quick Cash Buttons */}\r\n      <div>\r\n        <Label className=\"text-xs text-muted-foreground mb-1.5 block\">Quick Cash</Label>\r\n        <div className=\"grid grid-cols-3 gap-1.5\">\r\n          <Button\r\n            type=\"button\"\r\n            variant={selectedMethod === 'CASH' && cashAmount === '50' ? 'default' : 'outline'}\r\n            className={cn(\r\n              'h-11 text-sm font-semibold',\r\n              selectedMethod === 'CASH' && cashAmount === '50' && 'bg-green-600 hover:bg-green-700'\r\n            )}\r\n            onClick={() => handleQuickCash(50)}\r\n          >\r\n            <DollarSign className=\"h-4 w-4 mr-1\" />\r\n            $50\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            variant={selectedMethod === 'CASH' && cashAmount === '100' ? 'default' : 'outline'}\r\n            className={cn(\r\n              'h-11 text-sm font-semibold',\r\n              selectedMethod === 'CASH' && cashAmount === '100' && 'bg-green-600 hover:bg-green-700'\r\n            )}\r\n            onClick={() => handleQuickCash(100)}\r\n          >\r\n            <DollarSign className=\"h-4 w-4 mr-1\" />\r\n            $100\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            variant={selectedMethod === 'CASH' && cashAmount === total.toString() ? 'default' : 'outline'}\r\n            className={cn(\r\n              'h-11 text-sm font-semibold',\r\n              selectedMethod === 'CASH' && cashAmount === total.toString() && 'bg-blue-600 hover:bg-blue-700'\r\n            )}\r\n            onClick={handleExactAmount}\r\n          >\r\n            Exact\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Custom Cash Amount */}\r\n      {selectedMethod === 'CASH' && (\r\n        <div className=\"space-y-1.5\">\r\n          <Label className=\"text-xs text-muted-foreground\">Custom Amount</Label>\r\n          <div className=\"flex gap-1.5\">\r\n            <Input\r\n              type=\"number\"\r\n              placeholder=\"Enter amount\"\r\n              value={customAmount}\r\n              onChange={(e) => setCustomAmount(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  handleCustomCash();\r\n                }\r\n              }}\r\n              className=\"h-10 text-sm\"\r\n            />\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              className=\"h-10 px-3\"\r\n              onClick={handleCustomCash}\r\n              disabled={!customAmount || parseFloat(customAmount) < total}\r\n            >\r\n              Apply\r\n            </Button>\r\n          </div>\r\n          {cashAmountNum > 0 && (\r\n            <div className=\"p-2 bg-muted rounded-lg\">\r\n              <div className=\"flex justify-between text-xs mb-0.5\">\r\n                <span className=\"text-muted-foreground\">Received:</span>\r\n                <span className=\"font-semibold\">${cashAmountNum.toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-base font-bold\">\r\n                <span>Change:</span>\r\n                <span className={cn(change >= 0 ? 'text-green-600' : 'text-red-600')}>\r\n                  ${change >= 0 ? change.toFixed(2) : '0.00'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { X, Tag, Percent, DollarSign } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport toast from 'react-hot-toast';\r\n\r\ninterface DiscountInputProps {\r\n  subtotal: number;\r\n  onDiscountApply: (discount: { code: string; type: string; amount: number } | null) => void;\r\n  appliedDiscount: { code: string; type: string; amount: number } | null;\r\n  className?: string;\r\n}\r\n\r\nexport function DiscountInput({\r\n  subtotal,\r\n  onDiscountApply,\r\n  appliedDiscount,\r\n  className,\r\n}: DiscountInputProps) {\r\n  const [discountCode, setDiscountCode] = useState('');\r\n  const [isValidating, setIsValidating] = useState(false);\r\n  const [manualDiscount, setManualDiscount] = useState('');\r\n  const [manualDiscountType, setManualDiscountType] = useState<'PERCENTAGE' | 'FIXED_AMOUNT'>('PERCENTAGE');\r\n\r\n  const handleApplyCode = async () => {\r\n    if (!discountCode.trim()) {\r\n      toast.error('Please enter a discount code');\r\n      return;\r\n    }\r\n\r\n    setIsValidating(true);\r\n    try {\r\n      const response = await fetch('/api/pos/discounts/validate', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          code: discountCode.trim(),\r\n          subtotal,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        onDiscountApply({\r\n          code: data.code,\r\n          type: data.type,\r\n          amount: parseFloat(data.discountAmount),\r\n        });\r\n        toast.success('Discount applied');\r\n        setDiscountCode('');\r\n      } else {\r\n        const error = await response.json();\r\n        toast.error(error.error || 'Invalid discount code');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error validating discount:', error);\r\n      toast.error('Failed to validate discount');\r\n    } finally {\r\n      setIsValidating(false);\r\n    }\r\n  };\r\n\r\n  const handleApplyManual = () => {\r\n    const value = parseFloat(manualDiscount);\r\n    if (isNaN(value) || value <= 0) {\r\n      toast.error('Please enter a valid discount amount');\r\n      return;\r\n    }\r\n\r\n    let amount = 0;\r\n    if (manualDiscountType === 'PERCENTAGE') {\r\n      if (value > 100) {\r\n        toast.error('Percentage cannot exceed 100%');\r\n        return;\r\n      }\r\n      amount = (subtotal * value) / 100;\r\n    } else {\r\n      if (value > subtotal) {\r\n        toast.error('Discount cannot exceed subtotal');\r\n        return;\r\n      }\r\n      amount = value;\r\n    }\r\n\r\n    onDiscountApply({\r\n      code: `MANUAL-${manualDiscountType}`,\r\n      type: manualDiscountType,\r\n      amount,\r\n    });\r\n    toast.success('Manual discount applied');\r\n    setManualDiscount('');\r\n  };\r\n\r\n  const handleRemove = () => {\r\n    onDiscountApply(null);\r\n    setDiscountCode('');\r\n    setManualDiscount('');\r\n    toast.success('Discount removed');\r\n  };\r\n\r\n  return (\r\n    <div className={cn('space-y-2', className)}>\r\n      <Label className=\"text-xs font-semibold\">Discount</Label>\r\n      \r\n      {appliedDiscount ? (\r\n        <div className=\"p-2 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-900 rounded-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Tag className=\"h-4 w-4 text-green-600\" />\r\n              <div>\r\n                <p className=\"text-xs font-semibold text-green-800 dark:text-green-200\">\r\n                  {appliedDiscount.code}\r\n                </p>\r\n                <p className=\"text-xs text-green-600 dark:text-green-400\">\r\n                  {appliedDiscount.type === 'PERCENTAGE' ? (\r\n                    <>\r\n                      <Percent className=\"h-3 w-3 inline\" />\r\n                      {((appliedDiscount.amount / subtotal) * 100).toFixed(0)}% off\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <DollarSign className=\"h-3 w-3 inline\" />\r\n                      {appliedDiscount.amount.toFixed(2)} off\r\n                    </>\r\n                  )}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"h-6 w-6 text-green-600 hover:text-green-700\"\r\n              onClick={handleRemove}\r\n            >\r\n              <X className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-2\">\r\n          {/* Discount Code Input */}\r\n          <div className=\"flex gap-1.5\">\r\n            <Input\r\n              placeholder=\"Enter discount code\"\r\n              value={discountCode}\r\n              onChange={(e) => setDiscountCode(e.target.value.toUpperCase())}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  handleApplyCode();\r\n                }\r\n              }}\r\n              className=\"h-10 text-sm flex-1\"\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"h-10 px-3\"\r\n              onClick={handleApplyCode}\r\n              disabled={!discountCode.trim() || isValidating}\r\n            >\r\n              {isValidating ? '...' : 'Apply'}\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Manual Discount */}\r\n          <div className=\"flex gap-1.5\">\r\n            <Input\r\n              type=\"number\"\r\n              placeholder=\"Amount\"\r\n              value={manualDiscount}\r\n              onChange={(e) => setManualDiscount(e.target.value)}\r\n              className=\"h-10 text-sm flex-1\"\r\n            />\r\n            <select\r\n              value={manualDiscountType}\r\n              onChange={(e) => setManualDiscountType(e.target.value as 'PERCENTAGE' | 'FIXED_AMOUNT')}\r\n              className=\"h-10 px-2 text-sm border rounded-md bg-background\"\r\n            >\r\n              <option value=\"PERCENTAGE\">%</option>\r\n              <option value=\"FIXED_AMOUNT\">$</option>\r\n            </select>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"h-10 px-3\"\r\n              onClick={handleApplyManual}\r\n              disabled={!manualDiscount || parseFloat(manualDiscount) <= 0}\r\n            >\r\n              Apply\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nexport type ShortcutAction = \r\n  | 'add-item'\r\n  | 'place-order'\r\n  | 'clear-cart'\r\n  | 'payment-cash'\r\n  | 'payment-card'\r\n  | 'payment-digital'\r\n  | 'increase-quantity'\r\n  | 'decrease-quantity'\r\n  | 'remove-item'\r\n  | 'navigate-up'\r\n  | 'navigate-down'\r\n  | 'navigate-left'\r\n  | 'navigate-right';\r\n\r\nexport interface KeyboardShortcut {\r\n  key: string;\r\n  ctrl?: boolean;\r\n  shift?: boolean;\r\n  alt?: boolean;\r\n  action: ShortcutAction;\r\n  description: string;\r\n}\r\n\r\nexport const defaultShortcuts: KeyboardShortcut[] = [\r\n  {\r\n    key: 'Enter',\r\n    action: 'place-order',\r\n    description: 'Place order',\r\n  },\r\n  {\r\n    key: 'Escape',\r\n    action: 'clear-cart',\r\n    description: 'Clear cart',\r\n  },\r\n  {\r\n    key: 'F1',\r\n    action: 'payment-cash',\r\n    description: 'Cash payment',\r\n  },\r\n  {\r\n    key: 'F2',\r\n    action: 'payment-card',\r\n    description: 'Card payment',\r\n  },\r\n  {\r\n    key: 'F3',\r\n    action: 'payment-digital',\r\n    description: 'Digital wallet',\r\n  },\r\n  {\r\n    key: 'ArrowUp',\r\n    action: 'navigate-up',\r\n    description: 'Navigate up',\r\n  },\r\n  {\r\n    key: 'ArrowDown',\r\n    action: 'navigate-down',\r\n    description: 'Navigate down',\r\n  },\r\n  {\r\n    key: 'ArrowLeft',\r\n    action: 'navigate-left',\r\n    description: 'Navigate left',\r\n  },\r\n  {\r\n    key: 'ArrowRight',\r\n    action: 'navigate-right',\r\n    description: 'Navigate right',\r\n  },\r\n  {\r\n    key: '+',\r\n    action: 'increase-quantity',\r\n    description: 'Increase quantity',\r\n  },\r\n  {\r\n    key: '-',\r\n    action: 'decrease-quantity',\r\n    description: 'Decrease quantity',\r\n  },\r\n  {\r\n    key: 'Delete',\r\n    action: 'remove-item',\r\n    description: 'Remove item',\r\n  },\r\n];\r\n\r\nexport function getNumberKeyQuantity(key: string): number | null {\r\n  const num = parseInt(key);\r\n  if (!isNaN(num) && num >= 1 && num <= 9) {\r\n    return num;\r\n  }\r\n  return null;\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useEffect, useCallback } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '@/lib/redux/hooks';\r\nimport { clearPosCart, removeFromPosCart, updatePosCartQuantity } from '@/lib/redux/features/posSlice';\r\nimport { defaultShortcuts, getNumberKeyQuantity, type ShortcutAction } from '@/lib/pos/keyboard-shortcuts';\r\n\r\ninterface KeyboardShortcutsProps {\r\n  onPlaceOrder?: () => void;\r\n  onPaymentSelect?: (method: 'CASH' | 'CARD' | 'DIGITAL_WALLET') => void;\r\n  onNavigate?: (direction: 'up' | 'down' | 'left' | 'right') => void;\r\n  enabled?: boolean;\r\n}\r\n\r\nexport function KeyboardShortcuts({\r\n  onPlaceOrder,\r\n  onPaymentSelect,\r\n  onNavigate,\r\n  enabled = true,\r\n}: KeyboardShortcutsProps) {\r\n  const dispatch = useAppDispatch();\r\n  const cart = useAppSelector((state) => state.pos.cart);\r\n\r\n  const handleShortcut = useCallback(\r\n    (action: ShortcutAction, e: KeyboardEvent) => {\r\n      if (!enabled) return;\r\n\r\n      switch (action) {\r\n        case 'place-order':\r\n          e.preventDefault();\r\n          onPlaceOrder?.();\r\n          break;\r\n        case 'clear-cart':\r\n          e.preventDefault();\r\n          if (confirm('Clear cart?')) {\r\n            dispatch(clearPosCart());\r\n          }\r\n          break;\r\n        case 'payment-cash':\r\n          e.preventDefault();\r\n          onPaymentSelect?.('CASH');\r\n          break;\r\n        case 'payment-card':\r\n          e.preventDefault();\r\n          onPaymentSelect?.('CARD');\r\n          break;\r\n        case 'payment-digital':\r\n          e.preventDefault();\r\n          onPaymentSelect?.('DIGITAL_WALLET');\r\n          break;\r\n        case 'increase-quantity':\r\n          if (cart.length > 0) {\r\n            const lastItem = cart[cart.length - 1];\r\n            dispatch(updatePosCartQuantity({ id: lastItem.id, quantity: lastItem.quantity + 1 }));\r\n          }\r\n          break;\r\n        case 'decrease-quantity':\r\n          if (cart.length > 0) {\r\n            const lastItem = cart[cart.length - 1];\r\n            if (lastItem.quantity > 1) {\r\n              dispatch(updatePosCartQuantity({ id: lastItem.id, quantity: lastItem.quantity - 1 }));\r\n            } else {\r\n              dispatch(removeFromPosCart(lastItem.id));\r\n            }\r\n          }\r\n          break;\r\n        case 'remove-item':\r\n          if (cart.length > 0) {\r\n            const lastItem = cart[cart.length - 1];\r\n            dispatch(removeFromPosCart(lastItem.id));\r\n          }\r\n          break;\r\n        case 'navigate-up':\r\n          onNavigate?.('up');\r\n          break;\r\n        case 'navigate-down':\r\n          onNavigate?.('down');\r\n          break;\r\n        case 'navigate-left':\r\n          onNavigate?.('left');\r\n          break;\r\n        case 'navigate-right':\r\n          onNavigate?.('right');\r\n          break;\r\n      }\r\n    },\r\n    [enabled, dispatch, cart, onPlaceOrder, onPaymentSelect, onNavigate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Check for number keys (1-9) for quantity\r\n      const quantity = getNumberKeyQuantity(e.key);\r\n      if (quantity && cart.length > 0 && !e.ctrlKey && !e.altKey && !e.shiftKey) {\r\n        const lastItem = cart[cart.length - 1];\r\n        dispatch(updatePosCartQuantity({ id: lastItem.id, quantity }));\r\n        return;\r\n      }\r\n\r\n      // Check for shortcuts\r\n      for (const shortcut of defaultShortcuts) {\r\n        const keyMatch = shortcut.key === e.key || shortcut.key.toLowerCase() === e.key.toLowerCase();\r\n        const ctrlMatch = shortcut.ctrl ? e.ctrlKey : !e.ctrlKey;\r\n        const shiftMatch = shortcut.shift ? e.shiftKey : !e.shiftKey;\r\n        const altMatch = shortcut.alt ? e.altKey : !e.altKey;\r\n\r\n        if (keyMatch && ctrlMatch && shiftMatch && altMatch) {\r\n          handleShortcut(shortcut.action, e);\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [enabled, cart, dispatch, handleShortcut]);\r\n\r\n  return null; // This component doesn't render anything\r\n}\r\n\r\n","'use client';\r\n\r\nimport { POSLayout } from '@/components/admin/pos/POSLayout';\r\n\r\nexport default function POSPage() {\r\n  return <POSLayout />;\r\n}\r\n\r\n"],"names":[],"mappings":"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","debug_id":"0d5b5511-9c53-5bfa-9036-510a7d946c46"}