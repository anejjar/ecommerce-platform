{"version":3,"sources":["../../../../src/app/admin/%28protected%29/cms/pages/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, use } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { RichTextEditor } from '@/components/admin/RichTextEditor';\r\nimport { ArrowLeft, Save, Blocks, FileText, ExternalLink } from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\n\r\nexport default function PageEditorPage({ params }: { params: Promise<{ id: string }> }) {\r\n    const { id } = use(params);\r\n    const router = useRouter();\r\n    const isNew = id === 'new';\r\n\r\n    const [loading, setLoading] = useState(!isNew);\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    // Form state\r\n    const [title, setTitle] = useState('');\r\n    const [slug, setSlug] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [status, setStatus] = useState('DRAFT');\r\n    const [useStorefrontLayout, setUseStorefrontLayout] = useState(true);\r\n    const [useBlockEditor, setUseBlockEditor] = useState(false);\r\n    const [seoTitle, setSeoTitle] = useState('');\r\n    const [seoDescription, setSeoDescription] = useState('');\r\n    const [seoKeywords, setSeoKeywords] = useState('');\r\n    const [ogImage, setOgImage] = useState('');\r\n    const [ogTitle, setOgTitle] = useState('');\r\n    const [ogDescription, setOgDescription] = useState('');\r\n    const [customCss, setCustomCss] = useState('');\r\n    const [customJs, setCustomJs] = useState('');\r\n    const [viewCount, setViewCount] = useState(0);\r\n    const [isSlugManuallyEdited, setIsSlugManuallyEdited] = useState(false);\r\n    const [overridesStorefrontPage, setOverridesStorefrontPage] = useState(false);\r\n    const [overriddenPageType, setOverriddenPageType] = useState<string>('');\r\n\r\n    useEffect(() => {\r\n        if (!isNew) {\r\n            fetchPage();\r\n        }\r\n    }, [id]);\r\n\r\n    const fetchPage = async () => {\r\n        try {\r\n            const response = await fetch(`/api/admin/cms/pages/${id}`);\r\n            if (response.ok) {\r\n                const page = await response.json();\r\n                setTitle(page.title);\r\n                setSlug(page.slug);\r\n                setDescription(page.description || '');\r\n                setContent(page.content || '');\r\n                setStatus(page.status);\r\n                setUseStorefrontLayout(page.useStorefrontLayout ?? true);\r\n                setUseBlockEditor(page.useBlockEditor ?? false);\r\n                setSeoTitle(page.seoTitle || '');\r\n                setSeoDescription(page.seoDescription || '');\r\n                setSeoKeywords(page.seoKeywords || '');\r\n                setOgImage(page.ogImage || '');\r\n                setOgTitle(page.ogTitle || '');\r\n                setOgDescription(page.ogDescription || '');\r\n                setCustomCss(page.customCss || '');\r\n                setCustomJs(page.customJs || '');\r\n                setViewCount(page.viewCount || 0);\r\n                setOverridesStorefrontPage(page.overridesStorefrontPage ?? false);\r\n                setOverriddenPageType(page.overriddenPageType || '');\r\n                setIsSlugManuallyEdited(true);\r\n            } else {\r\n                toast.error('Failed to fetch page');\r\n                router.push('/admin/cms/pages');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching page:', error);\r\n            toast.error('An error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const newTitle = e.target.value;\r\n        setTitle(newTitle);\r\n        if (isNew && !isSlugManuallyEdited && !overridesStorefrontPage) {\r\n            setSlug(newTitle.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)+/g, ''));\r\n        }\r\n    };\r\n\r\n    const handleOverrideTypeChange = (value: string) => {\r\n        setOverriddenPageType(value);\r\n        \r\n        // Auto-set slug based on override type\r\n        // Note: HOME uses special slug \"_home\" for database, but represents the root route\r\n        const slugMap: Record<string, string> = {\r\n            'HOME': '_home',\r\n            'SHOP': 'shop',\r\n            'PRODUCT': 'product',\r\n            'CART': 'cart',\r\n            'CHECKOUT': 'checkout',\r\n            'BLOG': 'blog',\r\n            'BLOG_POST': 'blog',\r\n        };\r\n        \r\n        const newSlug = slugMap[value] || '';\r\n        setSlug(newSlug);\r\n        setIsSlugManuallyEdited(false);\r\n    };\r\n\r\n    const handleOverrideToggle = (checked: boolean) => {\r\n        setOverridesStorefrontPage(checked);\r\n        if (!checked) {\r\n            setOverriddenPageType('');\r\n            setIsSlugManuallyEdited(false);\r\n            // Reset slug to auto-generated from title if it was set by override\r\n            if (isNew && title) {\r\n                setSlug(title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)+/g, ''));\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!title || !slug) {\r\n            toast.error('Title and Slug are required');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setSaving(true);\r\n            const url = isNew ? '/api/admin/cms/pages' : `/api/admin/cms/pages/${id}`;\r\n            const method = isNew ? 'POST' : 'PUT';\r\n\r\n            const response = await fetch(url, {\r\n                method,\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    title,\r\n                    slug,\r\n                    description,\r\n                    content,\r\n                    status,\r\n                    useStorefrontLayout,\r\n                    useBlockEditor,\r\n                    seoTitle,\r\n                    seoDescription,\r\n                    seoKeywords,\r\n                    ogImage,\r\n                    ogTitle,\r\n                    ogDescription,\r\n                    customCss,\r\n                    customJs,\r\n                    overridesStorefrontPage,\r\n                    overriddenPageType: overridesStorefrontPage ? overriddenPageType : null,\r\n                }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                toast.success(isNew ? 'Page created' : 'Page updated');\r\n                if (isNew) {\r\n                    const data = await response.json();\r\n                    router.push(`/admin/cms/pages/${data.id}`);\r\n                }\r\n            } else {\r\n                const error = await response.text();\r\n                toast.error(error || 'Failed to save page');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving page:', error);\r\n            toast.error('An error occurred');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div className=\"text-center py-12\">Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-5xl mx-auto\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => router.back()}>\r\n                        <ArrowLeft className=\"w-4 h-4\" />\r\n                    </Button>\r\n                    <h1 className=\"text-2xl font-bold\">{isNew ? 'Create Page' : 'Edit Page'}</h1>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <Select value={status} onValueChange={setStatus}>\r\n                        <SelectTrigger className=\"w-[140px]\">\r\n                            <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"DRAFT\">Draft</SelectItem>\r\n                            <SelectItem value=\"PUBLISHED\">Published</SelectItem>\r\n                            <SelectItem value=\"SCHEDULED\">Scheduled</SelectItem>\r\n                            <SelectItem value=\"ARCHIVED\">Archived</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n                    <Button onClick={handleSave} disabled={saving}>\r\n                        <Save className=\"w-4 h-4 mr-2\" />\r\n                        {saving ? 'Saving...' : 'Save'}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <Card>\r\n                        <CardContent className=\"p-6 space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Title</Label>\r\n                                <Input value={title} onChange={handleTitleChange} placeholder=\"Page title\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Slug</Label>\r\n                                <Input\r\n                                    value={slug}\r\n                                    onChange={(e) => {\r\n                                        setSlug(e.target.value);\r\n                                        setIsSlugManuallyEdited(true);\r\n                                    }}\r\n                                    placeholder=\"page-slug\"\r\n                                    disabled={overridesStorefrontPage}\r\n                                    className={overridesStorefrontPage ? 'bg-muted cursor-not-allowed' : ''}\r\n                                />\r\n                                {overridesStorefrontPage && (\r\n                                    <p className=\"text-xs text-muted-foreground\">\r\n                                        Slug is automatically set based on the selected override type.\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Description</Label>\r\n                                <Textarea\r\n                                    value={description}\r\n                                    onChange={(e) => setDescription(e.target.value)}\r\n                                    placeholder=\"Page description\"\r\n                                    rows={2}\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <Label>Content Editor</Label>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant={!useBlockEditor ? \"default\" : \"outline\"}\r\n                                            size=\"sm\"\r\n                                            onClick={() => setUseBlockEditor(false)}\r\n                                        >\r\n                                            <FileText className=\"w-4 h-4 mr-1\" />\r\n                                            Rich Text\r\n                                        </Button>\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            variant={useBlockEditor ? \"default\" : \"outline\"}\r\n                                            size=\"sm\"\r\n                                            onClick={() => {\r\n                                                setUseBlockEditor(true);\r\n                                                if (!isNew && id !== 'new') {\r\n                                                    router.push(`/admin/cms/pages/${id}/editor`);\r\n                                                }\r\n                                            }}\r\n                                        >\r\n                                            <Blocks className=\"w-4 h-4 mr-1\" />\r\n                                            Blocks\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                                {useBlockEditor ? (\r\n                                    <div className=\"border rounded-lg p-4 bg-muted/50 text-center\">\r\n                                        <p className=\"text-sm text-muted-foreground mb-2\">\r\n                                            This page uses the block editor. Click the button above to edit blocks.\r\n                                        </p>\r\n                                        {!isNew && id !== 'new' && (\r\n                                            <Button\r\n                                                variant=\"outline\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => router.push(`/admin/cms/pages/${id}/editor`)}\r\n                                            >\r\n                                                <ExternalLink className=\"w-4 h-4 mr-2\" />\r\n                                                Open Block Editor\r\n                                            </Button>\r\n                                        )}\r\n                                    </div>\r\n                                ) : (\r\n                                    <RichTextEditor content={content} onChange={setContent} />\r\n                                )}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Storefront Override</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <Checkbox\r\n                                    id=\"overridesStorefrontPage\"\r\n                                    checked={overridesStorefrontPage}\r\n                                    onCheckedChange={handleOverrideToggle}\r\n                                />\r\n                                <Label htmlFor=\"overridesStorefrontPage\">Override storefront default page</Label>\r\n                            </div>\r\n                            {overridesStorefrontPage && (\r\n                                <div className=\"space-y-2 pl-6 border-l-2 border-primary/20\">\r\n                                    <Label>Override Page Type</Label>\r\n                                    <Select value={overriddenPageType} onValueChange={handleOverrideTypeChange}>\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Select page to override\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"HOME\">Homepage</SelectItem>\r\n                                            <SelectItem value=\"SHOP\">Shop</SelectItem>\r\n                                            <SelectItem value=\"PRODUCT\">Product Page</SelectItem>\r\n                                            <SelectItem value=\"CART\">Cart</SelectItem>\r\n                                            <SelectItem value=\"CHECKOUT\">Checkout</SelectItem>\r\n                                            <SelectItem value=\"BLOG\">Blog</SelectItem>\r\n                                            <SelectItem value=\"BLOG_POST\">Blog Post</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <p className=\"text-xs text-muted-foreground\">\r\n                                        This page will replace the selected default storefront page when published.\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Layout Settings</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <Checkbox\r\n                                    id=\"useStorefrontLayout\"\r\n                                    checked={useStorefrontLayout}\r\n                                    onCheckedChange={(checked) => setUseStorefrontLayout(checked as boolean)}\r\n                                />\r\n                                <Label htmlFor=\"useStorefrontLayout\">Use Storefront Layout</Label>\r\n                            </div>\r\n                            <p className=\"text-sm text-muted-foreground mt-2\">\r\n                                If checked, the page will include the store's header and footer.\r\n                            </p>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>SEO Settings</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <Tabs defaultValue=\"basic\" className=\"w-full\">\r\n                                <TabsList className=\"grid w-full grid-cols-2\">\r\n                                    <TabsTrigger value=\"basic\">Basic SEO</TabsTrigger>\r\n                                    <TabsTrigger value=\"social\">Social Media</TabsTrigger>\r\n                                </TabsList>\r\n                                <TabsContent value=\"basic\" className=\"space-y-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>SEO Title</Label>\r\n                                        <Input\r\n                                            value={seoTitle}\r\n                                            onChange={(e) => setSeoTitle(e.target.value)}\r\n                                            placeholder=\"Meta title (defaults to page title)\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>SEO Description</Label>\r\n                                        <Textarea\r\n                                            value={seoDescription}\r\n                                            onChange={(e) => setSeoDescription(e.target.value)}\r\n                                            placeholder=\"Meta description\"\r\n                                            rows={3}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>SEO Keywords</Label>\r\n                                        <Input\r\n                                            value={seoKeywords}\r\n                                            onChange={(e) => setSeoKeywords(e.target.value)}\r\n                                            placeholder=\"Comma-separated keywords\"\r\n                                        />\r\n                                    </div>\r\n                                </TabsContent>\r\n                                <TabsContent value=\"social\" className=\"space-y-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>Open Graph Image URL</Label>\r\n                                        <Input\r\n                                            value={ogImage}\r\n                                            onChange={(e) => setOgImage(e.target.value)}\r\n                                            placeholder=\"https://example.com/image.jpg\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>Open Graph Title</Label>\r\n                                        <Input\r\n                                            value={ogTitle}\r\n                                            onChange={(e) => setOgTitle(e.target.value)}\r\n                                            placeholder=\"Social media title\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label>Open Graph Description</Label>\r\n                                        <Textarea\r\n                                            value={ogDescription}\r\n                                            onChange={(e) => setOgDescription(e.target.value)}\r\n                                            placeholder=\"Social media description\"\r\n                                            rows={3}\r\n                                        />\r\n                                    </div>\r\n                                </TabsContent>\r\n                            </Tabs>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Advanced Settings</CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Custom CSS</Label>\r\n                                <Textarea\r\n                                    value={customCss}\r\n                                    onChange={(e) => setCustomCss(e.target.value)}\r\n                                    placeholder=\"/* Custom CSS */\"\r\n                                    rows={6}\r\n                                    className=\"font-mono text-sm\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Custom JavaScript</Label>\r\n                                <Textarea\r\n                                    value={customJs}\r\n                                    onChange={(e) => setCustomJs(e.target.value)}\r\n                                    placeholder=\"// Custom JavaScript\"\r\n                                    rows={6}\r\n                                    className=\"font-mono text-sm\"\r\n                                />\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {!isNew && (\r\n                        <Card>\r\n                            <CardHeader>\r\n                                <CardTitle>Analytics</CardTitle>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>View Count</Label>\r\n                                    <Input\r\n                                        value={viewCount}\r\n                                        readOnly\r\n                                        className=\"bg-muted\"\r\n                                    />\r\n                                    <p className=\"text-xs text-muted-foreground\">\r\n                                        Total number of times this page has been viewed.\r\n                                    </p>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}