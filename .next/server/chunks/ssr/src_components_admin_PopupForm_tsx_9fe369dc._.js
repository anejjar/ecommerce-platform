
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4589e997-b272-5de2-9a2c-5e6b8bdd4658")}catch(e){}}();
module.exports=[347708,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(406704),f=a.i(699570),g=a.i(866718),h=a.i(870430),i=a.i(429246),j=a.i(591119),k=a.i(875083),l=a.i(580701),m=a.i(563658),n=a.i(400210),o=a.i(114548),p=a.i(177156);function q({mode:a,popup:q}){let r=(0,d.useRouter)(),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)({name:q?.name||"",title:q?.title||"",content:q?.content||"",type:q?.type||"EXIT_INTENT",triggerValue:q?.triggerValue||5,target:q?.target||"ALL_PAGES",customUrls:q?.customUrls||"",position:q?.position||"CENTER",width:q?.width||500,height:q?.height||null,backgroundColor:q?.backgroundColor||"#ffffff",textColor:q?.textColor||"#000000",buttonText:q?.buttonText||"Get Offer",buttonColor:q?.buttonColor||"#000000",buttonTextColor:q?.buttonTextColor||"#ffffff",showCloseButton:q?.showCloseButton===void 0||q.showCloseButton,overlayColor:q?.overlayColor||"rgba(0,0,0,0.5)",imageUrl:q?.imageUrl||"",frequency:q?.frequency||"once_per_session",delaySeconds:q?.delaySeconds||0,ctaType:q?.ctaType||"link",ctaUrl:q?.ctaUrl||"",discountCode:q?.discountCode||"",isActive:q?.isActive||!1,startDate:q?.startDate||"",endDate:q?.endDate||"",priority:q?.priority||0}),y=(a,b)=>{x(c=>({...c,[a]:b}))},z=async b=>{if(b.preventDefault(),!w.name||!w.content)return void e.default.error("Name and content are required");t(!0);try{let b="create"===a?"/api/admin/popups":`/api/admin/popups/${q.id}`,c=await fetch(b,{method:"create"===a?"POST":"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!c.ok)throw Error("Failed to save popup");await c.json(),e.default.success("create"===a?"Popup created successfully":"Popup updated successfully"),r.push("/admin/popups"),r.refresh()}catch(a){console.error("Error saving popup:",a),e.default.error("Failed to save popup")}finally{t(!1)}};return(0,b.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>r.back(),children:[(0,b.jsx)(n.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",onClick:()=>v(!u),children:[(0,b.jsx)(p.Eye,{className:"w-4 h-4 mr-2"}),u?"Hide":"Preview"]}),(0,b.jsxs)(f.Button,{type:"submit",disabled:s,children:[(0,b.jsx)(o.Save,{className:"w-4 h-4 mr-2"}),s?"Saving...":"create"===a?"Create Popup":"Update Popup"]})]}),(0,b.jsxs)(k.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,b.jsxs)(k.TabsList,{className:"grid w-full grid-cols-5",children:[(0,b.jsx)(k.TabsTrigger,{value:"basic",children:"Basic"}),(0,b.jsx)(k.TabsTrigger,{value:"trigger",children:"Trigger"}),(0,b.jsx)(k.TabsTrigger,{value:"design",children:"Design"}),(0,b.jsx)(k.TabsTrigger,{value:"cta",children:"Call-to-Action"}),(0,b.jsx)(k.TabsTrigger,{value:"advanced",children:"Advanced"})]}),(0,b.jsx)(k.TabsContent,{value:"basic",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Basic Information"})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"name",children:["Popup Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(g.Input,{id:"name",value:w.name,onChange:a=>y("name",a.target.value),placeholder:"e.g., Welcome Discount Popup",required:!0}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Internal name for identification (not shown to customers)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"title",children:"Popup Title"}),(0,b.jsx)(g.Input,{id:"title",value:w.title,onChange:a=>y("title",a.target.value),placeholder:"e.g., Get 15% Off Your First Order!"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"content",children:["Content ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.Textarea,{id:"content",value:w.content,onChange:a=>y("content",a.target.value),placeholder:"Enter your popup content (HTML supported)",rows:8,required:!0}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"HTML is supported. Keep it concise and compelling."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),(0,b.jsx)(g.Input,{id:"imageUrl",type:"url",value:w.imageUrl,onChange:a=>y("imageUrl",a.target.value),placeholder:"https://example.com/image.jpg"})]})]})]})}),(0,b.jsx)(k.TabsContent,{value:"trigger",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Trigger Settings"})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"type",children:"Trigger Type"}),(0,b.jsxs)(l.Select,{value:w.type,onValueChange:a=>y("type",a),children:[(0,b.jsx)(l.SelectTrigger,{id:"type",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"EXIT_INTENT",children:"Exit Intent"}),(0,b.jsx)(l.SelectItem,{value:"TIMED",children:"Timed (After X seconds)"}),(0,b.jsx)(l.SelectItem,{value:"SCROLL_BASED",children:"Scroll Based (At X%)"}),(0,b.jsx)(l.SelectItem,{value:"PAGE_LOAD",children:"Page Load"}),(0,b.jsx)(l.SelectItem,{value:"CLICK_TRIGGER",children:"Click Trigger"})]})]})]}),("TIMED"===w.type||"SCROLL_BASED"===w.type)&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"triggerValue",children:"TIMED"===w.type?"Seconds":"Scroll Percentage"}),(0,b.jsx)(g.Input,{id:"triggerValue",type:"number",value:w.triggerValue,onChange:a=>y("triggerValue",parseInt(a.target.value)),min:1,max:"SCROLL_BASED"===w.type?100:300}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"TIMED"===w.type?"Show popup after this many seconds":"Show popup when user scrolls to this percentage"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"target",children:"Target Pages"}),(0,b.jsxs)(l.Select,{value:w.target,onValueChange:a=>y("target",a),children:[(0,b.jsx)(l.SelectTrigger,{id:"target",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"ALL_PAGES",children:"All Pages"}),(0,b.jsx)(l.SelectItem,{value:"HOMEPAGE",children:"Homepage Only"}),(0,b.jsx)(l.SelectItem,{value:"PRODUCT_PAGES",children:"Product Pages"}),(0,b.jsx)(l.SelectItem,{value:"CART_PAGE",children:"Cart Page"}),(0,b.jsx)(l.SelectItem,{value:"CHECKOUT",children:"Checkout"}),(0,b.jsx)(l.SelectItem,{value:"BLOG",children:"Blog Pages"}),(0,b.jsx)(l.SelectItem,{value:"CUSTOM_URL",children:"Custom URLs"})]})]})]}),"CUSTOM_URL"===w.target&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"customUrls",children:"Custom URLs (one per line)"}),(0,b.jsx)(i.Textarea,{id:"customUrls",value:w.customUrls,onChange:a=>y("customUrls",a.target.value),placeholder:"/about /contact /products/special",rows:4})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"frequency",children:"Display Frequency"}),(0,b.jsxs)(l.Select,{value:w.frequency,onValueChange:a=>y("frequency",a),children:[(0,b.jsx)(l.SelectTrigger,{id:"frequency",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"once_per_session",children:"Once Per Session"}),(0,b.jsx)(l.SelectItem,{value:"once_per_day",children:"Once Per Day"}),(0,b.jsx)(l.SelectItem,{value:"once_per_week",children:"Once Per Week"}),(0,b.jsx)(l.SelectItem,{value:"always",children:"Always Show"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"delaySeconds",children:"Initial Delay (seconds)"}),(0,b.jsx)(g.Input,{id:"delaySeconds",type:"number",value:w.delaySeconds,onChange:a=>y("delaySeconds",parseInt(a.target.value)),min:0,max:60}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Wait this many seconds after page load before allowing popup to trigger"})]})]})]})}),(0,b.jsx)(k.TabsContent,{value:"design",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Design & Layout"})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"position",children:"Position"}),(0,b.jsxs)(l.Select,{value:w.position,onValueChange:a=>y("position",a),children:[(0,b.jsx)(l.SelectTrigger,{id:"position",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"CENTER",children:"Center"}),(0,b.jsx)(l.SelectItem,{value:"TOP",children:"Top Bar"}),(0,b.jsx)(l.SelectItem,{value:"BOTTOM",children:"Bottom Bar"}),(0,b.jsx)(l.SelectItem,{value:"TOP_LEFT",children:"Top Left"}),(0,b.jsx)(l.SelectItem,{value:"TOP_RIGHT",children:"Top Right"}),(0,b.jsx)(l.SelectItem,{value:"BOTTOM_LEFT",children:"Bottom Left"}),(0,b.jsx)(l.SelectItem,{value:"BOTTOM_RIGHT",children:"Bottom Right"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"width",children:"Width (px)"}),(0,b.jsx)(g.Input,{id:"width",type:"number",value:w.width,onChange:a=>y("width",parseInt(a.target.value)),min:200,max:1200})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"height",children:"Height (px, optional)"}),(0,b.jsx)(g.Input,{id:"height",type:"number",value:w.height||"",onChange:a=>y("height",a.target.value?parseInt(a.target.value):null),placeholder:"Auto",min:200,max:800})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"backgroundColor",children:"Background Color"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{id:"backgroundColor",type:"color",value:w.backgroundColor,onChange:a=>y("backgroundColor",a.target.value),className:"w-16 h-10"}),(0,b.jsx)(g.Input,{value:w.backgroundColor,onChange:a=>y("backgroundColor",a.target.value),placeholder:"#ffffff"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"textColor",children:"Text Color"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{id:"textColor",type:"color",value:w.textColor,onChange:a=>y("textColor",a.target.value),className:"w-16 h-10"}),(0,b.jsx)(g.Input,{value:w.textColor,onChange:a=>y("textColor",a.target.value),placeholder:"#000000"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"overlayColor",children:"Overlay Color"}),(0,b.jsx)(g.Input,{id:"overlayColor",value:w.overlayColor,onChange:a=>y("overlayColor",a.target.value),placeholder:"rgba(0,0,0,0.5)"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Background overlay color (supports rgba for transparency)"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(m.Switch,{id:"showCloseButton",checked:w.showCloseButton,onCheckedChange:a=>y("showCloseButton",a)}),(0,b.jsx)(h.Label,{htmlFor:"showCloseButton",children:"Show Close Button"})]})]})]})}),(0,b.jsx)(k.TabsContent,{value:"cta",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Call-to-Action"})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"buttonText",children:"Button Text"}),(0,b.jsx)(g.Input,{id:"buttonText",value:w.buttonText,onChange:a=>y("buttonText",a.target.value),placeholder:"Get Offer"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"buttonColor",children:"Button Color"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{id:"buttonColor",type:"color",value:w.buttonColor,onChange:a=>y("buttonColor",a.target.value),className:"w-16 h-10"}),(0,b.jsx)(g.Input,{value:w.buttonColor,onChange:a=>y("buttonColor",a.target.value),placeholder:"#000000"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"buttonTextColor",children:"Button Text Color"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{id:"buttonTextColor",type:"color",value:w.buttonTextColor,onChange:a=>y("buttonTextColor",a.target.value),className:"w-16 h-10"}),(0,b.jsx)(g.Input,{value:w.buttonTextColor,onChange:a=>y("buttonTextColor",a.target.value),placeholder:"#ffffff"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"ctaType",children:"CTA Type"}),(0,b.jsxs)(l.Select,{value:w.ctaType,onValueChange:a=>y("ctaType",a),children:[(0,b.jsx)(l.SelectTrigger,{id:"ctaType",children:(0,b.jsx)(l.SelectValue,{})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"link",children:"Link/URL"}),(0,b.jsx)(l.SelectItem,{value:"email_capture",children:"Email Capture"}),(0,b.jsx)(l.SelectItem,{value:"discount_code",children:"Show Discount Code"})]})]})]}),"link"===w.ctaType&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"ctaUrl",children:"Button URL"}),(0,b.jsx)(g.Input,{id:"ctaUrl",type:"url",value:w.ctaUrl,onChange:a=>y("ctaUrl",a.target.value),placeholder:"https://example.com/offer"})]}),"discount_code"===w.ctaType&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"discountCode",children:"Discount Code"}),(0,b.jsx)(g.Input,{id:"discountCode",value:w.discountCode,onChange:a=>y("discountCode",a.target.value),placeholder:"WELCOME15"})]})]})]})}),(0,b.jsx)(k.TabsContent,{value:"advanced",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Advanced Settings"})}),(0,b.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(m.Switch,{id:"isActive",checked:w.isActive,onCheckedChange:a=>y("isActive",a)}),(0,b.jsx)(h.Label,{htmlFor:"isActive",children:"Active"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground ml-2",children:w.isActive?"Popup is currently active":"Popup is currently inactive"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"startDate",children:"Start Date (Optional)"}),(0,b.jsx)(g.Input,{id:"startDate",type:"datetime-local",value:w.startDate,onChange:a=>y("startDate",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"endDate",children:"End Date (Optional)"}),(0,b.jsx)(g.Input,{id:"endDate",type:"datetime-local",value:w.endDate,onChange:a=>y("endDate",a.target.value)})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"priority",children:"Priority"}),(0,b.jsx)(g.Input,{id:"priority",type:"number",value:w.priority,onChange:a=>y("priority",parseInt(a.target.value)),min:0,max:100}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"If multiple popups match, higher priority shows first (0-100)"})]})]})]})})]}),u&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:w.overlayColor},onClick:()=>v(!1),children:(0,b.jsxs)(j.Card,{className:"relative shadow-2xl",style:{width:`${w.width}px`,height:w.height?`${w.height}px`:"auto",backgroundColor:w.backgroundColor,color:w.textColor},onClick:a=>a.stopPropagation(),children:[w.showCloseButton&&(0,b.jsx)("button",{className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center",onClick:()=>v(!1),children:"Ã—"}),(0,b.jsxs)(j.CardContent,{className:"p-6 space-y-4",children:[w.imageUrl&&(0,b.jsx)("img",{src:w.imageUrl,alt:"Popup",className:"w-full h-auto rounded"}),w.title&&(0,b.jsx)("h2",{className:"text-2xl font-bold",children:w.title}),(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:w.content}}),(0,b.jsx)(f.Button,{type:"button",style:{backgroundColor:w.buttonColor,color:w.buttonTextColor},className:"w-full",children:w.buttonText})]})]})})]})}a.s(["PopupForm",()=>q])}];

//# sourceMappingURL=src_components_admin_PopupForm_tsx_9fe369dc._.js.map
//# debugId=4589e997-b272-5de2-9a2c-5e6b8bdd4658
