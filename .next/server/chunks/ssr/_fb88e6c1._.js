
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="41b7b362-bdeb-578b-84e8-85a6211cc283")}catch(e){}}();
module.exports=[973365,a=>{"use strict";let b=(0,a.i(170106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["default",()=>b])},400210,a=>{"use strict";var b=a.i(973365);a.s(["ArrowLeft",()=>b.default])},591119,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},866718,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},870430,a=>{"use strict";var b=a.i(187924),c=a.i(572131);a.i(935112);var d=a.i(811011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(368114);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none mb-2 group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],870430)},114548,a=>{"use strict";var b=a.i(922644);a.s(["Save",()=>b.default])},77994,a=>{"use strict";var b=a.i(572131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},504699,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},598091,a=>{"use strict";let b=(0,a.i(170106).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["default",()=>b])},429246,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(368114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},596221,404650,a=>{"use strict";let b=(0,a.i(170106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["default",()=>b],404650),a.s(["Loader2",()=>b],596221)},922644,a=>{"use strict";let b=(0,a.i(170106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["default",()=>b])},551120,a=>{"use strict";let b=(0,a.i(170106).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["default",()=>b])},943108,a=>{"use strict";var b=a.i(551120);a.s(["Lock",()=>b.default])},131361,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(591119),f=a.i(699570),g=a.i(596221),h=a.i(943108),i=a.i(238246);function j({featureName:a,children:j}){(0,d.useRouter)();let[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1);(0,c.useEffect)(()=>{o()},[]);let o=async()=>{try{let b=await fetch(`/api/features/check?feature=${a}`),c=await b.json();n(c.enabled)}catch(a){console.error("Error checking feature:",a),n(!1)}finally{l(!1)}};return k?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(g.Loader2,{className:"h-8 w-8 animate-spin"})}):m?(0,b.jsx)(b.Fragment,{children:j}):(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,b.jsx)(h.Lock,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Feature Not Enabled"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-4 max-w-md",children:"This feature needs to be enabled by a super admin in the feature management page."}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.default,{href:"/admin/features",children:(0,b.jsx)(f.Button,{children:"Go to Feature Management"})}),(0,b.jsx)(i.default,{href:"/admin/marketing/email-campaigns",children:(0,b.jsx)(f.Button,{variant:"outline",children:"Back to Campaigns"})})]})]})})})}a.s(["FeatureCheck",()=>j])},384196,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(591119),f=a.i(699570),g=a.i(866718),h=a.i(870430),i=a.i(429246),j=a.i(580701),k=a.i(596221),l=a.i(400210),m=a.i(114548),n=a.i(406704),o=a.i(238246),p=a.i(131361);function q(){let a=(0,d.useParams)(),q=(0,d.useRouter)(),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({name:"",subject:"",preheader:"",type:"NEWSLETTER",htmlContent:"",textContent:"",fromName:"",fromEmail:"",replyTo:""});(0,c.useEffect)(()=>{a.id&&x()},[a.id]);let x=async()=>{try{let b=await fetch(`/api/admin/email-campaigns/${a.id}`);if(!b.ok)throw Error("Failed to fetch campaign");let c=await b.json();if("DRAFT"!==c.status){n.toast.error("Only draft campaigns can be edited"),q.push(`/admin/marketing/email-campaigns/${a.id}`);return}w({name:c.name,subject:c.subject,preheader:c.preheader||"",type:c.type,htmlContent:c.htmlContent,textContent:c.textContent||"",fromName:c.fromName||"",fromEmail:c.fromEmail||"",replyTo:c.replyTo||""})}catch(a){console.error("Error fetching campaign:",a),n.toast.error("Failed to load campaign")}finally{s(!1)}},y=async b=>{b.preventDefault(),u(!0);try{let b=await fetch(`/api/admin/email-campaigns/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to update campaign")}n.toast.success("Campaign updated successfully"),q.push(`/admin/marketing/email-campaigns/${a.id}`)}catch(a){n.toast.error(a.message)}finally{u(!1)}};return r?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,b.jsx)(p.FeatureCheck,{featureName:"email_campaigns",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(o.default,{href:`/admin/marketing/email-campaigns/${a.id}`,children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",children:[(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Campaign"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Update your email campaign details"})]})]}),(0,b.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Campaign Details"}),(0,b.jsx)(e.CardDescription,{children:"Basic information about your campaign"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"Campaign Name"}),(0,b.jsx)(g.Input,{id:"name",value:v.name,onChange:a=>w({...v,name:a.target.value}),placeholder:"Monthly Newsletter - January 2025",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"type",children:"Campaign Type"}),(0,b.jsxs)(j.Select,{value:v.type,onValueChange:a=>w({...v,type:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"NEWSLETTER",children:"Newsletter"}),(0,b.jsx)(j.SelectItem,{value:"PROMOTIONAL",children:"Promotional"}),(0,b.jsx)(j.SelectItem,{value:"TRANSACTIONAL",children:"Transactional"}),(0,b.jsx)(j.SelectItem,{value:"ANNOUNCEMENT",children:"Announcement"}),(0,b.jsx)(j.SelectItem,{value:"CUSTOM",children:"Custom"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"subject",children:"Email Subject"}),(0,b.jsx)(g.Input,{id:"subject",value:v.subject,onChange:a=>w({...v,subject:a.target.value}),placeholder:"Check out our new products!",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"preheader",children:"Preheader Text (Optional)"}),(0,b.jsx)(g.Input,{id:"preheader",value:v.preheader,onChange:a=>w({...v,preheader:a.target.value}),placeholder:"Preview text that appears in inbox..."}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This text appears after the subject line in many email clients"})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Email Content"}),(0,b.jsx)(e.CardDescription,{children:"Design your email content"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"htmlContent",children:"HTML Content"}),(0,b.jsx)(i.Textarea,{id:"htmlContent",value:v.htmlContent,onChange:a=>w({...v,htmlContent:a.target.value}),placeholder:"<h1>Hello!</h1><p>Your email content here...</p>",rows:12,required:!0,className:"font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Full HTML content of your email"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"textContent",children:"Plain Text Version (Optional)"}),(0,b.jsx)(i.Textarea,{id:"textContent",value:v.textContent,onChange:a=>w({...v,textContent:a.target.value}),placeholder:"Plain text version for email clients that don't support HTML",rows:6})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Sender Information"}),(0,b.jsx)(e.CardDescription,{children:"Configure who the email is from"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"fromName",children:"From Name"}),(0,b.jsx)(g.Input,{id:"fromName",value:v.fromName,onChange:a=>w({...v,fromName:a.target.value}),placeholder:"Your Store"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"fromEmail",children:"From Email"}),(0,b.jsx)(g.Input,{id:"fromEmail",type:"email",value:v.fromEmail,onChange:a=>w({...v,fromEmail:a.target.value}),placeholder:"hello@yourstore.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"replyTo",children:"Reply To"}),(0,b.jsx)(g.Input,{id:"replyTo",type:"email",value:v.replyTo,onChange:a=>w({...v,replyTo:a.target.value}),placeholder:"support@yourstore.com"})]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(o.default,{href:`/admin/marketing/email-campaigns/${a.id}`,children:(0,b.jsx)(f.Button,{type:"button",variant:"outline",children:"Cancel"})}),(0,b.jsxs)(f.Button,{type:"submit",disabled:t,children:[t&&(0,b.jsx)(k.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,b.jsx)(m.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})]})})}a.s(["default",()=>q])}];

//# sourceMappingURL=_fb88e6c1._.js.map
//# debugId=41b7b362-bdeb-578b-84e8-85a6211cc283
