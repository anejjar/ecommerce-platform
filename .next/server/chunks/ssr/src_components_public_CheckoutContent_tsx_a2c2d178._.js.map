{"version":3,"sources":["../../../../src/components/public/CheckoutContent.tsx","../../../../src/hooks/useFeatureFlag.ts","../../../../src/components/public/RegionSelect.tsx","../../../../src/components/public/CitySelect.tsx","../../../../src/components/public/AddressAutocomplete.tsx","../../../../src/types/checkout-settings.ts","../../../../src/components/checkout/CheckoutProgress.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useSession } from 'next-auth/react';\r\nimport Image from 'next/image';\r\nimport { Link } from '@/navigation';\r\nimport { Lock, ShoppingBag, MapPin, Zap, ChevronDown, ChevronUp } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport { useAppSelector, useAppDispatch } from '@/lib/redux/hooks';\r\nimport { clearCart } from '@/lib/redux/features/cartSlice';\r\nimport toast from 'react-hot-toast';\r\nimport { useTranslations } from 'next-intl';\r\nimport { useFeatureFlag } from '@/hooks/useFeatureFlag';\r\nimport { useCurrency } from '@/hooks/useCurrency';\r\nimport { RegionSelect } from './RegionSelect';\r\nimport { CitySelect } from './CitySelect';\r\nimport { AddressAutocomplete } from './AddressAutocomplete';\r\nimport { CheckoutSettings, DEFAULT_FIELD_ORDER } from '@/types/checkout-settings';\r\nimport { CountdownTimer } from '@/components/checkout/CountdownTimer';\r\nimport { FreeShippingBar } from '@/components/checkout/FreeShippingBar';\r\nimport { TestimonialsCarousel } from '@/components/checkout/TestimonialsCarousel';\r\nimport { RecentPurchasePopup } from '@/components/checkout/RecentPurchasePopup';\r\nimport { CheckoutProgress } from '@/components/checkout/CheckoutProgress';\r\nimport {\r\n  TrustBadges,\r\n  SecuritySeals,\r\n  MoneyBackGuarantee,\r\n  CustomerServiceDisplay,\r\n  TrustRating,\r\n  OrderCountTicker,\r\n} from '@/components/checkout/TrustElements';\r\n\r\nexport function CheckoutContent() {\r\n  const t = useTranslations();\r\n  const router = useRouter();\r\n  const { data: session, status } = useSession();\r\n  const dispatch = useAppDispatch();\r\n  const cartItems = useAppSelector((state) => state.cart.items);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { format } = useCurrency();\r\n\r\n  // Feature flags\r\n  const checkoutCustomizationEnabled = useFeatureFlag('checkout_customization');\r\n\r\n  // Checkout settings\r\n  const [checkoutSettings, setCheckoutSettings] = useState<CheckoutSettings | null>(null);\r\n\r\n  // Saved addresses\r\n  const [savedAddresses, setSavedAddresses] = useState<any[]>([]);\r\n  const [selectedAddressId, setSelectedAddressId] = useState<string | null>(null);\r\n  const [useNewAddress, setUseNewAddress] = useState(false);\r\n\r\n  // Region and city selection\r\n  const [selectedRegionId, setSelectedRegionId] = useState<string>('');\r\n\r\n  const [formData, setFormData] = useState({\r\n    email: session?.user?.email || '',\r\n    firstName: '',\r\n    lastName: '',\r\n    company: '',\r\n    address: '',\r\n    address2: '',\r\n    city: '',\r\n    state: '',\r\n    country: 'Morocco',\r\n    phone: '',\r\n    orderNotes: '',\r\n    // Phase 2: Additional standard fields\r\n    alternativePhone: '',\r\n    deliveryInstructions: '',\r\n    giftMessage: '',\r\n    deliveryDate: '',\r\n  });\r\n\r\n  // Phase 2: Custom fields data\r\n  const [customFieldsData, setCustomFieldsData] = useState<Record<string, any>>({});\r\n\r\n  // Order summary collapsible state\r\n  const [orderSummaryCollapsed, setOrderSummaryCollapsed] = useState(false);\r\n\r\n  const [createAccount, setCreateAccount] = useState(false);\r\n  const [password, setPassword] = useState('');\r\n  const [discountCode, setDiscountCode] = useState('');\r\n  const [appliedDiscount, setAppliedDiscount] = useState<{\r\n    id: string;\r\n    code: string;\r\n    type: 'PERCENTAGE' | 'FIXED_AMOUNT';\r\n    value: number;\r\n    discountAmount: number;\r\n  } | null>(null);\r\n  const [discountError, setDiscountError] = useState('');\r\n  const [isCheckingDiscount, setIsCheckingDiscount] = useState(false);\r\n\r\n  // Phase 1: Dynamic styling based on settings\r\n  const pageStyles = useMemo(() => {\r\n    if (!checkoutSettings || !checkoutCustomizationEnabled) return {};\r\n\r\n    const styles: React.CSSProperties = {};\r\n\r\n    // Font family\r\n    const fontFamilyMap = {\r\n      system: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\r\n      inter: '\"Inter\", sans-serif',\r\n      roboto: '\"Roboto\", sans-serif',\r\n      opensans: '\"Open Sans\", sans-serif',\r\n    };\r\n    if (checkoutSettings.fontFamily) {\r\n      styles.fontFamily = fontFamilyMap[checkoutSettings.fontFamily];\r\n    }\r\n\r\n    return styles;\r\n  }, [checkoutSettings, checkoutCustomizationEnabled]);\r\n\r\n  const containerClass = useMemo(() => {\r\n    if (!checkoutSettings || !checkoutCustomizationEnabled) return 'container mx-auto px-4 py-8';\r\n    const widthMap = {\r\n      narrow: 'max-w-4xl mx-auto px-4 py-8',\r\n      normal: 'container mx-auto px-4 py-8',\r\n      wide: 'max-w-7xl mx-auto px-4 py-8',\r\n    };\r\n    return widthMap[checkoutSettings.pageWidth || 'normal'];\r\n  }, [checkoutSettings, checkoutCustomizationEnabled]);\r\n\r\n  const buttonClass = useMemo(() => {\r\n    if (!checkoutSettings || !checkoutCustomizationEnabled) return '';\r\n    const buttonStyleMap = {\r\n      rounded: 'rounded-md',\r\n      square: 'rounded-none',\r\n      pill: 'rounded-full',\r\n    };\r\n    return buttonStyleMap[checkoutSettings.buttonStyle || 'rounded'];\r\n  }, [checkoutSettings, checkoutCustomizationEnabled]);\r\n\r\n  // Secondary color styles for borders, accents, and secondary elements\r\n  const secondaryColorStyles = useMemo(() => {\r\n    if (!checkoutSettings || !checkoutCustomizationEnabled || !checkoutSettings.secondaryColor) {\r\n      return {};\r\n    }\r\n    return {\r\n      borderColor: checkoutSettings.secondaryColor,\r\n      color: checkoutSettings.secondaryColor,\r\n    };\r\n  }, [checkoutSettings, checkoutCustomizationEnabled]);\r\n\r\n  // Field order - determines the order fields should be displayed\r\n  // Note: Full implementation requires form refactoring to render fields dynamically\r\n  const fieldOrder = useMemo(() => {\r\n    if (checkoutCustomizationEnabled && checkoutSettings?.fieldOrder && checkoutSettings.fieldOrder.length > 0) {\r\n      return checkoutSettings.fieldOrder;\r\n    }\r\n    return DEFAULT_FIELD_ORDER;\r\n  }, [checkoutSettings, checkoutCustomizationEnabled]);\r\n\r\n  // Phase 2: Helper functions for custom field labels and placeholders\r\n  const getFieldLabel = (fieldName: string, defaultLabel: string) => {\r\n    if (checkoutCustomizationEnabled && checkoutSettings?.fieldLabels && checkoutSettings.fieldLabels[fieldName as keyof typeof checkoutSettings.fieldLabels]) {\r\n      return checkoutSettings.fieldLabels[fieldName as keyof typeof checkoutSettings.fieldLabels];\r\n    }\r\n    return defaultLabel;\r\n  };\r\n\r\n  const getFieldPlaceholder = (fieldName: string, defaultPlaceholder?: string) => {\r\n    if (checkoutCustomizationEnabled && checkoutSettings?.fieldPlaceholders && checkoutSettings.fieldPlaceholders[fieldName as keyof typeof checkoutSettings.fieldPlaceholders]) {\r\n      return checkoutSettings.fieldPlaceholders[fieldName as keyof typeof checkoutSettings.fieldPlaceholders];\r\n    }\r\n    return defaultPlaceholder || '';\r\n  };\r\n\r\n  // Fetch checkout settings\r\n  useEffect(() => {\r\n    fetchCheckoutSettings();\r\n  }, []);\r\n\r\n  const fetchCheckoutSettings = async () => {\r\n    try {\r\n      const response = await fetch('/api/checkout-settings');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setCheckoutSettings(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching checkout settings:', error);\r\n    }\r\n  };\r\n\r\n  // Fetch saved addresses for logged-in users\r\n  useEffect(() => {\r\n    if (session?.user) {\r\n      fetchSavedAddresses();\r\n    }\r\n  }, [session]);\r\n\r\n  const fetchSavedAddresses = async () => {\r\n    try {\r\n      const response = await fetch('/api/account/addresses');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSavedAddresses(data || []);\r\n\r\n        // Auto-select default address\r\n        const defaultAddress = data.find((addr: any) => addr.isDefault);\r\n        if (defaultAddress && !useNewAddress) {\r\n          handleSelectSavedAddress(defaultAddress.id);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching saved addresses:', error);\r\n    }\r\n  };\r\n\r\n  const handleSelectSavedAddress = (addressId: string) => {\r\n    const address = savedAddresses.find(addr => addr.id === addressId);\r\n    if (address) {\r\n      setSelectedAddressId(addressId);\r\n      setUseNewAddress(false);\r\n      setFormData({\r\n        ...formData,\r\n        firstName: address.firstName,\r\n        lastName: address.lastName,\r\n        company: address.company || '',\r\n        address: address.address1,\r\n        address2: address.address2 || '',\r\n        city: address.city,\r\n        state: address.state || '',\r\n        country: address.country,\r\n        phone: address.phone || '',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleUseNewAddress = () => {\r\n    setUseNewAddress(true);\r\n    setSelectedAddressId(null);\r\n    setFormData({\r\n      email: session?.user?.email || formData.email,\r\n      firstName: '',\r\n      lastName: '',\r\n      company: '',\r\n      address: '',\r\n      address2: '',\r\n      city: '',\r\n      state: '',\r\n      country: 'Morocco',\r\n      phone: '',\r\n      orderNotes: '',\r\n    });\r\n    setSelectedRegionId('');\r\n  };\r\n\r\n  const handleAddressAutocompleteSelect = (addressData: any) => {\r\n    setFormData({\r\n      ...formData,\r\n      address: addressData.address,\r\n      city: addressData.city,\r\n      state: addressData.state,\r\n      country: addressData.country,\r\n    });\r\n  };\r\n\r\n  const subtotal = cartItems.reduce(\r\n    (sum, item) => sum + item.price * item.quantity,\r\n    0\r\n  );\r\n  const tax = subtotal * 0.1;\r\n  const shipping = subtotal > 50 ? 0 : 10;\r\n  const totalBeforeDiscount = subtotal + tax + shipping;\r\n  const total = appliedDiscount\r\n    ? Math.max(0, totalBeforeDiscount - appliedDiscount.discountAmount)\r\n    : totalBeforeDiscount;\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleApplyDiscount = async () => {\r\n    if (!discountCode.trim()) return;\r\n\r\n    setIsCheckingDiscount(true);\r\n    setDiscountError('');\r\n\r\n    try {\r\n      const response = await fetch('/api/discounts/validate', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          code: discountCode,\r\n          cartTotal: subtotal,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setAppliedDiscount(data);\r\n        toast.success(t('checkout.discountApplied'));\r\n      } else {\r\n        setDiscountError(data.error || t('checkout.invalidDiscount'));\r\n        setAppliedDiscount(null);\r\n      }\r\n    } catch (error) {\r\n      setDiscountError(t('checkout.failedToApplyDiscount'));\r\n    } finally {\r\n      setIsCheckingDiscount(false);\r\n    }\r\n  };\r\n\r\n  const removeDiscount = () => {\r\n    setAppliedDiscount(null);\r\n    setDiscountCode('');\r\n    setDiscountError('');\r\n  };\r\n\r\n  // Render order summary content (reusable function)\r\n  const renderOrderSummaryContent = () => (\r\n    <>\r\n      {/* Phase 4: Trust Badges - Sidebar Position */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.trustBadges && checkoutSettings.trustBadges.length > 0 && (\r\n        <TrustBadges\r\n          badges={checkoutSettings.trustBadges.filter((b) => b.position === 'sidebar')}\r\n        />\r\n      )}\r\n\r\n      {/* Phase 5: Upsell Products - Cart Position */}\r\n      {checkoutCustomizationEnabled && \r\n       checkoutSettings?.showUpsells && \r\n       checkoutSettings.upsellProducts && \r\n       checkoutSettings.upsellProducts.length > 0 &&\r\n       checkoutSettings.upsellPosition === 'cart' && (\r\n        <UpsellProducts\r\n          productIds={checkoutSettings.upsellProducts}\r\n          title={checkoutSettings.upsellTitle || undefined}\r\n          position=\"cart\"\r\n        />\r\n      )}\r\n\r\n      {/* Phase 5: Scarcity Message */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.scarcityMessage && (\r\n        <div\r\n          className={`p-3 rounded-lg border ${checkoutSettings.urgencyBadgeStyle === 'danger'\r\n            ? 'bg-red-50 border-red-200 text-red-800'\r\n            : checkoutSettings.urgencyBadgeStyle === 'info'\r\n              ? 'bg-blue-50 border-blue-200 text-blue-800'\r\n              : 'bg-yellow-50 border-yellow-200 text-yellow-800'\r\n            }`}\r\n        >\r\n          <p className=\"text-sm font-medium\">{checkoutSettings.scarcityMessage}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Phase 4: Security Seals */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.showSecuritySeals && (\r\n        <SecuritySeals />\r\n      )}\r\n\r\n      {/* Phase 4: Customer Service Display */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.customerServiceDisplay && (\r\n        <CustomerServiceDisplay\r\n          text={checkoutSettings.customerServiceText || undefined}\r\n          phone={checkoutSettings.customerServicePhone || undefined}\r\n          email={checkoutSettings.customerServiceEmail || undefined}\r\n        />\r\n      )}\r\n\r\n      {/* Cart Items */}\r\n      <div className=\"space-y-3 mb-4 border-b pb-4\">\r\n        {cartItems.map((item) => (\r\n          <div key={item.id}>\r\n            <div className=\"flex gap-3\">\r\n              <div className=\"relative w-16 h-16 bg-gray-100 rounded flex-shrink-0\">\r\n                {item.image ? (\r\n                  <Image\r\n                    src={item.image}\r\n                    alt={item.name}\r\n                    fill\r\n                    className=\"object-cover rounded\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\r\n                    üì¶\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <p className=\"font-medium text-sm\">{item.name}</p>\r\n                <p className=\"text-sm text-gray-600\">{t('checkout.qty')} {item.quantity}</p>\r\n\r\n                {/* Phase 5: Low Stock Warning */}\r\n                {checkoutCustomizationEnabled && checkoutSettings?.showLowStock &&\r\n                  checkoutSettings.lowStockThreshold &&\r\n                  item.stock &&\r\n                  item.stock <= checkoutSettings.lowStockThreshold && (\r\n                    <div className=\"flex items-center gap-1 mt-1\">\r\n                      <span className=\"text-orange-600 text-xs\">‚ö†Ô∏è</span>\r\n                      <p className=\"text-xs text-orange-600 font-medium\">\r\n                        {checkoutSettings.lowStockText?.replace('X', item.stock.toString()) || `Only ${item.stock} left!`}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"font-medium\">\r\n                  {format(item.price * item.quantity)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Phase 5: Loyalty Points */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.showLoyaltyPoints && checkoutSettings.loyaltyPointsText && (\r\n        <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3\">\r\n          <p className=\"text-sm text-amber-800\">{checkoutSettings.loyaltyPointsText}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Phase 5: Gift with Purchase */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.showGiftWithPurchase &&\r\n        checkoutSettings.giftThreshold &&\r\n        subtotal >= checkoutSettings.giftThreshold && (\r\n          <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-3\">\r\n            <div className=\"flex items-start gap-2\">\r\n              <span className=\"text-purple-600\">üéÅ</span>\r\n              <p className=\"text-sm text-purple-800\">{checkoutSettings.giftDescription}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n      {/* Phase 5: Referral Discount */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.referralDiscountEnabled && checkoutSettings.referralDiscountText && (\r\n        <div className=\"bg-indigo-50 border border-indigo-200 rounded-lg p-3\">\r\n          <p className=\"text-sm text-indigo-800\">{checkoutSettings.referralDiscountText}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Discount Code - Position controlled by Phase 5 settings */}\r\n      <div className={`border-b pb-4 ${checkoutSettings?.discountFieldPosition === 'top' ? 'order-first' : checkoutSettings?.discountFieldPosition === 'bottom' ? 'order-last' : ''\r\n        }`}>\r\n        <Label htmlFor=\"discountCode\" className=\"mb-2 block\">\r\n          {t('checkout.discountCode')}\r\n        </Label>\r\n        <div className=\"flex gap-2\">\r\n          <Input\r\n            id=\"discountCode\"\r\n            value={discountCode}\r\n            onChange={(e) => setDiscountCode(e.target.value)}\r\n            placeholder={t('checkout.enterCode')}\r\n            disabled={!!appliedDiscount}\r\n          />\r\n          {appliedDiscount ? (\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={removeDiscount}\r\n              className=\"shrink-0\"\r\n              style={checkoutCustomizationEnabled && checkoutSettings?.secondaryColor ? {\r\n                borderColor: checkoutSettings.secondaryColor,\r\n                color: checkoutSettings.secondaryColor,\r\n              } : {}}\r\n            >\r\n              {t('cart.remove')}\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleApplyDiscount}\r\n              disabled={isCheckingDiscount || !discountCode}\r\n              className=\"shrink-0\"\r\n            >\r\n              {t('checkout.apply')}\r\n            </Button>\r\n          )}\r\n        </div>\r\n        {discountError && (\r\n          <p className=\"text-sm text-red-500 mt-1\">{discountError}</p>\r\n        )}\r\n        {appliedDiscount && (\r\n          <p className=\"text-sm text-green-600 mt-1\">\r\n            {t('checkout.discountAppliedLabel')} {appliedDiscount.code}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Totals */}\r\n      <div className=\"space-y-2 mb-4\">\r\n        <div className=\"flex justify-between text-sm\">\r\n          <span className=\"text-gray-600\">{t('cart.subtotal')}</span>\r\n          <span className=\"font-medium\">{format(subtotal)}</span>\r\n        </div>\r\n        <div className=\"flex justify-between text-sm\">\r\n          <span className=\"text-gray-600\">{t('cart.tax')} (10%)</span>\r\n          <span className=\"font-medium\">{format(tax)}</span>\r\n        </div>\r\n        <div className=\"flex justify-between text-sm\">\r\n          <span className=\"text-gray-600\">{t('cart.shipping')}</span>\r\n          <span className=\"font-medium\">\r\n            {shipping === 0 ? (\r\n              <span className=\"text-green-600\">{t('cart.free')}</span>\r\n            ) : (\r\n              format(shipping)\r\n            )}\r\n          </span>\r\n        </div>\r\n        {appliedDiscount && (\r\n          <div className=\"flex justify-between text-sm text-green-600 font-medium\">\r\n            <span>{t('checkout.discount')}</span>\r\n            <span>-{format(appliedDiscount.discountAmount)}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div \r\n        className=\"border-t pt-4 mb-6\"\r\n        style={checkoutCustomizationEnabled && checkoutSettings?.secondaryColor ? {\r\n          borderTopColor: checkoutSettings.secondaryColor,\r\n        } : {}}\r\n      >\r\n        <div className=\"flex justify-between text-lg font-bold\">\r\n          <span>{t('cart.total')}</span>\r\n          <span>{format(total)}</span>\r\n        </div>\r\n      </div>\r\n\r\n              {/* Enhanced Place Order Button */}\r\n              <div className=\"space-y-3\">\r\n                <Button\r\n                  type=\"submit\"\r\n                  size=\"lg\"\r\n                  className={`w-full text-lg font-bold py-6 shadow-lg hover:shadow-xl transition-all ${buttonClass}`}\r\n                  disabled={isSubmitting}\r\n                  style={{\r\n                    backgroundColor: checkoutSettings?.primaryColor || undefined,\r\n                    borderColor: checkoutSettings?.primaryColor || undefined,\r\n                  }}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <span className=\"flex items-center justify-center gap-2\">\r\n                      <span className=\"animate-spin\">‚è≥</span>\r\n                      {t('checkout.placingOrder')}\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"flex items-center justify-center gap-2\">\r\n                      <Lock className=\"w-5 h-5\" />\r\n                      {t('checkout.placeOrder')} - {format(total)}\r\n                    </span>\r\n                  )}\r\n                </Button>\r\n                \r\n                {/* Secure Checkout Badge */}\r\n                <div className=\"flex items-center justify-center gap-2 text-sm text-gray-600\">\r\n                  <Lock className=\"w-4 h-4 text-green-600\" />\r\n                  <span className=\"font-medium\">Secure Checkout</span>\r\n                  <span className=\"text-gray-400\">‚Ä¢</span>\r\n                  <span>SSL Encrypted</span>\r\n                </div>\r\n\r\n                <div className=\"text-xs text-center text-gray-600\">\r\n                  <p>{t('checkout.agreeToTerms')}</p>\r\n                  <p>\r\n                    <Link href=\"/terms\" className=\"underline hover:text-primary\">\r\n                      {t('footer.terms')}\r\n                    </Link>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n    </>\r\n  );\r\n\r\n  // Render order summary wrapper\r\n  const renderOrderSummary = (sticky: boolean = true) => (\r\n    <div className={`bg-white rounded-lg shadow-sm p-6 space-y-6 ${sticky ? 'sticky top-24' : ''}`}>\r\n      <h2 className=\"text-xl font-bold\">{t('cart.orderSummary')}</h2>\r\n      {renderOrderSummaryContent()}\r\n    </div>\r\n  );\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // Validate email for guest checkout\r\n    if (!session && !formData.email) {\r\n      toast.error(t('checkout.enterEmail'));\r\n      return;\r\n    }\r\n\r\n    // Validate password if creating account\r\n    if (!session && createAccount && password.length < 6) {\r\n      toast.error(t('checkout.passwordLength'));\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const response = await fetch('/api/checkout', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          items: cartItems.map((item) => ({\r\n            productId: item.productId,\r\n            quantity: item.quantity,\r\n            variantId: item.variantId || null,\r\n          })),\r\n          shippingAddress: {\r\n            address1: formData.address,\r\n            address2: formData.address2,\r\n            company: formData.company,\r\n            city: formData.city,\r\n            state: formData.state,\r\n            country: formData.country,\r\n          },\r\n          customerInfo: {\r\n            firstName: formData.firstName,\r\n            lastName: formData.lastName,\r\n            email: formData.email,\r\n            phone: formData.phone,\r\n            // Phase 2: Additional fields\r\n            alternativePhone: formData.alternativePhone,\r\n          },\r\n          orderNotes: formData.orderNotes,\r\n          // Phase 2: Additional standard fields\r\n          deliveryInstructions: formData.deliveryInstructions,\r\n          giftMessage: formData.giftMessage,\r\n          deliveryDate: formData.deliveryDate,\r\n          // Phase 2: Custom fields\r\n          customFields: customFieldsData,\r\n          isGuest: !session,\r\n          createAccount: !session && createAccount,\r\n          password: !session && createAccount ? password : undefined,\r\n          discountCodeId: appliedDiscount?.id,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const order = await response.json();\r\n        dispatch(clearCart());\r\n        toast.success(t('checkout.orderSuccess'));\r\n        router.push(`/order-confirmation/${order.orderNumber}`);\r\n      } else {\r\n        const error = await response.json();\r\n        toast.error(error.error || t('checkout.orderFailed'));\r\n      }\r\n    } catch (error) {\r\n      toast.error(t('common.error'));\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (cartItems.length === 0) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-16\">\r\n        <div className=\"max-w-md mx-auto text-center\">\r\n          <div className=\"bg-white rounded-lg shadow-sm p-12\">\r\n            <ShoppingBag className=\"w-16 h-16 mx-auto text-gray-400 mb-4\" />\r\n            <h2 className=\"text-2xl font-bold mb-2\">{t('cart.emptyCart')}</h2>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              {t('cart.addProducts')}\r\n            </p>\r\n            <Link href=\"/shop\">\r\n              <Button size=\"lg\">{t('cart.continueShopping')}</Button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (status === 'loading') {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-16 text-center\">\r\n        <p>{t('common.loading')}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={pageStyles}>\r\n      {/* Phase 5: Countdown Timer */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.showCountdownTimer && checkoutSettings.countdownEndDate && (\r\n        <CountdownTimer\r\n          endDate={new Date(checkoutSettings.countdownEndDate)}\r\n          text={checkoutSettings.countdownText || undefined}\r\n        />\r\n      )}\r\n\r\n      {/* Phase 5: Promotional Banners - Top Position */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.promotionalBanners?.filter((b) => b.position === 'top').map((banner) => (\r\n        <div\r\n          key={banner.id}\r\n          className={`p-4 border-b ${banner.type === 'success'\r\n            ? 'bg-green-50 border-green-200 text-green-800'\r\n            : banner.type === 'warning'\r\n              ? 'bg-yellow-50 border-yellow-200 text-yellow-800'\r\n              : banner.type === 'danger'\r\n                ? 'bg-red-50 border-red-200 text-red-800'\r\n                : 'bg-blue-50 border-blue-200 text-blue-800'\r\n            }`}\r\n        >\r\n          <div className=\"container mx-auto px-4 flex items-center justify-between\">\r\n            <p className=\"text-sm font-medium\">{banner.message}</p>\r\n            {banner.link && banner.linkText && (\r\n              <Link href={banner.link} className=\"text-sm font-semibold underline\">\r\n                {banner.linkText}\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      <div className={containerClass}>\r\n        {/* Logo Display - Phase 1 */}\r\n        {checkoutCustomizationEnabled && checkoutSettings?.logoUrl && (\r\n          <div className=\"mb-6 flex justify-center\">\r\n            <Image\r\n              src={checkoutSettings.logoUrl}\r\n              alt=\"Store Logo\"\r\n              width={180}\r\n              height={60}\r\n              className=\"h-12 w-auto object-contain\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <h1 className=\"text-3xl font-bold mb-4\">{t('cart.checkout')}</h1>\r\n\r\n        {/* Checkout Progress Indicator - Only show if customization enabled and configured */}\r\n        {checkoutCustomizationEnabled && \r\n         checkoutSettings?.progressStyle && \r\n         checkoutSettings.progressStyle !== 'none' &&\r\n         checkoutSettings?.checkoutLayout === 'multi-step' && (\r\n          <div className=\"mb-8 bg-white rounded-lg p-4 md:p-6 shadow-sm\">\r\n            {checkoutSettings.progressStyle === 'steps' ? (\r\n              <CheckoutProgress\r\n                currentStep={0}\r\n                steps={['Information', 'Shipping', 'Payment', 'Review']}\r\n              />\r\n            ) : checkoutSettings.progressStyle === 'bar' ? (\r\n              <div className=\"w-full\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"text-sm font-medium text-gray-700\">Checkout Progress</span>\r\n                  <span className=\"text-sm text-gray-500\">Step 1 of 4</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div\r\n                    className=\"bg-amber-600 h-2 rounded-full transition-all duration-500\"\r\n                    style={{ width: '25%' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        )}\r\n\r\n        {/* Phase 4: Trust Rating & Order Count */}\r\n        {checkoutCustomizationEnabled && (checkoutSettings?.showTrustRating || checkoutSettings?.showOrderCount) && (\r\n          <div className=\"mb-6 flex flex-wrap gap-4 justify-center\">\r\n            {checkoutSettings.showTrustRating && checkoutSettings.trustRatingScore && (\r\n              <TrustRating\r\n                score={Number(checkoutSettings.trustRatingScore)}\r\n                count={checkoutSettings.trustRatingCount || undefined}\r\n              />\r\n            )}\r\n            {checkoutSettings.showOrderCount && (\r\n              <OrderCountTicker text={checkoutSettings.orderCountText || undefined} />\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Phase 4: Trust Badges - Header Position */}\r\n        {checkoutCustomizationEnabled && checkoutSettings?.trustBadges && checkoutSettings.trustBadges.length > 0 && (\r\n          <TrustBadges\r\n            badges={checkoutSettings.trustBadges.filter((b) => b.position === 'header')}\r\n          />\r\n        )}\r\n\r\n        {/* Custom Checkout Banner */}\r\n        {checkoutSettings?.checkoutBanner && (\r\n          <div\r\n            className={`mb-6 p-4 rounded-lg border ${checkoutSettings.checkoutBannerType === 'success'\r\n              ? 'bg-green-50 border-green-200 text-green-800'\r\n              : checkoutSettings.checkoutBannerType === 'warning'\r\n                ? 'bg-yellow-50 border-yellow-200 text-yellow-800'\r\n                : 'bg-blue-50 border-blue-200 text-blue-800'\r\n              }`}\r\n          >\r\n            <p>{checkoutSettings.checkoutBanner}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Phase 5: Free Shipping Progress Bar */}\r\n        {checkoutCustomizationEnabled && checkoutSettings?.showFreeShippingBar && checkoutSettings.freeShippingThreshold && (\r\n          <FreeShippingBar\r\n            currentAmount={subtotal}\r\n            threshold={checkoutSettings.freeShippingThreshold}\r\n            text={checkoutSettings.freeShippingBarText || undefined}\r\n          />\r\n        )}\r\n\r\n        {/* Phase 5: Promotional Banners - Middle Position */}\r\n        {checkoutCustomizationEnabled && checkoutSettings?.promotionalBanners?.filter((b) => b.position === 'middle').map((banner) => (\r\n          <div\r\n            key={banner.id}\r\n            className={`mb-6 p-4 rounded-lg border ${banner.type === 'success'\r\n              ? 'bg-green-50 border-green-200 text-green-800'\r\n              : banner.type === 'warning'\r\n                ? 'bg-yellow-50 border-yellow-200 text-yellow-800'\r\n                : banner.type === 'danger'\r\n                  ? 'bg-red-50 border-red-200 text-red-800'\r\n                  : 'bg-blue-50 border-blue-200 text-blue-800'\r\n              }`}\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <p className=\"text-sm font-medium\">{banner.message}</p>\r\n              {banner.link && banner.linkText && (\r\n                <Link href={banner.link} className=\"text-sm font-semibold underline ml-4\">\r\n                  {banner.linkText}\r\n                </Link>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        {/* Order Summary - Top Position */}\r\n        {checkoutCustomizationEnabled && checkoutSettings?.orderSummaryPosition === 'top' && (\r\n          <div className=\"mb-8\">\r\n            {renderOrderSummary(false)}\r\n          </div>\r\n        )}\r\n\r\n        {/* Order Summary - Collapsible Position */}\r\n        {checkoutCustomizationEnabled && checkoutSettings?.orderSummaryPosition === 'collapsible' && (\r\n          <div className=\"mb-8 bg-white rounded-lg shadow-sm\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setOrderSummaryCollapsed(!orderSummaryCollapsed)}\r\n              className=\"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors\"\r\n            >\r\n              <h2 className=\"text-xl font-bold\">{t('cart.orderSummary')}</h2>\r\n              {orderSummaryCollapsed ? (\r\n                <ChevronDown className=\"h-5 w-5\" />\r\n              ) : (\r\n                <ChevronUp className=\"h-5 w-5\" />\r\n              )}\r\n            </button>\r\n            {!orderSummaryCollapsed && (\r\n              <div className=\"px-6 pb-6\">\r\n                {renderOrderSummaryContent()}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        <div className={`grid gap-8 ${\r\n          checkoutCustomizationEnabled && checkoutSettings?.orderSummaryPosition === 'top' \r\n            ? 'lg:grid-cols-1' \r\n            : checkoutCustomizationEnabled && checkoutSettings?.orderSummaryPosition === 'collapsible'\r\n            ? 'lg:grid-cols-1'\r\n            : 'lg:grid-cols-3'\r\n        }`}>\r\n          {/* Checkout Form */}\r\n          <div className={checkoutCustomizationEnabled && checkoutSettings?.orderSummaryPosition === 'right' ? 'lg:col-span-2' : checkoutCustomizationEnabled && (checkoutSettings?.orderSummaryPosition === 'top' || checkoutSettings?.orderSummaryPosition === 'collapsible') ? 'lg:col-span-1' : 'lg:col-span-2'}>\r\n            {/* Contact Information */}\r\n            <div \r\n              className=\"bg-white rounded-lg shadow-sm p-6 mb-6\"\r\n              style={checkoutCustomizationEnabled && checkoutSettings?.secondaryColor ? {\r\n                borderLeft: `4px solid ${checkoutSettings.secondaryColor}`\r\n              } : {}}\r\n            >\r\n              <h2 className=\"text-xl font-bold mb-4\">{t('checkout.contactInfo')}</h2>\r\n\r\n              {!session && (\r\n                <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm\">\r\n                  <p className=\"text-blue-800\">\r\n                    {t('auth.alreadyHaveAccount')}{' '}\r\n                    <Link href=\"/auth/signin?callbackUrl=/checkout\" className=\"font-semibold underline\">\r\n                      {t('auth.signIn')}\r\n                    </Link>\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <Label htmlFor=\"email\">{getFieldLabel('email', t('checkout.email'))}</Label>\r\n                  <Input\r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    type=\"email\"\r\n                    value={formData.email}\r\n                    onChange={handleChange}\r\n                    placeholder={getFieldPlaceholder('email')}\r\n                    required\r\n                    readOnly={!!session?.user?.email}\r\n                    className={`${buttonClass} focus:ring-2 focus:ring-primary focus:border-primary transition-all`}\r\n                  />\r\n                </div>\r\n\r\n                {!session && createAccount && (\r\n                  <div>\r\n                    <Label htmlFor=\"password\">{t('checkout.password')}</Label>\r\n                    <Input\r\n                      id=\"password\"\r\n                      name=\"password\"\r\n                      type=\"password\"\r\n                      value={password}\r\n                      onChange={(e) => setPassword(e.target.value)}\r\n                      required={createAccount}\r\n                      minLength={6}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {!session && (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"createAccount\"\r\n                      checked={createAccount}\r\n                      onChange={(e) => setCreateAccount(e.target.checked)}\r\n                      className=\"w-4 h-4 text-blue-600 border-gray-300 rounded\"\r\n                      style={checkoutCustomizationEnabled && checkoutSettings?.secondaryColor ? {\r\n                        accentColor: checkoutSettings.secondaryColor,\r\n                      } : {}}\r\n                    />\r\n                    <Label htmlFor=\"createAccount\" className=\"font-normal cursor-pointer\">\r\n                      {t('checkout.createAccount')}\r\n                    </Label>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Saved Addresses (for logged-in users) */}\r\n            {session && savedAddresses.length > 0 && (\r\n              <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <h2 className=\"text-xl font-bold\">Saved Addresses</h2>\r\n                  {savedAddresses.find(addr => addr.isDefault) && !useNewAddress && (\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => {\r\n                        const defaultAddr = savedAddresses.find(addr => addr.isDefault);\r\n                        if (defaultAddr) handleSelectSavedAddress(defaultAddr.id);\r\n                      }}\r\n                      className=\"gap-2\"\r\n                      style={checkoutCustomizationEnabled && checkoutSettings?.secondaryColor ? {\r\n                        borderColor: checkoutSettings.secondaryColor,\r\n                        color: checkoutSettings.secondaryColor,\r\n                      } : {}}\r\n                    >\r\n                      <Zap className=\"h-4 w-4\" />\r\n                      Use Default Address\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n\r\n                <RadioGroup\r\n                  value={useNewAddress ? 'new' : selectedAddressId || ''}\r\n                  onValueChange={(value) => {\r\n                    if (value === 'new') {\r\n                      handleUseNewAddress();\r\n                    } else {\r\n                      handleSelectSavedAddress(value);\r\n                    }\r\n                  }}\r\n                  className=\"space-y-3\"\r\n                >\r\n                  {savedAddresses.map((address) => (\r\n                    <div\r\n                      key={address.id}\r\n                      className={`flex items-start space-x-3 p-4 border rounded-lg cursor-pointer transition-colors ${selectedAddressId === address.id && !useNewAddress\r\n                        ? 'border-primary bg-primary/5'\r\n                        : 'border-gray-200 hover:border-gray-300'\r\n                        }`}\r\n                      onClick={() => handleSelectSavedAddress(address.id)}\r\n                    >\r\n                      <RadioGroupItem value={address.id} id={address.id} className=\"mt-1\" />\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Label htmlFor={address.id} className=\"font-semibold cursor-pointer\">\r\n                            {address.firstName} {address.lastName}\r\n                          </Label>\r\n                          {address.isDefault && (\r\n                            <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded\">\r\n                              Default\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-600 mt-1\">\r\n                          {address.address1}\r\n                          {address.address2 && `, ${address.address2}`}\r\n                        </p>\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          {address.city}, {address.state} {address.postalCode}\r\n                        </p>\r\n                        {address.phone && (\r\n                          <p className=\"text-sm text-gray-600\">{address.phone}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n\r\n                  <div\r\n                    className={`flex items-start space-x-3 p-4 border rounded-lg cursor-pointer transition-colors ${useNewAddress\r\n                      ? 'border-primary bg-primary/5'\r\n                      : 'border-gray-200 hover:border-gray-300'\r\n                      }`}\r\n                    onClick={handleUseNewAddress}\r\n                  >\r\n                    <RadioGroupItem value=\"new\" id=\"new-address\" className=\"mt-1\" />\r\n                    <div className=\"flex-1\">\r\n                      <Label htmlFor=\"new-address\" className=\"font-semibold cursor-pointer flex items-center gap-2\">\r\n                        <MapPin className=\"h-4 w-4\" />\r\n                        Use a new address\r\n                      </Label>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        Enter a different shipping address\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </RadioGroup>\r\n              </div>\r\n            )}\r\n\r\n            {/* Shipping Address */}\r\n            <div \r\n              className=\"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6 transition-shadow hover:shadow-lg\"\r\n              style={checkoutCustomizationEnabled && checkoutSettings?.secondaryColor ? {\r\n                borderLeft: `4px solid ${checkoutSettings.secondaryColor}`\r\n              } : {}}\r\n            >\r\n              <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n                <span className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold\">2</span>\r\n                {t('checkout.shippingAddress')}\r\n              </h2>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label htmlFor=\"firstName\">{getFieldLabel('firstName', t('checkout.firstName'))}</Label>\r\n                  <Input\r\n                    id=\"firstName\"\r\n                    name=\"firstName\"\r\n                    value={formData.firstName}\r\n                    onChange={handleChange}\r\n                    placeholder={getFieldPlaceholder('firstName')}\r\n                    className={buttonClass}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label htmlFor=\"lastName\">{getFieldLabel('lastName', t('checkout.lastName'))}</Label>\r\n                  <Input\r\n                    id=\"lastName\"\r\n                    name=\"lastName\"\r\n                    value={formData.lastName}\r\n                    onChange={handleChange}\r\n                    placeholder={getFieldPlaceholder('lastName')}\r\n                    className={buttonClass}\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Company Field - Conditional */}\r\n                {checkoutSettings?.showCompany && (\r\n                  <div className=\"col-span-2\">\r\n                    <Label htmlFor=\"company\">{getFieldLabel('company', 'Company (optional)')}</Label>\r\n                    <Input\r\n                      id=\"company\"\r\n                      name=\"company\"\r\n                      value={formData.company}\r\n                      onChange={handleChange}\r\n                      placeholder={getFieldPlaceholder('company')}\r\n                      className={buttonClass}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Address Field - Conditional based on feature flag */}\r\n                <div className=\"col-span-2\">\r\n                  {checkoutCustomizationEnabled ? (\r\n                    <AddressAutocomplete\r\n                      value={formData.address}\r\n                      onChange={(value) => setFormData({ ...formData, address: value })}\r\n                      onAddressSelect={handleAddressAutocompleteSelect}\r\n                      label={t('checkout.address')}\r\n                      required\r\n                    />\r\n                  ) : (\r\n                    <>\r\n                      <Label htmlFor=\"address\">{t('checkout.address')}</Label>\r\n                      <Input\r\n                        id=\"address\"\r\n                        name=\"address\"\r\n                        value={formData.address}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Street address\"\r\n                        required\r\n                      />\r\n                    </>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Region Selection - Only shown when autocomplete is disabled */}\r\n                {!checkoutCustomizationEnabled && (\r\n                  <div>\r\n                    <RegionSelect\r\n                      value={selectedRegionId}\r\n                      onChange={(value) => {\r\n                        setSelectedRegionId(value);\r\n                        // Clear city when region changes\r\n                        setFormData({ ...formData, city: '', state: value });\r\n                      }}\r\n                      label=\"Region\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* City Field - Conditional based on feature flag */}\r\n                <div>\r\n                  {checkoutCustomizationEnabled ? (\r\n                    <>\r\n                      <Label htmlFor=\"city\">{t('checkout.city')}</Label>\r\n                      <Input\r\n                        id=\"city\"\r\n                        name=\"city\"\r\n                        value={formData.city}\r\n                        onChange={handleChange}\r\n                        required\r\n                      />\r\n                    </>\r\n                  ) : (\r\n                    <CitySelect\r\n                      value={formData.city}\r\n                      onChange={(value) => setFormData({ ...formData, city: value })}\r\n                      regionId={selectedRegionId}\r\n                      label={t('checkout.city')}\r\n                      required\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {/* State field - Only shown when autocomplete is enabled */}\r\n                {checkoutCustomizationEnabled && (\r\n                  <div>\r\n                    <Label htmlFor=\"state\">{t('checkout.state')}</Label>\r\n                    <Input\r\n                      id=\"state\"\r\n                      name=\"state\"\r\n                      value={formData.state}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Address Line 2 - Conditional */}\r\n                {checkoutSettings?.showAddressLine2 && (\r\n                  <div className=\"col-span-2\">\r\n                    <Label htmlFor=\"address2\">Apartment, suite, etc. (optional)</Label>\r\n                    <Input\r\n                      id=\"address2\"\r\n                      name=\"address2\"\r\n                      value={formData.address2}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n\r\n                {/* Phone Field - Conditional */}\r\n                {checkoutSettings?.showPhone && (\r\n                  <div>\r\n                    <Label htmlFor=\"phone\">{getFieldLabel('phone', 'Phone Number')}</Label>\r\n                    <Input\r\n                      id=\"phone\"\r\n                      name=\"phone\"\r\n                      type=\"tel\"\r\n                      value={formData.phone}\r\n                      onChange={handleChange}\r\n                      placeholder={getFieldPlaceholder('phone')}\r\n                      className={buttonClass}\r\n                      required={checkoutSettings?.requirePhone}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Phase 2: Alternative Phone - Conditional */}\r\n                {checkoutSettings?.showAlternativePhone && (\r\n                  <div>\r\n                    <Label htmlFor=\"alternativePhone\">{getFieldLabel('alternativePhone', 'Alternative Phone')}</Label>\r\n                    <Input\r\n                      id=\"alternativePhone\"\r\n                      name=\"alternativePhone\"\r\n                      type=\"tel\"\r\n                      value={formData.alternativePhone}\r\n                      onChange={handleChange}\r\n                      placeholder={getFieldPlaceholder('alternativePhone')}\r\n                      className={buttonClass}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Phase 2: Delivery Date - Conditional */}\r\n                {checkoutSettings?.showDeliveryDate && (\r\n                  <div className=\"col-span-2\">\r\n                    <Label htmlFor=\"deliveryDate\">{getFieldLabel('deliveryDate', 'Preferred Delivery Date')}</Label>\r\n                    <Input\r\n                      id=\"deliveryDate\"\r\n                      name=\"deliveryDate\"\r\n                      type=\"date\"\r\n                      value={formData.deliveryDate}\r\n                      onChange={handleChange}\r\n                      className={buttonClass}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Phase 2: Delivery Instructions - Conditional */}\r\n                {checkoutSettings?.showDeliveryInstructions && (\r\n                  <div className=\"col-span-2\">\r\n                    <Label htmlFor=\"deliveryInstructions\">\r\n                      {checkoutSettings?.deliveryInstructionsLabel || getFieldLabel('deliveryInstructions', 'Delivery Instructions')}\r\n                    </Label>\r\n                    <textarea\r\n                      id=\"deliveryInstructions\"\r\n                      name=\"deliveryInstructions\"\r\n                      value={formData.deliveryInstructions}\r\n                      onChange={(e) => setFormData({ ...formData, deliveryInstructions: e.target.value })}\r\n                      className={`w-full min-h-[80px] px-3 py-2 border ${buttonClass}`}\r\n                      placeholder={getFieldPlaceholder('deliveryInstructions', 'e.g., Leave at front door')}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Phase 2: Gift Message - Conditional */}\r\n                {checkoutSettings?.showGiftMessage && (\r\n                  <div className=\"col-span-2\">\r\n                    <Label htmlFor=\"giftMessage\">\r\n                      {checkoutSettings?.giftMessageLabel || getFieldLabel('giftMessage', 'Gift Message')}\r\n                    </Label>\r\n                    <textarea\r\n                      id=\"giftMessage\"\r\n                      name=\"giftMessage\"\r\n                      value={formData.giftMessage}\r\n                      onChange={(e) => setFormData({ ...formData, giftMessage: e.target.value })}\r\n                      className={`w-full min-h-[80px] px-3 py-2 border ${buttonClass}`}\r\n                      placeholder={getFieldPlaceholder('giftMessage', 'Add a personalized gift message...')}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Order Notes - Conditional */}\r\n                {checkoutSettings?.enableOrderNotes && (\r\n                  <div className=\"col-span-2\">\r\n                    <Label htmlFor=\"orderNotes\">\r\n                      {checkoutSettings?.orderNotesLabel || getFieldLabel('orderNotes', 'Order notes (optional)')}\r\n                    </Label>\r\n                    <textarea\r\n                      id=\"orderNotes\"\r\n                      name=\"orderNotes\"\r\n                      value={formData.orderNotes}\r\n                      onChange={(e) => setFormData({ ...formData, orderNotes: e.target.value })}\r\n                      className={`w-full min-h-[80px] px-3 py-2 border ${buttonClass}`}\r\n                      placeholder={getFieldPlaceholder('orderNotes', 'Any special instructions for your order...')}\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Phase 2: Custom Fields */}\r\n                {checkoutSettings?.customFields && checkoutSettings.customFields.length > 0 && (\r\n                  <>\r\n                    {checkoutSettings.customFields.map((field) => (\r\n                      <div key={field.id} className={field.type === 'textarea' || field.type === 'select' ? 'col-span-2' : ''}>\r\n                        <Label htmlFor={field.id}>\r\n                          {field.label}\r\n                          {field.required && <span className=\"text-red-500 ml-1\">*</span>}\r\n                        </Label>\r\n                        {field.type === 'text' && (\r\n                          <Input\r\n                            id={field.id}\r\n                            value={customFieldsData[field.id] || ''}\r\n                            onChange={(e) => setCustomFieldsData({ ...customFieldsData, [field.id]: e.target.value })}\r\n                            placeholder={field.placeholder}\r\n                            required={field.required}\r\n                            className={buttonClass}\r\n                          />\r\n                        )}\r\n                        {field.type === 'textarea' && (\r\n                          <textarea\r\n                            id={field.id}\r\n                            value={customFieldsData[field.id] || ''}\r\n                            onChange={(e) => setCustomFieldsData({ ...customFieldsData, [field.id]: e.target.value })}\r\n                            placeholder={field.placeholder}\r\n                            required={field.required}\r\n                            className={`w-full min-h-[80px] px-3 py-2 border ${buttonClass}`}\r\n                          />\r\n                        )}\r\n                        {field.type === 'select' && (\r\n                          <select\r\n                            id={field.id}\r\n                            value={customFieldsData[field.id] || ''}\r\n                            onChange={(e) => setCustomFieldsData({ ...customFieldsData, [field.id]: e.target.value })}\r\n                            required={field.required}\r\n                            className={`w-full px-3 py-2 border ${buttonClass}`}\r\n                          >\r\n                            <option value=\"\">Select an option...</option>\r\n                            {field.options?.map((option) => (\r\n                              <option key={option} value={option}>\r\n                                {option}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                        )}\r\n                        {field.type === 'checkbox' && (\r\n                          <div className=\"flex items-center gap-2 mt-2\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              id={field.id}\r\n                              checked={customFieldsData[field.id] || false}\r\n                              onChange={(e) => setCustomFieldsData({ ...customFieldsData, [field.id]: e.target.checked })}\r\n                              className=\"w-4 h-4\"\r\n                              required={field.required}\r\n                            />\r\n                            <Label htmlFor={field.id} className=\"font-normal cursor-pointer\">\r\n                              {field.placeholder || field.label}\r\n                            </Label>\r\n                          </div>\r\n                        )}\r\n                        {field.type === 'date' && (\r\n                          <Input\r\n                            type=\"date\"\r\n                            id={field.id}\r\n                            value={customFieldsData[field.id] || ''}\r\n                            onChange={(e) => setCustomFieldsData({ ...customFieldsData, [field.id]: e.target.value })}\r\n                            required={field.required}\r\n                            className={buttonClass}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Payment Info Note */}\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n              <p className=\"text-sm text-blue-900\">\r\n                <Lock className=\"w-4 h-4 inline mr-1\" />\r\n                <strong>{t('common.note')}</strong> {t('checkout.paymentNote')}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Order Summary - Right Position (default or when position is 'right') */}\r\n          {(!checkoutCustomizationEnabled || !checkoutSettings?.orderSummaryPosition || checkoutSettings.orderSummaryPosition === 'right') && (\r\n            <div className=\"lg:col-span-1\">\r\n              {renderOrderSummary(true)}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </form>\r\n\r\n      {/* Phase 5: Upsell Products - Below Form Position */}\r\n      {checkoutCustomizationEnabled && \r\n       checkoutSettings?.showUpsells && \r\n       checkoutSettings.upsellProducts && \r\n       checkoutSettings.upsellProducts.length > 0 &&\r\n       checkoutSettings.upsellPosition === 'below-form' && (\r\n        <UpsellProducts\r\n          productIds={checkoutSettings.upsellProducts}\r\n          title={checkoutSettings.upsellTitle || undefined}\r\n          position=\"below-form\"\r\n        />\r\n      )}\r\n\r\n      {/* Phase 5: Upsell Products - Modal Position */}\r\n      {checkoutCustomizationEnabled && \r\n       checkoutSettings?.showUpsells && \r\n       checkoutSettings.upsellProducts && \r\n       checkoutSettings.upsellProducts.length > 0 &&\r\n       checkoutSettings.upsellPosition === 'modal' && (\r\n        <UpsellProducts\r\n          productIds={checkoutSettings.upsellProducts}\r\n          title={checkoutSettings.upsellTitle || undefined}\r\n          position=\"modal\"\r\n        />\r\n      )}\r\n\r\n      {/* Phase 4: Money-Back Guarantee */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.moneyBackGuarantee && (\r\n        <div className=\"mt-8\">\r\n          <MoneyBackGuarantee text={checkoutSettings.moneyBackGuarantee} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Phase 4: Testimonials Carousel */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.showTestimonials &&\r\n        checkoutSettings.testimonials &&\r\n        checkoutSettings.testimonials.length > 0 && (\r\n          <div className=\"mt-8\">\r\n            <TestimonialsCarousel testimonials={checkoutSettings.testimonials} />\r\n          </div>\r\n        )}\r\n\r\n      {/* Phase 4: Trust Badges - Footer Position */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.trustBadges && checkoutSettings.trustBadges.length > 0 && (\r\n        <div className=\"mt-8\">\r\n          <TrustBadges\r\n            badges={checkoutSettings.trustBadges.filter((b) => b.position === 'footer')}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Phase 5: Promotional Banners - Bottom Position */}\r\n      {checkoutCustomizationEnabled && checkoutSettings?.promotionalBanners?.filter((b) => b.position === 'bottom').map((banner) => (\r\n        <div\r\n          key={banner.id}\r\n          className={`mt-6 p-4 rounded-lg border ${banner.type === 'success'\r\n            ? 'bg-green-50 border-green-200 text-green-800'\r\n            : banner.type === 'warning'\r\n              ? 'bg-yellow-50 border-yellow-200 text-yellow-800'\r\n              : banner.type === 'danger'\r\n                ? 'bg-red-50 border-red-200 text-red-800'\r\n                : 'bg-blue-50 border-blue-200 text-blue-800'\r\n            }`}\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <p className=\"text-sm font-medium\">{banner.message}</p>\r\n            {banner.link && banner.linkText && (\r\n              <Link href={banner.link} className=\"text-sm font-semibold underline ml-4\">\r\n                {banner.linkText}\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n\r\n    {/* Phase 4: Recent Purchase Popup */}\r\n    {checkoutCustomizationEnabled && checkoutSettings?.showRecentPurchases && (\r\n      <RecentPurchasePopup delay={checkoutSettings.recentPurchaseDelay || 5000} />\r\n    )}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\n/**\r\n * Custom hook to check if a feature flag is enabled\r\n * @param featureName - The name of the feature flag to check\r\n * @returns boolean indicating if the feature is enabled\r\n */\r\nexport function useFeatureFlag(featureName: string): boolean {\r\n    const [enabled, setEnabled] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function checkFeature() {\r\n            try {\r\n                const response = await fetch(`/api/features/check/${featureName}`);\r\n                const data = await response.json();\r\n                setEnabled(data.enabled || false);\r\n            } catch (error) {\r\n                console.error(`Error checking feature flag ${featureName}:`, error);\r\n                setEnabled(false);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        checkFeature();\r\n    }, [featureName]);\r\n\r\n    return enabled;\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\ninterface Region {\r\n    id: string;\r\n    name: string;\r\n}\r\n\r\ninterface RegionSelectProps {\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    label?: string;\r\n    required?: boolean;\r\n}\r\n\r\nexport function RegionSelect({\r\n    value,\r\n    onChange,\r\n    label = 'Region',\r\n    required = false,\r\n}: RegionSelectProps) {\r\n    const [regions, setRegions] = useState<Region[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function fetchRegions() {\r\n            try {\r\n                const response = await fetch('/api/regions');\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setRegions(data);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching regions:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchRegions();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"space-y-2\">\r\n                {label && <Label>{label}</Label>}\r\n                <div className=\"flex items-center gap-2 h-10 px-3 py-2 border rounded-md bg-muted\">\r\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                    <span className=\"text-sm text-muted-foreground\">Loading regions...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (regions.length === 0) {\r\n        return (\r\n            <div className=\"space-y-2\">\r\n                {label && <Label>{label}</Label>}\r\n                <div className=\"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center\">\r\n                    No regions available\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            {label && (\r\n                <Label htmlFor=\"region\">\r\n                    {label}\r\n                    {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n                </Label>\r\n            )}\r\n            <Select value={value} onValueChange={onChange}>\r\n                <SelectTrigger id=\"region\">\r\n                    <SelectValue placeholder=\"Select a region\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                    {regions.map((region) => (\r\n                        <SelectItem key={region.id} value={region.id}>\r\n                            {region.name}\r\n                        </SelectItem>\r\n                    ))}\r\n                </SelectContent>\r\n            </Select>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\ninterface City {\r\n    id: string;\r\n    name: string;\r\n    regionId: string;\r\n}\r\n\r\ninterface CitySelectProps {\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    regionId: string | null;\r\n    label?: string;\r\n    required?: boolean;\r\n}\r\n\r\nexport function CitySelect({\r\n    value,\r\n    onChange,\r\n    regionId,\r\n    label = 'City',\r\n    required = false,\r\n}: CitySelectProps) {\r\n    const [cities, setCities] = useState<City[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!regionId) {\r\n            setCities([]);\r\n            return;\r\n        }\r\n\r\n        async function fetchCities() {\r\n            setLoading(true);\r\n            try {\r\n                const response = await fetch(`/api/cities?regionId=${regionId}`);\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setCities(data);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching cities:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchCities();\r\n    }, [regionId]);\r\n\r\n    if (!regionId) {\r\n        return (\r\n            <div className=\"space-y-2\">\r\n                {label && <Label>{label}</Label>}\r\n                <div className=\"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center\">\r\n                    Please select a region first\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"space-y-2\">\r\n                {label && <Label>{label}</Label>}\r\n                <div className=\"flex items-center gap-2 h-10 px-3 py-2 border rounded-md bg-muted\">\r\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                    <span className=\"text-sm text-muted-foreground\">Loading cities...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (cities.length === 0) {\r\n        return (\r\n            <div className=\"space-y-2\">\r\n                {label && <Label>{label}</Label>}\r\n                <div className=\"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center\">\r\n                    No cities available for this region\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            {label && (\r\n                <Label htmlFor=\"city\">\r\n                    {label}\r\n                    {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n                </Label>\r\n            )}\r\n            <Select value={value} onValueChange={onChange}>\r\n                <SelectTrigger id=\"city\">\r\n                    <SelectValue placeholder=\"Select a city\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                    {cities.map((city) => (\r\n                        <SelectItem key={city.id} value={city.name}>\r\n                            {city.name}\r\n                        </SelectItem>\r\n                    ))}\r\n                </SelectContent>\r\n            </Select>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\ninterface NominatimResult {\r\n    place_id: number;\r\n    display_name: string;\r\n    address: {\r\n        road?: string;\r\n        house_number?: string;\r\n        city?: string;\r\n        town?: string;\r\n        village?: string;\r\n        state?: string;\r\n        postcode?: string;\r\n        country?: string;\r\n    };\r\n}\r\n\r\ninterface AddressData {\r\n    address: string;\r\n    city: string;\r\n    state: string;\r\n    zip: string;\r\n    country: string;\r\n}\r\n\r\ninterface AddressAutocompleteProps {\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    onAddressSelect: (address: AddressData) => void;\r\n    label?: string;\r\n    required?: boolean;\r\n}\r\n\r\nexport function AddressAutocomplete({\r\n    value,\r\n    onChange,\r\n    onAddressSelect,\r\n    label = 'Address',\r\n    required = false,\r\n}: AddressAutocompleteProps) {\r\n    const [suggestions, setSuggestions] = useState<NominatimResult[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showSuggestions, setShowSuggestions] = useState(false);\r\n    const debounceTimer = useRef<NodeJS.Timeout>();\r\n    const wrapperRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Close suggestions when clicking outside\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            if (wrapperRef.current && !wrapperRef.current.contains(event.target as Node)) {\r\n                setShowSuggestions(false);\r\n            }\r\n        }\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const searchAddress = async (query: string) => {\r\n        if (query.length < 3) {\r\n            setSuggestions([]);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            // Using Nominatim API with Morocco country code\r\n            const response = await fetch(\r\n                `https://nominatim.openstreetmap.org/search?` +\r\n                `q=${encodeURIComponent(query)}&` +\r\n                `countrycodes=ma&` + // Morocco country code\r\n                `format=json&` +\r\n                `addressdetails=1&` +\r\n                `limit=5`,\r\n                {\r\n                    headers: {\r\n                        'User-Agent': 'EcommercePlatform/1.0', // Required by Nominatim\r\n                    },\r\n                }\r\n            );\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setSuggestions(data);\r\n                setShowSuggestions(true);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching address suggestions:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const newValue = e.target.value;\r\n        onChange(newValue);\r\n\r\n        // Debounce API calls (1 second to respect rate limits)\r\n        if (debounceTimer.current) {\r\n            clearTimeout(debounceTimer.current);\r\n        }\r\n\r\n        debounceTimer.current = setTimeout(() => {\r\n            searchAddress(newValue);\r\n        }, 1000);\r\n    };\r\n\r\n    const handleSelectSuggestion = (result: NominatimResult) => {\r\n        const { address } = result;\r\n\r\n        // Build full address string\r\n        const addressParts = [];\r\n        if (address.house_number) addressParts.push(address.house_number);\r\n        if (address.road) addressParts.push(address.road);\r\n        const fullAddress = addressParts.join(' ') || result.display_name.split(',')[0];\r\n\r\n        // Extract city (can be in different fields)\r\n        const city = address.city || address.town || address.village || '';\r\n\r\n        // Update form with parsed address\r\n        onAddressSelect({\r\n            address: fullAddress,\r\n            city: city,\r\n            state: address.state || '',\r\n            zip: address.postcode || '',\r\n            country: address.country || 'Morocco',\r\n        });\r\n\r\n        onChange(fullAddress);\r\n        setShowSuggestions(false);\r\n        setSuggestions([]);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-2\" ref={wrapperRef}>\r\n            {label && (\r\n                <Label htmlFor=\"address\">\r\n                    {label}\r\n                    {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n                </Label>\r\n            )}\r\n            <div className=\"relative\">\r\n                <Input\r\n                    id=\"address\"\r\n                    value={value}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"Start typing your address...\"\r\n                    required={required}\r\n                />\r\n                {loading && (\r\n                    <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\r\n                        <Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />\r\n                    </div>\r\n                )}\r\n\r\n                {showSuggestions && suggestions.length > 0 && (\r\n                    <div className=\"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto\">\r\n                        {suggestions.map((suggestion) => (\r\n                            <button\r\n                                key={suggestion.place_id}\r\n                                type=\"button\"\r\n                                className=\"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none\"\r\n                                onClick={() => handleSelectSuggestion(suggestion)}\r\n                            >\r\n                                {suggestion.display_name}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n                Start typing to see address suggestions\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n","// Checkout Settings Types\r\n\r\nexport interface CheckoutSettings {\r\n  id: string;\r\n\r\n  // Field visibility toggles\r\n  showPhone: boolean;\r\n  showCompany: boolean;\r\n  showAddressLine2: boolean;\r\n  requirePhone: boolean;\r\n\r\n  // Custom messages\r\n  thankYouMessage: string | null;\r\n  checkoutBanner: string | null;\r\n  checkoutBannerType: string | null;\r\n\r\n  // Additional customizations\r\n  enableGuestCheckout: boolean;\r\n  enableOrderNotes: boolean;\r\n  orderNotesLabel: string | null;\r\n\r\n  // Shipping options\r\n  freeShippingThreshold: number | null;\r\n  defaultShippingCost: number;\r\n\r\n  // PHASE 1: Visual & Branding\r\n  logoUrl: string | null;\r\n  primaryColor: string | null;\r\n  secondaryColor: string | null;\r\n  buttonStyle: 'rounded' | 'square' | 'pill';\r\n  fontFamily: 'system' | 'inter' | 'roboto' | 'opensans';\r\n  pageWidth: 'narrow' | 'normal' | 'wide';\r\n\r\n  // Layout Options\r\n  checkoutLayout: 'single' | 'multi-step';\r\n  progressStyle: 'steps' | 'bar' | 'none';\r\n  orderSummaryPosition: 'right' | 'top' | 'collapsible';\r\n\r\n  // PHASE 2: Field Customization\r\n  fieldLabels: FieldLabels | null;\r\n  fieldPlaceholders: FieldPlaceholders | null;\r\n  fieldOrder: string[] | null;\r\n\r\n  // Additional Standard Fields\r\n  showDeliveryInstructions: boolean;\r\n  deliveryInstructionsLabel: string | null;\r\n  showAlternativePhone: boolean;\r\n  showGiftMessage: boolean;\r\n  giftMessageLabel: string | null;\r\n  showDeliveryDate: boolean;\r\n\r\n  // Custom Fields\r\n  customFields: CustomField[] | null;\r\n\r\n  // PHASE 4: Trust & Security\r\n  trustBadges: TrustBadge[] | null;\r\n  showSecuritySeals: boolean;\r\n  moneyBackGuarantee: string | null;\r\n  customerServiceDisplay: boolean;\r\n  customerServiceText: string | null;\r\n  customerServicePhone: string | null;\r\n  customerServiceEmail: string | null;\r\n\r\n  // Social Proof\r\n  showOrderCount: boolean;\r\n  orderCountText: string | null;\r\n  showRecentPurchases: boolean;\r\n  recentPurchaseDelay: number | null;\r\n  showTestimonials: boolean;\r\n  testimonials: Testimonial[] | null;\r\n  showTrustRating: boolean;\r\n  trustRatingScore: number | null;\r\n  trustRatingCount: number | null;\r\n\r\n  // PHASE 5: Marketing & Conversion\r\n  promotionalBanners: PromotionalBanner[] | null;\r\n  showCountdownTimer: boolean;\r\n  countdownEndDate: Date | null;\r\n  countdownText: string | null;\r\n  showFreeShippingBar: boolean;\r\n  freeShippingBarText: string | null;\r\n  showUpsells: boolean;\r\n  upsellProducts: string[] | null;\r\n  upsellTitle: string | null;\r\n  upsellPosition: 'cart' | 'below-form' | 'modal';\r\n\r\n  // Urgency Elements\r\n  showLowStock: boolean;\r\n  lowStockThreshold: number | null;\r\n  lowStockText: string | null;\r\n  scarcityMessage: string | null;\r\n  urgencyBadgeStyle: 'warning' | 'danger' | 'info';\r\n\r\n  // Incentives\r\n  discountFieldPosition: 'top' | 'bottom' | 'floating';\r\n  showLoyaltyPoints: boolean;\r\n  loyaltyPointsText: string | null;\r\n  showGiftWithPurchase: boolean;\r\n  giftThreshold: number | null;\r\n  giftDescription: string | null;\r\n  referralDiscountEnabled: boolean;\r\n  referralDiscountText: string | null;\r\n\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface FieldLabels {\r\n  email?: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  company?: string;\r\n  address?: string;\r\n  address2?: string;\r\n  city?: string;\r\n  state?: string;\r\n  country?: string;\r\n  phone?: string;\r\n  alternativePhone?: string;\r\n  orderNotes?: string;\r\n  deliveryInstructions?: string;\r\n  giftMessage?: string;\r\n  deliveryDate?: string;\r\n}\r\n\r\nexport interface FieldPlaceholders {\r\n  email?: string;\r\n  firstName?: string;\r\n  lastName?: string;\r\n  company?: string;\r\n  address?: string;\r\n  address2?: string;\r\n  city?: string;\r\n  state?: string;\r\n  country?: string;\r\n  phone?: string;\r\n  alternativePhone?: string;\r\n  orderNotes?: string;\r\n  deliveryInstructions?: string;\r\n  giftMessage?: string;\r\n  deliveryDate?: string;\r\n}\r\n\r\nexport interface CustomField {\r\n  id: string;\r\n  name: string;\r\n  label: string;\r\n  type: 'text' | 'textarea' | 'select' | 'checkbox' | 'date';\r\n  required: boolean;\r\n  placeholder?: string;\r\n  options?: string[]; // For select type\r\n  position?: number;\r\n}\r\n\r\nexport const DEFAULT_FIELD_ORDER = [\r\n  'email',\r\n  'firstName',\r\n  'lastName',\r\n  'company',\r\n  'phone',\r\n  'alternativePhone',\r\n  'address',\r\n  'address2',\r\n  'city',\r\n  'state',\r\n  'country',\r\n  'deliveryDate',\r\n  'deliveryInstructions',\r\n  'giftMessage',\r\n  'orderNotes',\r\n];\r\n\r\nexport const FIELD_DISPLAY_NAMES: Record<string, string> = {\r\n  email: 'Email Address',\r\n  firstName: 'First Name',\r\n  lastName: 'Last Name',\r\n  company: 'Company',\r\n  phone: 'Phone Number',\r\n  alternativePhone: 'Alternative Phone',\r\n  address: 'Address',\r\n  address2: 'Address Line 2',\r\n  city: 'City',\r\n  state: 'Region',\r\n  country: 'Country',\r\n  deliveryDate: 'Delivery Date',\r\n  deliveryInstructions: 'Delivery Instructions',\r\n  giftMessage: 'Gift Message',\r\n  orderNotes: 'Order Notes',\r\n};\r\n\r\n// Phase 4 & 5 Types\r\n\r\nexport interface TrustBadge {\r\n  id: string;\r\n  url: string;\r\n  alt: string;\r\n  position: 'header' | 'footer' | 'sidebar' | 'payment';\r\n  link?: string;\r\n}\r\n\r\nexport interface Testimonial {\r\n  id: string;\r\n  name: string;\r\n  text: string;\r\n  rating: number; // 1-5\r\n  image?: string;\r\n  location?: string;\r\n  date?: string;\r\n}\r\n\r\nexport interface PromotionalBanner {\r\n  id: string;\r\n  message: string;\r\n  type: 'info' | 'success' | 'warning' | 'danger';\r\n  startDate?: Date;\r\n  endDate?: Date;\r\n  position: 'top' | 'middle' | 'bottom';\r\n  link?: string;\r\n  linkText?: string;\r\n}\r\n","'use client';\r\n\r\nimport { Check } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface CheckoutStep {\r\n  id: string;\r\n  label: string;\r\n  completed: boolean;\r\n  active: boolean;\r\n}\r\n\r\ninterface CheckoutProgressProps {\r\n  currentStep: number;\r\n  steps: string[];\r\n}\r\n\r\nexport function CheckoutProgress({ currentStep, steps }: CheckoutProgressProps) {\r\n  const stepItems: CheckoutStep[] = steps.map((step, index) => ({\r\n    id: step,\r\n    label: step,\r\n    completed: index < currentStep,\r\n    active: index === currentStep,\r\n  }));\r\n\r\n  return (\r\n    <div className=\"w-full py-6 md:py-8\">\r\n      <div className=\"flex items-center justify-between relative\">\r\n        {/* Progress Line */}\r\n        <div className=\"absolute top-5 left-0 right-0 h-0.5 bg-gray-200 -z-10\">\r\n          <div\r\n            className=\"h-full bg-amber-600 transition-all duration-500 ease-in-out\"\r\n            style={{\r\n              width: `${(currentStep / (steps.length - 1)) * 100}%`,\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Steps */}\r\n        {stepItems.map((step, index) => (\r\n          <div key={step.id} className=\"flex flex-col items-center flex-1\">\r\n            {/* Step Circle */}\r\n            <div\r\n              className={cn(\r\n                'relative w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-semibold text-sm md:text-base transition-all duration-300',\r\n                step.completed\r\n                  ? 'bg-amber-600 text-white shadow-lg scale-110'\r\n                  : step.active\r\n                  ? 'bg-amber-600 text-white shadow-lg ring-4 ring-amber-200 scale-110'\r\n                  : 'bg-gray-200 text-gray-500'\r\n              )}\r\n            >\r\n              {step.completed ? (\r\n                <Check className=\"w-5 h-5 md:w-6 md:h-6\" />\r\n              ) : (\r\n                <span>{index + 1}</span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Step Label */}\r\n            <div className=\"mt-3 text-center max-w-[100px] md:max-w-none\">\r\n              <p\r\n                className={cn(\r\n                  'text-xs md:text-sm font-medium transition-colors',\r\n                  step.active || step.completed\r\n                    ? 'text-amber-900 font-semibold'\r\n                    : 'text-gray-500'\r\n                )}\r\n              >\r\n                {step.label}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debug_id":"d0b22433-f637-52b4-8a55-2b50fc48a8ec"}