
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6806621e-66d7-54dd-a77e-86f7fd1db25b")}catch(e){}}();
module.exports=[596221,404650,a=>{"use strict";let b=(0,a.i(170106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["default",()=>b],404650),a.s(["Loader2",()=>b],596221)},591119,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},786304,a=>{"use strict";var b=a.i(187924),c=a.i(811011),d=a.i(400187),e=a.i(368114);let f=(0,d.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},206015,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tfoot",{"data-slot":"table-footer",className:(0,c.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",a),...d})}function h({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function i({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function j({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function k({className:a,...d}){return(0,b.jsx)("caption",{"data-slot":"table-caption",className:(0,c.cn)("text-muted-foreground mt-4 text-sm",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCaption",()=>k,"TableCell",()=>j,"TableFooter",()=>g,"TableHead",()=>i,"TableHeader",()=>e,"TableRow",()=>h])},915618,516868,a=>{"use strict";let b=(0,a.i(170106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["default",()=>b],516868),a.s(["Plus",()=>b],915618)},104876,a=>{"use strict";let b=(0,a.i(170106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["default",()=>b])},781560,a=>{"use strict";var b=a.i(104876);a.s(["Trash2",()=>b.default])},271744,a=>{"use strict";let b=(0,a.i(170106).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["default",()=>b])},606575,a=>{"use strict";let b=(0,a.i(170106).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);a.s(["default",()=>b])},486192,a=>{"use strict";let b;var c=a.i(187924),d=a.i(572131),e=a.i(750104),f=a.i(470121),g=a.i(897942),h=a.i(507554),i=Symbol("radix.slottable"),j="AlertDialog",[k,l]=(0,e.createContextScope)(j,[g.createDialogScope]),m=(0,g.createDialogScope)(),n=a=>{let{__scopeAlertDialog:b,...d}=a,e=m(b);return(0,c.jsx)(g.Root,{...e,...d,modal:!0})};n.displayName=j,d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Trigger,{...f,...e,ref:b})}).displayName="AlertDialogTrigger";var o=a=>{let{__scopeAlertDialog:b,...d}=a,e=m(b);return(0,c.jsx)(g.Portal,{...e,...d})};o.displayName="AlertDialogPortal";var p=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Overlay,{...f,...e,ref:b})});p.displayName="AlertDialogOverlay";var q="AlertDialogContent",[r,s]=k(q),t=((b=({children:a})=>(0,c.jsx)(c.Fragment,{children:a})).displayName="AlertDialogContent.Slottable",b.__radixId=i,b),u=d.forwardRef((a,b)=>{let{__scopeAlertDialog:e,children:i,...j}=a,k=m(e),l=d.useRef(null),n=(0,f.useComposedRefs)(b,l),o=d.useRef(null);return(0,c.jsx)(g.WarningProvider,{contentName:q,titleName:v,docsSlug:"alert-dialog",children:(0,c.jsx)(r,{scope:e,cancelRef:o,children:(0,c.jsxs)(g.Content,{role:"alertdialog",...k,...j,ref:n,onOpenAutoFocus:(0,h.composeEventHandlers)(j.onOpenAutoFocus,a=>{a.preventDefault(),o.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,c.jsx)(t,{children:i}),(0,c.jsx)(C,{contentRef:l})]})})})});u.displayName=q;var v="AlertDialogTitle",w=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Title,{...f,...e,ref:b})});w.displayName=v;var x="AlertDialogDescription",y=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Description,{...f,...e,ref:b})});y.displayName=x;var z=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,c.jsx)(g.Close,{...f,...e,ref:b})});z.displayName="AlertDialogAction";var A="AlertDialogCancel",B=d.forwardRef((a,b)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:h}=s(A,d),i=m(d),j=(0,f.useComposedRefs)(b,h);return(0,c.jsx)(g.Close,{...i,...e,ref:j})});B.displayName=A;var C=({contentRef:a})=>{let b=`\`${q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${q}\` by passing a \`${x}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},D=a.i(368114),E=a.i(699570);let F=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(p,{className:(0,D.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:d}));F.displayName=p.displayName;let G=d.forwardRef(({className:a,...b},d)=>(0,c.jsxs)(o,{children:[(0,c.jsx)(F,{}),(0,c.jsx)(u,{ref:d,className:(0,D.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));G.displayName=u.displayName;let H=({className:a,...b})=>(0,c.jsx)("div",{className:(0,D.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});H.displayName="AlertDialogHeader";let I=({className:a,...b})=>(0,c.jsx)("div",{className:(0,D.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});I.displayName="AlertDialogFooter";let J=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(w,{ref:d,className:(0,D.cn)("text-lg font-semibold",a),...b}));J.displayName=w.displayName;let K=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(y,{ref:d,className:(0,D.cn)("text-sm text-muted-foreground",a),...b}));K.displayName=y.displayName;let L=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(z,{ref:d,className:(0,D.cn)((0,E.buttonVariants)(),a),...b}));L.displayName=z.displayName;let M=d.forwardRef(({className:a,...b},d)=>(0,c.jsx)(B,{ref:d,className:(0,D.cn)((0,E.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));M.displayName=B.displayName,a.s(["AlertDialog",()=>n,"AlertDialogAction",()=>L,"AlertDialogCancel",()=>M,"AlertDialogContent",()=>G,"AlertDialogDescription",()=>K,"AlertDialogFooter",()=>I,"AlertDialogHeader",()=>H,"AlertDialogTitle",()=>J],486192)},325015,a=>{"use strict";var b=a.i(271744);a.s(["Play",()=>b.default])},63548,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(238246),f=a.i(591119),g=a.i(699570),h=a.i(786304),i=a.i(206015),j=a.i(596221),k=a.i(915618),l=a.i(325015),m=a.i(606575),m=m,n=a.i(781560),o=a.i(104720),p=a.i(486192),q=a.i(406704);function r(){let a=(0,d.useRouter)(),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null);(0,c.useEffect)(()=>{D()},[]);let D=async()=>{try{u(!0);let a=await fetch("/api/invoices/recurring");if(a.ok){let b=await a.json();s(b)}else q.default.error("Failed to fetch recurring invoices")}catch(a){console.error("Error fetching recurring invoices:",a),q.default.error("An error occurred")}finally{u(!1)}},E=async(a,b)=>{try{(await fetch(`/api/invoices/recurring/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!b})})).ok?(q.default.success(`Recurring invoice ${!b?"activated":"paused"}`),D()):q.default.error("Failed to update recurring invoice")}catch(a){console.error("Error updating recurring invoice:",a),q.default.error("Failed to update recurring invoice")}},F=async b=>{try{C(b);let c=await fetch(`/api/invoices/recurring/${b}/generate`,{method:"POST"});if(c.ok){let b=await c.json();q.default.success("Invoice generated successfully"),D(),a.push(`/admin/invoices/${b.invoice.id}`)}else q.default.error("Failed to generate invoice")}catch(a){console.error("Error generating invoice:",a),q.default.error("Failed to generate invoice")}finally{C(null)}},G=async()=>{if(z)try{(await fetch(`/api/invoices/recurring/${z}`,{method:"DELETE"})).ok?(q.default.success("Recurring invoice deleted"),y(!1),A(null),D()):q.default.error("Failed to delete recurring invoice")}catch(a){console.error("Error deleting recurring invoice:",a),q.default.error("Failed to delete recurring invoice")}};return t?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-gray-600"})}):(0,b.jsxs)("div",{className:"container mx-auto py-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Recurring Invoices"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage automated recurring invoice generation"})]}),(0,b.jsx)(e.default,{href:"/admin/invoices/recurring/new",children:(0,b.jsxs)(g.Button,{children:[(0,b.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Create Recurring Invoice"]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Recurring Invoices"}),(0,b.jsxs)(f.CardDescription,{children:[r.length," total recurring invoices"]})]}),(0,b.jsx)(f.CardContent,{children:0===r.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(o.FileText,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No recurring invoices"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a recurring invoice to automatically generate invoices on a schedule."}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(e.default,{href:"/admin/invoices/recurring/new",children:(0,b.jsxs)(g.Button,{children:[(0,b.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Create Recurring Invoice"]})})})]}):(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"Name"}),(0,b.jsx)(i.TableHead,{children:"Customer"}),(0,b.jsx)(i.TableHead,{children:"Frequency"}),(0,b.jsx)(i.TableHead,{children:"Next Run"}),(0,b.jsx)(i.TableHead,{children:"Last Run"}),(0,b.jsx)(i.TableHead,{children:"Status"}),(0,b.jsx)(i.TableHead,{children:"Generated"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(i.TableBody,{children:r.map(a=>{var c,d;let f;return(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-medium",children:(0,b.jsx)(e.default,{href:`/admin/invoices/recurring/${a.id}`,className:"text-blue-600 hover:underline",children:a.name})}),(0,b.jsx)(i.TableCell,{children:a.customerEmail||"N/A"}),(0,b.jsx)(i.TableCell,{children:(c=a.frequency,d=a.interval,f={DAILY:"Daily",WEEKLY:"Weekly",MONTHLY:"Monthly",QUARTERLY:"Quarterly",YEARLY:"Yearly",CUSTOM:"Custom"},d>1?`Every ${d} ${f[c].toLowerCase()}s`:f[c])}),(0,b.jsx)(i.TableCell,{children:a.nextRunDate?new Date(a.nextRunDate).toLocaleDateString():"-"}),(0,b.jsx)(i.TableCell,{children:a.lastRunDate?new Date(a.lastRunDate).toLocaleDateString():"Never"}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(h.Badge,{className:a.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:a.isActive?"Active":"Paused"})}),(0,b.jsxs)(i.TableCell,{children:[a.generatedInvoices?.length||0," invoices"]}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>F(a.id),disabled:B===a.id,children:B===a.id?(0,b.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(l.Play,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>E(a.id,a.isActive),children:a.isActive?(0,b.jsx)(m.default,{className:"h-4 w-4"}):(0,b.jsx)(l.Play,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{A(a.id),y(!0)},children:(0,b.jsx)(n.Trash2,{className:"h-4 w-4 text-red-600"})})]})})]},a.id)})})]})})})]}),(0,b.jsx)(p.AlertDialog,{open:x,onOpenChange:y,children:(0,b.jsxs)(p.AlertDialogContent,{children:[(0,b.jsxs)(p.AlertDialogHeader,{children:[(0,b.jsx)(p.AlertDialogTitle,{children:"Delete Recurring Invoice?"}),(0,b.jsx)(p.AlertDialogDescription,{children:"This will permanently delete this recurring invoice. This action cannot be undone. Generated invoices will not be affected."})]}),(0,b.jsxs)(p.AlertDialogFooter,{children:[(0,b.jsx)(p.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(p.AlertDialogAction,{onClick:G,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}a.s(["default",()=>r],63548)}];

//# sourceMappingURL=_66ad0c2f._.js.map
//# debugId=6806621e-66d7-54dd-a77e-86f7fd1db25b
