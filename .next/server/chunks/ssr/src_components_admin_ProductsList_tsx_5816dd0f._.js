
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e0f32c3a-ba9d-58ef-8a39-16f0648a97c4")}catch(e){}}();
module.exports=[418104,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(866718),e=a.i(870430),f=a.i(587532);function g({categories:a,onFilterChange:g}){let[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("");return(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"search",children:"Search"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)(d.Input,{id:"search",placeholder:"Search products...",value:h,onChange:a=>{var b;i(b=a.target.value),g({search:b,categoryId:j,status:l,featured:n})},className:"pl-10"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"category",children:"Category"}),(0,b.jsxs)("select",{id:"category",value:j,onChange:a=>{var b;k(b=a.target.value),g({search:h,categoryId:b,status:l,featured:n})},className:"w-full px-3 py-2 border rounded-md",children:[(0,b.jsx)("option",{value:"",children:"All Categories"}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"status",children:"Status"}),(0,b.jsxs)("select",{id:"status",value:l,onChange:a=>{var b;m(b=a.target.value),g({search:h,categoryId:j,status:b,featured:n})},className:"w-full px-3 py-2 border rounded-md",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"published",children:"Published"}),(0,b.jsx)("option",{value:"draft",children:"Draft"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"featured",children:"Featured"}),(0,b.jsxs)("select",{id:"featured",value:n,onChange:a=>{var b;o(b=a.target.value),g({search:h,categoryId:j,status:l,featured:b})},className:"w-full px-3 py-2 border rounded-md",children:[(0,b.jsx)("option",{value:"",children:"All Products"}),(0,b.jsx)("option",{value:"true",children:"Featured Only"}),(0,b.jsx)("option",{value:"false",children:"Non-Featured"})]})]})]})}var h=a.i(571987),i=a.i(50944),j=a.i(406704),k=a.i(206015),l=a.i(786304),m=a.i(699570),n=a.i(238246),o=a.i(335732),p=a.i(814574),q=a.i(84218),q=q;function r({productId:a}){let d=(0,i.useRouter)(),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!1),k=async()=>{h(!0);try{(await fetch(`/api/products/${a}`,{method:"DELETE"})).ok?(j.default.success("Product deleted successfully"),d.refresh(),f(!1)):j.default.error("Failed to delete product")}catch(a){j.default.error("An error occurred")}finally{h(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(o.DropdownMenu,{children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(q.default,{})})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(o.DropdownMenuItem,{asChild:!0,children:(0,b.jsx)(n.default,{href:`/admin/products/${a}`,children:"Edit"})}),(0,b.jsx)(o.DropdownMenuItem,{className:"text-red-600",onClick:()=>f(!0),children:"Delete"})]})]}),(0,b.jsx)(p.Dialog,{open:e,onOpenChange:f,children:(0,b.jsxs)(p.DialogContent,{children:[(0,b.jsxs)(p.DialogHeader,{children:[(0,b.jsx)(p.DialogTitle,{children:"Delete Product"}),(0,b.jsx)(p.DialogDescription,{children:"Are you sure you want to delete this product? This action cannot be undone."})]}),(0,b.jsxs)(p.DialogFooter,{children:[(0,b.jsx)(m.Button,{variant:"outline",onClick:()=>f(!1),disabled:g,children:"Cancel"}),(0,b.jsx)(m.Button,{variant:"destructive",onClick:k,disabled:g,children:g?"Deleting...":"Delete"})]})]})})]})}var s=a.i(315055),t=a.i(821374),u=a.i(781560),v=a.i(177156),w=a.i(141379),x=a.i(43542);function y({products:a}){let d=(0,i.useRouter)(),[e,f]=(0,c.useState)([]),[g,n]=(0,c.useState)(!1),o=async()=>{if(0!==e.length&&confirm(`Are you sure you want to delete ${e.length} product(s)? This action cannot be undone.`)){n(!0);try{let a=await fetch("/api/products/bulk",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})});if(a.ok)j.default.success(`Successfully deleted ${e.length} product(s)`),f([]),d.refresh();else{let b=await a.json();j.default.error(b.error||"Failed to delete products")}}catch(a){j.default.error("An error occurred while deleting products")}finally{n(!1)}}},p=async a=>{if(0!==e.length){n(!0);try{let b=await fetch("/api/products/bulk",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,data:{published:a}})});if(b.ok)j.default.success(`Successfully ${a?"published":"unpublished"} ${e.length} product(s)`),f([]),d.refresh();else{let a=await b.json();j.default.error(a.error||"Failed to update products")}}catch(a){j.default.error("An error occurred while updating products")}finally{n(!1)}}},q=async a=>{if(0!==e.length){n(!0);try{let b=await fetch("/api/products/bulk",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,data:{featured:a}})});if(b.ok)j.default.success(`Successfully ${a?"featured":"unfeatured"} ${e.length} product(s)`),f([]),d.refresh();else{let a=await b.json();j.default.error(a.error||"Failed to update products")}}catch(a){j.default.error("An error occurred while updating products")}finally{n(!1)}}},y=a.length>0&&e.length===a.length,z=e.length>0&&e.length<a.length;return(0,b.jsxs)("div",{className:"space-y-4",children:[e.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-md dark:bg-blue-950/20 dark:border-blue-900",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:[e.length," product",e.length>1?"s":""," selected"]}),(0,b.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",onClick:()=>p(!0),disabled:g,children:[(0,b.jsx)(v.Eye,{className:"w-4 h-4 mr-1"}),"Publish"]}),(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",onClick:()=>p(!1),disabled:g,children:[(0,b.jsx)(w.EyeOff,{className:"w-4 h-4 mr-1"}),"Unpublish"]}),(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",onClick:()=>q(!0),disabled:g,children:[(0,b.jsx)(t.Star,{className:"w-4 h-4 mr-1"}),"Feature"]}),(0,b.jsxs)(m.Button,{size:"sm",variant:"outline",onClick:()=>q(!1),disabled:g,children:[(0,b.jsx)(t.Star,{className:"w-4 h-4 mr-1"}),"Unfeature"]}),(0,b.jsxs)(m.Button,{size:"sm",variant:"destructive",onClick:o,disabled:g,children:[(0,b.jsx)(u.Trash2,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{className:"w-12",children:(0,b.jsx)(s.Checkbox,{checked:y||!!z&&"indeterminate",onCheckedChange:b=>{b?f(a.map(a=>a.id)):f([])},"aria-label":"Select all"})}),(0,b.jsx)(k.TableHead,{children:"Image"}),(0,b.jsx)(k.TableHead,{children:"Name"}),(0,b.jsx)(k.TableHead,{children:"Category"}),(0,b.jsx)(k.TableHead,{children:"Price"}),(0,b.jsx)(k.TableHead,{children:"Stock"}),(0,b.jsx)(k.TableHead,{children:"Status"}),(0,b.jsx)(k.TableHead,{children:"Actions"})]})}),(0,b.jsx)(k.TableBody,{children:a.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(s.Checkbox,{checked:e.includes(a.id),onCheckedChange:b=>{var c;return c=a.id,void(b?f([...e,c]):f(e.filter(a=>a!==c)))},"aria-label":"Select row"})}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)("div",{className:"relative w-12 h-12 rounded overflow-hidden bg-muted",children:(0,b.jsx)(h.default,{src:a.images[0]?.url||x.PLACEHOLDER_PRODUCT_IMAGE,alt:a.images[0]?.alt||a.name,fill:!0,className:"object-cover",sizes:"48px",onError:a=>{let b=a.currentTarget;b.onerror=null,b.src=x.PLACEHOLDER_PRODUCT_IMAGE},unoptimized:a.images[0]?.url?.startsWith("data:")||!1})})}),(0,b.jsx)(k.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),a.featured&&(0,b.jsx)(t.Star,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]})}),(0,b.jsx)(k.TableCell,{children:a.category?.name||"N/A"}),(0,b.jsx)(k.TableCell,{children:a.comparePrice&&parseFloat(a.comparePrice.toString())>parseFloat(a.price.toString())?(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("span",{className:"text-sm text-muted-foreground line-through",children:["$",a.comparePrice.toString()]}),(0,b.jsxs)("span",{className:"font-medium",children:["$",a.price.toString()]})]}):(0,b.jsxs)("span",{children:["$",a.price.toString()]})}),(0,b.jsx)(k.TableCell,{children:a.stock}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(l.Badge,{variant:a.published?"default":"secondary",children:a.published?"Published":"Draft"})}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(r,{productId:a.id})})]},a.id))})]})})]})}function z({products:a,categories:d}){let[e,f]=(0,c.useState)({search:"",categoryId:"",status:"",featured:""}),h=(0,c.useMemo)(()=>a.filter(a=>{if(e.search){let b=e.search.toLowerCase();if(!(a.name.toLowerCase().includes(b)||a.category?.name.toLowerCase().includes(b)))return!1}return(!e.categoryId||a.categoryId===e.categoryId)&&(!e.status||("published"!==e.status||!!a.published)&&("draft"!==e.status||!a.published))&&(!e.featured||("true"!==e.featured||!!a.featured)&&("false"!==e.featured||!a.featured))&&!0}),[a,e]);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(g,{categories:d,onFilterChange:f}),0===h.length?(0,b.jsx)("div",{className:"text-center py-12 border rounded-lg bg-gray-50",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No products found matching your filters."})}):(0,b.jsx)(y,{products:h})]})}a.s(["ProductsList",()=>z],418104)}];

//# sourceMappingURL=src_components_admin_ProductsList_tsx_5816dd0f._.js.map
//# debugId=e0f32c3a-ba9d-58ef-8a39-16f0648a97c4
