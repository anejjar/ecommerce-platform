
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7256ef8c-1e66-5d92-9ce8-29369ac5d27e")}catch(e){}}();
module.exports=[591119,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},786304,a=>{"use strict";var b=a.i(187924),c=a.i(811011),d=a.i(400187),e=a.i(368114);let f=(0,d.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},206015,a=>{"use strict";var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tfoot",{"data-slot":"table-footer",className:(0,c.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",a),...d})}function h({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function i({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function j({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function k({className:a,...d}){return(0,b.jsx)("caption",{"data-slot":"table-caption",className:(0,c.cn)("text-muted-foreground mt-4 text-sm",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCaption",()=>k,"TableCell",()=>j,"TableFooter",()=>g,"TableHead",()=>i,"TableHeader",()=>e,"TableRow",()=>h])},901359,a=>{"use strict";function b(a,c="$",d="en-US"){let e="string"==typeof a?parseFloat(a):a;if(isNaN(e))return`${c}0.00`;let f=new Intl.NumberFormat(d,{minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return`${c}${f}`}function c(a,b="$",d="en-US"){let e="string"==typeof a?parseFloat(a):a;if(isNaN(e))return`${b}0`;let f=new Intl.NumberFormat(d,{minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return`${b}${f}`}a.s(["formatCurrencyWithSymbol",()=>b,"formatCurrencyWithSymbolNoDecimals",()=>c])},299568,a=>{"use strict";var b=a.i(355488),c=a.i(901359);function d(){let{settings:a}=(0,b.useSettings)(),d=a.general_currency_symbol||"$";return{format:a=>(0,c.formatCurrencyWithSymbol)(a,d),formatNoDecimals:a=>(0,c.formatCurrencyWithSymbolNoDecimals)(a,d),symbol:d,formatWithSymbol:(a,b)=>{let c="string"==typeof a?parseFloat(a):a;if(isNaN(c))return`${d}0${b?.decimals===0?"":".00"}`;let e=new Intl.NumberFormat("en-US",{minimumFractionDigits:b?.decimals??2,maximumFractionDigits:b?.decimals??2}).format(c);return`${d}${e}`}}}a.s(["useCurrency",()=>d])},356350,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(238246),f=a.i(406704),g=a.i(699570),h=a.i(299568),i=a.i(591119),j=a.i(786304),k=a.i(206015);let l={PENDING:"bg-yellow-100 text-yellow-800",PROCESSING:"bg-blue-100 text-blue-800",SHIPPED:"bg-purple-100 text-purple-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"};function m({params:a}){let{id:m}=(0,c.use)(a),n=(0,d.useRouter)(),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),{format:w}=(0,h.useCurrency)();(0,c.useEffect)(()=>{x()},[m]);let x=async()=>{try{let a=await fetch(`/api/customers/${m}`);if(a.ok){let b=await a.json();p(b),r(b.adminNotes||"")}}catch(a){console.error("Failed to fetch customer")}finally{t(!1)}},y=async()=>{v(!0);try{let a=await fetch(`/api/customers/${m}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminNotes:q})});if(a.ok){let b=await a.json();p(b),f.default.success("Notes saved successfully")}else f.default.error("Failed to save notes")}catch(a){f.default.error("An error occurred")}finally{v(!1)}};if(s)return(0,b.jsx)("div",{className:"text-center py-12",children:"Loading..."});if(!o)return(0,b.jsx)("div",{className:"text-center py-12",children:"Customer not found"});let z=o.orders.reduce((a,b)=>a+Number(b.total),0);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:o.name||"Customer"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:o.email})]}),(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>n.back(),children:"Back"})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Total Orders"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold",children:o._count.orders})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Total Spent"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold",children:w(z)})})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Member Since"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("p",{className:"text-lg font-medium",children:new Date(o.createdAt).toLocaleDateString()})})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Admin Notes"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsx)("textarea",{value:q,onChange:a=>r(a.target.value),placeholder:"Add internal notes about this customer...",className:"w-full px-3 py-2 border rounded-md min-h-[120px] resize-y",disabled:u}),(0,b.jsx)(g.Button,{onClick:y,disabled:u||q===(o.adminNotes||""),children:u?"Saving...":"Save Notes"})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Order History"})}),(0,b.jsx)(i.CardContent,{children:0===o.orders.length?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No orders yet"})}):(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{children:"Order #"}),(0,b.jsx)(k.TableHead,{children:"Date"}),(0,b.jsx)(k.TableHead,{children:"Status"}),(0,b.jsx)(k.TableHead,{children:"Payment"}),(0,b.jsx)(k.TableHead,{children:"Total"}),(0,b.jsx)(k.TableHead,{children:"Actions"})]})}),(0,b.jsx)(k.TableBody,{children:o.orders.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{className:"font-medium",children:a.orderNumber}),(0,b.jsx)(k.TableCell,{children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(j.Badge,{className:l[a.status],children:a.status})}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(j.Badge,{className:"PAID"===a.paymentStatus?"bg-green-100 text-green-800":"FAILED"===a.paymentStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",children:a.paymentStatus})}),(0,b.jsx)(k.TableCell,{children:w(Number(a.total))}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(e.default,{href:`/admin/orders/${a.id}`,className:"text-blue-600 hover:underline",children:"View"})})]},a.id))})]})})]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=src_c32c9daf._.js.map
//# debugId=7256ef8c-1e66-5d92-9ce8-29369ac5d27e
