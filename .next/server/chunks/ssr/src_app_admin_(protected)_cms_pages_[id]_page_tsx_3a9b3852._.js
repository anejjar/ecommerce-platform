module.exports=[178897,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(699570),f=a.i(866718),g=a.i(870430),h=a.i(429246),i=a.i(580701),j=a.i(315055),k=a.i(591119),l=a.i(820049),m=a.i(400210),n=a.i(114548),o=a.i(836575),p=a.i(104720),q=a.i(452495),r=a.i(406704),s=a.i(875083);function t({params:a}){let{id:t}=(0,c.use)(a),u=(0,d.useRouter)(),v="new"===t,[w,x]=(0,c.useState)(!v),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)("DRAFT"),[K,L]=(0,c.useState)(!0),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)(""),[$,_]=(0,c.useState)(""),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)(0),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(!1),[ai,aj]=(0,c.useState)("");(0,c.useEffect)(()=>{v||ak()},[t]);let ak=async()=>{try{let a=await fetch(`/api/admin/cms/pages/${t}`);if(a.ok){let b=await a.json();B(b.title),D(b.slug),F(b.description||""),H(b.content||""),J(b.status),L(b.useStorefrontLayout??!0),N(b.useBlockEditor??!1),P(b.seoTitle||""),R(b.seoDescription||""),T(b.seoKeywords||""),V(b.ogImage||""),X(b.ogTitle||""),Z(b.ogDescription||""),_(b.customCss||""),ab(b.customJs||""),ad(b.viewCount||0),ah(b.overridesStorefrontPage??!1),aj(b.overriddenPageType||""),af(!0)}else r.default.error("Failed to fetch page"),u.push("/admin/cms/pages")}catch(a){console.error("Error fetching page:",a),r.default.error("An error occurred")}finally{x(!1)}},al=async()=>{if(!A||!C)return void r.default.error("Title and Slug are required");try{z(!0);let a=v?"/api/admin/cms/pages":`/api/admin/cms/pages/${t}`,b=await fetch(a,{method:v?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:A,slug:C,description:E,content:G,status:I,useStorefrontLayout:K,useBlockEditor:M,seoTitle:O,seoDescription:Q,seoKeywords:S,ogImage:U,ogTitle:W,ogDescription:Y,customCss:$,customJs:aa,overridesStorefrontPage:ag,overriddenPageType:ag?ai:null})});if(b.ok){if(r.default.success(v?"Page created":"Page updated"),v){let a=await b.json();u.push(`/admin/cms/pages/${a.id}`)}}else{let a=await b.text();r.default.error(a||"Failed to save page")}}catch(a){console.error("Error saving page:",a),r.default.error("An error occurred")}finally{z(!1)}};return w?(0,b.jsx)("div",{className:"text-center py-12",children:"Loading..."}):(0,b.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>u.back(),children:(0,b.jsx)(m.ArrowLeft,{className:"w-4 h-4"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:v?"Create Page":"Edit Page"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(i.Select,{value:I,onValueChange:J,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"DRAFT",children:"Draft"}),(0,b.jsx)(i.SelectItem,{value:"PUBLISHED",children:"Published"}),(0,b.jsx)(i.SelectItem,{value:"SCHEDULED",children:"Scheduled"}),(0,b.jsx)(i.SelectItem,{value:"ARCHIVED",children:"Archived"})]})]}),(0,b.jsxs)(e.Button,{onClick:al,disabled:y,children:[(0,b.jsx)(n.Save,{className:"w-4 h-4 mr-2"}),y?"Saving...":"Save"]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsx)(k.Card,{children:(0,b.jsxs)(k.CardContent,{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Title"}),(0,b.jsx)(f.Input,{value:A,onChange:a=>{let b=a.target.value;B(b),!v||ae||ag||D(b.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""))},placeholder:"Page title"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Slug"}),(0,b.jsx)(f.Input,{value:C,onChange:a=>{D(a.target.value),af(!0)},placeholder:"page-slug",disabled:ag,className:ag?"bg-muted cursor-not-allowed":""}),ag&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Slug is automatically set based on the selected override type."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Description"}),(0,b.jsx)(h.Textarea,{value:E,onChange:a=>F(a.target.value),placeholder:"Page description",rows:2})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.Label,{children:"Content Editor"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Button,{type:"button",variant:M?"outline":"default",size:"sm",onClick:()=>N(!1),children:[(0,b.jsx)(p.FileText,{className:"w-4 h-4 mr-1"}),"Rich Text"]}),(0,b.jsxs)(e.Button,{type:"button",variant:M?"default":"outline",size:"sm",onClick:()=>{N(!0),v||"new"===t||u.push(`/admin/cms/pages/${t}/editor`)},children:[(0,b.jsx)(o.Blocks,{className:"w-4 h-4 mr-1"}),"Blocks"]})]})]}),M?(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/50 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"This page uses the block editor. Click the button above to edit blocks."}),!v&&"new"!==t&&(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>u.push(`/admin/cms/pages/${t}/editor`),children:[(0,b.jsx)(q.ExternalLink,{className:"w-4 h-4 mr-2"}),"Open Block Editor"]})]}):(0,b.jsx)(l.RichTextEditor,{content:G,onChange:H})]})]})}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Storefront Override"})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Checkbox,{id:"overridesStorefrontPage",checked:ag,onCheckedChange:a=>{ah(a),!a&&(aj(""),af(!1),v&&A&&D(A.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")))}}),(0,b.jsx)(g.Label,{htmlFor:"overridesStorefrontPage",children:"Override storefront default page"})]}),ag&&(0,b.jsxs)("div",{className:"space-y-2 pl-6 border-l-2 border-primary/20",children:[(0,b.jsx)(g.Label,{children:"Override Page Type"}),(0,b.jsxs)(i.Select,{value:ai,onValueChange:a=>{aj(a),D({HOME:"_home",SHOP:"shop",PRODUCT:"product",CART:"cart",CHECKOUT:"checkout",BLOG:"blog",BLOG_POST:"blog"}[a]||""),af(!1)},children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select page to override"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"HOME",children:"Homepage"}),(0,b.jsx)(i.SelectItem,{value:"SHOP",children:"Shop"}),(0,b.jsx)(i.SelectItem,{value:"PRODUCT",children:"Product Page"}),(0,b.jsx)(i.SelectItem,{value:"CART",children:"Cart"}),(0,b.jsx)(i.SelectItem,{value:"CHECKOUT",children:"Checkout"}),(0,b.jsx)(i.SelectItem,{value:"BLOG",children:"Blog"}),(0,b.jsx)(i.SelectItem,{value:"BLOG_POST",children:"Blog Post"})]})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"This page will replace the selected default storefront page when published."})]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Layout Settings"})}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Checkbox,{id:"useStorefrontLayout",checked:K,onCheckedChange:a=>L(a)}),(0,b.jsx)(g.Label,{htmlFor:"useStorefrontLayout",children:"Use Storefront Layout"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"If checked, the page will include the store's header and footer."})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"SEO Settings"})}),(0,b.jsx)(k.CardContent,{className:"space-y-4",children:(0,b.jsxs)(s.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,b.jsxs)(s.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(s.TabsTrigger,{value:"basic",children:"Basic SEO"}),(0,b.jsx)(s.TabsTrigger,{value:"social",children:"Social Media"})]}),(0,b.jsxs)(s.TabsContent,{value:"basic",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"SEO Title"}),(0,b.jsx)(f.Input,{value:O,onChange:a=>P(a.target.value),placeholder:"Meta title (defaults to page title)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"SEO Description"}),(0,b.jsx)(h.Textarea,{value:Q,onChange:a=>R(a.target.value),placeholder:"Meta description",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"SEO Keywords"}),(0,b.jsx)(f.Input,{value:S,onChange:a=>T(a.target.value),placeholder:"Comma-separated keywords"})]})]}),(0,b.jsxs)(s.TabsContent,{value:"social",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Open Graph Image URL"}),(0,b.jsx)(f.Input,{value:U,onChange:a=>V(a.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Open Graph Title"}),(0,b.jsx)(f.Input,{value:W,onChange:a=>X(a.target.value),placeholder:"Social media title"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Open Graph Description"}),(0,b.jsx)(h.Textarea,{value:Y,onChange:a=>Z(a.target.value),placeholder:"Social media description",rows:3})]})]})]})})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Advanced Settings"})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Custom CSS"}),(0,b.jsx)(h.Textarea,{value:$,onChange:a=>_(a.target.value),placeholder:"/* Custom CSS */",rows:6,className:"font-mono text-sm"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Custom JavaScript"}),(0,b.jsx)(h.Textarea,{value:aa,onChange:a=>ab(a.target.value),placeholder:"// Custom JavaScript",rows:6,className:"font-mono text-sm"})]})]})]}),!v&&(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Analytics"})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"View Count"}),(0,b.jsx)(f.Input,{value:ac,readOnly:!0,className:"bg-muted"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total number of times this page has been viewed."})]})})]})]})})]})}a.s(["default",()=>t])}];

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0f70bd31-0923-5018-8cb1-fd5d339a4910")}catch(e){}}();
//# sourceMappingURL=src_app_admin_%28protected%29_cms_pages_%5Bid%5D_page_tsx_3a9b3852._.js.map
//# debugId=0f70bd31-0923-5018-8cb1-fd5d339a4910
