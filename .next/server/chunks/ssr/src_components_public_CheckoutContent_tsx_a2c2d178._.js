
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d0b22433-f637-52b4-8a55-2b50fc48a8ec")}catch(e){}}();
module.exports=[45746,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(875003),f=a.i(571987),g=a.i(506579),h=a.i(943108),i=a.i(940784),j=a.i(124987),k=a.i(501027),l=a.i(405784),m=a.i(767552),n=a.i(699570),o=a.i(866718),p=a.i(870430),q=a.i(48468),r=a.i(241843),s=a.i(800298),t=a.i(406704),u=a.i(415925),v=a.i(299568),w=a.i(580701),x=a.i(596221);function y({value:a,onChange:d,label:e="Region",required:f=!1}){let[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{!async function(){try{let a=await fetch("/api/regions");if(a.ok){let b=await a.json();h(b)}}catch(a){console.error("Error fetching regions:",a)}finally{j(!1)}}()},[]),i)?(0,b.jsxs)("div",{className:"space-y-2",children:[e&&(0,b.jsx)(p.Label,{children:e}),(0,b.jsxs)("div",{className:"flex items-center gap-2 h-10 px-3 py-2 border rounded-md bg-muted",children:[(0,b.jsx)(x.Loader2,{className:"h-4 w-4 animate-spin"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading regions..."})]})]}):0===g.length?(0,b.jsxs)("div",{className:"space-y-2",children:[e&&(0,b.jsx)(p.Label,{children:e}),(0,b.jsx)("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center",children:"No regions available"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[e&&(0,b.jsxs)(p.Label,{htmlFor:"region",children:[e,f&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,b.jsxs)(w.Select,{value:a,onValueChange:d,children:[(0,b.jsx)(w.SelectTrigger,{id:"region",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select a region"})}),(0,b.jsx)(w.SelectContent,{children:g.map(a=>(0,b.jsx)(w.SelectItem,{value:a.id,children:a.name},a.id))})]})]})}function z({value:a,onChange:d,regionId:e,label:f="City",required:g=!1}){let[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{e?async function(){k(!0);try{let a=await fetch(`/api/cities?regionId=${e}`);if(a.ok){let b=await a.json();i(b)}}catch(a){console.error("Error fetching cities:",a)}finally{k(!1)}}():i([])},[e]),e)?j?(0,b.jsxs)("div",{className:"space-y-2",children:[f&&(0,b.jsx)(p.Label,{children:f}),(0,b.jsxs)("div",{className:"flex items-center gap-2 h-10 px-3 py-2 border rounded-md bg-muted",children:[(0,b.jsx)(x.Loader2,{className:"h-4 w-4 animate-spin"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading cities..."})]})]}):0===h.length?(0,b.jsxs)("div",{className:"space-y-2",children:[f&&(0,b.jsx)(p.Label,{children:f}),(0,b.jsx)("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center",children:"No cities available for this region"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[f&&(0,b.jsxs)(p.Label,{htmlFor:"city",children:[f,g&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,b.jsxs)(w.Select,{value:a,onValueChange:d,children:[(0,b.jsx)(w.SelectTrigger,{id:"city",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select a city"})}),(0,b.jsx)(w.SelectContent,{children:h.map(a=>(0,b.jsx)(w.SelectItem,{value:a.name,children:a.name},a.id))})]})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[f&&(0,b.jsx)(p.Label,{children:f}),(0,b.jsx)("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center",children:"Please select a region first"})]})}function A({value:a,onChange:d,onAddressSelect:e,label:f="Address",required:g=!1}){let[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),n=(0,c.useRef)(),q=(0,c.useRef)(null);(0,c.useEffect)(()=>{function a(a){q.current&&!q.current.contains(a.target)&&m(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let r=async a=>{if(a.length<3)return void i([]);k(!0);try{let b=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(a)}&countrycodes=ma&format=json&addressdetails=1&limit=5`,{headers:{"User-Agent":"EcommercePlatform/1.0"}});if(b.ok){let a=await b.json();i(a),m(!0)}}catch(a){console.error("Error fetching address suggestions:",a)}finally{k(!1)}};return(0,b.jsxs)("div",{className:"space-y-2",ref:q,children:[f&&(0,b.jsxs)(p.Label,{htmlFor:"address",children:[f,g&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(o.Input,{id:"address",value:a,onChange:a=>{let b=a.target.value;d(b),n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r(b)},1e3)},placeholder:"Start typing your address...",required:g}),j&&(0,b.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,b.jsx)(x.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"})}),l&&h.length>0&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:h.map(a=>(0,b.jsx)("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>(a=>{let{address:b}=a,c=[];b.house_number&&c.push(b.house_number),b.road&&c.push(b.road);let f=c.join(" ")||a.display_name.split(",")[0];e({address:f,city:b.city||b.town||b.village||"",state:b.state||"",zip:b.postcode||"",country:b.country||"Morocco"}),d(f),m(!1),i([])})(a),children:a.display_name},a.place_id))})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start typing to see address suggestions"})]})}let B=["email","firstName","lastName","company","phone","alternativePhone","address","address2","city","state","country","deliveryDate","deliveryInstructions","giftMessage","orderNotes"];var C=a.i(297577),D=a.i(41154),E=a.i(590390),F=a.i(161225),G=a.i(533441),H=a.i(368114);function I({currentStep:a,steps:c}){let d=c.map((b,c)=>({id:b,label:b,completed:c<a,active:c===a}));return(0,b.jsx)("div",{className:"w-full py-6 md:py-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,b.jsx)("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200 -z-10",children:(0,b.jsx)("div",{className:"h-full bg-amber-600 transition-all duration-500 ease-in-out",style:{width:`${a/(c.length-1)*100}%`}})}),d.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,b.jsx)("div",{className:(0,H.cn)("relative w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-semibold text-sm md:text-base transition-all duration-300",a.completed?"bg-amber-600 text-white shadow-lg scale-110":a.active?"bg-amber-600 text-white shadow-lg ring-4 ring-amber-200 scale-110":"bg-gray-200 text-gray-500"),children:a.completed?(0,b.jsx)(G.Check,{className:"w-5 h-5 md:w-6 md:h-6"}):(0,b.jsx)("span",{children:c+1})}),(0,b.jsx)("div",{className:"mt-3 text-center max-w-[100px] md:max-w-none",children:(0,b.jsx)("p",{className:(0,H.cn)("text-xs md:text-sm font-medium transition-colors",a.active||a.completed?"text-amber-900 font-semibold":"text-gray-500"),children:a.label})})]},a.id))]})})}var J=a.i(845693);function K(){let a=(0,u.useTranslations)(),w=(0,d.useRouter)(),{data:x,status:G}=(0,e.useSession)(),H=(0,r.useAppDispatch)(),K=(0,r.useAppSelector)(a=>a.cart.items),[L,M]=(0,c.useState)(!1),{format:N}=(0,v.useCurrency)(),O=function(a){let[b,d]=(0,c.useState)(!1),[e,f]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{!async function(){try{let b=await fetch(`/api/features/check/${a}`),c=await b.json();d(c.enabled||!1)}catch(b){console.error(`Error checking feature flag ${a}:`,b),d(!1)}finally{f(!1)}}()},[a]),b}("checkout_customization"),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)([]),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)({email:x?.user?.email||"",firstName:"",lastName:"",company:"",address:"",address2:"",city:"",state:"",country:"Morocco",phone:"",orderNotes:"",alternativePhone:"",deliveryInstructions:"",giftMessage:"",deliveryDate:""}),[_,aa]=(0,c.useState)({}),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(""),[ah,ai]=(0,c.useState)(""),[aj,ak]=(0,c.useState)(null),[al,am]=(0,c.useState)(""),[an,ao]=(0,c.useState)(!1),ap=(0,c.useMemo)(()=>{if(!P||!O)return{};let a={};return P.fontFamily&&(a.fontFamily=({system:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',inter:'"Inter", sans-serif',roboto:'"Roboto", sans-serif',opensans:'"Open Sans", sans-serif'})[P.fontFamily]),a},[P,O]),aq=(0,c.useMemo)(()=>P&&O?({narrow:"max-w-4xl mx-auto px-4 py-8",normal:"container mx-auto px-4 py-8",wide:"max-w-7xl mx-auto px-4 py-8"})[P.pageWidth||"normal"]:"container mx-auto px-4 py-8",[P,O]),ar=(0,c.useMemo)(()=>P&&O?({rounded:"rounded-md",square:"rounded-none",pill:"rounded-full"})[P.buttonStyle||"rounded"]:"",[P,O]);(0,c.useMemo)(()=>P&&O&&P.secondaryColor?{borderColor:P.secondaryColor,color:P.secondaryColor}:{},[P,O]),(0,c.useMemo)(()=>O&&P?.fieldOrder&&P.fieldOrder.length>0?P.fieldOrder:B,[P,O]);let as=(a,b)=>O&&P?.fieldLabels&&P.fieldLabels[a]?P.fieldLabels[a]:b,at=(a,b)=>O&&P?.fieldPlaceholders&&P.fieldPlaceholders[a]?P.fieldPlaceholders[a]:b||"";(0,c.useEffect)(()=>{au()},[]);let au=async()=>{try{let a=await fetch("/api/checkout-settings");if(a.ok){let b=await a.json();Q(b)}}catch(a){console.error("Error fetching checkout settings:",a)}};(0,c.useEffect)(()=>{x?.user&&av()},[x]);let av=async()=>{try{let a=await fetch("/api/account/addresses");if(a.ok){let b=await a.json();S(b||[]);let c=b.find(a=>a.isDefault);c&&!V&&aw(c.id)}}catch(a){console.error("Error fetching saved addresses:",a)}},aw=a=>{let b=R.find(b=>b.id===a);b&&(U(a),W(!1),$({...Z,firstName:b.firstName,lastName:b.lastName,company:b.company||"",address:b.address1,address2:b.address2||"",city:b.city,state:b.state||"",country:b.country,phone:b.phone||""}))},ax=()=>{W(!0),U(null),$({email:x?.user?.email||Z.email,firstName:"",lastName:"",company:"",address:"",address2:"",city:"",state:"",country:"Morocco",phone:"",orderNotes:""}),Y("")},ay=K.reduce((a,b)=>a+b.price*b.quantity,0),az=.1*ay,aA=ay>50?0:10,aB=ay+az+aA,aC=aj?Math.max(0,aB-aj.discountAmount):aB,aD=a=>{$({...Z,[a.target.name]:a.target.value})},aE=async()=>{if(ah.trim()){ao(!0),am("");try{let b=await fetch("/api/discounts/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:ah,cartTotal:ay})}),c=await b.json();b.ok?(ak(c),t.default.success(a("checkout.discountApplied"))):(am(c.error||a("checkout.invalidDiscount")),ak(null))}catch(b){am(a("checkout.failedToApplyDiscount"))}finally{ao(!1)}}},aF=()=>{ak(null),ai(""),am("")},aG=()=>(0,b.jsxs)(b.Fragment,{children:[O&&P?.trustBadges&&P.trustBadges.length>0&&(0,b.jsx)(J.TrustBadges,{badges:P.trustBadges.filter(a=>"sidebar"===a.position)}),O&&P?.showUpsells&&P.upsellProducts&&P.upsellProducts.length>0&&"cart"===P.upsellPosition&&(0,b.jsx)(UpsellProducts,{productIds:P.upsellProducts,title:P.upsellTitle||void 0,position:"cart"}),O&&P?.scarcityMessage&&(0,b.jsx)("div",{className:`p-3 rounded-lg border ${"danger"===P.urgencyBadgeStyle?"bg-red-50 border-red-200 text-red-800":"info"===P.urgencyBadgeStyle?"bg-blue-50 border-blue-200 text-blue-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:(0,b.jsx)("p",{className:"text-sm font-medium",children:P.scarcityMessage})}),O&&P?.showSecuritySeals&&(0,b.jsx)(J.SecuritySeals,{}),O&&P?.customerServiceDisplay&&(0,b.jsx)(J.CustomerServiceDisplay,{text:P.customerServiceText||void 0,phone:P.customerServicePhone||void 0,email:P.customerServiceEmail||void 0}),(0,b.jsx)("div",{className:"space-y-3 mb-4 border-b pb-4",children:K.map(c=>(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"relative w-16 h-16 bg-gray-100 rounded flex-shrink-0",children:c.image?(0,b.jsx)(f.default,{src:c.image,alt:c.name,fill:!0,className:"object-cover rounded"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"ðŸ“¦"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:c.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[a("checkout.qty")," ",c.quantity]}),O&&P?.showLowStock&&P.lowStockThreshold&&c.stock&&c.stock<=P.lowStockThreshold&&(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,b.jsx)("span",{className:"text-orange-600 text-xs",children:"âš ï¸"}),(0,b.jsx)("p",{className:"text-xs text-orange-600 font-medium",children:P.lowStockText?.replace("X",c.stock.toString())||`Only ${c.stock} left!`})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)("p",{className:"font-medium",children:N(c.price*c.quantity)})})]})},c.id))}),O&&P?.showLoyaltyPoints&&P.loyaltyPointsText&&(0,b.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,b.jsx)("p",{className:"text-sm text-amber-800",children:P.loyaltyPointsText})}),O&&P?.showGiftWithPurchase&&P.giftThreshold&&ay>=P.giftThreshold&&(0,b.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-purple-600",children:"ðŸŽ"}),(0,b.jsx)("p",{className:"text-sm text-purple-800",children:P.giftDescription})]})}),O&&P?.referralDiscountEnabled&&P.referralDiscountText&&(0,b.jsx)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:(0,b.jsx)("p",{className:"text-sm text-indigo-800",children:P.referralDiscountText})}),(0,b.jsxs)("div",{className:`border-b pb-4 ${P?.discountFieldPosition==="top"?"order-first":P?.discountFieldPosition==="bottom"?"order-last":""}`,children:[(0,b.jsx)(p.Label,{htmlFor:"discountCode",className:"mb-2 block",children:a("checkout.discountCode")}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Input,{id:"discountCode",value:ah,onChange:a=>ai(a.target.value),placeholder:a("checkout.enterCode"),disabled:!!aj}),aj?(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:aF,className:"shrink-0",style:O&&P?.secondaryColor?{borderColor:P.secondaryColor,color:P.secondaryColor}:{},children:a("cart.remove")}):(0,b.jsx)(n.Button,{type:"button",variant:"outline",onClick:aE,disabled:an||!ah,className:"shrink-0",children:a("checkout.apply")})]}),al&&(0,b.jsx)("p",{className:"text-sm text-red-500 mt-1",children:al}),aj&&(0,b.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[a("checkout.discountAppliedLabel")," ",aj.code]})]}),(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:a("cart.subtotal")}),(0,b.jsx)("span",{className:"font-medium",children:N(ay)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-gray-600",children:[a("cart.tax")," (10%)"]}),(0,b.jsx)("span",{className:"font-medium",children:N(az)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:a("cart.shipping")}),(0,b.jsx)("span",{className:"font-medium",children:0===aA?(0,b.jsx)("span",{className:"text-green-600",children:a("cart.free")}):N(aA)})]}),aj&&(0,b.jsxs)("div",{className:"flex justify-between text-sm text-green-600 font-medium",children:[(0,b.jsx)("span",{children:a("checkout.discount")}),(0,b.jsxs)("span",{children:["-",N(aj.discountAmount)]})]})]}),(0,b.jsx)("div",{className:"border-t pt-4 mb-6",style:O&&P?.secondaryColor?{borderTopColor:P.secondaryColor}:{},children:(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,b.jsx)("span",{children:a("cart.total")}),(0,b.jsx)("span",{children:N(aC)})]})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(n.Button,{type:"submit",size:"lg",className:`w-full text-lg font-bold py-6 shadow-lg hover:shadow-xl transition-all ${ar}`,disabled:L,style:{backgroundColor:P?.primaryColor||void 0,borderColor:P?.primaryColor||void 0},children:L?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("span",{className:"animate-spin",children:"â³"}),a("checkout.placingOrder")]}):(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(h.Lock,{className:"w-5 h-5"}),a("checkout.placeOrder")," - ",N(aC)]})}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(h.Lock,{className:"w-4 h-4 text-green-600"}),(0,b.jsx)("span",{className:"font-medium",children:"Secure Checkout"}),(0,b.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,b.jsx)("span",{children:"SSL Encrypted"})]}),(0,b.jsxs)("div",{className:"text-xs text-center text-gray-600",children:[(0,b.jsx)("p",{children:a("checkout.agreeToTerms")}),(0,b.jsx)("p",{children:(0,b.jsx)(g.Link,{href:"/terms",className:"underline hover:text-primary",children:a("footer.terms")})})]})]})]}),aH=(c=!0)=>(0,b.jsxs)("div",{className:`bg-white rounded-lg shadow-sm p-6 space-y-6 ${c?"sticky top-24":""}`,children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:a("cart.orderSummary")}),aG()]}),aI=async b=>{if(b.preventDefault(),!x&&!Z.email)return void t.default.error(a("checkout.enterEmail"));if(!x&&ad&&af.length<6)return void t.default.error(a("checkout.passwordLength"));M(!0);try{let b=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:K.map(a=>({productId:a.productId,quantity:a.quantity,variantId:a.variantId||null})),shippingAddress:{address1:Z.address,address2:Z.address2,company:Z.company,city:Z.city,state:Z.state,country:Z.country},customerInfo:{firstName:Z.firstName,lastName:Z.lastName,email:Z.email,phone:Z.phone,alternativePhone:Z.alternativePhone},orderNotes:Z.orderNotes,deliveryInstructions:Z.deliveryInstructions,giftMessage:Z.giftMessage,deliveryDate:Z.deliveryDate,customFields:_,isGuest:!x,createAccount:!x&&ad,password:!x&&ad?af:void 0,discountCodeId:aj?.id})});if(b.ok){let c=await b.json();H((0,s.clearCart)()),t.default.success(a("checkout.orderSuccess")),w.push(`/order-confirmation/${c.orderNumber}`)}else{let c=await b.json();t.default.error(c.error||a("checkout.orderFailed"))}}catch(b){t.default.error(a("common.error"))}finally{M(!1)}};return 0===K.length?(0,b.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,b.jsx)("div",{className:"max-w-md mx-auto text-center",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12",children:[(0,b.jsx)(i.ShoppingBag,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-bold mb-2",children:a("cart.emptyCart")}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:a("cart.addProducts")}),(0,b.jsx)(g.Link,{href:"/shop",children:(0,b.jsx)(n.Button,{size:"lg",children:a("cart.continueShopping")})})]})})}):"loading"===G?(0,b.jsx)("div",{className:"container mx-auto px-4 py-16 text-center",children:(0,b.jsx)("p",{children:a("common.loading")})}):(0,b.jsxs)("div",{style:ap,children:[O&&P?.showCountdownTimer&&P.countdownEndDate&&(0,b.jsx)(C.CountdownTimer,{endDate:new Date(P.countdownEndDate),text:P.countdownText||void 0}),O&&P?.promotionalBanners?.filter(a=>"top"===a.position).map(a=>(0,b.jsx)("div",{className:`p-4 border-b ${"success"===a.type?"bg-green-50 border-green-200 text-green-800":"warning"===a.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"danger"===a.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,b.jsxs)("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.message}),a.link&&a.linkText&&(0,b.jsx)(g.Link,{href:a.link,className:"text-sm font-semibold underline",children:a.linkText})]})},a.id)),(0,b.jsxs)("div",{className:aq,children:[O&&P?.logoUrl&&(0,b.jsx)("div",{className:"mb-6 flex justify-center",children:(0,b.jsx)(f.default,{src:P.logoUrl,alt:"Store Logo",width:180,height:60,className:"h-12 w-auto object-contain"})}),(0,b.jsx)("h1",{className:"text-3xl font-bold mb-4",children:a("cart.checkout")}),O&&P?.progressStyle&&"none"!==P.progressStyle&&P?.checkoutLayout==="multi-step"&&(0,b.jsx)("div",{className:"mb-8 bg-white rounded-lg p-4 md:p-6 shadow-sm",children:"steps"===P.progressStyle?(0,b.jsx)(I,{currentStep:0,steps:["Information","Shipping","Payment","Review"]}):"bar"===P.progressStyle?(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Checkout Progress"}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Step 1 of 4"})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-amber-600 h-2 rounded-full transition-all duration-500",style:{width:"25%"}})})]}):null}),O&&(P?.showTrustRating||P?.showOrderCount)&&(0,b.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4 justify-center",children:[P.showTrustRating&&P.trustRatingScore&&(0,b.jsx)(J.TrustRating,{score:Number(P.trustRatingScore),count:P.trustRatingCount||void 0}),P.showOrderCount&&(0,b.jsx)(J.OrderCountTicker,{text:P.orderCountText||void 0})]}),O&&P?.trustBadges&&P.trustBadges.length>0&&(0,b.jsx)(J.TrustBadges,{badges:P.trustBadges.filter(a=>"header"===a.position)}),P?.checkoutBanner&&(0,b.jsx)("div",{className:`mb-6 p-4 rounded-lg border ${"success"===P.checkoutBannerType?"bg-green-50 border-green-200 text-green-800":"warning"===P.checkoutBannerType?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,b.jsx)("p",{children:P.checkoutBanner})}),O&&P?.showFreeShippingBar&&P.freeShippingThreshold&&(0,b.jsx)(D.FreeShippingBar,{currentAmount:ay,threshold:P.freeShippingThreshold,text:P.freeShippingBarText||void 0}),O&&P?.promotionalBanners?.filter(a=>"middle"===a.position).map(a=>(0,b.jsx)("div",{className:`mb-6 p-4 rounded-lg border ${"success"===a.type?"bg-green-50 border-green-200 text-green-800":"warning"===a.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"danger"===a.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.message}),a.link&&a.linkText&&(0,b.jsx)(g.Link,{href:a.link,className:"text-sm font-semibold underline ml-4",children:a.linkText})]})},a.id)),(0,b.jsxs)("form",{onSubmit:aI,children:[O&&P?.orderSummaryPosition==="top"&&(0,b.jsx)("div",{className:"mb-8",children:aH(!1)}),O&&P?.orderSummaryPosition==="collapsible"&&(0,b.jsxs)("div",{className:"mb-8 bg-white rounded-lg shadow-sm",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>ac(!ab),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:a("cart.orderSummary")}),ab?(0,b.jsx)(l.ChevronDown,{className:"h-5 w-5"}):(0,b.jsx)(m.ChevronUp,{className:"h-5 w-5"})]}),!ab&&(0,b.jsx)("div",{className:"px-6 pb-6",children:aG()})]}),(0,b.jsxs)("div",{className:`grid gap-8 ${O&&P?.orderSummaryPosition==="top"||O&&P?.orderSummaryPosition==="collapsible"?"lg:grid-cols-1":"lg:grid-cols-3"}`,children:[(0,b.jsxs)("div",{className:O&&P?.orderSummaryPosition==="right"?"lg:col-span-2":O&&(P?.orderSummaryPosition==="top"||P?.orderSummaryPosition==="collapsible")?"lg:col-span-1":"lg:col-span-2",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",style:O&&P?.secondaryColor?{borderLeft:`4px solid ${P.secondaryColor}`}:{},children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:a("checkout.contactInfo")}),!x&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:(0,b.jsxs)("p",{className:"text-blue-800",children:[a("auth.alreadyHaveAccount")," ",(0,b.jsx)(g.Link,{href:"/auth/signin?callbackUrl=/checkout",className:"font-semibold underline",children:a("auth.signIn")})]})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Label,{htmlFor:"email",children:as("email",a("checkout.email"))}),(0,b.jsx)(o.Input,{id:"email",name:"email",type:"email",value:Z.email,onChange:aD,placeholder:at("email"),required:!0,readOnly:!!x?.user?.email,className:`${ar} focus:ring-2 focus:ring-primary focus:border-primary transition-all`})]}),!x&&ad&&(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Label,{htmlFor:"password",children:a("checkout.password")}),(0,b.jsx)(o.Input,{id:"password",name:"password",type:"password",value:af,onChange:a=>ag(a.target.value),required:ad,minLength:6})]}),!x&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"createAccount",checked:ad,onChange:a=>ae(a.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded",style:O&&P?.secondaryColor?{accentColor:P.secondaryColor}:{}}),(0,b.jsx)(p.Label,{htmlFor:"createAccount",className:"font-normal cursor-pointer",children:a("checkout.createAccount")})]})]})]}),x&&R.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Saved Addresses"}),R.find(a=>a.isDefault)&&!V&&(0,b.jsxs)(n.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let a=R.find(a=>a.isDefault);a&&aw(a.id)},className:"gap-2",style:O&&P?.secondaryColor?{borderColor:P.secondaryColor,color:P.secondaryColor}:{},children:[(0,b.jsx)(k.Zap,{className:"h-4 w-4"}),"Use Default Address"]})]}),(0,b.jsxs)(q.RadioGroup,{value:V?"new":T||"",onValueChange:a=>{"new"===a?ax():aw(a)},className:"space-y-3",children:[R.map(a=>(0,b.jsxs)("div",{className:`flex items-start space-x-3 p-4 border rounded-lg cursor-pointer transition-colors ${T===a.id&&!V?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>aw(a.id),children:[(0,b.jsx)(q.RadioGroupItem,{value:a.id,id:a.id,className:"mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(p.Label,{htmlFor:a.id,className:"font-semibold cursor-pointer",children:[a.firstName," ",a.lastName]}),a.isDefault&&(0,b.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Default"})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[a.address1,a.address2&&`, ${a.address2}`]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[a.city,", ",a.state," ",a.postalCode]}),a.phone&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.phone})]})]},a.id)),(0,b.jsxs)("div",{className:`flex items-start space-x-3 p-4 border rounded-lg cursor-pointer transition-colors ${V?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:ax,children:[(0,b.jsx)(q.RadioGroupItem,{value:"new",id:"new-address",className:"mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)(p.Label,{htmlFor:"new-address",className:"font-semibold cursor-pointer flex items-center gap-2",children:[(0,b.jsx)(j.MapPin,{className:"h-4 w-4"}),"Use a new address"]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Enter a different shipping address"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6 transition-shadow hover:shadow-lg",style:O&&P?.secondaryColor?{borderLeft:`4px solid ${P.secondaryColor}`}:{},children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:"2"}),a("checkout.shippingAddress")]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Label,{htmlFor:"firstName",children:as("firstName",a("checkout.firstName"))}),(0,b.jsx)(o.Input,{id:"firstName",name:"firstName",value:Z.firstName,onChange:aD,placeholder:at("firstName"),className:ar,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Label,{htmlFor:"lastName",children:as("lastName",a("checkout.lastName"))}),(0,b.jsx)(o.Input,{id:"lastName",name:"lastName",value:Z.lastName,onChange:aD,placeholder:at("lastName"),className:ar,required:!0})]}),P?.showCompany&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(p.Label,{htmlFor:"company",children:as("company","Company (optional)")}),(0,b.jsx)(o.Input,{id:"company",name:"company",value:Z.company,onChange:aD,placeholder:at("company"),className:ar})]}),(0,b.jsx)("div",{className:"col-span-2",children:O?(0,b.jsx)(A,{value:Z.address,onChange:a=>$({...Z,address:a}),onAddressSelect:a=>{$({...Z,address:a.address,city:a.city,state:a.state,country:a.country})},label:a("checkout.address"),required:!0}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Label,{htmlFor:"address",children:a("checkout.address")}),(0,b.jsx)(o.Input,{id:"address",name:"address",value:Z.address,onChange:aD,placeholder:"Street address",required:!0})]})}),!O&&(0,b.jsx)("div",{children:(0,b.jsx)(y,{value:X,onChange:a=>{Y(a),$({...Z,city:"",state:a})},label:"Region",required:!0})}),(0,b.jsx)("div",{children:O?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Label,{htmlFor:"city",children:a("checkout.city")}),(0,b.jsx)(o.Input,{id:"city",name:"city",value:Z.city,onChange:aD,required:!0})]}):(0,b.jsx)(z,{value:Z.city,onChange:a=>$({...Z,city:a}),regionId:X,label:a("checkout.city"),required:!0})}),O&&(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Label,{htmlFor:"state",children:a("checkout.state")}),(0,b.jsx)(o.Input,{id:"state",name:"state",value:Z.state,onChange:aD})]}),P?.showAddressLine2&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(p.Label,{htmlFor:"address2",children:"Apartment, suite, etc. (optional)"}),(0,b.jsx)(o.Input,{id:"address2",name:"address2",value:Z.address2,onChange:aD})]}),P?.showPhone&&(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Label,{htmlFor:"phone",children:as("phone","Phone Number")}),(0,b.jsx)(o.Input,{id:"phone",name:"phone",type:"tel",value:Z.phone,onChange:aD,placeholder:at("phone"),className:ar,required:P?.requirePhone})]}),P?.showAlternativePhone&&(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Label,{htmlFor:"alternativePhone",children:as("alternativePhone","Alternative Phone")}),(0,b.jsx)(o.Input,{id:"alternativePhone",name:"alternativePhone",type:"tel",value:Z.alternativePhone,onChange:aD,placeholder:at("alternativePhone"),className:ar})]}),P?.showDeliveryDate&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(p.Label,{htmlFor:"deliveryDate",children:as("deliveryDate","Preferred Delivery Date")}),(0,b.jsx)(o.Input,{id:"deliveryDate",name:"deliveryDate",type:"date",value:Z.deliveryDate,onChange:aD,className:ar})]}),P?.showDeliveryInstructions&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(p.Label,{htmlFor:"deliveryInstructions",children:P?.deliveryInstructionsLabel||as("deliveryInstructions","Delivery Instructions")}),(0,b.jsx)("textarea",{id:"deliveryInstructions",name:"deliveryInstructions",value:Z.deliveryInstructions,onChange:a=>$({...Z,deliveryInstructions:a.target.value}),className:`w-full min-h-[80px] px-3 py-2 border ${ar}`,placeholder:at("deliveryInstructions","e.g., Leave at front door")})]}),P?.showGiftMessage&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(p.Label,{htmlFor:"giftMessage",children:P?.giftMessageLabel||as("giftMessage","Gift Message")}),(0,b.jsx)("textarea",{id:"giftMessage",name:"giftMessage",value:Z.giftMessage,onChange:a=>$({...Z,giftMessage:a.target.value}),className:`w-full min-h-[80px] px-3 py-2 border ${ar}`,placeholder:at("giftMessage","Add a personalized gift message...")})]}),P?.enableOrderNotes&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(p.Label,{htmlFor:"orderNotes",children:P?.orderNotesLabel||as("orderNotes","Order notes (optional)")}),(0,b.jsx)("textarea",{id:"orderNotes",name:"orderNotes",value:Z.orderNotes,onChange:a=>$({...Z,orderNotes:a.target.value}),className:`w-full min-h-[80px] px-3 py-2 border ${ar}`,placeholder:at("orderNotes","Any special instructions for your order...")})]}),P?.customFields&&P.customFields.length>0&&(0,b.jsx)(b.Fragment,{children:P.customFields.map(a=>(0,b.jsxs)("div",{className:"textarea"===a.type||"select"===a.type?"col-span-2":"",children:[(0,b.jsxs)(p.Label,{htmlFor:a.id,children:[a.label,a.required&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"text"===a.type&&(0,b.jsx)(o.Input,{id:a.id,value:_[a.id]||"",onChange:b=>aa({..._,[a.id]:b.target.value}),placeholder:a.placeholder,required:a.required,className:ar}),"textarea"===a.type&&(0,b.jsx)("textarea",{id:a.id,value:_[a.id]||"",onChange:b=>aa({..._,[a.id]:b.target.value}),placeholder:a.placeholder,required:a.required,className:`w-full min-h-[80px] px-3 py-2 border ${ar}`}),"select"===a.type&&(0,b.jsxs)("select",{id:a.id,value:_[a.id]||"",onChange:b=>aa({..._,[a.id]:b.target.value}),required:a.required,className:`w-full px-3 py-2 border ${ar}`,children:[(0,b.jsx)("option",{value:"",children:"Select an option..."}),a.options?.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),"checkbox"===a.type&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)("input",{type:"checkbox",id:a.id,checked:_[a.id]||!1,onChange:b=>aa({..._,[a.id]:b.target.checked}),className:"w-4 h-4",required:a.required}),(0,b.jsx)(p.Label,{htmlFor:a.id,className:"font-normal cursor-pointer",children:a.placeholder||a.label})]}),"date"===a.type&&(0,b.jsx)(o.Input,{type:"date",id:a.id,value:_[a.id]||"",onChange:b=>aa({..._,[a.id]:b.target.value}),required:a.required,className:ar})]},a.id))})]})]}),(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,b.jsx)(h.Lock,{className:"w-4 h-4 inline mr-1"}),(0,b.jsx)("strong",{children:a("common.note")})," ",a("checkout.paymentNote")]})})]}),(!O||!P?.orderSummaryPosition||"right"===P.orderSummaryPosition)&&(0,b.jsx)("div",{className:"lg:col-span-1",children:aH(!0)})]})]}),O&&P?.showUpsells&&P.upsellProducts&&P.upsellProducts.length>0&&"below-form"===P.upsellPosition&&(0,b.jsx)(UpsellProducts,{productIds:P.upsellProducts,title:P.upsellTitle||void 0,position:"below-form"}),O&&P?.showUpsells&&P.upsellProducts&&P.upsellProducts.length>0&&"modal"===P.upsellPosition&&(0,b.jsx)(UpsellProducts,{productIds:P.upsellProducts,title:P.upsellTitle||void 0,position:"modal"}),O&&P?.moneyBackGuarantee&&(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)(J.MoneyBackGuarantee,{text:P.moneyBackGuarantee})}),O&&P?.showTestimonials&&P.testimonials&&P.testimonials.length>0&&(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)(E.TestimonialsCarousel,{testimonials:P.testimonials})}),O&&P?.trustBadges&&P.trustBadges.length>0&&(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)(J.TrustBadges,{badges:P.trustBadges.filter(a=>"footer"===a.position)})}),O&&P?.promotionalBanners?.filter(a=>"bottom"===a.position).map(a=>(0,b.jsx)("div",{className:`mt-6 p-4 rounded-lg border ${"success"===a.type?"bg-green-50 border-green-200 text-green-800":"warning"===a.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"danger"===a.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.message}),a.link&&a.linkText&&(0,b.jsx)(g.Link,{href:a.link,className:"text-sm font-semibold underline ml-4",children:a.linkText})]})},a.id))]}),O&&P?.showRecentPurchases&&(0,b.jsx)(F.RecentPurchasePopup,{delay:P.recentPurchaseDelay||5e3})]})}a.s(["CheckoutContent",()=>K],45746)}];

//# sourceMappingURL=src_components_public_CheckoutContent_tsx_a2c2d178._.js.map
//# debugId=d0b22433-f637-52b4-8a55-2b50fc48a8ec
