module.exports=[475467,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(699570),e=a.i(786304),f=a.i(591119),g=a.i(206015),h=a.i(580701),i=a.i(814574),j=a.i(866965),k=a.i(870430),l=a.i(173390),m=a.i(773320),n=a.i(104720),o=a.i(633508),p=a.i(406704);function q({onUploadComplete:a}){let[e,g]=(0,c.useState)(null),[i,q]=(0,c.useState)("PRODUCTS"),[r,s]=(0,c.useState)("CREATE"),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(0),x=(0,c.useCallback)(a=>{if(a.length>0){let b=a[0],c=b.name.split(".").pop()?.toLowerCase();if(!c||!["csv","json"].includes(c))return void p.default.error("Invalid file type. Please upload CSV or JSON files only.");if(b.size>0xa00000)return void p.default.error("File is too large. Maximum size is 10MB.");g(b),p.default.success("File selected successfully")}},[]),{getRootProps:y,getInputProps:z,isDragActive:A}=(0,j.useDropzone)({onDrop:x,accept:{"text/csv":[".csv"],"application/json":[".json"]},maxFiles:1,multiple:!1}),B=async()=>{if(!e)return void p.default.error("Please select a file first");u(!0),w(0);try{let b=new FormData;b.append("file",e),b.append("type",i),b.append("mode",r);let c=setInterval(()=>{w(a=>a>=90?(clearInterval(c),90):a+10)},200),d=await fetch("/api/admin/import",{method:"POST",body:b});if(clearInterval(c),w(100),!d.ok){let a=await d.json();throw Error(a.error||"Upload failed")}await d.json(),p.default.success("File uploaded successfully. Ready for validation."),g(null),w(0),a()}catch(a){console.error("Upload error:",a),p.default.error(a instanceof Error?a.message:"Failed to upload file"),w(0)}finally{u(!1)}};return(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Upload Import File"}),(0,b.jsx)(f.CardDescription,{children:"Upload a CSV or JSON file to import data into your store"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{children:"Import Type"}),(0,b.jsxs)(h.Select,{value:i,onValueChange:q,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"PRODUCTS",children:"Products"}),(0,b.jsx)(h.SelectItem,{value:"PRODUCT_IMAGES",children:"Product Images"}),(0,b.jsx)(h.SelectItem,{value:"PRODUCT_VARIANTS",children:"Product Variants"}),(0,b.jsx)(h.SelectItem,{value:"ORDERS",children:"Orders"}),(0,b.jsx)(h.SelectItem,{value:"CUSTOMERS",children:"Customers"}),(0,b.jsx)(h.SelectItem,{value:"CATEGORIES",children:"Categories"}),(0,b.jsx)(h.SelectItem,{value:"INVENTORY",children:"Inventory"}),(0,b.jsx)(h.SelectItem,{value:"BLOG_POSTS",children:"Blog Posts"}),(0,b.jsx)(h.SelectItem,{value:"PAGES",children:"Pages"}),(0,b.jsx)(h.SelectItem,{value:"MEDIA_LIBRARY",children:"Media Library"}),(0,b.jsx)(h.SelectItem,{value:"REVIEWS",children:"Reviews"}),(0,b.jsx)(h.SelectItem,{value:"NEWSLETTER_SUBSCRIBERS",children:"Newsletter Subscribers"}),(0,b.jsx)(h.SelectItem,{value:"DISCOUNT_CODES",children:"Discount Codes"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{children:"Import Mode"}),(0,b.jsxs)(h.Select,{value:r,onValueChange:s,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"CREATE",children:"Create Only"}),(0,b.jsx)(h.SelectItem,{value:"UPDATE",children:"Update Only"}),(0,b.jsx)(h.SelectItem,{value:"UPSERT",children:"Create or Update"})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"mb-2 block",children:"File Upload"}),e?(0,b.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(n.FileText,{className:"w-10 h-10 text-blue-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:e.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:(a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,b)*100)/100+" "+["Bytes","KB","MB","GB"][b]})(e.size)})]})]}),!t&&(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{g(null),w(0)},className:"text-red-500 hover:text-red-700",children:(0,b.jsx)(o.X,{className:"w-4 h-4"})})]}),t&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)(l.Progress,{value:v,className:"h-2"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-2 text-center",children:["Uploading... ",v,"%"]})]})]}):(0,b.jsxs)("div",{...y(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${A?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[(0,b.jsx)("input",{...z()}),(0,b.jsx)(m.Upload,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),A?(0,b.jsx)("p",{className:"text-blue-600 font-medium",children:"Drop the file here..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-gray-600 mb-2",children:"Drag and drop a file here, or click to select"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Supported formats: CSV, JSON (max 10MB)"})]})]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm text-blue-800 font-medium",children:"Import Process"}),(0,b.jsxs)("ol",{className:"text-sm text-blue-700 mt-2 space-y-1 list-decimal list-inside",children:[(0,b.jsx)("li",{children:"Upload your file"}),(0,b.jsx)("li",{children:"Validate the data structure"}),(0,b.jsx)("li",{children:"Review validation results"}),(0,b.jsx)("li",{children:"Process the import"})]})]}),(0,b.jsxs)(d.Button,{onClick:B,disabled:!e||t,className:"w-full",children:[(0,b.jsx)(m.Upload,{className:"w-4 h-4 mr-2"}),t?"Uploading...":"Upload File"]})]})]})}var r=a.i(269876),s=a.i(292e3),t=a.i(167453),u=a.i(284505);function v({open:a,onOpenChange:c,validationResult:f,onProceedToImport:h,isProcessing:j=!1}){if(!f)return null;let k=f.errors.length>0,l=f.warnings.length>0,m=!k||f.validRows>0;return(0,b.jsx)(i.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-4xl max-h-[90vh]",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Validation Results"}),(0,b.jsx)(i.DialogDescription,{children:"Review the validation results before proceeding with the import"})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Total Rows"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:f.totalRows})]}),(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-green-50",children:[(0,b.jsx)("p",{className:"text-sm text-green-700 mb-1",children:"Valid Rows"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-700",children:f.validRows})]}),(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-red-50",children:[(0,b.jsx)("p",{className:"text-sm text-red-700 mb-1",children:"Invalid Rows"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-700",children:f.invalidRows})]})]}),k&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)(s.AlertCircle,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-sm text-red-800 font-medium",children:[f.errors.length," Error(s) Found"]}),(0,b.jsx)("p",{className:"text-sm text-red-700 mt-1",children:f.validRows>0?`You can still proceed to import ${f.validRows} valid row(s), skipping the invalid ones.`:"Please fix the errors in your file and try again."})]})]}),l&&!k&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)(s.AlertCircle,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-sm text-yellow-800 font-medium",children:[f.warnings.length," Warning(s) Found"]}),(0,b.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"These warnings won't prevent the import, but you should review them."})]})]}),!k&&!l&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[(0,b.jsx)(t.CheckCircle2,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-green-800 font-medium",children:"Validation Successful"}),(0,b.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"All rows passed validation. You can proceed with the import."})]})]}),(k||l)&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"Issues Found"}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{try{let a=[...f.errors.map(a=>({row:a.row,type:"ERROR",field:a.field||"-",message:a.message})),...f.warnings.map(a=>({row:a.row,type:"WARNING",field:a.field||"-",message:a.message}))],b=["Row,Type,Field,Message",...a.map(a=>[a.row,a.type,a.field,`"${a.message}"`].join(","))].join("\n"),c=new Blob([b],{type:"text/csv"}),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`validation-errors-${Date.now()}.csv`,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(d),document.body.removeChild(e),p.default.success("Error report downloaded")}catch(a){console.error("Download error:",a),p.default.error("Failed to download error report")}},children:[(0,b.jsx)(u.Download,{className:"w-4 h-4 mr-2"}),"Download Report"]})]}),(0,b.jsx)(r.ScrollArea,{className:"h-[200px] border rounded-lg",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{className:"w-20",children:"Row"}),(0,b.jsx)(g.TableHead,{className:"w-24",children:"Type"}),(0,b.jsx)(g.TableHead,{className:"w-32",children:"Field"}),(0,b.jsx)(g.TableHead,{children:"Message"})]})}),(0,b.jsx)(g.TableBody,{children:[...f.errors,...f.warnings].sort((a,b)=>a.row-b.row).map((a,c)=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:a.row}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"ERROR"===a.type?"destructive":"secondary",children:a.type})}),(0,b.jsx)(g.TableCell,{className:"font-mono text-sm",children:a.field||"-"}),(0,b.jsx)(g.TableCell,{className:"text-sm",children:a.message})]},c))})]})})]}),f.preview&&f.preview.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-medium mb-3",children:["Preview (First ",f.preview.length," Valid Rows)"]}),(0,b.jsx)(r.ScrollArea,{className:"h-[200px] border rounded-lg",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsx)(g.TableRow,{children:Object.keys(f.preview[0]).map(a=>(0,b.jsx)(g.TableHead,{className:"font-mono text-xs",children:a},a))})}),(0,b.jsx)(g.TableBody,{children:f.preview.map((a,c)=>(0,b.jsx)(g.TableRow,{children:Object.values(a).map((a,c)=>(0,b.jsx)(g.TableCell,{className:"text-sm",children:String(a)},c))},c))})]})})]})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:h,disabled:!m||j,className:"bg-blue-600 hover:bg-blue-700",children:j?"Processing...":`Proceed to Import (${f.validRows} rows)`})]})]})})}var w=a.i(567301),w=w,x=a.i(669520),y=a.i(781560),z=a.i(325015),A=a.i(294632);function B(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[n,o]=(0,c.useState)("PRODUCTS"),[r,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),O=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/admin/import");if(!a.ok)throw Error("Failed to fetch imports");let b=await a.json();j(b.imports)}catch(a){console.error("Error fetching imports:",a),p.default.error("Failed to load imports")}finally{l(!1)}},[]);(0,c.useEffect)(()=>{O();let b=setInterval(()=>{a.some(a=>"PROCESSING"===a.status||"VALIDATING"===a.status)&&O()},5e3);return()=>clearInterval(b)},[O,a]);let P=async()=>{try{let a=await fetch(`/api/admin/export/template/${n}`);if(!a.ok)throw Error("Failed to download template");let b=await a.blob(),c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`${n.toLowerCase()}-template.csv`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),document.body.removeChild(d),p.default.success("Template downloaded")}catch(a){console.error("Download error:",a),p.default.error("Failed to download template")}},Q=async a=>{H(!0),F(a);try{let b=await fetch(`/api/admin/import/${a}/validate`,{method:"POST"});if(!b.ok){let a=await b.json();throw Error(a.error||"Validation failed")}let c=await b.json();D(c.validationResult),B(!0),p.default.success("Validation completed"),O()}catch(a){console.error("Validation error:",a),p.default.error(a instanceof Error?a.message:"Failed to validate import")}finally{H(!1)}},R=async()=>{if(E){J(!0);try{let a=await fetch(`/api/admin/import/${E}/process`,{method:"POST"});if(!a.ok){let b=await a.json();throw Error(b.error||"Processing failed")}p.default.success("Import processing started"),B(!1),F(null),D(null),O()}catch(a){console.error("Processing error:",a),p.default.error(a instanceof Error?a.message:"Failed to process import")}finally{J(!1)}}},S=async a=>{if(confirm("Are you sure you want to delete this import?"))try{let b=await fetch(`/api/admin/import/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to delete import")}p.default.success("Import deleted"),O()}catch(a){console.error("Error deleting import:",a),p.default.error(a instanceof Error?a.message:"Failed to delete import")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(w.default,{className:"w-8 h-8"}),"Import Management"]}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Import data from CSV or JSON files into your store"})]}),(0,b.jsxs)(d.Button,{variant:"outline",onClick:O,disabled:k,children:[(0,b.jsx)(x.RefreshCw,{className:`w-4 h-4 mr-2 ${k?"animate-spin":""}`}),"Refresh"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Total Imports"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Pending"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:a.filter(a=>"PENDING"===a.status).length})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Validated"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:a.filter(a=>"VALIDATED"===a.status).length})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Completed"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.filter(a=>"COMPLETED"===a.status).length})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Failed"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:a.filter(a=>"FAILED"===a.status).length})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Download Template"}),(0,b.jsx)(f.CardDescription,{children:"Get a CSV template with the correct format"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{children:(0,b.jsxs)(h.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"PRODUCTS",children:"Products"}),(0,b.jsx)(h.SelectItem,{value:"ORDERS",children:"Orders"}),(0,b.jsx)(h.SelectItem,{value:"CUSTOMERS",children:"Customers"}),(0,b.jsx)(h.SelectItem,{value:"CATEGORIES",children:"Categories"}),(0,b.jsx)(h.SelectItem,{value:"INVENTORY",children:"Inventory"})]})]})}),(0,b.jsxs)(d.Button,{onClick:P,className:"w-full",variant:"outline",children:[(0,b.jsx)(u.Download,{className:"w-4 h-4 mr-2"}),"Download Template"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,b.jsx)("p",{children:"Templates include:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[(0,b.jsx)("li",{children:"Required fields"}),(0,b.jsx)("li",{children:"Optional fields"}),(0,b.jsx)("li",{children:"Example data"}),(0,b.jsx)("li",{children:"Field descriptions"})]})]})]})]}),(0,b.jsx)(q,{onUploadComplete:O})]}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Import History"}),(0,b.jsx)(f.CardDescription,{children:"View and manage your data imports"})]}),(0,b.jsx)(f.CardContent,{children:k?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(x.RefreshCw,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-gray-400"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading imports..."})]}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,b.jsx)(m.Upload,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,b.jsx)("p",{children:"No imports yet"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Upload your first file to get started"})]}):(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:"Date"}),(0,b.jsx)(g.TableHead,{children:"Type"}),(0,b.jsx)(g.TableHead,{children:"Filename"}),(0,b.jsx)(g.TableHead,{children:"Mode"}),(0,b.jsx)(g.TableHead,{children:"Status"}),(0,b.jsx)(g.TableHead,{children:"Records"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(g.TableBody,{children:a.map(a=>{var c;return(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:(0,b.jsx)("div",{className:"text-sm",children:(0,A.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",children:a.type})}),(0,b.jsxs)(g.TableCell,{children:[(0,b.jsx)("div",{className:"max-w-[200px] truncate text-sm",children:a.filename}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:(a=>{if(!a||0===a)return"-";let b=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,b)*100)/100+" "+["Bytes","KB","MB","GB"][b]})(a.fileSize)})]}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"secondary",children:a.mode})}),(0,b.jsx)(g.TableCell,{children:(c=a.status,(0,b.jsx)(e.Badge,{variant:{PENDING:"secondary",VALIDATING:"default",VALIDATED:"outline",PROCESSING:"default",COMPLETED:"outline",FAILED:"destructive",PARTIAL:"secondary"}[c]||"default",className:{VALIDATED:"text-green-600",COMPLETED:"text-green-600"}[c],children:c}))}),(0,b.jsx)(g.TableCell,{children:null!==a.recordsProcessed?(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("div",{className:"text-green-600",children:[a.recordsSuccess||0," success"]}),(a.recordsFailed||0)>0&&(0,b.jsxs)("div",{className:"text-red-600",children:[a.recordsFailed," failed"]}),(a.recordsSkipped||0)>0&&(0,b.jsxs)("div",{className:"text-gray-600",children:[a.recordsSkipped," skipped"]})]}):"-"}),(0,b.jsx)(g.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:["PENDING"===a.status&&(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>Q(a.id),disabled:G,title:"Validate import",children:(0,b.jsx)(t.CheckCircle2,{className:"h-4 w-4"})}),"VALIDATED"===a.status&&(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{F(a.id),a.validationResult&&(D(a.validationResult),B(!0))},title:"Process import",children:(0,b.jsx)(z.Play,{className:"h-4 w-4 text-green-600"})}),("FAILED"===a.status||"PARTIAL"===a.status)&&a.validationResult&&(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{N(a.validationResult),L(!0)},title:"View errors",children:(0,b.jsx)(s.AlertCircle,{className:"h-4 w-4 text-red-600"})}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>S(a.id),title:"Delete import",children:(0,b.jsx)(y.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]},a.id)})})]})})})]})})]}),(0,b.jsx)(v,{open:r,onOpenChange:B,validationResult:C,onProceedToImport:R,isProcessing:I}),(0,b.jsx)(i.Dialog,{open:K,onOpenChange:L,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-3xl",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Import Errors"}),(0,b.jsx)(i.DialogDescription,{children:"Review the errors that occurred during import processing"})]}),(0,b.jsx)("div",{className:"space-y-4",children:M&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-sm text-red-800 font-medium",children:[M.errors?.length||0," Error(s) Found"]})}),(0,b.jsx)("div",{className:"max-h-[400px] overflow-y-auto border rounded-lg",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:"Row"}),(0,b.jsx)(g.TableHead,{children:"Field"}),(0,b.jsx)(g.TableHead,{children:"Message"})]})}),(0,b.jsx)(g.TableBody,{children:M.errors?.map((a,c)=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:a.row}),(0,b.jsx)(g.TableCell,{className:"font-mono text-sm",children:a.field||"-"}),(0,b.jsx)(g.TableCell,{children:a.message})]},c))})]})})]})})]})})]})}a.s(["default",()=>B],475467)}];

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6781186b-8c13-56a7-98ad-862ad451af91")}catch(e){}}();
//# sourceMappingURL=src_app_admin_%28protected%29_import_page_tsx_187a5f90._.js.map
//# debugId=6781186b-8c13-56a7-98ad-862ad451af91
