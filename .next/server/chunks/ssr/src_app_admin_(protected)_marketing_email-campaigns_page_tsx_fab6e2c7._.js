module.exports=[253784,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(591119),f=a.i(699570),g=a.i(786304),h=a.i(915618),i=a.i(692759),j=a.i(177156),k=a.i(781560),l=a.i(596221),m=a.i(943108),n=a.i(406704),o=a.i(238246),p=a.i(814574),q=a.i(866718),r=a.i(870430),s=a.i(429246),t=a.i(580701);function u({open:a,onOpenChange:d,onSuccess:e}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)({name:"",subject:"",preheader:"",type:"NEWSLETTER",htmlContent:"",textContent:"",fromName:"",fromEmail:"",replyTo:""}),k=async a=>{a.preventDefault(),h(!0);try{let a=await fetch("/api/admin/email-campaigns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to create campaign")}n.toast.success("Campaign created successfully"),e(),m()}catch(a){n.toast.error(a.message)}finally{h(!1)}},m=()=>{j({name:"",subject:"",preheader:"",type:"NEWSLETTER",htmlContent:"",textContent:"",fromName:"",fromEmail:"",replyTo:""})};return(0,b.jsx)(p.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(p.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(p.DialogHeader,{children:[(0,b.jsx)(p.DialogTitle,{children:"Create New Campaign"}),(0,b.jsx)(p.DialogDescription,{children:"Create a new email marketing campaign. You can edit the content and design later."})]}),(0,b.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"name",children:"Campaign Name"}),(0,b.jsx)(q.Input,{id:"name",value:i.name,onChange:a=>j({...i,name:a.target.value}),placeholder:"Monthly Newsletter - January 2025",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"type",children:"Campaign Type"}),(0,b.jsxs)(t.Select,{value:i.type,onValueChange:a=>j({...i,type:a}),children:[(0,b.jsx)(t.SelectTrigger,{children:(0,b.jsx)(t.SelectValue,{})}),(0,b.jsxs)(t.SelectContent,{children:[(0,b.jsx)(t.SelectItem,{value:"NEWSLETTER",children:"Newsletter"}),(0,b.jsx)(t.SelectItem,{value:"PROMOTIONAL",children:"Promotional"}),(0,b.jsx)(t.SelectItem,{value:"TRANSACTIONAL",children:"Transactional"}),(0,b.jsx)(t.SelectItem,{value:"ANNOUNCEMENT",children:"Announcement"}),(0,b.jsx)(t.SelectItem,{value:"CUSTOM",children:"Custom"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"subject",children:"Email Subject"}),(0,b.jsx)(q.Input,{id:"subject",value:i.subject,onChange:a=>j({...i,subject:a.target.value}),placeholder:"Check out our new products!",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"preheader",children:"Preheader Text (Optional)"}),(0,b.jsx)(q.Input,{id:"preheader",value:i.preheader,onChange:a=>j({...i,preheader:a.target.value}),placeholder:"Preview text that appears in inbox..."}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This text appears after the subject line in many email clients"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"htmlContent",children:"Email Content (HTML)"}),(0,b.jsx)(s.Textarea,{id:"htmlContent",value:i.htmlContent,onChange:a=>j({...i,htmlContent:a.target.value}),placeholder:"<h1>Hello!</h1><p>Your email content here...</p>",rows:8,required:!0,className:"font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"You can use our template builder later for easier editing"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"textContent",children:"Plain Text Version (Optional)"}),(0,b.jsx)(s.Textarea,{id:"textContent",value:i.textContent,onChange:a=>j({...i,textContent:a.target.value}),placeholder:"Plain text version for email clients that don't support HTML",rows:4})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"fromName",children:"From Name"}),(0,b.jsx)(q.Input,{id:"fromName",value:i.fromName,onChange:a=>j({...i,fromName:a.target.value}),placeholder:"Your Store"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"fromEmail",children:"From Email"}),(0,b.jsx)(q.Input,{id:"fromEmail",type:"email",value:i.fromEmail,onChange:a=>j({...i,fromEmail:a.target.value}),placeholder:"hello@yourstore.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(r.Label,{htmlFor:"replyTo",children:"Reply To"}),(0,b.jsx)(q.Input,{id:"replyTo",type:"email",value:i.replyTo,onChange:a=>j({...i,replyTo:a.target.value}),placeholder:"support@yourstore.com"})]})]})]}),(0,b.jsxs)(p.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,b.jsxs)(f.Button,{type:"submit",disabled:g,children:[g&&(0,b.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Campaign"]})]})]})]})})}var v=a.i(206015),w=a.i(335732),x=a.i(879360);function y(){(0,d.useRouter)();let[a,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null);(0,c.useEffect)(()=>{A()},[]);let A=async()=>{try{let a=await fetch("/api/features/check?feature=email_campaigns");if(!(await a.json()).enabled){z(!1),r(!1);return}z(!0),B()}catch(a){console.error("Error checking feature:",a),z(!1),r(!1)}},B=async()=>{try{let a=await fetch("/api/admin/email-campaigns");if(!a.ok)throw Error("Failed to fetch campaigns");let b=await a.json();p(b)}catch(a){console.error("Error fetching campaigns:",a),n.toast.error("Failed to load campaigns")}finally{r(!1)}},C=async a=>{if(confirm("Are you sure you want to delete this campaign?"))try{if(!(await fetch(`/api/admin/email-campaigns/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete campaign");n.toast.success("Campaign deleted"),B()}catch(a){n.toast.error("Failed to delete campaign")}};return q?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin"})}):!1===y?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Email Campaigns"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Create and manage email marketing campaigns"})]}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,b.jsx)(m.Lock,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Feature Not Enabled"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:"Email Campaign Builder is a PRO feature that needs to be enabled by a super admin."}),(0,b.jsx)(o.default,{href:"/admin/features",children:(0,b.jsx)(f.Button,{children:"Go to Feature Management"})})]})})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Email Campaigns"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Create and manage email marketing campaigns"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.default,{href:"/admin/marketing/email-campaigns/templates",children:(0,b.jsxs)(f.Button,{variant:"outline",children:[(0,b.jsx)(j.Eye,{className:"mr-2 h-4 w-4"}),"Templates"]})}),(0,b.jsxs)(f.Button,{onClick:()=>t(!0),children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"New Campaign"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Campaigns"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Sent"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.reduce((a,b)=>a+b.totalSent,0).toLocaleString()})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Open Rate"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length>0?`${Math.round(a.reduce((a,b)=>a+(b.totalSent>0?b.totalOpened/b.totalSent*100:0),0)/a.length)}%`:"0%"})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-2",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Avg. Click Rate"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length>0?`${Math.round(a.reduce((a,b)=>a+(b.totalSent>0?b.totalClicked/b.totalSent*100:0),0)/a.length)}%`:"0%"})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"All Campaigns"}),(0,b.jsx)(e.CardDescription,{children:"Manage your email marketing campaigns"})]}),(0,b.jsx)(e.CardContent,{children:0===a.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(i.Send,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No campaigns found"}),(0,b.jsx)("p",{className:"text-sm",children:"Create your first campaign to get started"})]}):(0,b.jsxs)(v.Table,{children:[(0,b.jsx)(v.TableHeader,{children:(0,b.jsxs)(v.TableRow,{children:[(0,b.jsx)(v.TableHead,{children:"Campaign"}),(0,b.jsx)(v.TableHead,{children:"Type"}),(0,b.jsx)(v.TableHead,{children:"Status"}),(0,b.jsx)(v.TableHead,{children:"Recipients"}),(0,b.jsx)(v.TableHead,{children:"Open Rate"}),(0,b.jsx)(v.TableHead,{children:"Click Rate"}),(0,b.jsx)(v.TableHead,{children:"Created"}),(0,b.jsx)(v.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(v.TableBody,{children:a.map(a=>{var c;let d,e;return(0,b.jsxs)(v.TableRow,{children:[(0,b.jsx)(v.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground truncate max-w-xs",children:a.subject})]})}),(0,b.jsx)(v.TableCell,{children:(0,b.jsx)(g.Badge,{variant:"outline",children:a.type.replace(/_/g," ")})}),(0,b.jsx)(v.TableCell,{children:(c=a.status,e=(d={DRAFT:{className:"bg-gray-500/10 text-gray-600 border-gray-200",label:"Draft"},SCHEDULED:{className:"bg-blue-500/10 text-blue-600 border-blue-200",label:"Scheduled"},SENDING:{className:"bg-yellow-500/10 text-yellow-600 border-yellow-200",label:"Sending"},SENT:{className:"bg-green-500/10 text-green-600 border-green-200",label:"Sent"},PAUSED:{className:"bg-orange-500/10 text-orange-600 border-orange-200",label:"Paused"},CANCELLED:{className:"bg-red-500/10 text-red-600 border-red-200",label:"Cancelled"}})[c]||d.DRAFT,(0,b.jsx)(g.Badge,{variant:"outline",className:e.className,children:e.label}))}),(0,b.jsx)(v.TableCell,{children:a.totalSent.toLocaleString()}),(0,b.jsx)(v.TableCell,{children:0===a.totalSent?"0%":`${Math.round(a.totalOpened/a.totalSent*100)}%`}),(0,b.jsx)(v.TableCell,{children:0===a.totalSent?"0%":`${Math.round(a.totalClicked/a.totalSent*100)}%`}),(0,b.jsx)(v.TableCell,{children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)(v.TableCell,{className:"text-right",children:(0,b.jsxs)(w.DropdownMenu,{children:[(0,b.jsx)(w.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(x.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(w.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(w.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(o.default,{href:`/admin/marketing/email-campaigns/${a.id}`,children:[(0,b.jsx)(j.Eye,{className:"mr-2 h-4 w-4"}),"View Details"]})}),"DRAFT"===a.status&&(0,b.jsx)(w.DropdownMenuItem,{asChild:!0,children:(0,b.jsx)(o.default,{href:`/admin/marketing/email-campaigns/${a.id}/edit`,children:"Edit"})}),(0,b.jsxs)(w.DropdownMenuItem,{onClick:()=>C(a.id),children:[(0,b.jsx)(k.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},a.id)})})]})})]}),(0,b.jsx)(u,{open:s,onOpenChange:t,onSuccess:()=>{B(),t(!1)}})]})}a.s(["default",()=>y],253784)}];

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a347142d-988f-5121-a2bf-5bb55784c3b9")}catch(e){}}();
//# sourceMappingURL=src_app_admin_%28protected%29_marketing_email-campaigns_page_tsx_fab6e2c7._.js.map
//# debugId=a347142d-988f-5121-a2bf-5bb55784c3b9
