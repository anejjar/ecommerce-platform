module.exports=[180987,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(406704),f=a.i(699570),g=a.i(591119),h=a.i(866718),i=a.i(870430),j=a.i(633508),k=a.i(587532);function l(){let a,l=(0,d.useRouter)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)({status:"PENDING",paymentStatus:"PENDING",tax:"0",shipping:"0",shippingAddress:"",shippingCity:"",shippingState:"",shippingZip:"",shippingCountry:"USA"});(0,c.useEffect)(()=>{q.length>0&&G()},[q]),(0,c.useEffect)(()=>{y.length>0&&H()},[y]);let G=async()=>{try{let a=await fetch(`/api/customers/search?q=${q}`);if(a.ok){let b=await a.json();p(b)}}catch(a){console.error("Failed to fetch customers")}},H=async()=>{try{let a=await fetch(`/api/products/search?q=${y}`);if(a.ok){let b=await a.json();x(b)}}catch(a){console.error("Failed to fetch products")}},I=a=>{D(C.filter(b=>b.productId!==a))},J=()=>C.reduce((a,b)=>a+b.price*b.quantity,0),K=async a=>{if(a.preventDefault(),!s)return void e.default.error("Please select a customer");if(0===C.length)return void e.default.error("Please add at least one product");n(!0);try{let a=await fetch("/api/orders/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,items:C,status:E.status,paymentStatus:E.paymentStatus,tax:parseFloat(E.tax)||0,shipping:parseFloat(E.shipping)||0,shippingAddress:{address1:E.shippingAddress,city:E.shippingCity,state:E.shippingState,postalCode:E.shippingZip,country:E.shippingCountry}})});if(a.ok){let b=await a.json();e.default.success("Order created successfully"),l.push(`/admin/orders/${b.id}`)}else{let b=await a.json();e.default.error(b.error||"Failed to create order")}}catch(a){e.default.error("An error occurred")}finally{n(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Create Order"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Create a new order manually"})]}),(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>l.back(),children:"Cancel"})]}),(0,b.jsxs)("form",{onSubmit:K,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Customer"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Label,{htmlFor:"customer",children:"Search Customer *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)(h.Input,{id:"customer",placeholder:"Search by name or email...",value:q,onChange:a=>{r(a.target.value),v(!0)},onFocus:()=>v(!0),className:"pl-10",required:!0})]}),u&&o.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-md max-h-60 overflow-auto",children:o.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{t(a),r(a.email),v(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100",children:[(0,b.jsx)("p",{className:"font-medium",children:a.name||"N/A"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.email})]},a.id))})]}),s&&(0,b.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,b.jsx)("p",{className:"font-medium",children:s.name||"N/A"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:s.email})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Order Status"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"status",children:"Order Status"}),(0,b.jsxs)("select",{id:"status",value:E.status,onChange:a=>F({...E,status:a.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[(0,b.jsx)("option",{value:"PENDING",children:"Pending"}),(0,b.jsx)("option",{value:"PROCESSING",children:"Processing"}),(0,b.jsx)("option",{value:"SHIPPED",children:"Shipped"}),(0,b.jsx)("option",{value:"DELIVERED",children:"Delivered"}),(0,b.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"paymentStatus",children:"Payment Status"}),(0,b.jsxs)("select",{id:"paymentStatus",value:E.paymentStatus,onChange:a=>F({...E,paymentStatus:a.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[(0,b.jsx)("option",{value:"PENDING",children:"Pending"}),(0,b.jsx)("option",{value:"PAID",children:"Paid"}),(0,b.jsx)("option",{value:"FAILED",children:"Failed"}),(0,b.jsx)("option",{value:"REFUNDED",children:"Refunded"})]})]})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Order Items"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Label,{htmlFor:"product",children:"Add Product"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)(h.Input,{id:"product",placeholder:"Search products...",value:y,onChange:a=>{z(a.target.value),B(!0)},onFocus:()=>B(!0),className:"pl-10"})]}),A&&w.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-md max-h-60 overflow-auto",children:w.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{C.find(b=>b.productId===a.id)?D(C.map(b=>b.productId===a.id?{...b,quantity:b.quantity+1}:b)):D([...C,{productId:a.id,productName:a.name,price:a.price,quantity:1}]),z(""),B(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex justify-between",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsxs)("span",{className:"text-gray-600",children:["$",a.price.toFixed(2)," (Stock: ",a.stock,")"]})]},a.id))})]}),0===C.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No items added. Search and add products above."}):(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Product"}),(0,b.jsx)("th",{className:"px-4 py-2 text-right",children:"Price"}),(0,b.jsx)("th",{className:"px-4 py-2 text-center",children:"Quantity"}),(0,b.jsx)("th",{className:"px-4 py-2 text-right",children:"Total"}),(0,b.jsx)("th",{className:"px-4 py-2"})]})}),(0,b.jsx)("tbody",{children:C.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:a.productName}),(0,b.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",a.price.toFixed(2)]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(h.Input,{type:"number",min:"1",value:a.quantity,onChange:b=>{var c,d;return c=a.productId,void((d=parseInt(b.target.value)||0)<=0?I(c):D(C.map(a=>a.productId===c?{...a,quantity:d}:a)))},className:"w-20 mx-auto text-center"})}),(0,b.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",(a.price*a.quantity).toFixed(2)]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("button",{type:"button",onClick:()=>I(a.productId),className:"text-red-600 hover:text-red-800",children:(0,b.jsx)(j.X,{className:"w-5 h-5"})})})]},a.productId))})]})})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Shipping Address"})}),(0,b.jsx)(g.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"address",children:"Street Address *"}),(0,b.jsx)(h.Input,{id:"address",value:E.shippingAddress,onChange:a=>F({...E,shippingAddress:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"city",children:"City *"}),(0,b.jsx)(h.Input,{id:"city",value:E.shippingCity,onChange:a=>F({...E,shippingCity:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"state",children:"State"}),(0,b.jsx)(h.Input,{id:"state",value:E.shippingState,onChange:a=>F({...E,shippingState:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"zip",children:"Postal Code *"}),(0,b.jsx)(h.Input,{id:"zip",value:E.shippingZip,onChange:a=>F({...E,shippingZip:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"country",children:"Country *"}),(0,b.jsx)(h.Input,{id:"country",value:E.shippingCountry,onChange:a=>F({...E,shippingCountry:a.target.value}),required:!0})]})]})]})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Order Summary"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"tax",children:"Tax ($)"}),(0,b.jsx)(h.Input,{id:"tax",type:"number",step:"0.01",min:"0",value:E.tax,onChange:a=>F({...E,tax:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"shipping",children:"Shipping ($)"}),(0,b.jsx)(h.Input,{id:"shipping",type:"number",step:"0.01",min:"0",value:E.shipping,onChange:a=>F({...E,shipping:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",J().toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",E.tax]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Shipping:"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",E.shipping]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,b.jsx)("span",{children:"Total:"}),(0,b.jsxs)("span",{children:["$",(a=J(),a+(parseFloat(E.tax)||0)+(parseFloat(E.shipping)||0)).toFixed(2)]})]})]}),(0,b.jsx)(f.Button,{type:"submit",disabled:m||!s||0===C.length,className:"w-full",children:m?"Creating Order...":"Create Order"})]})]})]})]})}a.s(["default",()=>l])}];

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d4b49842-71fc-5cb3-a6cf-5532b31fb0a0")}catch(e){}}();
//# sourceMappingURL=src_app_admin_%28protected%29_orders_new_page_tsx_ec299fcc._.js.map
//# debugId=d4b49842-71fc-5cb3-a6cf-5532b31fb0a0
