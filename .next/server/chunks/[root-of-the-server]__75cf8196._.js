module.exports=[193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},29173,(e,t,r)=>{t.exports=e.x("@prisma/client",()=>require("@prisma/client"))},698043,e=>{"use strict";var t=e.i(29173);let r=globalThis.prisma??new t.PrismaClient({log:["query"]});e.s(["prisma",0,r])},918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},224361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},921517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},524836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},792509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},427699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},406461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},449719,(e,t,r)=>{t.exports=e.x("assert",()=>require("assert"))},500874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},145706,(e,t,r)=>{t.exports=e.x("querystring",()=>require("querystring"))},575096,e=>{e.v({name:"openid-client",version:"5.7.1",description:"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs",keywords:["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],homepage:"https://github.com/panva/openid-client",repository:"panva/openid-client",funding:{url:"https://github.com/sponsors/panva"},license:"MIT",author:"Filip Skokan <panva.ip@gmail.com>",exports:{types:"./types/index.d.ts",import:"./lib/index.mjs",require:"./lib/index.js"},main:"./lib/index.js",types:"./types/index.d.ts",files:["lib","types/index.d.ts"],scripts:{format:"npx prettier --loglevel silent --write ./lib ./test ./certification ./types",test:"mocha test/**/*.test.js"},dependencies:{jose:"^4.15.9","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},devDependencies:{"@types/node":"^16.18.106","@types/passport":"^1.0.16",base64url:"^3.0.1",chai:"^4.5.0",mocha:"^10.7.3",nock:"^13.5.5",prettier:"^2.8.8","readable-mock-req":"^0.2.2",sinon:"^9.2.4",timekeeper:"^2.3.1"},"standard-version":{scripts:{postchangelog:"sed -i '' -e 's/### \\[/## [/g' CHANGELOG.md"},types:[{type:"feat",section:"Features"},{type:"fix",section:"Fixes"},{type:"chore",hidden:!0},{type:"docs",hidden:!0},{type:"style",hidden:!0},{type:"refactor",section:"Refactor",hidden:!1},{type:"perf",section:"Performance",hidden:!1},{type:"test",hidden:!0}]}})},507290,(e,t,r)=>{t.exports=function(e,t){this.v=e,this.k=t},t.exports.__esModule=!0,t.exports.default=t.exports},101900,(e,t,r)=>{function a(e,r,o,n){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}t.exports=a=function(e,t,r,o){function n(t,r){a(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(n("next",0),n("throw",1),n("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,a(e,r,o,n)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},458629,(e,t,r)=>{var a=e.r(101900);function o(){var e,r,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function u(t,o,n,i){var s=Object.create((o&&o.prototype instanceof d?o:d).prototype);return a(s,"_invoke",function(t,a,o){var n,i,s,u=0,d=o||[],p=!1,c={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return n=t,i=0,s=e,c.n=r,l}};function m(t,a){for(i=t,s=a,r=0;!p&&u&&!o&&r<d.length;r++){var o,n=d[r],m=c.p,f=n[2];t>3?(o=f===a)&&(s=n[(i=n[4])?5:(i=3,3)],n[4]=n[5]=e):n[0]<=m&&((o=t<2&&m<n[1])?(i=0,c.v=a,c.n=n[1]):m<f&&(o=t<3||n[0]>a||a>f)&&(n[4]=t,n[5]=a,c.n=f,i=0))}if(o||t>1)return l;throw p=!0,a}return function(o,d,f){if(u>1)throw TypeError("Generator is already running");for(p&&1===d&&m(d,f),i=d,s=f;(r=i<2?e:s)||!p;){n||(i?i<3?(i>1&&(c.n=-1),m(i,s)):c.n=s:c.v=s);try{if(u=2,n){if(i||(o="next"),r=n[o]){if(!(r=r.call(n,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,i<2&&(i=0)}else 1===i&&(r=n.return)&&r.call(n),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);n=e}else if((r=(p=c.n<0)?s:t.call(a,c))!==l)break}catch(t){n=e,i=1,s=t}finally{u=1}}return{value:r,done:p}}}(t,n,i),!0),s}var l={};function d(){}function p(){}function c(){}r=Object.getPrototypeOf;var m=c.prototype=d.prototype=Object.create([][i]?r(r([][i]())):(a(r={},i,function(){return this}),r));function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,a(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e}return p.prototype=c,a(m,"constructor",c),a(c,"constructor",p),p.displayName="GeneratorFunction",a(c,s,"GeneratorFunction"),a(m),a(m,s,"Generator"),a(m,i,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(t.exports=o=function(){return{w:u,m:f}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},418973,(e,t,r)=>{var a=e.r(507290),o=e.r(101900);t.exports=function e(t,r){var n;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),o(this,"_invoke",function(e,o,i){function s(){return new r(function(o,n){!function e(o,n,i,s){try{var u=t[o](n),l=u.value;return l instanceof a?r.resolve(l.v).then(function(t){e("next",t,i,s)},function(t){e("throw",t,i,s)}):r.resolve(l).then(function(e){u.value=e,i(u)},function(t){return e("throw",t,i,s)})}catch(e){s(e)}}(e,i,o,n)})}return n=n?n.then(s,s):s()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},61982,(e,t,r)=>{var a=e.r(458629),o=e.r(418973);t.exports=function(e,t,r,n,i){return new o(a().w(e,t,r,n),i||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},804252,(e,t,r)=>{var a=e.r(61982);t.exports=function(e,t,r,o,n){var i=a(e,t,r,o,n);return i.next().then(function(e){return e.done?e.value:i.next()})},t.exports.__esModule=!0,t.exports.default=t.exports},829915,(e,t,r)=>{t.exports=function(e){var t=Object(e),r=[];for(var a in t)r.unshift(a);return function e(){for(;r.length;)if((a=r.pop())in t)return e.value=a,e.done=!1,e;return e.done=!0,e}},t.exports.__esModule=!0,t.exports.default=t.exports},485754,(e,t,r)=>{function a(e){return t.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},482995,(e,t,r)=>{var a=e.r(485754).default;t.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw TypeError(a(e)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},213031,(e,t,r)=>{var a=e.r(507290),o=e.r(458629),n=e.r(804252),i=e.r(61982),s=e.r(418973),u=e.r(829915),l=e.r(482995);function d(){"use strict";var e=o(),r=e.m(d),p=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function c(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))}var m={throw:1,return:2,break:3,continue:3};function f(e){var t,r;return function(a){t||(t={stop:function(){return r(a.a,2)},catch:function(){return a.v},abrupt:function(e,t){return r(a.a,m[e],t)},delegateYield:function(e,o,n){return t.resultName=o,r(a.d,l(e),n)},finish:function(e){return r(a.f,e)}},r=function(e,r,o){a.p=t.prev,a.n=t.next;try{return e(r,o)}finally{t.next=a.n}}),t.resultName&&(t[t.resultName]=a.v,t.resultName=void 0),t.sent=a.v,t.next=a.n;try{return e.call(this,t)}finally{a.p=t.prev,a.n=t.next}}}return(t.exports=d=function(){return{wrap:function(t,r,a,o){return e.w(f(t),r,a,o&&o.reverse())},isGeneratorFunction:c,mark:e.m,awrap:function(e,t){return new a(e,t)},AsyncIterator:s,async:function(e,t,r,a,o){return(c(t)?i:n)(f(e),t,r,a,o)},keys:u,values:l}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=d,t.exports.__esModule=!0,t.exports.default=t.exports},981415,(e,t,r)=>{var a=e.r(213031)();t.exports=a;try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},40766,(e,t,r)=>{var a=e.r(485754).default;t.exports=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=a(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},491776,(e,t,r)=>{var a=e.r(485754).default,o=e.r(40766);t.exports=function(e){var t=o(e,"string");return"symbol"==a(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports},72762,(e,t,r)=>{var a=e.r(491776);t.exports=function(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports},361932,(e,t,r)=>{function a(e,t,r,a,o,n,i){try{var s=e[n](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(a,o)}t.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function s(e){a(i,o,n,s,u,"next",e)}function u(e){a(i,o,n,s,u,"throw",e)}s(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},432173,(e,t,r)=>{t.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},752046,(e,t,r)=>{var a=e.r(491776);function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,a(o.key),o)}}t.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},608431,(e,t,r)=>{t.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},313366,(e,t,r)=>{var a=e.r(485754).default,o=e.r(608431);t.exports=function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return o(e)},t.exports.__esModule=!0,t.exports.default=t.exports},98993,(e,t,r)=>{function a(e){return t.exports=a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},912619,(e,t,r)=>{function a(e,r){return t.exports=a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,a(e,r)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},330873,(e,t,r)=>{var a=e.r(912619);t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},517350,e=>{"use strict";var t=e.i(698043);async function r(e){try{return await t.prisma.adminActivityLog.create({data:{userId:e.userId,action:e.action,resource:e.resource,resourceId:e.resourceId,details:e.details,ipAddress:e.ipAddress,userAgent:e.userAgent}})}catch(e){throw console.error("Error logging activity:",e),e}}async function a(e={}){let{page:r=1,limit:o=20,userId:n,action:i,resource:s,resourceId:u,startDate:l,endDate:d}=e,p={};n&&(p.userId=n),i&&(p.action=i),s&&(p.resource=s),u&&(p.resourceId=u),(l||d)&&(p.createdAt={},l&&(p.createdAt.gte=l),d&&(p.createdAt.lte=d));let[c,m]=await Promise.all([t.prisma.adminActivityLog.findMany({where:p,include:{user:{select:{name:!0,email:!0,role:!0}}},orderBy:{createdAt:"desc"},skip:(r-1)*o,take:o}),t.prisma.adminActivityLog.count({where:p})]);return{logs:c,total:m,page:r,limit:o,totalPages:Math.ceil(m/o)||0}}function o(e){let t=e.headers.get("x-forwarded-for");if(t)return t.split(",")[0].trim();let r=e.headers.get("x-real-ip");if(r)return r}function n(e){return e.headers.get("user-agent")||void 0}e.s(["getActivityLogs",()=>a,"getClientIp",()=>o,"getUserAgent",()=>n,"logActivity",()=>r])},286008,e=>{"use strict";function t(e,t){return e&&0!==e.length?t.map(e=>e.header).join(",")+"\n"+e.map(e=>t.map(t=>{let r=e[t.key];if(t.transform&&(r=t.transform(r,e)),null==r)return"";"object"==typeof r&&(r=JSON.stringify(r));let a=String(r);return a.includes(",")||a.includes('"')||a.includes("\n")?`"${a.replace(/"/g,'""')}"`:a}).join(",")).join("\n"):t.map(e=>e.header).join(",")+"\n"}function r(e){let t=e.split("\n").filter(e=>e.trim());if(0===t.length)return[];let r=a(t[0]),o=[];for(let e=1;e<t.length;e++){let n=a(t[e]),i={};r.forEach((e,t)=>{i[e]=n[t]||""}),o.push(i)}return o}function a(e){let t=[],r="",a=!1;for(let o=0;o<e.length;o++){let n=e[o],i=e[o+1];'"'===n?a&&'"'===i?(r+='"',o++):a=!a:","!==n||a?r+=n:(t.push(r.trim()),r="")}return t.push(r.trim()),t}let o=[{key:"sku",header:"SKU"},{key:"name",header:"Name"},{key:"price",header:"Price"},{key:"comparePrice",header:"Compare Price"},{key:"stock",header:"Stock"},{key:"category",header:"Category",transform:e=>e?.name||""},{key:"published",header:"Published",transform:e=>e?"Yes":"No"},{key:"featured",header:"Featured",transform:e=>e?"Yes":"No"},{key:"description",header:"Description"},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()}],n=[{key:"orderNumber",header:"Order Number"},{key:"createdAt",header:"Date",transform:e=>new Date(e).toISOString()},{key:"user",header:"Customer Email",transform:(e,t)=>e?.email||t.guestEmail||""},{key:"status",header:"Status"},{key:"paymentStatus",header:"Payment Status"},{key:"total",header:"Total"},{key:"items",header:"Items",transform:e=>e?.length||0},{key:"trackingNumber",header:"Tracking Number"}],i=[{key:"email",header:"Email"},{key:"name",header:"Name"},{key:"orders",header:"Total Orders",transform:e=>e?.length||0},{key:"orders",header:"Total Spent",transform:e=>e?.reduce((e,t)=>e+Number(t.total),0)||0},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()},{key:"emailVerified",header:"Email Verified",transform:e=>e?"Yes":"No"}],s=[{key:"name",header:"Name"},{key:"slug",header:"Slug"},{key:"description",header:"Description"},{key:"parent",header:"Parent Category",transform:e=>e?.name||""},{key:"products",header:"Product Count",transform:e=>e?.length||0}],u=[{key:"sku",header:"SKU"},{key:"name",header:"Product Name"},{key:"stock",header:"Current Stock"},{key:"stockAlert",header:"Alert Threshold",transform:e=>e?.threshold||""},{key:"category",header:"Category",transform:e=>e?.name||""},{key:"price",header:"Price"},{key:"updatedAt",header:"Last Updated",transform:e=>new Date(e).toISOString()}],l=[{key:"product",header:"Product SKU",transform:e=>e?.sku||""},{key:"product",header:"Product Name",transform:e=>e?.name||""},{key:"url",header:"Image URL"},{key:"alt",header:"Alt Text"},{key:"position",header:"Position"},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()}],d=[{key:"product",header:"Product SKU",transform:e=>e?.sku||""},{key:"product",header:"Product Name",transform:e=>e?.name||""},{key:"sku",header:"Variant SKU"},{key:"optionValues",header:"Options (JSON)"},{key:"price",header:"Price"},{key:"comparePrice",header:"Compare Price"},{key:"stock",header:"Stock"},{key:"image",header:"Image URL"}],p=[{key:"title",header:"Title"},{key:"slug",header:"Slug"},{key:"excerpt",header:"Excerpt"},{key:"content",header:"Content"},{key:"featuredImage",header:"Featured Image URL"},{key:"status",header:"Status",transform:e=>e||"DRAFT"},{key:"publishedAt",header:"Published At",transform:e=>e?new Date(e).toISOString():""},{key:"category",header:"Category",transform:e=>e?.name||""},{key:"author",header:"Author Email",transform:e=>e?.email||""},{key:"seoTitle",header:"SEO Title"},{key:"seoDescription",header:"SEO Description"},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()}],c=[{key:"title",header:"Title"},{key:"slug",header:"Slug"},{key:"content",header:"Content"},{key:"status",header:"Status",transform:e=>e||"DRAFT"},{key:"parent",header:"Parent Page Slug",transform:e=>e?.slug||""},{key:"template",header:"Template"},{key:"seoTitle",header:"SEO Title"},{key:"seoDescription",header:"SEO Description"},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()}],m=[{key:"filename",header:"Filename"},{key:"originalName",header:"Original Name"},{key:"url",header:"URL"},{key:"mimeType",header:"MIME Type"},{key:"fileSize",header:"File Size (bytes)",transform:e=>e||0},{key:"altText",header:"Alt Text"},{key:"title",header:"Title"},{key:"caption",header:"Caption"},{key:"uploadedBy",header:"Uploaded By",transform:e=>e?.email||""},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()}],f=[{key:"product",header:"Product SKU",transform:e=>e?.sku||""},{key:"product",header:"Product Name",transform:e=>e?.name||""},{key:"user",header:"Customer Email",transform:e=>e?.email||""},{key:"user",header:"Customer Name",transform:e=>e?.name||""},{key:"rating",header:"Rating (1-5)"},{key:"title",header:"Review Title"},{key:"comment",header:"Comment"},{key:"verified",header:"Verified Purchase",transform:e=>e?"Yes":"No"},{key:"approved",header:"Approved",transform:e=>e?"Yes":"No"},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()}],h=[{key:"email",header:"Email"},{key:"name",header:"Name"},{key:"isActive",header:"Active",transform:e=>e?"Yes":"No"},{key:"source",header:"Source"},{key:"subscribedAt",header:"Subscribed At",transform:e=>e?new Date(e).toISOString():""},{key:"unsubscribedAt",header:"Unsubscribed At",transform:e=>e?new Date(e).toISOString():""}],y=[{key:"code",header:"Code"},{key:"type",header:"Type",transform:e=>e||"PERCENTAGE"},{key:"value",header:"Discount Value"},{key:"minOrderAmount",header:"Min Order Amount"},{key:"maxUses",header:"Max Uses"},{key:"usedCount",header:"Times Used"},{key:"startDate",header:"Start Date",transform:e=>e?new Date(e).toISOString():""},{key:"endDate",header:"End Date",transform:e=>e?new Date(e).toISOString():""},{key:"isActive",header:"Active",transform:e=>e?"Yes":"No"},{key:"createdAt",header:"Created At",transform:e=>new Date(e).toISOString()}];function g(e){switch(e){case"PRODUCTS":return o;case"PRODUCT_IMAGES":return l;case"PRODUCT_VARIANTS":return d;case"ORDERS":return n;case"CUSTOMERS":return i;case"CATEGORIES":return s;case"INVENTORY":return u;case"BLOG_POSTS":return p;case"PAGES":return c;case"MEDIA_LIBRARY":return m;case"REVIEWS":return f;case"NEWSLETTER_SUBSCRIBERS":return h;case"DISCOUNT_CODES":return y;default:return[]}}function x(e,t){let r=[];return t.forEach((t,a)=>{let o=a+2;switch(e){case"PRODUCTS":let n;r.push(...(n=[],t.SKU&&t.SKU.trim()||n.push(`Row ${o}: SKU is required`),t.Name&&t.Name.trim()||n.push(`Row ${o}: Name is required`),(!t.Price||isNaN(Number(t.Price)))&&n.push(`Row ${o}: Valid price is required`),(!t.Stock||isNaN(Number(t.Stock)))&&n.push(`Row ${o}: Valid stock quantity is required`),n));break;case"PRODUCT_IMAGES":let i;r.push(...(i=[],t["Product SKU"]&&t["Product SKU"].trim()||i.push(`Row ${o}: Product SKU is required`),t["Image URL"]&&t["Image URL"].trim()?t["Image URL"].startsWith("http://")||t["Image URL"].startsWith("https://")||i.push(`Row ${o}: Image URL must be a valid HTTP/HTTPS URL`):i.push(`Row ${o}: Image URL is required`),t.Position&&isNaN(Number(t.Position))&&i.push(`Row ${o}: Position must be a number`),i));break;case"PRODUCT_VARIANTS":let s;r.push(...(s=[],t["Product SKU"]&&t["Product SKU"].trim()||s.push(`Row ${o}: Product SKU is required`),t["Variant SKU"]&&t["Variant SKU"].trim()||s.push(`Row ${o}: Variant SKU is required`),(!t.Price||isNaN(Number(t.Price)))&&s.push(`Row ${o}: Valid price is required`),(!t.Stock||isNaN(Number(t.Stock)))&&s.push(`Row ${o}: Valid stock quantity is required`),s));break;case"ORDERS":let u;r.push(...(u=[],t["Order Number"]&&t["Order Number"].trim()||u.push(`Row ${o}: Order Number is required`),t["Customer Email"]&&t["Customer Email"].trim()||u.push(`Row ${o}: Customer Email is required`),(!t.Total||isNaN(Number(t.Total)))&&u.push(`Row ${o}: Valid total is required`),u));break;case"CUSTOMERS":let l;r.push(...(l=[],t.Email&&t.Email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.Email)||l.push(`Row ${o}: Invalid email format`):l.push(`Row ${o}: Email is required`),t.Name&&t.Name.trim()||l.push(`Row ${o}: Name is required`),l));break;case"BLOG_POSTS":let d;r.push(...(d=[],t.Title&&t.Title.trim()||d.push(`Row ${o}: Title is required`),t.Slug&&t.Slug.trim()||d.push(`Row ${o}: Slug is required`),t.Content&&t.Content.trim()||d.push(`Row ${o}: Content is required`),t.Status&&!["DRAFT","PUBLISHED"].includes(t.Status.toUpperCase())&&d.push(`Row ${o}: Status must be DRAFT or PUBLISHED`),d));break;case"PAGES":let p;r.push(...(p=[],t.Title&&t.Title.trim()||p.push(`Row ${o}: Title is required`),t.Slug&&t.Slug.trim()||p.push(`Row ${o}: Slug is required`),t.Content&&t.Content.trim()||p.push(`Row ${o}: Content is required`),t.Status&&!["DRAFT","PUBLISHED"].includes(t.Status.toUpperCase())&&p.push(`Row ${o}: Status must be DRAFT or PUBLISHED`),p));break;case"MEDIA_LIBRARY":let c;r.push(...(c=[],t.URL&&t.URL.trim()?t.URL.startsWith("http://")||t.URL.startsWith("https://")||c.push(`Row ${o}: URL must be a valid HTTP/HTTPS URL`):c.push(`Row ${o}: URL is required`),t.Filename&&t.Filename.trim()||c.push(`Row ${o}: Filename is required`),c));break;case"REVIEWS":r.push(...function(e,t){let r=[];if(e["Product SKU"]&&e["Product SKU"].trim()||r.push(`Row ${t}: Product SKU is required`),e["Customer Email"]&&e["Customer Email"].trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e["Customer Email"])||r.push(`Row ${t}: Invalid email format`):r.push(`Row ${t}: Customer Email is required`),!e["Rating (1-5)"]||isNaN(Number(e["Rating (1-5)"])))r.push(`Row ${t}: Valid rating (1-5) is required`);else{let a=Number(e["Rating (1-5)"]);(a<1||a>5)&&r.push(`Row ${t}: Rating must be between 1 and 5`)}return e.Comment&&e.Comment.trim()||r.push(`Row ${t}: Comment is required`),r}(t,o));break;case"NEWSLETTER_SUBSCRIBERS":let m;r.push(...(m=[],t.Email&&t.Email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.Email)||m.push(`Row ${o}: Invalid email format`):m.push(`Row ${o}: Email is required`),m));break;case"DISCOUNT_CODES":let f;r.push(...(f=[],t.Code&&t.Code.trim()||f.push(`Row ${o}: Code is required`),t.Type&&["PERCENTAGE","FIXED"].includes(t.Type.toUpperCase())||f.push(`Row ${o}: Type must be PERCENTAGE or FIXED`),(!t["Discount Value"]||isNaN(Number(t["Discount Value"])))&&f.push(`Row ${o}: Valid discount value is required`),f))}}),{valid:0===r.length,errors:r}}async function S(e){let t=new FormData;t.append("file",e),t.append("upload_preset",process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET||"");let r=await fetch("https://api.cloudinary.com/v1_1/dt4eburuq/image/upload",{method:"POST",body:t});if(!r.ok)throw Error(`Failed to upload image: ${r.statusText}`);return(await r.json()).secure_url}e.s(["convertToCSV",()=>t,"getExportColumns",()=>g,"parseCSV",()=>r,"uploadImageFromUrl",()=>S,"validateImportData",()=>x])},105911,e=>{"use strict";var t=e.i(747909),r=e.i(174017),a=e.i(996250),o=e.i(759756),n=e.i(561916),i=e.i(114444),s=e.i(837092),u=e.i(869741),l=e.i(316795),d=e.i(487718),p=e.i(995169),c=e.i(47587),m=e.i(666012),f=e.i(570101),h=e.i(626937),y=e.i(10372),g=e.i(193695);e.i(52474);var x=e.i(600220),S=e.i(89171),R=e.i(823667),v=e.i(79832),w=e.i(698043),k=e.i(286008),b=e.i(517350);async function E(e,{params:t}){let{id:r}=await t;try{let t,a=await (0,R.getServerSession)(v.authOptions);if(!a?.user)return S.NextResponse.json({error:"Unauthorized"},{status:401});if("SUPERADMIN"!==a.user.role)return S.NextResponse.json({error:"Insufficient permissions"},{status:403});let o=await w.prisma.dataImport.findUnique({where:{id:r}});if(!o)return S.NextResponse.json({error:"Import not found"},{status:404});await w.prisma.dataImport.update({where:{id:r},data:{status:"VALIDATING"}});let n=await fetch(o.fileUrl);if(!n.ok)return S.NextResponse.json({error:"Failed to fetch import file"},{status:500});let i=await n.text();if("CSV"===o.format)t=(0,k.parseCSV)(i);else{if("JSON"!==o.format)return S.NextResponse.json({error:"Unsupported file format"},{status:400});t=JSON.parse(i)}let s=t.length,u=(0,k.validateImportData)(o.type,t),l={totalRows:s,validRows:0,invalidRows:0,warnings:[],errors:u.errors,preview:t.slice(0,5)};if(u.valid?l.validRows=s:(l.invalidRows=u.errors.length,l.validRows=s-u.errors.length),"PRODUCTS"===o.type){let e=t.map(e=>e.SKU).filter(Boolean),r=new Set(e);if(e.length!==r.size&&l.warnings.push("Duplicate SKUs found in file"),"CREATE"===o.mode){let e=await w.prisma.product.findMany({where:{sku:{in:Array.from(r)}},select:{sku:!0}});e.length>0&&l.warnings.push(`${e.length} SKUs already exist in database. Use UPDATE or UPSERT mode.`)}}if("CUSTOMERS"===o.type){let e=t.map(e=>e.Email).filter(Boolean),r=new Set(e);if(e.length!==r.size&&l.warnings.push("Duplicate emails found in file"),"CREATE"===o.mode){let e=await w.prisma.user.findMany({where:{email:{in:Array.from(r)}},select:{email:!0}});e.length>0&&l.warnings.push(`${e.length} emails already exist in database. Use UPDATE or UPSERT mode.`)}}if("BLOG_POSTS"===o.type){let e=t.map(e=>e.Slug).filter(Boolean),r=new Set(e);if(e.length!==r.size&&l.warnings.push("Duplicate slugs found in file"),"CREATE"===o.mode){let e=await w.prisma.blogPost.findMany({where:{slug:{in:Array.from(r)}},select:{slug:!0}});e.length>0&&l.warnings.push(`${e.length} slugs already exist in database. Use UPDATE or UPSERT mode.`)}}if("PAGES"===o.type){let e=t.map(e=>e.Slug).filter(Boolean),r=new Set(e);if(e.length!==r.size&&l.warnings.push("Duplicate slugs found in file"),"CREATE"===o.mode){let e=await w.prisma.page.findMany({where:{slug:{in:Array.from(r)}},select:{slug:!0}});e.length>0&&l.warnings.push(`${e.length} slugs already exist in database. Use UPDATE or UPSERT mode.`)}}if("NEWSLETTER_SUBSCRIBERS"===o.type){let e=t.map(e=>e.Email).filter(Boolean),r=new Set(e);if(e.length!==r.size&&l.warnings.push("Duplicate emails found in file"),"CREATE"===o.mode){let e=await w.prisma.newsletterSubscriber.findMany({where:{email:{in:Array.from(r)}},select:{email:!0}});e.length>0&&l.warnings.push(`${e.length} emails already exist in database. Use UPDATE or UPSERT mode.`)}}if("DISCOUNT_CODES"===o.type){let e=t.map(e=>e.Code).filter(Boolean),r=new Set(e);if(e.length!==r.size&&l.warnings.push("Duplicate discount codes found in file"),"CREATE"===o.mode){let e=await w.prisma.discountCode.findMany({where:{code:{in:Array.from(r)}},select:{code:!0}});e.length>0&&l.warnings.push(`${e.length} discount codes already exist in database. Use UPDATE or UPSERT mode.`)}}return await w.prisma.dataImport.update({where:{id:r},data:{status:u.valid&&0===l.warnings.length?"PENDING":"FAILED",totalRows:s,errors:JSON.stringify(l)}}),await (0,b.logActivity)({userId:a.user.id,action:"UPDATE",resource:"DATA_IMPORT",resourceId:r,details:`Validated import: ${u.valid?"Valid":"Invalid"}`,ipAddress:(0,b.getClientIp)(e),userAgent:(0,b.getUserAgent)(e)}),S.NextResponse.json({valid:u.valid,results:l,message:u.valid?"Validation passed. Ready to process.":"Validation failed. Please fix errors and try again."})}catch(e){console.error("Error validating import:",e);try{await w.prisma.dataImport.update({where:{id:r},data:{status:"FAILED",errors:JSON.stringify({error:e instanceof Error?e.message:"Unknown error"})}})}catch(e){console.error("Error updating import status:",e)}return S.NextResponse.json({error:"Internal server error"},{status:500})}}e.s(["POST",()=>E],241587);var T=e.i(241587);let A=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/admin/import/[id]/validate/route",pathname:"/api/admin/import/[id]/validate",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/admin/import/[id]/validate/route.ts",nextConfigOutput:"",userland:T}),{workAsyncStorage:P,workUnitAsyncStorage:C,serverHooks:N}=A;function O(){return(0,a.patchFetch)({workAsyncStorage:P,workUnitAsyncStorage:C})}async function U(e,t,a){A.isDev&&(0,o.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let S="/api/admin/import/[id]/validate/route";S=S.replace(/\/index$/,"")||"/";let R=await A.prepare(e,t,{srcPage:S,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:v,params:w,nextConfig:k,parsedUrl:b,isDraftMode:E,prerenderManifest:T,routerServerContext:P,isOnDemandRevalidate:C,revalidateOnlyGenerated:N,resolvedPathname:O,clientReferenceManifest:U,serverActionsManifest:_}=R,I=(0,u.normalizeAppPath)(S),D=!!(T.dynamicRoutes[I]||T.routes[O]),q=async()=>((null==P?void 0:P.render404)?await P.render404(e,t,b,!1):t.end("This page could not be found"),null);if(D&&!E){let e=!!T.routes[O],t=T.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(k.experimental.adapterPath)return await q();throw new g.NoFallbackError}}let M=null;!D||A.isDev||E||(M="/index"===(M=O)?"/":M);let j=!0===A.isDev||!D,$=D&&!j;_&&U&&(0,i.setReferenceManifestsSingleton)({page:S,clientReferenceManifest:U,serverActionsManifest:_,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:_})});let L=e.method||"GET",F=(0,n.getTracer)(),V=F.getActiveScopeSpan(),K={params:w,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!k.experimental.authInterrupts},cacheComponents:!!k.cacheComponents,supportsDynamicResponse:j,incrementalCache:(0,o.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:k.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>A.onRequestError(e,t,a,P)},sharedContext:{buildId:v}},B=new l.NodeNextRequest(e),G=new l.NodeNextResponse(t),H=d.NextRequestAdapter.fromNodeNextRequest(B,(0,d.signalFromNodeResponse)(t));try{let i=async e=>A.handle(H,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=F.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${L} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${L} ${S}`)}),s=!!(0,o.getRequestMeta)(e,"minimalMode"),u=async o=>{var n,u;let l=async({previousCacheEntry:r})=>{try{if(!s&&C&&N&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(o);e.fetchMetrics=K.renderOpts.fetchMetrics;let u=K.renderOpts.pendingWaitUntil;u&&a.waitUntil&&(a.waitUntil(u),u=void 0);let l=K.renderOpts.collectedTags;if(!D)return await (0,m.sendResponse)(B,G,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(n.headers);l&&(t[y.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=y.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,a=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=y.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await A.onRequestError(e,t,{routerKind:"App Router",routePath:S,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:C})},P),t}},d=await A.handleResponse({req:e,nextConfig:k,cacheKey:M,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:C,revalidateOnlyGenerated:N,responseGenerator:l,waitUntil:a.waitUntil,isMinimalMode:s});if(!D)return null;if((null==d||null==(n=d.value)?void 0:n.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(u=d.value)?void 0:u.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",C?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),E&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,f.fromNodeOutgoingHttpHeaders)(d.value.headers);return s&&D||p.delete(y.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,h.getCacheControlHeader)(d.cacheControl)),await (0,m.sendResponse)(B,G,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};V?await u(V):await F.withPropagatedContext(e.headers,()=>F.trace(p.BaseServerSpan.handleRequest,{spanName:`${L} ${S}`,kind:n.SpanKind.SERVER,attributes:{"http.method":L,"http.target":e.url}},u))}catch(t){if(t instanceof g.NoFallbackError||await A.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:C})}),D)throw t;return await (0,m.sendResponse)(B,G,new Response(null,{status:500})),null}}e.s(["handler",()=>U,"patchFetch",()=>O,"routeModule",()=>A,"serverHooks",()=>N,"workAsyncStorage",()=>P,"workUnitAsyncStorage",()=>C],105911)}];

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c37a66b8-eb97-562a-929f-a3c49e156ae5")}catch(e){}}();
//# sourceMappingURL=%5Broot-of-the-server%5D__75cf8196._.js.map
//# debugId=c37a66b8-eb97-562a-929f-a3c49e156ae5
