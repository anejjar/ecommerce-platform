(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,180127,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>t])},871689,e=>{"use strict";var t=e.i(180127);e.s(["ArrowLeft",()=>t.default])},515288,e=>{"use strict";var t=e.i(843476),a=e.i(975157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>s,"CardFooter",()=>d,"CardHeader",()=>i,"CardTitle",()=>n])},793479,e=>{"use strict";var t=e.i(843476),a=e.i(975157);function r({className:e,type:r,...i}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>r])},110204,e=>{"use strict";var t=e.i(843476),a=e.i(271645);e.i(174080);var r=e.i(991918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let n=(0,r.createSlot)(`Primitive.${i}`),s=a.forwardRef((e,a)=>{let{asChild:r,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?n:i,{...s,ref:a})});return s.displayName=`Primitive.${i}`,{...e,[i]:s}},{}),n=a.forwardRef((e,a)=>(0,t.jsx)(i.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var s=e.i(975157);function l({className:e,...a}){return(0,t.jsx)(n,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none mb-2 group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>l],110204)},251854,e=>{"use strict";let t=(0,e.i(475254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>t])},356909,e=>{"use strict";var t=e.i(251854);e.s(["Save",()=>t.default])},531278,717521,e=>{"use strict";let t=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t],717521),e.s(["Loader2",()=>t],531278)},624687,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(975157);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));i.displayName="Textarea",e.s(["Textarea",()=>i])},517302,e=>{"use strict";let t=(0,e.i(475254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["default",()=>t])},270756,e=>{"use strict";var t=e.i(517302);e.s(["Lock",()=>t.default])},405782,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(618566),i=e.i(515288),n=e.i(519455),s=e.i(531278),l=e.i(270756),d=e.i(522016);function o({featureName:e,children:o}){(0,r.useRouter)();let[c,m]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{let t=await fetch(`/api/features/check?feature=${e}`),a=await t.json();h(a.enabled)}catch(e){console.error("Error checking feature:",e),h(!1)}finally{m(!1)}};return c?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin"})}):u?(0,t.jsx)(t.Fragment,{children:o}):(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(i.Card,{children:(0,t.jsxs)(i.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)(l.Lock,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Feature Not Enabled"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mb-4 max-w-md",children:"This feature needs to be enabled by a super admin in the feature management page."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.default,{href:"/admin/features",children:(0,t.jsx)(n.Button,{children:"Go to Feature Management"})}),(0,t.jsx)(d.default,{href:"/admin/marketing/email-campaigns",children:(0,t.jsx)(n.Button,{variant:"outline",children:"Back to Campaigns"})})]})]})})})}e.s(["FeatureCheck",()=>o])},541527,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(618566),i=e.i(515288),n=e.i(519455),s=e.i(793479),l=e.i(110204),d=e.i(624687),o=e.i(967489),c=e.i(531278),m=e.i(871689),u=e.i(356909),h=e.i(705766),x=e.i(522016),p=e.i(405782);function f(){let e=(0,r.useParams)(),f=(0,r.useRouter)(),[j,g]=(0,a.useState)(!0),[v,b]=(0,a.useState)(!1),[y,C]=(0,a.useState)({name:"",subject:"",preheader:"",type:"NEWSLETTER",htmlContent:"",textContent:"",fromName:"",fromEmail:"",replyTo:""});(0,a.useEffect)(()=>{e.id&&N()},[e.id]);let N=async()=>{try{let t=await fetch(`/api/admin/email-campaigns/${e.id}`);if(!t.ok)throw Error("Failed to fetch campaign");let a=await t.json();if("DRAFT"!==a.status){h.toast.error("Only draft campaigns can be edited"),f.push(`/admin/marketing/email-campaigns/${e.id}`);return}C({name:a.name,subject:a.subject,preheader:a.preheader||"",type:a.type,htmlContent:a.htmlContent,textContent:a.textContent||"",fromName:a.fromName||"",fromEmail:a.fromEmail||"",replyTo:a.replyTo||""})}catch(e){console.error("Error fetching campaign:",e),h.toast.error("Failed to load campaign")}finally{g(!1)}},w=async t=>{t.preventDefault(),b(!0);try{let t=await fetch(`/api/admin/email-campaigns/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update campaign")}h.toast.success("Campaign updated successfully"),f.push(`/admin/marketing/email-campaigns/${e.id}`)}catch(e){h.toast.error(e.message)}finally{b(!1)}};return j?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(c.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,t.jsx)(p.FeatureCheck,{featureName:"email_campaigns",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(x.default,{href:`/admin/marketing/email-campaigns/${e.id}`,children:(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",children:[(0,t.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Campaign"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Update your email campaign details"})]})]}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Campaign Details"}),(0,t.jsx)(i.CardDescription,{children:"Basic information about your campaign"})]}),(0,t.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"name",children:"Campaign Name"}),(0,t.jsx)(s.Input,{id:"name",value:y.name,onChange:e=>C({...y,name:e.target.value}),placeholder:"Monthly Newsletter - January 2025",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"type",children:"Campaign Type"}),(0,t.jsxs)(o.Select,{value:y.type,onValueChange:e=>C({...y,type:e}),children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"NEWSLETTER",children:"Newsletter"}),(0,t.jsx)(o.SelectItem,{value:"PROMOTIONAL",children:"Promotional"}),(0,t.jsx)(o.SelectItem,{value:"TRANSACTIONAL",children:"Transactional"}),(0,t.jsx)(o.SelectItem,{value:"ANNOUNCEMENT",children:"Announcement"}),(0,t.jsx)(o.SelectItem,{value:"CUSTOM",children:"Custom"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"subject",children:"Email Subject"}),(0,t.jsx)(s.Input,{id:"subject",value:y.subject,onChange:e=>C({...y,subject:e.target.value}),placeholder:"Check out our new products!",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"preheader",children:"Preheader Text (Optional)"}),(0,t.jsx)(s.Input,{id:"preheader",value:y.preheader,onChange:e=>C({...y,preheader:e.target.value}),placeholder:"Preview text that appears in inbox..."}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This text appears after the subject line in many email clients"})]})]})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Email Content"}),(0,t.jsx)(i.CardDescription,{children:"Design your email content"})]}),(0,t.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"htmlContent",children:"HTML Content"}),(0,t.jsx)(d.Textarea,{id:"htmlContent",value:y.htmlContent,onChange:e=>C({...y,htmlContent:e.target.value}),placeholder:"<h1>Hello!</h1><p>Your email content here...</p>",rows:12,required:!0,className:"font-mono text-sm"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Full HTML content of your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"textContent",children:"Plain Text Version (Optional)"}),(0,t.jsx)(d.Textarea,{id:"textContent",value:y.textContent,onChange:e=>C({...y,textContent:e.target.value}),placeholder:"Plain text version for email clients that don't support HTML",rows:6})]})]})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Sender Information"}),(0,t.jsx)(i.CardDescription,{children:"Configure who the email is from"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"fromName",children:"From Name"}),(0,t.jsx)(s.Input,{id:"fromName",value:y.fromName,onChange:e=>C({...y,fromName:e.target.value}),placeholder:"Your Store"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"fromEmail",children:"From Email"}),(0,t.jsx)(s.Input,{id:"fromEmail",type:"email",value:y.fromEmail,onChange:e=>C({...y,fromEmail:e.target.value}),placeholder:"hello@yourstore.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{htmlFor:"replyTo",children:"Reply To"}),(0,t.jsx)(s.Input,{id:"replyTo",type:"email",value:y.replyTo,onChange:e=>C({...y,replyTo:e.target.value}),placeholder:"support@yourstore.com"})]})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(x.default,{href:`/admin/marketing/email-campaigns/${e.id}`,children:(0,t.jsx)(n.Button,{type:"button",variant:"outline",children:"Cancel"})}),(0,t.jsxs)(n.Button,{type:"submit",disabled:v,children:[v&&(0,t.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),(0,t.jsx)(u.Save,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})]})})}e.s(["default",()=>f])}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="66ed9e24-84e8-5a3d-9141-9d027590b338")}catch(e){}}();
//# debugId=66ed9e24-84e8-5a3d-9141-9d027590b338
