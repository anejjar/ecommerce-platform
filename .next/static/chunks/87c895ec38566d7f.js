(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,531278,717521,e=>{"use strict";let t=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t],717521),e.s(["Loader2",()=>t],531278)},515288,e=>{"use strict";var t=e.i(843476),a=e.i(975157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>l,"CardFooter",()=>o,"CardHeader",()=>i,"CardTitle",()=>s])},487486,e=>{"use strict";var t=e.i(843476),a=e.i(991918),r=e.i(225913),i=e.i(975157);let s=(0,r.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,asChild:l=!1,...n}){let o=l?a.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(s({variant:r}),e),...n})}e.s(["Badge",()=>l])},784774,e=>{"use strict";var t=e.i(843476),a=e.i(975157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function i({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function s({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function l({className:e,...r}){return(0,t.jsx)("tfoot",{"data-slot":"table-footer",className:(0,a.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",e),...r})}function n({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function o({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function d({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function c({className:e,...r}){return(0,t.jsx)("caption",{"data-slot":"table-caption",className:(0,a.cn)("text-muted-foreground mt-4 text-sm",e),...r})}e.s(["Table",()=>r,"TableBody",()=>s,"TableCaption",()=>c,"TableCell",()=>d,"TableFooter",()=>l,"TableHead",()=>o,"TableHeader",()=>i,"TableRow",()=>n])},107233,603908,e=>{"use strict";let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",()=>t],603908),e.s(["Plus",()=>t],107233)},612329,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>t])},727612,e=>{"use strict";var t=e.i(612329);e.s(["Trash2",()=>t.default])},451477,e=>{"use strict";let t=(0,e.i(475254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["default",()=>t])},361839,e=>{"use strict";let t=(0,e.i(475254).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);e.s(["default",()=>t])},868499,e=>{"use strict";let t;var a=e.i(843476),r=e.i(271645),i=e.i(30030),s=e.i(820783),l=e.i(326999),n=e.i(981140),o=Symbol("radix.slottable"),d="AlertDialog",[c,u]=(0,i.createContextScope)(d,[l.createDialogScope]),f=(0,l.createDialogScope)(),x=e=>{let{__scopeAlertDialog:t,...r}=e,i=f(t);return(0,a.jsx)(l.Root,{...i,...r,modal:!0})};x.displayName=d,r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=f(r);return(0,a.jsx)(l.Trigger,{...s,...i,ref:t})}).displayName="AlertDialogTrigger";var m=e=>{let{__scopeAlertDialog:t,...r}=e,i=f(t);return(0,a.jsx)(l.Portal,{...i,...r})};m.displayName="AlertDialogPortal";var g=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=f(r);return(0,a.jsx)(l.Overlay,{...s,...i,ref:t})});g.displayName="AlertDialogOverlay";var h="AlertDialogContent",[p,v]=c(h),b=((t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=o,t),j=r.forwardRef((e,t)=>{let{__scopeAlertDialog:i,children:o,...d}=e,c=f(i),u=r.useRef(null),x=(0,s.useComposedRefs)(t,u),m=r.useRef(null);return(0,a.jsx)(l.WarningProvider,{contentName:h,titleName:y,docsSlug:"alert-dialog",children:(0,a.jsx)(p,{scope:i,cancelRef:m,children:(0,a.jsxs)(l.Content,{role:"alertdialog",...c,...d,ref:x,onOpenAutoFocus:(0,n.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),m.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(b,{children:o}),(0,a.jsx)(R,{contentRef:u})]})})})});j.displayName=h;var y="AlertDialogTitle",N=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=f(r);return(0,a.jsx)(l.Title,{...s,...i,ref:t})});N.displayName=y;var w="AlertDialogDescription",D=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=f(r);return(0,a.jsx)(l.Description,{...s,...i,ref:t})});D.displayName=w;var T=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=f(r);return(0,a.jsx)(l.Close,{...s,...i,ref:t})});T.displayName="AlertDialogAction";var C="AlertDialogCancel",A=r.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,{cancelRef:n}=v(C,r),o=f(r),d=(0,s.useComposedRefs)(t,n);return(0,a.jsx)(l.Close,{...o,...i,ref:d})});A.displayName=C;var R=({contentRef:e})=>{let t=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${w}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},k=e.i(975157),S=e.i(519455);let H=r.forwardRef(({className:e,...t},r)=>(0,a.jsx)(g,{className:(0,k.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));H.displayName=g.displayName;let F=r.forwardRef(({className:e,...t},r)=>(0,a.jsxs)(m,{children:[(0,a.jsx)(H,{}),(0,a.jsx)(j,{ref:r,className:(0,k.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));F.displayName=j.displayName;let E=({className:e,...t})=>(0,a.jsx)("div",{className:(0,k.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});E.displayName="AlertDialogHeader";let P=({className:e,...t})=>(0,a.jsx)("div",{className:(0,k.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});P.displayName="AlertDialogFooter";let L=r.forwardRef(({className:e,...t},r)=>(0,a.jsx)(N,{ref:r,className:(0,k.cn)("text-lg font-semibold",e),...t}));L.displayName=N.displayName;let M=r.forwardRef(({className:e,...t},r)=>(0,a.jsx)(D,{ref:r,className:(0,k.cn)("text-sm text-muted-foreground",e),...t}));M.displayName=D.displayName;let O=r.forwardRef(({className:e,...t},r)=>(0,a.jsx)(T,{ref:r,className:(0,k.cn)((0,S.buttonVariants)(),e),...t}));O.displayName=T.displayName;let B=r.forwardRef(({className:e,...t},r)=>(0,a.jsx)(A,{ref:r,className:(0,k.cn)((0,S.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));B.displayName=A.displayName,e.s(["AlertDialog",()=>x,"AlertDialogAction",()=>O,"AlertDialogCancel",()=>B,"AlertDialogContent",()=>F,"AlertDialogDescription",()=>M,"AlertDialogFooter",()=>P,"AlertDialogHeader",()=>E,"AlertDialogTitle",()=>L],868499)},431343,e=>{"use strict";var t=e.i(451477);e.s(["Play",()=>t.default])},285960,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(618566),i=e.i(522016),s=e.i(515288),l=e.i(519455),n=e.i(487486),o=e.i(784774),d=e.i(531278),c=e.i(107233),u=e.i(431343),f=e.i(361839),f=f,x=e.i(727612),m=e.i(178583),g=e.i(868499),h=e.i(705766);function p(){let e=(0,r.useRouter)(),[p,v]=(0,a.useState)([]),[b,j]=(0,a.useState)(!0),[y,N]=(0,a.useState)(!1),[w,D]=(0,a.useState)(!1),[T,C]=(0,a.useState)(null),[A,R]=(0,a.useState)(null);(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{j(!0);let e=await fetch("/api/invoices/recurring");if(e.ok){let t=await e.json();v(t)}else h.default.error("Failed to fetch recurring invoices")}catch(e){console.error("Error fetching recurring invoices:",e),h.default.error("An error occurred")}finally{j(!1)}},S=async(e,t)=>{try{(await fetch(`/api/invoices/recurring/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!t})})).ok?(h.default.success(`Recurring invoice ${!t?"activated":"paused"}`),k()):h.default.error("Failed to update recurring invoice")}catch(e){console.error("Error updating recurring invoice:",e),h.default.error("Failed to update recurring invoice")}},H=async t=>{try{R(t);let a=await fetch(`/api/invoices/recurring/${t}/generate`,{method:"POST"});if(a.ok){let t=await a.json();h.default.success("Invoice generated successfully"),k(),e.push(`/admin/invoices/${t.invoice.id}`)}else h.default.error("Failed to generate invoice")}catch(e){console.error("Error generating invoice:",e),h.default.error("Failed to generate invoice")}finally{R(null)}},F=async()=>{if(T)try{(await fetch(`/api/invoices/recurring/${T}`,{method:"DELETE"})).ok?(h.default.success("Recurring invoice deleted"),D(!1),C(null),k()):h.default.error("Failed to delete recurring invoice")}catch(e){console.error("Error deleting recurring invoice:",e),h.default.error("Failed to delete recurring invoice")}};return b?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin text-gray-600"})}):(0,t.jsxs)("div",{className:"container mx-auto py-8 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Recurring Invoices"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage automated recurring invoice generation"})]}),(0,t.jsx)(i.default,{href:"/admin/invoices/recurring/new",children:(0,t.jsxs)(l.Button,{children:[(0,t.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"Create Recurring Invoice"]})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Recurring Invoices"}),(0,t.jsxs)(s.CardDescription,{children:[p.length," total recurring invoices"]})]}),(0,t.jsx)(s.CardContent,{children:0===p.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(m.FileText,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No recurring invoices"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a recurring invoice to automatically generate invoices on a schedule."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(i.default,{href:"/admin/invoices/recurring/new",children:(0,t.jsxs)(l.Button,{children:[(0,t.jsx)(c.Plus,{className:"mr-2 h-4 w-4"}),"Create Recurring Invoice"]})})})]}):(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{children:"Name"}),(0,t.jsx)(o.TableHead,{children:"Customer"}),(0,t.jsx)(o.TableHead,{children:"Frequency"}),(0,t.jsx)(o.TableHead,{children:"Next Run"}),(0,t.jsx)(o.TableHead,{children:"Last Run"}),(0,t.jsx)(o.TableHead,{children:"Status"}),(0,t.jsx)(o.TableHead,{children:"Generated"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(o.TableBody,{children:p.map(e=>{var a,r;let s;return(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableCell,{className:"font-medium",children:(0,t.jsx)(i.default,{href:`/admin/invoices/recurring/${e.id}`,className:"text-blue-600 hover:underline",children:e.name})}),(0,t.jsx)(o.TableCell,{children:e.customerEmail||"N/A"}),(0,t.jsx)(o.TableCell,{children:(a=e.frequency,r=e.interval,s={DAILY:"Daily",WEEKLY:"Weekly",MONTHLY:"Monthly",QUARTERLY:"Quarterly",YEARLY:"Yearly",CUSTOM:"Custom"},r>1?`Every ${r} ${s[a].toLowerCase()}s`:s[a])}),(0,t.jsx)(o.TableCell,{children:e.nextRunDate?new Date(e.nextRunDate).toLocaleDateString():"-"}),(0,t.jsx)(o.TableCell,{children:e.lastRunDate?new Date(e.lastRunDate).toLocaleDateString():"Never"}),(0,t.jsx)(o.TableCell,{children:(0,t.jsx)(n.Badge,{className:e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:e.isActive?"Active":"Paused"})}),(0,t.jsxs)(o.TableCell,{children:[e.generatedInvoices?.length||0," invoices"]}),(0,t.jsx)(o.TableCell,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>H(e.id),disabled:A===e.id,children:A===e.id?(0,t.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(u.Play,{className:"h-4 w-4"})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>S(e.id,e.isActive),children:e.isActive?(0,t.jsx)(f.default,{className:"h-4 w-4"}):(0,t.jsx)(u.Play,{className:"h-4 w-4"})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>{C(e.id),D(!0)},children:(0,t.jsx)(x.Trash2,{className:"h-4 w-4 text-red-600"})})]})})]},e.id)})})]})})})]}),(0,t.jsx)(g.AlertDialog,{open:w,onOpenChange:D,children:(0,t.jsxs)(g.AlertDialogContent,{children:[(0,t.jsxs)(g.AlertDialogHeader,{children:[(0,t.jsx)(g.AlertDialogTitle,{children:"Delete Recurring Invoice?"}),(0,t.jsx)(g.AlertDialogDescription,{children:"This will permanently delete this recurring invoice. This action cannot be undone. Generated invoices will not be affected."})]}),(0,t.jsxs)(g.AlertDialogFooter,{children:[(0,t.jsx)(g.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(g.AlertDialogAction,{onClick:F,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}e.s(["default",()=>p],285960)}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a4f8b7ed-b9bb-53fe-a73a-5ce2828bc9d4")}catch(e){}}();
//# debugId=a4f8b7ed-b9bb-53fe-a73a-5ce2828bc9d4
