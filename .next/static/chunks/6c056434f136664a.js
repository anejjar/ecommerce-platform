(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,857127,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(618566),a=e.i(217255),l=e.i(657688),i=e.i(322663),n=e.i(270756),o=e.i(150965),d=e.i(346897),c=e.i(39312),m=e.i(664659),u=e.i(655900),h=e.i(519455),x=e.i(793479),p=e.i(110204),g=e.i(629288),y=e.i(110075),j=e.i(10223),f=e.i(705766),b=e.i(948148),v=e.i(455225),N=e.i(967489),w=e.i(531278);function k({value:e,onChange:r,label:a="Region",required:l=!1}){let[i,n]=(0,t.useState)([]),[o,d]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{!async function(){try{let e=await fetch("/api/regions");if(e.ok){let s=await e.json();n(s)}}catch(e){console.error("Error fetching regions:",e)}finally{d(!1)}}()},[]),o)?(0,s.jsxs)("div",{className:"space-y-2",children:[a&&(0,s.jsx)(p.Label,{children:a}),(0,s.jsxs)("div",{className:"flex items-center gap-2 h-10 px-3 py-2 border rounded-md bg-muted",children:[(0,s.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading regions..."})]})]}):0===i.length?(0,s.jsxs)("div",{className:"space-y-2",children:[a&&(0,s.jsx)(p.Label,{children:a}),(0,s.jsx)("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center",children:"No regions available"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[a&&(0,s.jsxs)(p.Label,{htmlFor:"region",children:[a,l&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)(N.Select,{value:e,onValueChange:r,children:[(0,s.jsx)(N.SelectTrigger,{id:"region",children:(0,s.jsx)(N.SelectValue,{placeholder:"Select a region"})}),(0,s.jsx)(N.SelectContent,{children:i.map(e=>(0,s.jsx)(N.SelectItem,{value:e.id,children:e.name},e.id))})]})]})}function S({value:e,onChange:r,regionId:a,label:l="City",required:i=!1}){let[n,o]=(0,t.useState)([]),[d,c]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{a?async function(){c(!0);try{let e=await fetch(`/api/cities?regionId=${a}`);if(e.ok){let s=await e.json();o(s)}}catch(e){console.error("Error fetching cities:",e)}finally{c(!1)}}():o([])},[a]),a)?d?(0,s.jsxs)("div",{className:"space-y-2",children:[l&&(0,s.jsx)(p.Label,{children:l}),(0,s.jsxs)("div",{className:"flex items-center gap-2 h-10 px-3 py-2 border rounded-md bg-muted",children:[(0,s.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading cities..."})]})]}):0===n.length?(0,s.jsxs)("div",{className:"space-y-2",children:[l&&(0,s.jsx)(p.Label,{children:l}),(0,s.jsx)("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center",children:"No cities available for this region"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[l&&(0,s.jsxs)(p.Label,{htmlFor:"city",children:[l,i&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)(N.Select,{value:e,onValueChange:r,children:[(0,s.jsx)(N.SelectTrigger,{id:"city",children:(0,s.jsx)(N.SelectValue,{placeholder:"Select a city"})}),(0,s.jsx)(N.SelectContent,{children:n.map(e=>(0,s.jsx)(N.SelectItem,{value:e.name,children:e.name},e.id))})]})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[l&&(0,s.jsx)(p.Label,{children:l}),(0,s.jsx)("div",{className:"h-10 px-3 py-2 border rounded-md bg-muted text-sm text-muted-foreground flex items-center",children:"Please select a region first"})]})}function C({value:e,onChange:r,onAddressSelect:a,label:l="Address",required:i=!1}){let[n,o]=(0,t.useState)([]),[d,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(!1),h=(0,t.useRef)(),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let y=async e=>{if(e.length<3)return void o([]);c(!0);try{let s=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(e)}&countrycodes=ma&format=json&addressdetails=1&limit=5`,{headers:{"User-Agent":"EcommercePlatform/1.0"}});if(s.ok){let e=await s.json();o(e),u(!0)}}catch(e){console.error("Error fetching address suggestions:",e)}finally{c(!1)}};return(0,s.jsxs)("div",{className:"space-y-2",ref:g,children:[l&&(0,s.jsxs)(p.Label,{htmlFor:"address",children:[l,i&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Input,{id:"address",value:e,onChange:e=>{let s=e.target.value;r(s),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{y(s)},1e3)},placeholder:"Start typing your address...",required:i}),d&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,s.jsx)(w.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"})}),m&&n.length>0&&(0,s.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:n.map(e=>(0,s.jsx)("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>(e=>{let{address:s}=e,t=[];s.house_number&&t.push(s.house_number),s.road&&t.push(s.road);let l=t.join(" ")||e.display_name.split(",")[0];a({address:l,city:s.city||s.town||s.village||"",state:s.state||"",zip:s.postcode||"",country:s.country||"Morocco"}),r(l),u(!1),o([])})(e),children:e.display_name},e.place_id))})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start typing to see address suggestions"})]})}let P=["email","firstName","lastName","company","phone","alternativePhone","address","address2","city","state","country","deliveryDate","deliveryInstructions","giftMessage","orderNotes"];var L=e.i(634598),T=e.i(776223),I=e.i(102690),F=e.i(165863),D=e.i(643531),B=e.i(975157);function q({currentStep:e,steps:t}){let r=t.map((s,t)=>({id:s,label:s,completed:t<e,active:t===e}));return(0,s.jsx)("div",{className:"w-full py-6 md:py-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,s.jsx)("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200 -z-10",children:(0,s.jsx)("div",{className:"h-full bg-amber-600 transition-all duration-500 ease-in-out",style:{width:`${e/(t.length-1)*100}%`}})}),r.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,s.jsx)("div",{className:(0,B.cn)("relative w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-semibold text-sm md:text-base transition-all duration-300",e.completed?"bg-amber-600 text-white shadow-lg scale-110":e.active?"bg-amber-600 text-white shadow-lg ring-4 ring-amber-200 scale-110":"bg-gray-200 text-gray-500"),children:e.completed?(0,s.jsx)(D.Check,{className:"w-5 h-5 md:w-6 md:h-6"}):(0,s.jsx)("span",{children:t+1})}),(0,s.jsx)("div",{className:"mt-3 text-center max-w-[100px] md:max-w-none",children:(0,s.jsx)("p",{className:(0,B.cn)("text-xs md:text-sm font-medium transition-colors",e.active||e.completed?"text-amber-900 font-semibold":"text-gray-500"),children:e.label})})]},e.id))]})})}var A=e.i(598855);function M(){let e=(0,b.useTranslations)(),N=(0,r.useRouter)(),{data:w,status:D}=(0,a.useSession)(),B=(0,y.useAppDispatch)(),M=(0,y.useAppSelector)(e=>e.cart.items),[$,E]=(0,t.useState)(!1),{format:R}=(0,v.useCurrency)(),O=function(e){let[s,r]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{!async function(){try{let s=await fetch(`/api/features/check/${e}`),t=await s.json();r(t.enabled||!1)}catch(s){console.error(`Error checking feature flag ${e}:`,s),r(!1)}finally{l(!1)}}()},[e]),s}("checkout_customization"),[U,G]=(0,t.useState)(null),[z,_]=(0,t.useState)([]),[V,J]=(0,t.useState)(null),[K,W]=(0,t.useState)(!1),[H,X]=(0,t.useState)(""),[Z,Q]=(0,t.useState)({email:w?.user?.email||"",firstName:"",lastName:"",company:"",address:"",address2:"",city:"",state:"",country:"Morocco",phone:"",orderNotes:"",alternativePhone:"",deliveryInstructions:"",giftMessage:"",deliveryDate:""}),[Y,ee]=(0,t.useState)({}),[es,et]=(0,t.useState)(!1),[er,ea]=(0,t.useState)(!1),[el,ei]=(0,t.useState)(""),[en,eo]=(0,t.useState)(""),[ed,ec]=(0,t.useState)(null),[em,eu]=(0,t.useState)(""),[eh,ex]=(0,t.useState)(!1),ep=(0,t.useMemo)(()=>{if(!U||!O)return{};let e={};return U.fontFamily&&(e.fontFamily=({system:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',inter:'"Inter", sans-serif',roboto:'"Roboto", sans-serif',opensans:'"Open Sans", sans-serif'})[U.fontFamily]),e},[U,O]),eg=(0,t.useMemo)(()=>U&&O?({narrow:"max-w-4xl mx-auto px-4 py-8",normal:"container mx-auto px-4 py-8",wide:"max-w-7xl mx-auto px-4 py-8"})[U.pageWidth||"normal"]:"container mx-auto px-4 py-8",[U,O]),ey=(0,t.useMemo)(()=>U&&O?({rounded:"rounded-md",square:"rounded-none",pill:"rounded-full"})[U.buttonStyle||"rounded"]:"",[U,O]);(0,t.useMemo)(()=>U&&O&&U.secondaryColor?{borderColor:U.secondaryColor,color:U.secondaryColor}:{},[U,O]),(0,t.useMemo)(()=>O&&U?.fieldOrder&&U.fieldOrder.length>0?U.fieldOrder:P,[U,O]);let ej=(e,s)=>O&&U?.fieldLabels&&U.fieldLabels[e]?U.fieldLabels[e]:s,ef=(e,s)=>O&&U?.fieldPlaceholders&&U.fieldPlaceholders[e]?U.fieldPlaceholders[e]:s||"";(0,t.useEffect)(()=>{eb()},[]);let eb=async()=>{try{let e=await fetch("/api/checkout-settings");if(e.ok){let s=await e.json();G(s)}}catch(e){console.error("Error fetching checkout settings:",e)}};(0,t.useEffect)(()=>{w?.user&&ev()},[w]);let ev=async()=>{try{let e=await fetch("/api/account/addresses");if(e.ok){let s=await e.json();_(s||[]);let t=s.find(e=>e.isDefault);t&&!K&&eN(t.id)}}catch(e){console.error("Error fetching saved addresses:",e)}},eN=e=>{let s=z.find(s=>s.id===e);s&&(J(e),W(!1),Q({...Z,firstName:s.firstName,lastName:s.lastName,company:s.company||"",address:s.address1,address2:s.address2||"",city:s.city,state:s.state||"",country:s.country,phone:s.phone||""}))},ew=()=>{W(!0),J(null),Q({email:w?.user?.email||Z.email,firstName:"",lastName:"",company:"",address:"",address2:"",city:"",state:"",country:"Morocco",phone:"",orderNotes:""}),X("")},ek=M.reduce((e,s)=>e+s.price*s.quantity,0),eS=.1*ek,eC=ek>50?0:10,eP=ek+eS+eC,eL=ed?Math.max(0,eP-ed.discountAmount):eP,eT=e=>{Q({...Z,[e.target.name]:e.target.value})},eI=async()=>{if(en.trim()){ex(!0),eu("");try{let s=await fetch("/api/discounts/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:en,cartTotal:ek})}),t=await s.json();s.ok?(ec(t),f.default.success(e("checkout.discountApplied"))):(eu(t.error||e("checkout.invalidDiscount")),ec(null))}catch(s){eu(e("checkout.failedToApplyDiscount"))}finally{ex(!1)}}},eF=()=>{ec(null),eo(""),eu("")},eD=()=>(0,s.jsxs)(s.Fragment,{children:[O&&U?.trustBadges&&U.trustBadges.length>0&&(0,s.jsx)(A.TrustBadges,{badges:U.trustBadges.filter(e=>"sidebar"===e.position)}),O&&U?.showUpsells&&U.upsellProducts&&U.upsellProducts.length>0&&"cart"===U.upsellPosition&&(0,s.jsx)(UpsellProducts,{productIds:U.upsellProducts,title:U.upsellTitle||void 0,position:"cart"}),O&&U?.scarcityMessage&&(0,s.jsx)("div",{className:`p-3 rounded-lg border ${"danger"===U.urgencyBadgeStyle?"bg-red-50 border-red-200 text-red-800":"info"===U.urgencyBadgeStyle?"bg-blue-50 border-blue-200 text-blue-800":"bg-yellow-50 border-yellow-200 text-yellow-800"}`,children:(0,s.jsx)("p",{className:"text-sm font-medium",children:U.scarcityMessage})}),O&&U?.showSecuritySeals&&(0,s.jsx)(A.SecuritySeals,{}),O&&U?.customerServiceDisplay&&(0,s.jsx)(A.CustomerServiceDisplay,{text:U.customerServiceText||void 0,phone:U.customerServicePhone||void 0,email:U.customerServiceEmail||void 0}),(0,s.jsx)("div",{className:"space-y-3 mb-4 border-b pb-4",children:M.map(t=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"relative w-16 h-16 bg-gray-100 rounded flex-shrink-0",children:t.image?(0,s.jsx)(l.default,{src:t.image,alt:t.name,fill:!0,className:"object-cover rounded"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"ðŸ“¦"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e("checkout.qty")," ",t.quantity]}),O&&U?.showLowStock&&U.lowStockThreshold&&t.stock&&t.stock<=U.lowStockThreshold&&(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,s.jsx)("span",{className:"text-orange-600 text-xs",children:"âš ï¸"}),(0,s.jsx)("p",{className:"text-xs text-orange-600 font-medium",children:U.lowStockText?.replace("X",t.stock.toString())||`Only ${t.stock} left!`})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("p",{className:"font-medium",children:R(t.price*t.quantity)})})]})},t.id))}),O&&U?.showLoyaltyPoints&&U.loyaltyPointsText&&(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-sm text-amber-800",children:U.loyaltyPointsText})}),O&&U?.showGiftWithPurchase&&U.giftThreshold&&ek>=U.giftThreshold&&(0,s.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-purple-600",children:"ðŸŽ"}),(0,s.jsx)("p",{className:"text-sm text-purple-800",children:U.giftDescription})]})}),O&&U?.referralDiscountEnabled&&U.referralDiscountText&&(0,s.jsx)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-sm text-indigo-800",children:U.referralDiscountText})}),(0,s.jsxs)("div",{className:`border-b pb-4 ${U?.discountFieldPosition==="top"?"order-first":U?.discountFieldPosition==="bottom"?"order-last":""}`,children:[(0,s.jsx)(p.Label,{htmlFor:"discountCode",className:"mb-2 block",children:e("checkout.discountCode")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(x.Input,{id:"discountCode",value:en,onChange:e=>eo(e.target.value),placeholder:e("checkout.enterCode"),disabled:!!ed}),ed?(0,s.jsx)(h.Button,{type:"button",variant:"outline",onClick:eF,className:"shrink-0",style:O&&U?.secondaryColor?{borderColor:U.secondaryColor,color:U.secondaryColor}:{},children:e("cart.remove")}):(0,s.jsx)(h.Button,{type:"button",variant:"outline",onClick:eI,disabled:eh||!en,className:"shrink-0",children:e("checkout.apply")})]}),em&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:em}),ed&&(0,s.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[e("checkout.discountAppliedLabel")," ",ed.code]})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:e("cart.subtotal")}),(0,s.jsx)("span",{className:"font-medium",children:R(ek)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:[e("cart.tax")," (10%)"]}),(0,s.jsx)("span",{className:"font-medium",children:R(eS)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:e("cart.shipping")}),(0,s.jsx)("span",{className:"font-medium",children:0===eC?(0,s.jsx)("span",{className:"text-green-600",children:e("cart.free")}):R(eC)})]}),ed&&(0,s.jsxs)("div",{className:"flex justify-between text-sm text-green-600 font-medium",children:[(0,s.jsx)("span",{children:e("checkout.discount")}),(0,s.jsxs)("span",{children:["-",R(ed.discountAmount)]})]})]}),(0,s.jsx)("div",{className:"border-t pt-4 mb-6",style:O&&U?.secondaryColor?{borderTopColor:U.secondaryColor}:{},children:(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,s.jsx)("span",{children:e("cart.total")}),(0,s.jsx)("span",{children:R(eL)})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(h.Button,{type:"submit",size:"lg",className:`w-full text-lg font-bold py-6 shadow-lg hover:shadow-xl transition-all ${ey}`,disabled:$,style:{backgroundColor:U?.primaryColor||void 0,borderColor:U?.primaryColor||void 0},children:$?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"animate-spin",children:"â³"}),e("checkout.placingOrder")]}):(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(n.Lock,{className:"w-5 h-5"}),e("checkout.placeOrder")," - ",R(eL)]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)(n.Lock,{className:"w-4 h-4 text-green-600"}),(0,s.jsx)("span",{className:"font-medium",children:"Secure Checkout"}),(0,s.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,s.jsx)("span",{children:"SSL Encrypted"})]}),(0,s.jsxs)("div",{className:"text-xs text-center text-gray-600",children:[(0,s.jsx)("p",{children:e("checkout.agreeToTerms")}),(0,s.jsx)("p",{children:(0,s.jsx)(i.Link,{href:"/terms",className:"underline hover:text-primary",children:e("footer.terms")})})]})]})]}),eB=(t=!0)=>(0,s.jsxs)("div",{className:`bg-white rounded-lg shadow-sm p-6 space-y-6 ${t?"sticky top-24":""}`,children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:e("cart.orderSummary")}),eD()]}),eq=async s=>{if(s.preventDefault(),!w&&!Z.email)return void f.default.error(e("checkout.enterEmail"));if(!w&&er&&el.length<6)return void f.default.error(e("checkout.passwordLength"));E(!0);try{let s=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:M.map(e=>({productId:e.productId,quantity:e.quantity,variantId:e.variantId||null})),shippingAddress:{address1:Z.address,address2:Z.address2,company:Z.company,city:Z.city,state:Z.state,country:Z.country},customerInfo:{firstName:Z.firstName,lastName:Z.lastName,email:Z.email,phone:Z.phone,alternativePhone:Z.alternativePhone},orderNotes:Z.orderNotes,deliveryInstructions:Z.deliveryInstructions,giftMessage:Z.giftMessage,deliveryDate:Z.deliveryDate,customFields:Y,isGuest:!w,createAccount:!w&&er,password:!w&&er?el:void 0,discountCodeId:ed?.id})});if(s.ok){let t=await s.json();B((0,j.clearCart)()),f.default.success(e("checkout.orderSuccess")),N.push(`/order-confirmation/${t.orderNumber}`)}else{let t=await s.json();f.default.error(t.error||e("checkout.orderFailed"))}}catch(s){f.default.error(e("common.error"))}finally{E(!1)}};return 0===M.length?(0,s.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,s.jsx)("div",{className:"max-w-md mx-auto text-center",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12",children:[(0,s.jsx)(o.ShoppingBag,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:e("cart.emptyCart")}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:e("cart.addProducts")}),(0,s.jsx)(i.Link,{href:"/shop",children:(0,s.jsx)(h.Button,{size:"lg",children:e("cart.continueShopping")})})]})})}):"loading"===D?(0,s.jsx)("div",{className:"container mx-auto px-4 py-16 text-center",children:(0,s.jsx)("p",{children:e("common.loading")})}):(0,s.jsxs)("div",{style:ep,children:[O&&U?.showCountdownTimer&&U.countdownEndDate&&(0,s.jsx)(L.CountdownTimer,{endDate:new Date(U.countdownEndDate),text:U.countdownText||void 0}),O&&U?.promotionalBanners?.filter(e=>"top"===e.position).map(e=>(0,s.jsx)("div",{className:`p-4 border-b ${"success"===e.type?"bg-green-50 border-green-200 text-green-800":"warning"===e.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"danger"===e.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,s.jsxs)("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.message}),e.link&&e.linkText&&(0,s.jsx)(i.Link,{href:e.link,className:"text-sm font-semibold underline",children:e.linkText})]})},e.id)),(0,s.jsxs)("div",{className:eg,children:[O&&U?.logoUrl&&(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:(0,s.jsx)(l.default,{src:U.logoUrl,alt:"Store Logo",width:180,height:60,className:"h-12 w-auto object-contain"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:e("cart.checkout")}),O&&U?.progressStyle&&"none"!==U.progressStyle&&U?.checkoutLayout==="multi-step"&&(0,s.jsx)("div",{className:"mb-8 bg-white rounded-lg p-4 md:p-6 shadow-sm",children:"steps"===U.progressStyle?(0,s.jsx)(q,{currentStep:0,steps:["Information","Shipping","Payment","Review"]}):"bar"===U.progressStyle?(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Checkout Progress"}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"Step 1 of 4"})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-amber-600 h-2 rounded-full transition-all duration-500",style:{width:"25%"}})})]}):null}),O&&(U?.showTrustRating||U?.showOrderCount)&&(0,s.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4 justify-center",children:[U.showTrustRating&&U.trustRatingScore&&(0,s.jsx)(A.TrustRating,{score:Number(U.trustRatingScore),count:U.trustRatingCount||void 0}),U.showOrderCount&&(0,s.jsx)(A.OrderCountTicker,{text:U.orderCountText||void 0})]}),O&&U?.trustBadges&&U.trustBadges.length>0&&(0,s.jsx)(A.TrustBadges,{badges:U.trustBadges.filter(e=>"header"===e.position)}),U?.checkoutBanner&&(0,s.jsx)("div",{className:`mb-6 p-4 rounded-lg border ${"success"===U.checkoutBannerType?"bg-green-50 border-green-200 text-green-800":"warning"===U.checkoutBannerType?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,s.jsx)("p",{children:U.checkoutBanner})}),O&&U?.showFreeShippingBar&&U.freeShippingThreshold&&(0,s.jsx)(T.FreeShippingBar,{currentAmount:ek,threshold:U.freeShippingThreshold,text:U.freeShippingBarText||void 0}),O&&U?.promotionalBanners?.filter(e=>"middle"===e.position).map(e=>(0,s.jsx)("div",{className:`mb-6 p-4 rounded-lg border ${"success"===e.type?"bg-green-50 border-green-200 text-green-800":"warning"===e.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"danger"===e.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.message}),e.link&&e.linkText&&(0,s.jsx)(i.Link,{href:e.link,className:"text-sm font-semibold underline ml-4",children:e.linkText})]})},e.id)),(0,s.jsxs)("form",{onSubmit:eq,children:[O&&U?.orderSummaryPosition==="top"&&(0,s.jsx)("div",{className:"mb-8",children:eB(!1)}),O&&U?.orderSummaryPosition==="collapsible"&&(0,s.jsxs)("div",{className:"mb-8 bg-white rounded-lg shadow-sm",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>et(!es),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:e("cart.orderSummary")}),es?(0,s.jsx)(m.ChevronDown,{className:"h-5 w-5"}):(0,s.jsx)(u.ChevronUp,{className:"h-5 w-5"})]}),!es&&(0,s.jsx)("div",{className:"px-6 pb-6",children:eD()})]}),(0,s.jsxs)("div",{className:`grid gap-8 ${O&&U?.orderSummaryPosition==="top"||O&&U?.orderSummaryPosition==="collapsible"?"lg:grid-cols-1":"lg:grid-cols-3"}`,children:[(0,s.jsxs)("div",{className:O&&U?.orderSummaryPosition==="right"?"lg:col-span-2":O&&(U?.orderSummaryPosition==="top"||U?.orderSummaryPosition==="collapsible")?"lg:col-span-1":"lg:col-span-2",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",style:O&&U?.secondaryColor?{borderLeft:`4px solid ${U.secondaryColor}`}:{},children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:e("checkout.contactInfo")}),!w&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:(0,s.jsxs)("p",{className:"text-blue-800",children:[e("auth.alreadyHaveAccount")," ",(0,s.jsx)(i.Link,{href:"/auth/signin?callbackUrl=/checkout",className:"font-semibold underline",children:e("auth.signIn")})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Label,{htmlFor:"email",children:ej("email",e("checkout.email"))}),(0,s.jsx)(x.Input,{id:"email",name:"email",type:"email",value:Z.email,onChange:eT,placeholder:ef("email"),required:!0,readOnly:!!w?.user?.email,className:`${ey} focus:ring-2 focus:ring-primary focus:border-primary transition-all`})]}),!w&&er&&(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Label,{htmlFor:"password",children:e("checkout.password")}),(0,s.jsx)(x.Input,{id:"password",name:"password",type:"password",value:el,onChange:e=>ei(e.target.value),required:er,minLength:6})]}),!w&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"createAccount",checked:er,onChange:e=>ea(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded",style:O&&U?.secondaryColor?{accentColor:U.secondaryColor}:{}}),(0,s.jsx)(p.Label,{htmlFor:"createAccount",className:"font-normal cursor-pointer",children:e("checkout.createAccount")})]})]})]}),w&&z.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Saved Addresses"}),z.find(e=>e.isDefault)&&!K&&(0,s.jsxs)(h.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=z.find(e=>e.isDefault);e&&eN(e.id)},className:"gap-2",style:O&&U?.secondaryColor?{borderColor:U.secondaryColor,color:U.secondaryColor}:{},children:[(0,s.jsx)(c.Zap,{className:"h-4 w-4"}),"Use Default Address"]})]}),(0,s.jsxs)(g.RadioGroup,{value:K?"new":V||"",onValueChange:e=>{"new"===e?ew():eN(e)},className:"space-y-3",children:[z.map(e=>(0,s.jsxs)("div",{className:`flex items-start space-x-3 p-4 border rounded-lg cursor-pointer transition-colors ${V===e.id&&!K?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>eN(e.id),children:[(0,s.jsx)(g.RadioGroupItem,{value:e.id,id:e.id,className:"mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(p.Label,{htmlFor:e.id,className:"font-semibold cursor-pointer",children:[e.firstName," ",e.lastName]}),e.isDefault&&(0,s.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:"Default"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.address1,e.address2&&`, ${e.address2}`]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.city,", ",e.state," ",e.postalCode]}),e.phone&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.phone})]})]},e.id)),(0,s.jsxs)("div",{className:`flex items-start space-x-3 p-4 border rounded-lg cursor-pointer transition-colors ${K?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:ew,children:[(0,s.jsx)(g.RadioGroupItem,{value:"new",id:"new-address",className:"mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(p.Label,{htmlFor:"new-address",className:"font-semibold cursor-pointer flex items-center gap-2",children:[(0,s.jsx)(d.MapPin,{className:"h-4 w-4"}),"Use a new address"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Enter a different shipping address"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 mb-6 transition-shadow hover:shadow-lg",style:O&&U?.secondaryColor?{borderLeft:`4px solid ${U.secondaryColor}`}:{},children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:"2"}),e("checkout.shippingAddress")]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Label,{htmlFor:"firstName",children:ej("firstName",e("checkout.firstName"))}),(0,s.jsx)(x.Input,{id:"firstName",name:"firstName",value:Z.firstName,onChange:eT,placeholder:ef("firstName"),className:ey,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Label,{htmlFor:"lastName",children:ej("lastName",e("checkout.lastName"))}),(0,s.jsx)(x.Input,{id:"lastName",name:"lastName",value:Z.lastName,onChange:eT,placeholder:ef("lastName"),className:ey,required:!0})]}),U?.showCompany&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(p.Label,{htmlFor:"company",children:ej("company","Company (optional)")}),(0,s.jsx)(x.Input,{id:"company",name:"company",value:Z.company,onChange:eT,placeholder:ef("company"),className:ey})]}),(0,s.jsx)("div",{className:"col-span-2",children:O?(0,s.jsx)(C,{value:Z.address,onChange:e=>Q({...Z,address:e}),onAddressSelect:e=>{Q({...Z,address:e.address,city:e.city,state:e.state,country:e.country})},label:e("checkout.address"),required:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Label,{htmlFor:"address",children:e("checkout.address")}),(0,s.jsx)(x.Input,{id:"address",name:"address",value:Z.address,onChange:eT,placeholder:"Street address",required:!0})]})}),!O&&(0,s.jsx)("div",{children:(0,s.jsx)(k,{value:H,onChange:e=>{X(e),Q({...Z,city:"",state:e})},label:"Region",required:!0})}),(0,s.jsx)("div",{children:O?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Label,{htmlFor:"city",children:e("checkout.city")}),(0,s.jsx)(x.Input,{id:"city",name:"city",value:Z.city,onChange:eT,required:!0})]}):(0,s.jsx)(S,{value:Z.city,onChange:e=>Q({...Z,city:e}),regionId:H,label:e("checkout.city"),required:!0})}),O&&(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Label,{htmlFor:"state",children:e("checkout.state")}),(0,s.jsx)(x.Input,{id:"state",name:"state",value:Z.state,onChange:eT})]}),U?.showAddressLine2&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(p.Label,{htmlFor:"address2",children:"Apartment, suite, etc. (optional)"}),(0,s.jsx)(x.Input,{id:"address2",name:"address2",value:Z.address2,onChange:eT})]}),U?.showPhone&&(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Label,{htmlFor:"phone",children:ej("phone","Phone Number")}),(0,s.jsx)(x.Input,{id:"phone",name:"phone",type:"tel",value:Z.phone,onChange:eT,placeholder:ef("phone"),className:ey,required:U?.requirePhone})]}),U?.showAlternativePhone&&(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Label,{htmlFor:"alternativePhone",children:ej("alternativePhone","Alternative Phone")}),(0,s.jsx)(x.Input,{id:"alternativePhone",name:"alternativePhone",type:"tel",value:Z.alternativePhone,onChange:eT,placeholder:ef("alternativePhone"),className:ey})]}),U?.showDeliveryDate&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(p.Label,{htmlFor:"deliveryDate",children:ej("deliveryDate","Preferred Delivery Date")}),(0,s.jsx)(x.Input,{id:"deliveryDate",name:"deliveryDate",type:"date",value:Z.deliveryDate,onChange:eT,className:ey})]}),U?.showDeliveryInstructions&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(p.Label,{htmlFor:"deliveryInstructions",children:U?.deliveryInstructionsLabel||ej("deliveryInstructions","Delivery Instructions")}),(0,s.jsx)("textarea",{id:"deliveryInstructions",name:"deliveryInstructions",value:Z.deliveryInstructions,onChange:e=>Q({...Z,deliveryInstructions:e.target.value}),className:`w-full min-h-[80px] px-3 py-2 border ${ey}`,placeholder:ef("deliveryInstructions","e.g., Leave at front door")})]}),U?.showGiftMessage&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(p.Label,{htmlFor:"giftMessage",children:U?.giftMessageLabel||ej("giftMessage","Gift Message")}),(0,s.jsx)("textarea",{id:"giftMessage",name:"giftMessage",value:Z.giftMessage,onChange:e=>Q({...Z,giftMessage:e.target.value}),className:`w-full min-h-[80px] px-3 py-2 border ${ey}`,placeholder:ef("giftMessage","Add a personalized gift message...")})]}),U?.enableOrderNotes&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(p.Label,{htmlFor:"orderNotes",children:U?.orderNotesLabel||ej("orderNotes","Order notes (optional)")}),(0,s.jsx)("textarea",{id:"orderNotes",name:"orderNotes",value:Z.orderNotes,onChange:e=>Q({...Z,orderNotes:e.target.value}),className:`w-full min-h-[80px] px-3 py-2 border ${ey}`,placeholder:ef("orderNotes","Any special instructions for your order...")})]}),U?.customFields&&U.customFields.length>0&&(0,s.jsx)(s.Fragment,{children:U.customFields.map(e=>(0,s.jsxs)("div",{className:"textarea"===e.type||"select"===e.type?"col-span-2":"",children:[(0,s.jsxs)(p.Label,{htmlFor:e.id,children:[e.label,e.required&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"text"===e.type&&(0,s.jsx)(x.Input,{id:e.id,value:Y[e.id]||"",onChange:s=>ee({...Y,[e.id]:s.target.value}),placeholder:e.placeholder,required:e.required,className:ey}),"textarea"===e.type&&(0,s.jsx)("textarea",{id:e.id,value:Y[e.id]||"",onChange:s=>ee({...Y,[e.id]:s.target.value}),placeholder:e.placeholder,required:e.required,className:`w-full min-h-[80px] px-3 py-2 border ${ey}`}),"select"===e.type&&(0,s.jsxs)("select",{id:e.id,value:Y[e.id]||"",onChange:s=>ee({...Y,[e.id]:s.target.value}),required:e.required,className:`w-full px-3 py-2 border ${ey}`,children:[(0,s.jsx)("option",{value:"",children:"Select an option..."}),e.options?.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),"checkbox"===e.type&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("input",{type:"checkbox",id:e.id,checked:Y[e.id]||!1,onChange:s=>ee({...Y,[e.id]:s.target.checked}),className:"w-4 h-4",required:e.required}),(0,s.jsx)(p.Label,{htmlFor:e.id,className:"font-normal cursor-pointer",children:e.placeholder||e.label})]}),"date"===e.type&&(0,s.jsx)(x.Input,{type:"date",id:e.id,value:Y[e.id]||"",onChange:s=>ee({...Y,[e.id]:s.target.value}),required:e.required,className:ey})]},e.id))})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,s.jsx)(n.Lock,{className:"w-4 h-4 inline mr-1"}),(0,s.jsx)("strong",{children:e("common.note")})," ",e("checkout.paymentNote")]})})]}),(!O||!U?.orderSummaryPosition||"right"===U.orderSummaryPosition)&&(0,s.jsx)("div",{className:"lg:col-span-1",children:eB(!0)})]})]}),O&&U?.showUpsells&&U.upsellProducts&&U.upsellProducts.length>0&&"below-form"===U.upsellPosition&&(0,s.jsx)(UpsellProducts,{productIds:U.upsellProducts,title:U.upsellTitle||void 0,position:"below-form"}),O&&U?.showUpsells&&U.upsellProducts&&U.upsellProducts.length>0&&"modal"===U.upsellPosition&&(0,s.jsx)(UpsellProducts,{productIds:U.upsellProducts,title:U.upsellTitle||void 0,position:"modal"}),O&&U?.moneyBackGuarantee&&(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(A.MoneyBackGuarantee,{text:U.moneyBackGuarantee})}),O&&U?.showTestimonials&&U.testimonials&&U.testimonials.length>0&&(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(I.TestimonialsCarousel,{testimonials:U.testimonials})}),O&&U?.trustBadges&&U.trustBadges.length>0&&(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(A.TrustBadges,{badges:U.trustBadges.filter(e=>"footer"===e.position)})}),O&&U?.promotionalBanners?.filter(e=>"bottom"===e.position).map(e=>(0,s.jsx)("div",{className:`mt-6 p-4 rounded-lg border ${"success"===e.type?"bg-green-50 border-green-200 text-green-800":"warning"===e.type?"bg-yellow-50 border-yellow-200 text-yellow-800":"danger"===e.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.message}),e.link&&e.linkText&&(0,s.jsx)(i.Link,{href:e.link,className:"text-sm font-semibold underline ml-4",children:e.linkText})]})},e.id))]}),O&&U?.showRecentPurchases&&(0,s.jsx)(F.RecentPurchasePopup,{delay:U.recentPurchaseDelay||5e3})]})}e.s(["CheckoutContent",()=>M],857127)}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0fe2c266-1968-502f-a45d-a073aef11445")}catch(e){}}();
//# debugId=0fe2c266-1968-502f-a45d-a073aef11445
