(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,180127,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>t])},871689,e=>{"use strict";var t=e.i(180127);e.s(["ArrowLeft",()=>t.default])},793479,e=>{"use strict";var t=e.i(843476),a=e.i(975157);function s({className:e,type:s,...r}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},110204,e=>{"use strict";var t=e.i(843476),a=e.i(271645);e.i(174080);var s=e.i(991918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let l=(0,s.createSlot)(`Primitive.${r}`),i=a.forwardRef((e,a)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?l:r,{...i,ref:a})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{}),l=a.forwardRef((e,a)=>(0,t.jsx)(r.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=e.i(975157);function n({className:e,...a}){return(0,t.jsx)(l,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none mb-2 group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],110204)},624687,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(975157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},251854,e=>{"use strict";let t=(0,e.i(475254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>t])},356909,e=>{"use strict";var t=e.i(251854);e.s(["Save",()=>t.default])},187942,e=>{"use strict";let t=(0,e.i(475254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t])},286536,e=>{"use strict";var t=e.i(187942);e.s(["Eye",()=>t.default])},776639,e=>{"use strict";var t=e.i(843476),a=e.i(326999),s=e.i(995926),r=e.i(975157);function l({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function i({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function n({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function d({className:e,...s}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function o({className:e,children:l,showCloseButton:i=!0,...o}){return(0,t.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o,children:[l,i&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(s.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function h({className:e,...s}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",e),...s})}function x({className:e,...s}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}e.s(["Dialog",()=>l,"DialogContent",()=>o,"DialogDescription",()=>x,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>h,"DialogTrigger",()=>i])},107233,603908,e=>{"use strict";let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",()=>t],603908),e.s(["Plus",()=>t],107233)},612329,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>t])},727612,e=>{"use strict";var t=e.i(612329);e.s(["Trash2",()=>t.default])},949411,e=>{"use strict";let t=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["default",()=>t])},503116,e=>{"use strict";var t=e.i(949411);e.s(["Clock",()=>t.default])},299023,642310,e=>{"use strict";let t=(0,e.i(475254).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["default",()=>t],642310),e.s(["Minus",()=>t],299023)},879664,e=>{"use strict";let t=(0,e.i(475254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>t])},413824,e=>{"use strict";let t=(0,e.i(475254).default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);e.s(["default",()=>t])},756217,e=>{"use strict";let t=(0,e.i(475254).default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);e.s(["default",()=>t])},751975,855087,e=>{"use strict";let t=(0,e.i(475254).default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["default",()=>t],855087),e.s(["Tag",()=>t],751975)},923960,e=>{"use strict";let t=(0,e.i(475254).default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);e.s(["default",()=>t])},339402,e=>{"use strict";let t=(0,e.i(475254).default)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);e.s(["default",()=>t])},595468,123287,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["default",()=>t],123287),e.s(["CheckCircle2",()=>t],595468)},526943,e=>{"use strict";let t=(0,e.i(475254).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["default",()=>t])},947875,e=>{"use strict";let t=(0,e.i(475254).default)("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);e.s(["default",()=>t])},636368,e=>{"use strict";let t=(0,e.i(475254).default)("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]);e.s(["default",()=>t])},824678,e=>{"use strict";let t=(0,e.i(475254).default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);e.s(["default",()=>t])},582894,192986,e=>{"use strict";var t=e.i(475254);let a=(0,t.default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);e.s(["default",()=>a],582894);let s=(0,t.default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);e.s(["default",()=>s],192986)},406940,e=>{"use strict";let t=(0,e.i(475254).default)("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);e.s(["default",()=>t])},57489,e=>{"use strict";let t=(0,e.i(475254).default)("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);e.s(["default",()=>t])},1878,e=>{"use strict";let t=(0,e.i(475254).default)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);e.s(["default",()=>t])},976667,e=>{"use strict";let t=(0,e.i(475254).default)("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);e.s(["default",()=>t])},424274,393392,57522,e=>{"use strict";var t=e.i(475254);let a=(0,t.default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);e.s(["default",()=>a],424274);let s=(0,t.default)("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]);e.s(["default",()=>s],393392);let r=(0,t.default)("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]);e.s(["default",()=>r],57522)},952571,e=>{"use strict";var t=e.i(879664);e.s(["Info",()=>t.default])},772436,e=>{"use strict";var t=e.i(843476),a=e.i(271645);e.i(174080);var s=e.i(991918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let l=(0,s.createSlot)(`Primitive.${r}`),i=a.forwardRef((e,a)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?l:r,{...i,ref:a})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{}),l="horizontal",i=["horizontal","vertical"],n=a.forwardRef((e,a)=>{var s;let{decorative:n,orientation:d=l,...o}=e,c=(s=d,i.includes(s))?d:l;return(0,t.jsx)(r.div,{"data-orientation":c,...n?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:a})});n.displayName="Separator";var d=e.i(975157);function o({className:e,orientation:a="horizontal",decorative:s=!0,...r}){return(0,t.jsx)(n,{"data-slot":"separator",decorative:s,orientation:a,className:(0,d.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}e.s(["Separator",()=>o],772436)},221345,e=>{"use strict";var t=e.i(526943);e.s(["Link",()=>t.default])},758472,e=>{"use strict";var t=e.i(339402);e.s(["Code",()=>t.default])},473708,e=>{"use strict";var t=e.i(803408);e.s(["Image",()=>t.default])},180752,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(776639),r=e.i(519455),l=e.i(646365),i=e.i(98163),n=e.i(793479),d=e.i(555436),o=e.i(569074),c=e.i(643531),u=e.i(967489),h=e.i(705766);e.s(["MediaPicker",0,({open:e,onOpenChange:x,onSelect:m,multiple:f=!1,type:p})=>{let[g,v]=(0,a.useState)([]),[j,y]=(0,a.useState)(!0),[b,k]=(0,a.useState)([]),[w,N]=(0,a.useState)(!1),[S,M]=(0,a.useState)(""),[C,T]=(0,a.useState)("ALL"),z=async()=>{y(!0);try{let e=new URLSearchParams;S&&e.append("search",S);let t=p||("ALL"!==C?C:void 0);t&&e.append("type",t);let a=await fetch(`/api/media?${e.toString()}`),s=await a.json();if(s.error)throw Error(s.error);v(s.media)}catch(e){console.error(e),h.toast.error("Failed to load media")}finally{y(!1)}};(0,a.useEffect)(()=>{e&&(z(),k([]))},[e,S,C]);let D=e=>{f?k(t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e]):k([e])};return(0,t.jsx)(s.Dialog,{open:e,onOpenChange:x,children:(0,t.jsxs)(s.DialogContent,{className:"max-w-5xl h-[85vh] flex flex-col p-0 gap-0 overflow-hidden",children:[(0,t.jsx)(s.DialogHeader,{className:"p-4 border-b bg-white z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(s.DialogTitle,{className:"text-xl font-semibold",children:"Media Library"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(r.Button,{variant:w?"secondary":"default",size:"sm",onClick:()=>N(!w),children:[(0,t.jsx)(o.Upload,{className:"mr-2 h-4 w-4"}),w?"Back to Library":"Upload New"]})})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col bg-gray-50/50",children:[!w&&(0,t.jsxs)("div",{className:"p-4 border-b bg-white flex flex-col sm:flex-row gap-4 items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,t.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.Input,{placeholder:"Search media files...",className:"pl-9 bg-gray-50 border-gray-200 focus:bg-white transition-colors",value:S,onChange:e=>M(e.target.value)})]}),!p&&(0,t.jsx)("div",{className:"w-full sm:w-[200px]",children:(0,t.jsxs)(u.Select,{value:C,onValueChange:T,children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Filter by type"})}),(0,t.jsxs)(u.SelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"ALL",children:"All Media"}),(0,t.jsx)(u.SelectItem,{value:"IMAGE",children:"Images"}),(0,t.jsx)(u.SelectItem,{value:"VIDEO",children:"Videos"}),(0,t.jsx)(u.SelectItem,{value:"DOCUMENT",children:"Documents"})]})]})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:w?(0,t.jsx)(i.MediaUploader,{onUploadComplete:()=>{z(),N(!1),h.toast.success("Upload complete")}}):(0,t.jsx)(l.MediaGrid,{items:g,selectedItems:b.map(e=>e.id),onSelect:e=>D(e),onItemClick:e=>D(e),loading:j})})]}),(0,t.jsxs)("div",{className:"p-4 border-t bg-white flex justify-between items-center z-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[b.length," item",1!==b.length&&"s"," selected"]}),b.length>0&&(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>k([]),className:"text-muted-foreground hover:text-foreground",children:"Clear selection"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,t.jsxs)(r.Button,{onClick:()=>{m(b),x(!1)},disabled:0===b.length,className:"px-8",children:[(0,t.jsx)(c.Check,{className:"mr-2 h-4 w-4"}),"Insert Selected"]})]})]})]})})}])},865960,e=>{"use strict";var t=e.i(947875);e.s(["Quote",()=>t.default])},426612,e=>{"use strict";var t=e.i(636368);e.s(["AlignLeft",()=>t.default])},370956,e=>{"use strict";var t=e.i(824678);e.s(["List",()=>t.default])},398361,e=>{"use strict";var t=e.i(923960);e.s(["Maximize2",()=>t.default])},726336,e=>{"use strict";var t=e.i(756217);e.s(["Minimize2",()=>t.default])},479102,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(618566),r=e.i(519455),l=e.i(793479),i=e.i(110204),n=e.i(624687),d=e.i(967489),o=e.i(980376),c=e.i(772436),u=e.i(169222),h=e.i(871689),x=e.i(356909),m=e.i(286536),f=e.i(239616),p=e.i(473708),g=e.i(37727),v=e.i(398361),j=e.i(726336),y=e.i(531278),b=e.i(595468),k=e.i(503116),w=e.i(178583),N=e.i(569074),S=e.i(413824),S=S,M=e.i(751975),C=e.i(555436),T=e.i(952571),z=e.i(63209),D=e.i(705766);function I(e,t=200){if(!e||""===e.trim())return{wordCount:0,characterCount:0,readingTimeMinutes:0};let a=e.replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").replace(/&[a-z]+;/g," ").replace(/\s+/g," ").trim(),s=a.replace(/\s/g,"").length,r=a.split(/\s+/).filter(e=>e.length>0).length,l=Math.ceil(r/t);return{wordCount:r,characterCount:s,readingTimeMinutes:Math.max(1,l)}}function L(e){return 0===e?"< 1 min read":1===e?"1 min read":`${e} min read`}var P=e.i(657688),A=e.i(180752),H=e.i(975157);function E({params:e}){let{id:E}=(0,a.use)(e),F=(0,s.useRouter)(),R="new"===E,V=(0,a.useRef)(null),B=(0,a.useRef)(null),[U,O]=(0,a.useState)(!R),[$,q]=(0,a.useState)(!1),[K,_]=(0,a.useState)(!1),[G,J]=(0,a.useState)(null),[X,Q]=(0,a.useState)([]),[W,Y]=(0,a.useState)(!1),[Z,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)(!1),[es,er]=(0,a.useState)(""),[el,ei]=(0,a.useState)(""),[en,ed]=(0,a.useState)(""),[eo,ec]=(0,a.useState)(""),[eu,eh]=(0,a.useState)("DRAFT"),[ex,em]=(0,a.useState)(null),[ef,ep]=(0,a.useState)([]),[eg,ev]=(0,a.useState)(""),[ej,ey]=(0,a.useState)(""),[eb,ek]=(0,a.useState)(""),[ew,eN]=(0,a.useState)(!1),[eS,eM]=(0,a.useState)(!1),eC=I(en),eT=I(es);(0,a.useEffect)(()=>{eD(),R?setTimeout(()=>{V.current?.focus()},100):eI()},[E]);let ez=(0,a.useCallback)(async()=>{let e=el;if(es&&!el&&(ei(e=es.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")),eN(!1)),!es||!e){D.default.error("Title is required"),es?Y(!0):V.current?.focus();return}try{q(!0);let t=R?"/api/admin/cms/posts":`/api/admin/cms/posts/${E}`,a=R?"POST":"PUT",s=await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:es,slug:e,content:en,excerpt:eo,status:eu,categoryId:ex,selectedTags:ef,featuredImage:eg,seoTitle:ej,seoDescription:eb})});if(s.ok){let e=await s.json();D.default.success(R?"Post created":"Post updated"),J(new Date),R&&F.push(`/admin/cms/posts/${e.id}`)}else{let e=await s.text();D.default.error(e||"Failed to save post")}}catch(e){console.error("Error saving post:",e),D.default.error("An error occurred")}finally{q(!1)}},[es,el,en,eo,eu,ex,ef,eg,ej,eb,R,E,F]);(0,a.useEffect)(()=>{if(!R&&es&&el)return B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{eL()},2e3),()=>{B.current&&clearTimeout(B.current)}},[es,el,en,eo,eu,ex,eg,ej,eb]),(0,a.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),ez()),(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),ee(e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[ez]);let eD=async()=>{try{let e=await fetch("/api/admin/cms/categories");if(e.ok){let t=await e.json();Q(t)}}catch(e){console.error("Error fetching categories:",e)}},eI=async()=>{try{let e=await fetch(`/api/admin/cms/posts/${E}`);if(e.ok){let t=await e.json();er(t.title),ei(t.slug),ed(t.content),ec(t.excerpt||""),eh(t.status),em(t.categoryId),ep(t.tags?.map(e=>e.id)||[]),ev(t.featuredImage||""),ey(t.seoTitle||""),ek(t.seoDescription||""),eN(!0),J(new Date(t.updatedAt||t.createdAt))}else D.default.error("Failed to fetch post"),F.push("/admin/cms/posts")}catch(e){console.error("Error fetching post:",e),D.default.error("An error occurred")}finally{O(!1)}},eL=async()=>{if(es&&el&&!$)try{_(!0);let e=`/api/admin/cms/posts/${E}`;(await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:es,slug:el,content:en,excerpt:eo,status:eu,categoryId:ex,selectedTags:ef,featuredImage:eg,seoTitle:ej,seoDescription:eb})})).ok&&J(new Date)}catch(e){console.error("Auto-save failed:",e)}finally{_(!1)}};return U?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(y.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,t.jsxs)("div",{className:(0,H.cn)("min-h-screen bg-background transition-all duration-300",Z&&"bg-gradient-to-b from-background to-muted/20"),children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container flex h-14 items-center justify-between mx-auto px-4 max-w-7xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>F.back(),children:(0,t.jsx)(h.ArrowLeft,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-sm",children:K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Loader2,{className:"h-3 w-3 animate-spin text-muted-foreground"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Saving..."})]}):G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.CheckCircle2,{className:"h-3 w-3 text-green-600"}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:["Saved ",G.toLocaleTimeString()]})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"Not saved"})}),!R&&(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(w.FileText,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[eC.wordCount," words"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(k.Clock,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:L(eC.readingTimeMinutes)})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>ee(!Z),title:"Toggle Focus Mode (Ctrl+K)",children:[Z?(0,t.jsx)(j.Minimize2,{className:"w-4 h-4 mr-2"}):(0,t.jsx)(v.Maximize2,{className:"w-4 h-4 mr-2"}),"Focus"]}),(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>window.open(`/en/blog/${el}`,"_blank"),disabled:!el,children:[(0,t.jsx)(m.Eye,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,t.jsxs)(o.Sheet,{open:W,onOpenChange:Y,children:[(0,t.jsx)(o.SheetTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",children:[(0,t.jsx)(f.Settings,{className:"w-4 h-4 mr-2"}),"Settings"]})}),(0,t.jsxs)(o.SheetContent,{side:"right",className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,t.jsxs)(o.SheetHeader,{className:"pb-4 border-b",children:[(0,t.jsxs)(o.SheetTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Settings,{className:"w-5 h-5"}),"Post Settings"]}),(0,t.jsx)(o.SheetDescription,{children:"Configure your post settings, metadata, and SEO"})]}),(0,t.jsxs)("div",{className:"space-y-6 py-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[(0,t.jsx)(w.FileText,{className:"w-4 h-4"}),"Basic Information"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{htmlFor:"slug",className:"flex items-center gap-2",children:[(0,t.jsx)(S.default,{className:"w-4 h-4 text-muted-foreground"}),"URL Slug"]}),(0,t.jsx)(l.Input,{id:"slug",value:el,onChange:e=>{ei(e.target.value),eN(!0)},placeholder:"post-slug",className:"font-mono"}),(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(T.Info,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{children:"URL-friendly identifier. Auto-generated from title if left empty."})]}),el&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-1 rounded",children:["/blog/",el]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{htmlFor:"excerpt",className:"flex items-center gap-2",children:[(0,t.jsx)(w.FileText,{className:"w-4 h-4 text-muted-foreground"}),"Excerpt"]}),(0,t.jsx)(n.Textarea,{id:"excerpt",value:eo,onChange:e=>ec(e.target.value),placeholder:"Short summary for list views and SEO (optional)",rows:3,className:"resize-none"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[eo.length," characters"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{htmlFor:"category",className:"flex items-center gap-2",children:[(0,t.jsx)(M.Tag,{className:"w-4 h-4 text-muted-foreground"}),"Category"]}),(0,t.jsxs)(d.Select,{value:ex||"",onValueChange:em,children:[(0,t.jsx)(d.SelectTrigger,{id:"category",children:(0,t.jsx)(d.SelectValue,{placeholder:"Select a category (optional)"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"",children:"No category"}),X.map(e=>(0,t.jsx)(d.SelectItem,{value:e.id,children:e.name},e.id))]})]})]})]}),(0,t.jsx)(c.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[(0,t.jsx)(C.Search,{className:"w-4 h-4"}),"SEO Settings"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{htmlFor:"seo-title",className:"flex items-center gap-2",children:["SEO Title",(0,t.jsx)("span",{className:"text-xs font-normal text-muted-foreground",children:"(optional)"})]}),(0,t.jsx)(l.Input,{id:"seo-title",value:ej,onChange:e=>ey(e.target.value),placeholder:"Custom meta title for search engines",maxLength:60}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:(0,H.cn)("text-xs",ej.length>60?"text-red-600":"text-muted-foreground"),children:[ej.length,"/60 characters"]}),ej.length>60&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[(0,t.jsx)(z.AlertCircle,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"Too long"})]})]}),!ej&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"If empty, the post title will be used"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{htmlFor:"seo-description",className:"flex items-center gap-2",children:["SEO Description",(0,t.jsx)("span",{className:"text-xs font-normal text-muted-foreground",children:"(optional)"})]}),(0,t.jsx)(n.Textarea,{id:"seo-description",value:eb,onChange:e=>ek(e.target.value),placeholder:"Meta description for search engines",rows:3,className:"resize-none",maxLength:160}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:(0,H.cn)("text-xs",eb.length>160?"text-red-600":"text-muted-foreground"),children:[eb.length,"/160 characters"]}),eb.length>160&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[(0,t.jsx)(z.AlertCircle,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"Too long"})]})]}),!eb&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"If empty, the excerpt will be used"})]})]}),(0,t.jsx)(c.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-foreground",children:[(0,t.jsx)(T.Info,{className:"w-4 h-4"}),"Publication Status"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Status"}),(0,t.jsxs)(d.Select,{value:eu,onValueChange:eh,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"DRAFT",children:"Draft"}),(0,t.jsx)(d.SelectItem,{value:"PUBLISHED",children:"Published"}),(0,t.jsx)(d.SelectItem,{value:"ARCHIVED",children:"Archived"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground mt-1",children:[(0,t.jsx)(T.Info,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("span",{children:["DRAFT"===eu&&"Post is saved but not visible to the public","PUBLISHED"===eu&&"Post is live and visible to all visitors","ARCHIVED"===eu&&"Post is hidden from public view"]})]})]})]})]})]})]}),(0,t.jsxs)(d.Select,{value:eu,onValueChange:eh,children:[(0,t.jsx)(d.SelectTrigger,{className:"w-[130px]",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"DRAFT",children:"Draft"}),(0,t.jsx)(d.SelectItem,{value:"PUBLISHED",children:"Published"}),(0,t.jsx)(d.SelectItem,{value:"ARCHIVED",children:"Archived"})]})]}),(0,t.jsx)(r.Button,{onClick:ez,disabled:$||K,className:"bg-green-600 hover:bg-green-700 text-white",children:$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Save,{className:"w-4 h-4 mr-2"}),R?"Publish":"Update"]})})]})]})}),(0,t.jsxs)("main",{className:(0,H.cn)("container mx-auto px-4 py-8 transition-all duration-300",Z?"max-w-3xl":"max-w-5xl"),children:[(0,t.jsx)("div",{className:(0,H.cn)("mb-8 group relative transition-all",et&&"ring-2 ring-primary ring-offset-2"),onDragOver:e=>{e.preventDefault(),e.stopPropagation(),ea(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),ea(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),ea(!1),Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/")).length>0&&eM(!0)},children:eg?(0,t.jsxs)("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg shadow-lg border",children:[(0,t.jsx)(P.default,{src:eg,alt:"Cover",fill:!0,className:"object-cover",priority:!0}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsxs)(r.Button,{variant:"secondary",size:"sm",onClick:()=>eM(!0),children:[(0,t.jsx)(N.Upload,{className:"w-4 h-4 mr-2"}),"Change"]}),(0,t.jsxs)(r.Button,{variant:"destructive",size:"sm",onClick:()=>ev(""),children:[(0,t.jsx)(g.X,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]}):(0,t.jsxs)("button",{type:"button",onClick:()=>eM(!0),className:(0,H.cn)("w-full h-32 border-2 border-dashed rounded-lg transition-all","hover:border-primary hover:bg-muted/50","flex flex-col items-center justify-center gap-2 text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",et&&"border-primary bg-primary/5"),children:[(0,t.jsx)(p.Image,{className:"w-8 h-8"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Add Cover Image"}),(0,t.jsx)("span",{className:"text-xs",children:"Click or drag and drop"})]})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(n.Textarea,{ref:V,value:es,onChange:e=>{let t=e.target.value;er(t),e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px",R&&!ew&&ei(t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""))},placeholder:"Post title...",className:"w-full resize-none overflow-hidden bg-transparent text-4xl font-bold border-none focus-visible:ring-0 p-0 placeholder:text-muted-foreground/50 min-h-[60px] leading-tight",rows:1}),es&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:[eT.wordCount," words"]}),el&&(0,t.jsxs)("span",{className:"font-mono",children:["/",el]})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.RichTextEditor,{content:en,onChange:ed}),en&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs text-muted-foreground border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{children:[eC.wordCount," words"]}),(0,t.jsxs)("span",{children:[eC.characterCount," characters"]}),(0,t.jsx)("span",{children:L(eC.readingTimeMinutes)})]}),(0,t.jsxs)("div",{className:"text-xs",children:["Press ",(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-xs",children:"Ctrl+S"})," to save"]})]})]})]}),(0,t.jsx)(A.MediaPicker,{open:eS,onOpenChange:eM,onSelect:e=>{e.length>0&&ev(e[0].url),eM(!1)},type:"IMAGE",multiple:!1})]})}e.s(["default",()=>E],479102)}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4d1671f8-d0d5-5872-877d-f2f328037f3d")}catch(e){}}();
//# debugId=4d1671f8-d0d5-5872-877d-f2f328037f3d
