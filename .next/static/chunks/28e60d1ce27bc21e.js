(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,515288,e=>{"use strict";var s=e.i(843476),t=e.i(975157);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function d({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}function n({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>i,"CardDescription",()=>d,"CardFooter",()=>n,"CardHeader",()=>r,"CardTitle",()=>l])},487486,e=>{"use strict";var s=e.i(843476),t=e.i(991918),a=e.i(225913),r=e.i(975157);let l=(0,a.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:a,asChild:d=!1,...i}){let n=d?t.Slot:"span";return(0,s.jsx)(n,{"data-slot":"badge",className:(0,r.cn)(l({variant:a}),e),...i})}e.s(["Badge",()=>d])},949411,e=>{"use strict";let s=(0,e.i(475254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["default",()=>s])},503116,e=>{"use strict";var s=e.i(949411);e.s(["Clock",()=>s.default])},107233,603908,e=>{"use strict";let s=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",()=>s],603908),e.s(["Plus",()=>s],107233)},323123,e=>{"use strict";let s=(0,e.i(475254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["default",()=>s])},25652,e=>{"use strict";var s=e.i(323123);e.s(["TrendingUp",()=>s.default])},849550,e=>{"use strict";let s=(0,e.i(475254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["default",()=>s])},16715,563906,e=>{"use strict";let s=(0,e.i(475254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>s],563906),e.s(["RefreshCw",()=>s],16715)},212426,e=>{"use strict";var s=e.i(849550);e.s(["DollarSign",()=>s.default])},580395,e=>{"use strict";var s=e.i(843476),t=e.i(271645),a=e.i(618566),r=e.i(217255),l=e.i(515288),d=e.i(519455),i=e.i(487486),n=e.i(967489),c=e.i(705766),o=e.i(107233),u=e.i(503116),x=e.i(25652),h=e.i(212426),m=e.i(16715),f=e.i(522016);let j={DRAFT:"bg-gray-100 text-gray-800",SCHEDULED:"bg-blue-100 text-blue-800",ACTIVE:"bg-green-100 text-green-800",ENDED:"bg-red-100 text-red-800",CANCELLED:"bg-orange-100 text-orange-800"};function g(){let e=(0,a.useRouter)(),{data:g,status:v}=(0,r.useSession)(),[p,N]=(0,t.useState)([]),[b,y]=(0,t.useState)(null),[C,w]=(0,t.useState)(!0),[S,k]=(0,t.useState)("all");(0,t.useEffect)(()=>{if("loading"!==v){if(!g||!["ADMIN","SUPERADMIN","MANAGER"].includes(g.user.role))return void e.push("/admin");D()}},[g,v,e,S]);let D=async()=>{try{w(!0);let e=new URLSearchParams;"all"!==S&&e.append("status",S.toUpperCase());let s=await fetch(`/api/admin/flash-sales?${e.toString()}`);if(!s.ok)throw Error("Failed to fetch flash sales");let t=await s.json();N(t);let a=t.length,r=t.filter(e=>"ACTIVE"===e.status).length,l=t.filter(e=>"SCHEDULED"===e.status).length,d=t.filter(e=>"ENDED"===e.status).length,i=t.reduce((e,s)=>e+s.products.length,0),n=t.reduce((e,s)=>e+s.products.reduce((e,s)=>e+Number(s.salePrice)*s.soldQuantity,0),0);y({total:a,active:r,scheduled:l,ended:d,totalProducts:i,totalRevenue:n})}catch(e){console.error("Error fetching flash sales:",e),c.default.error("Failed to load flash sales")}finally{w(!1)}},E=async e=>{if(confirm("Are you sure you want to delete this flash sale?"))try{if(!(await fetch(`/api/admin/flash-sales/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete flash sale");c.default.success("Flash sale deleted successfully"),D()}catch(e){console.error("Error deleting flash sale:",e),c.default.error("Failed to delete flash sale")}};return C?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading flash sales..."})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Flash Sales"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage time-limited promotional sales"})]}),(0,s.jsx)(f.default,{href:"/admin/marketing/flash-sales/new",children:(0,s.jsxs)(d.Button,{children:[(0,s.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Create Flash Sale"]})})]}),b&&(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Sales"}),(0,s.jsx)(x.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.total}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[b.active," active, ",b.scheduled," scheduled"]})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Active Sales"}),(0,s.jsx)(u.Clock,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:b.active}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Products"}),(0,s.jsx)(h.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.totalProducts}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all sales"})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Revenue"}),(0,s.jsx)(h.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(l.CardContent,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",b.totalRevenue.toFixed(2)]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"From flash sales"})]})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.CardTitle,{children:"Flash Sales"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(n.Select,{value:S,onValueChange:k,children:[(0,s.jsx)(n.SelectTrigger,{className:"w-[180px]",children:(0,s.jsx)(n.SelectValue,{placeholder:"Filter by status"})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"all",children:"All Sales"}),(0,s.jsx)(n.SelectItem,{value:"draft",children:"Draft"}),(0,s.jsx)(n.SelectItem,{value:"scheduled",children:"Scheduled"}),(0,s.jsx)(n.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(n.SelectItem,{value:"ended",children:"Ended"}),(0,s.jsx)(n.SelectItem,{value:"cancelled",children:"Cancelled"})]})]}),(0,s.jsx)(d.Button,{variant:"outline",size:"icon",onClick:D,children:(0,s.jsx)(m.RefreshCw,{className:"h-4 w-4"})})]})]})}),(0,s.jsx)(l.CardContent,{children:0===p.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"No flash sales found"}),(0,s.jsx)(f.default,{href:"/admin/marketing/flash-sales/new",children:(0,s.jsxs)(d.Button,{className:"mt-4",children:[(0,s.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Create Your First Flash Sale"]})})]}):(0,s.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(l.CardTitle,{children:e.name}),(0,s.jsx)(i.Badge,{className:j[e.status],children:e.status})]}),e.description&&(0,s.jsx)(l.CardDescription,{children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.default,{href:`/admin/marketing/flash-sales/${e.id}`,children:(0,s.jsx)(d.Button,{variant:"outline",size:"sm",children:"Edit"})}),(0,s.jsx)(d.Button,{variant:"destructive",size:"sm",onClick:()=>E(e.id),children:"Delete"})]})]})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Discount"}),(0,s.jsx)("p",{className:"font-semibold",children:"PERCENTAGE"===e.discountType?`${e.discountValue}%`:`$${e.discountValue.toFixed(2)}`})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Products"}),(0,s.jsx)("p",{className:"font-semibold",children:e.products.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Time"}),(0,s.jsxs)("p",{className:"font-semibold",children:[new Date(e.startDate).toLocaleDateString()," -"," ",new Date(e.endDate).toLocaleDateString()]})]})]})})]},e.id))})})]})]})}e.s(["default",()=>g])}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d6edd56a-77dc-57e2-8f05-09a893c9fefe")}catch(e){}}();
//# debugId=d6edd56a-77dc-57e2-8f05-09a893c9fefe
