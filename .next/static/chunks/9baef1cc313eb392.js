(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,194272,e=>{"use strict";let t;var r,n,a,l,i,s,o,c,d,u,h,g,p,m,f,x,b,v,y,w,j,N,C=e.i(843476),k=e.i(271645),S=e.i(759684),E=e.i(519455),D=e.i(356909),T=e.i(871689),I=e.i(531278),O=e.i(239616),R=e.i(37727),M=e.i(423702),M=M,B=e.i(309789),B=B,L=e.i(385663),A=e.i(286536),P=e.i(555436),F=e.i(595468),z=e.i(63209),V=e.i(268586),V=V,H=e.i(349191),H=H,U=e.i(729165),U=U,$=e.i(565123),$=$,K=e.i(964978),G=e.i(113625),G=G,X=e.i(178583),W=e.i(473708),Y=e.i(278716),J=e.i(249758),J=J,_=e.i(141600),_=_,q=e.i(686311),Q=e.i(647780),Z=e.i(201928),ee=e.i(779334),et=e.i(793479),er=e.i(975157),en=e.i(107233),ea=e.i(586557),el=e.i(884656),el=el,ei=e.i(283086),es=e.i(761911),eo=e.i(212426),ec=e.i(974875),ed=e.i(931091),eu=e.i(753487),eu=eu,eh=e.i(492161),eg=e.i(662031),ep=e.i(299023),em=e.i(972520);let ef=({template:e,onAdd:t})=>{let r=(e=>{switch(e.toLowerCase().replace("_","")){case"hero":return ei.Sparkles;case"content":case"text":case"form":return X.FileText;case"features":case"logo":case"logogrid":case"stats":return K.Grid3x3;case"cta":case"calltoaction":return ed.Megaphone;case"testimonials":return q.MessageSquare;case"pricing":return eo.DollarSign;case"team":return es.Users;case"faq":return ec.HelpCircle;case"gallery":case"media":return W.Image;case"video":return Y.Video;case"layout":case"footer":return ea.Layout;case"navigation":return eu.default;case"header":return eh.Menu;case"social":return eg.Share2;case"breadcrumbs":return em.ArrowRight;case"divider":return ep.Minus;default:return el.default}})(e.category),n=(e=>{switch(e.toLowerCase().replace("_","")){case"hero":return"bg-gradient-to-br from-purple-50 to-purple-100 text-purple-600";case"features":return"bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600";case"cta":case"calltoaction":return"bg-gradient-to-br from-orange-50 to-orange-100 text-orange-600";case"testimonials":return"bg-gradient-to-br from-green-50 to-green-100 text-green-600";case"pricing":return"bg-gradient-to-br from-yellow-50 to-yellow-100 text-yellow-600";case"team":case"social":return"bg-gradient-to-br from-pink-50 to-pink-100 text-pink-600";case"faq":return"bg-gradient-to-br from-indigo-50 to-indigo-100 text-indigo-600";case"form":return"bg-gradient-to-br from-teal-50 to-teal-100 text-teal-600";case"navigation":case"header":case"footer":return"bg-gradient-to-br from-slate-50 to-slate-100 text-slate-600";default:return"bg-gradient-to-br from-gray-50 to-gray-100 text-gray-600"}})(e.category);return(0,C.jsxs)("div",{className:"group relative flex flex-col items-center justify-center p-3 rounded-lg border-2 bg-white hover:border-primary hover:shadow-lg transition-all cursor-pointer h-28 text-center gap-2 overflow-hidden",onClick:t,children:[(0,C.jsx)("div",{className:(0,er.cn)("absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-200",n)}),(0,C.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-2 w-full",children:[(0,C.jsx)("div",{className:(0,er.cn)("p-2.5 rounded-lg transition-all duration-200",n,"group-hover:scale-110 group-hover:shadow-md"),children:(0,C.jsx)(r,{className:"h-5 w-5"})}),(0,C.jsx)("span",{className:"text-xs font-semibold text-gray-700 group-hover:text-gray-900 line-clamp-2 leading-tight px-1",children:e.name})]}),(0,C.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all transform translate-x-1 group-hover:translate-x-0",children:(0,C.jsx)("div",{className:"bg-primary text-white rounded-full p-1.5 shadow-lg",children:(0,C.jsx)(en.Plus,{className:"h-3.5 w-3.5"})})})]})};var ex=e.i(174080);let eb="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function ev(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function ey(e){return"nodeType"in e}function ew(e){var t,r;return e?ev(e)?e:ey(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function ej(e){let{Document:t}=ew(e);return e instanceof t}function eN(e){return!ev(e)&&e instanceof ew(e).HTMLElement}function eC(e){return e instanceof ew(e).SVGElement}function ek(e){return e?ev(e)?e.document:ey(e)?ej(e)?e:eN(e)||eC(e)?e.ownerDocument:document:document:document}let eS=eb?k.useLayoutEffect:k.useEffect;function eE(e){let t=(0,k.useRef)(e);return eS(()=>{t.current=e}),(0,k.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function eD(e,t){void 0===t&&(t=[e]);let r=(0,k.useRef)(e);return eS(()=>{r.current!==e&&(r.current=e)},t),r}function eT(e,t){let r=(0,k.useRef)();return(0,k.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function eI(e){let t=eE(e),r=(0,k.useRef)(null),n=(0,k.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function eO(e){let t=(0,k.useRef)();return(0,k.useEffect)(()=>{t.current=e},[e]),t.current}let eR={};function eM(e,t){return(0,k.useMemo)(()=>{if(t)return t;let r=null==eR[e]?0:eR[e]+1;return eR[e]=r,e+"-"+r},[e,t])}function eB(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>{for(let[n,a]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*a)}return t},{...t})}}let eL=eB(1),eA=eB(-1);function eP(e){if(!e)return!1;let{KeyboardEvent:t}=ew(e.target);return t&&e instanceof t}function eF(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=ew(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let ez=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ez.Translate.toString(e),ez.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),eV="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",eH={display:"none"};function eU(e){let{id:t,value:r}=e;return k.default.createElement("div",{id:t,style:eH},r)}function e$(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return k.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let eK=(0,k.createContext)(null),eG={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},eX={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function eW(e){var t;let r,{announcements:n=eX,container:a,hiddenTextDescribedById:l,screenReaderInstructions:i=eG}=e,{announce:s,announcement:o}=function(){let[e,t]=(0,k.useState)("");return{announce:(0,k.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=eM("DndLiveRegion"),[d,u]=(0,k.useState)(!1);if((0,k.useEffect)(()=>{u(!0)},[]),t=(0,k.useMemo)(()=>({onDragStart(e){let{active:t}=e;s(n.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;n.onDragMove&&s(n.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;s(n.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;s(n.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;s(n.onDragCancel({active:t,over:r}))}}),[s,n]),r=(0,k.useContext)(eK),(0,k.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!d)return null;let h=k.default.createElement(k.default.Fragment,null,k.default.createElement(eU,{id:l,value:i.draggable}),k.default.createElement(e$,{id:c,announcement:o}));return a?(0,ex.createPortal)(h,a):h}function eY(){}function eJ(e,t){return(0,k.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(r=p||(p={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let e_=Object.freeze({x:0,y:0});function eq(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function eQ(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function eZ(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function e0(e,t){if(!e||0===e.length)return null;let[r]=e;return t?r[t]:r}let e1=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,a=eZ(t),l=[];for(let e of n){let{id:t}=e,n=r.get(t);if(n){let r=eZ(n),i=Number((a.reduce((e,t,n)=>{var a;return e+(a=r[n],Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2)))},0)/4).toFixed(4));l.push({id:t,data:{droppableContainer:e,value:i}})}}return l.sort(eq)},e2=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,a=[];for(let e of n){let{id:n}=e,l=r.get(n);if(l){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(n<a&&r<l){let i=t.width*t.height,s=e.width*e.height,o=(a-n)*(l-r);return Number((o/(i+s-o)).toFixed(4))}return 0}(l,t);r>0&&a.push({id:n,data:{droppableContainer:e,value:r}})}}return a.sort(eQ)};function e5(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:e_}let e4=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function e3(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let e6={ignoreTransform:!1};function e7(e,t){void 0===t&&(t=e6);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=ew(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=e3(t);if(!n)return e;let{scaleX:a,scaleY:l,x:i,y:s}=n,o=e.left-i-(1-a)*parseFloat(r),c=e.top-s-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?e.width/a:e.width,u=l?e.height/l:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(r,t,n))}let{top:n,left:a,width:l,height:i,bottom:s,right:o}=r;return{top:n,left:a,width:l,height:i,bottom:s,right:o}}function e8(e){return e7(e,{ignoreTransform:!0})}function e9(e,t){let r=[];return e?function n(a){var l,i;let s;if(null!=t&&r.length>=t||!a)return r;if(ej(a)&&null!=a.scrollingElement&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!eN(a)||eC(a)||r.includes(a))return r;let o=ew(e).getComputedStyle(a);return(a!==e&&(void 0===(l=o)&&(l=ew(a).getComputedStyle(a)),s=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=l[e];return"string"==typeof t&&s.test(t)}))&&r.push(a),void 0===(i=o)&&(i=ew(a).getComputedStyle(a)),"fixed"===i.position)?r:n(a.parentNode)}(e):r}function te(e){let[t]=e9(e,1);return null!=t?t:null}function tt(e){return eb&&e?ev(e)?e:ey(e)?ej(e)||e===ek(e).scrollingElement?window:eN(e)?e:null:null:null}function tr(e){return ev(e)?e.scrollX:e.scrollLeft}function tn(e){return ev(e)?e.scrollY:e.scrollTop}function ta(e){return{x:tr(e),y:tn(e)}}function tl(e){return!!eb&&!!e&&e===document.scrollingElement}function ti(e){let t={x:0,y:0},r=tl(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:a,isLeft:l,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}(n=m||(m={}))[n.Forward=1]="Forward",n[n.Backward=-1]="Backward";let ts={x:.2,y:.2};function to(e){return e.reduce((e,t)=>eL(e,ta(t)),e_)}function tc(e,t){if(void 0===t&&(t=e7),!e)return;let{top:r,left:n,bottom:a,right:l}=t(e);te(e)&&(a<=0||l<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let td=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+tr(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+tn(t),0)}]];class tu{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=e9(t),n=to(r);for(const[t,a,l]of(this.rect={...e},this.width=e.width,this.height=e.height,td))for(const e of a)Object.defineProperty(this,e,{get:()=>{let a=l(r),i=n[t]-a;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class th{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function tg(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function tp(e){e.preventDefault()}function tm(e){e.stopPropagation()}(a=f||(f={})).Click="click",a.DragStart="dragstart",a.Keydown="keydown",a.ContextMenu="contextmenu",a.Resize="resize",a.SelectionChange="selectionchange",a.VisibilityChange="visibilitychange",(l=x||(x={})).Space="Space",l.Down="ArrowDown",l.Right="ArrowRight",l.Left="ArrowLeft",l.Up="ArrowUp",l.Esc="Escape",l.Enter="Enter",l.Tab="Tab";let tf={start:[x.Space,x.Enter],cancel:[x.Esc],end:[x.Space,x.Enter,x.Tab]},tx=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case x.Right:return{...r,x:r.x+25};case x.Left:return{...r,x:r.x-25};case x.Down:return{...r,y:r.y+25};case x.Up:return{...r,y:r.y-25}}};class tb{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new th(ek(t)),this.windowListeners=new th(ew(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(f.Resize,this.handleCancel),this.windowListeners.add(f.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(f.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&tc(r),t(e_)}handleKeyDown(e){if(eP(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:a=tf,coordinateGetter:l=tx,scrollBehavior:i="smooth"}=n,{code:s}=e;if(a.end.includes(s))return void this.handleEnd(e);if(a.cancel.includes(s))return void this.handleCancel(e);let{collisionRect:o}=r.current,c=o?{x:o.left,y:o.top}:e_;this.referenceCoordinates||(this.referenceCoordinates=c);let d=l(e,{active:t,context:r.current,currentCoordinates:c});if(d){let t=eA(d,c),n={x:0,y:0},{scrollableAncestors:a}=r.current;for(let r of a){let a=e.code,{isTop:l,isRight:s,isLeft:o,isBottom:c,maxScroll:u,minScroll:h}=ti(r),g=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}(r),p={x:Math.min(a===x.Right?g.right-g.width/2:g.right,Math.max(a===x.Right?g.left:g.left+g.width/2,d.x)),y:Math.min(a===x.Down?g.bottom-g.height/2:g.bottom,Math.max(a===x.Down?g.top:g.top+g.height/2,d.y))},m=a===x.Right&&!s||a===x.Left&&!o,f=a===x.Down&&!c||a===x.Up&&!l;if(m&&p.x!==d.x){let e=r.scrollLeft+t.x,l=a===x.Right&&e<=u.x||a===x.Left&&e>=h.x;if(l&&!t.y)return void r.scrollTo({left:e,behavior:i});l?n.x=r.scrollLeft-e:n.x=a===x.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(f&&p.y!==d.y){let e=r.scrollTop+t.y,l=a===x.Down&&e<=u.y||a===x.Up&&e>=h.y;if(l&&!t.x)return void r.scrollTo({top:e,behavior:i});l?n.y=r.scrollTop-e:n.y=a===x.Down?r.scrollTop-u.y:r.scrollTop-h.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,eL(eA(d,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function tv(e){return!!(e&&"distance"in e)}function ty(e){return!!(e&&"delay"in e)}tb.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=tf,onActivation:a}=t,{active:l}=r,{code:i}=e.nativeEvent;if(n.start.includes(i)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class tw{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=ew(e);return e instanceof t?e:ek(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:l}=a;this.props=e,this.events=t,this.document=ek(l),this.documentListeners=new th(this.document),this.listeners=new th(r),this.windowListeners=new th(ew(l)),this.initialCoordinates=null!=(n=eF(a))?n:e_,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(f.Resize,this.handleCancel),this.windowListeners.add(f.DragStart,tp),this.windowListeners.add(f.VisibilityChange,this.handleCancel),this.windowListeners.add(f.ContextMenu,tp),this.documentListeners.add(f.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ty(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(tv(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(f.Click,tm,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(f.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:a}=this,{onMove:l,options:{activationConstraint:i}}=a;if(!n)return;let s=null!=(t=eF(e))?t:e_,o=eA(n,s);if(!r&&i){if(tv(i)){if(null!=i.tolerance&&tg(o,i.tolerance))return this.handleCancel();if(tg(o,i.distance))return this.handleStart()}return ty(i)&&tg(o,i.tolerance)?this.handleCancel():void this.handlePending(i,o)}e.cancelable&&e.preventDefault(),l(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===x.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let tj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class tN extends tw{constructor(e){const{event:t}=e;super(e,tj,ek(t.target))}}tN.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];(i=b||(b={}))[i.RightClick=2]="RightClick";(s=v||(v={}))[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect",(o=y||(y={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let tC={x:{[m.Backward]:!1,[m.Forward]:!1},y:{[m.Backward]:!1,[m.Forward]:!1}};(c=w||(w={}))[c.Always=0]="Always",c[c.BeforeDragging=1]="BeforeDragging",c[c.WhileDragging=2]="WhileDragging",(j||(j={})).Optimized="optimized";let tk=new Map;function tS(e,t){return eT(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function tE(e){let{callback:t,disabled:r}=e,n=eE(t),a=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,k.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function tD(e){return new tu(e7(e),e)}function tT(e,t,r){void 0===t&&(t=tD);let[n,a]=(0,k.useState)(null);function l(){a(n=>{if(!e)return null;if(!1===e.isConnected){var a;return null!=(a=null!=n?n:r)?a:null}let l=t(e);return JSON.stringify(n)===JSON.stringify(l)?n:l})}let i=function(e){let{callback:t,disabled:r}=e,n=eE(t),a=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,k.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){l();break}}}}),s=tE({callback:l});return eS(()=>{l(),e?(null==s||s.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==i||i.disconnect())},[e]),n}let tI=[];function tO(e,t){void 0===t&&(t=[]);let r=(0,k.useRef)(null);return(0,k.useEffect)(()=>{r.current=null},t),(0,k.useEffect)(()=>{let t=e!==e_;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?eA(e,r.current):e_}function tR(e){return(0,k.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let tM=[];function tB(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return eN(t)?t:e}let tL=[{sensor:tN,options:{}},{sensor:tb,options:{}}],tA={current:{}},tP={draggable:{measure:e8},droppable:{measure:e8,strategy:w.WhileDragging,frequency:j.Optimized},dragOverlay:{measure:e7}};class tF extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let tz={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tF,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:eY},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tP,measureDroppableContainers:eY,windowRect:null,measuringScheduled:!1},tV={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:eY,draggableNodes:new Map,over:null,measureDroppableContainers:eY},tH=(0,k.createContext)(tV),tU=(0,k.createContext)(tz);function t$(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tF}}}function tK(e,t){switch(t.type){case p.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case p.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case p.DragEnd:case p.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case p.RegisterDroppable:{let{element:r}=t,{id:n}=r,a=new tF(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case p.SetDroppableDisabled:{let{id:r,key:n,disabled:a}=t,l=e.droppable.containers.get(r);if(!l||n!==l.key)return e;let i=new tF(e.droppable.containers);return i.set(r,{...l,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case p.UnregisterDroppable:{let{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let l=new tF(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function tG(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:a}=(0,k.useContext)(tH),l=eO(n),i=eO(null==r?void 0:r.id);return(0,k.useEffect)(()=>{if(!t&&!n&&l&&null!=i){if(!eP(l)||document.activeElement===l.target)return;let e=a.get(i);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(eV)?e:e.querySelector(eV);if(t){t.focus();break}}})}},[n,t,a,i,l]),null}function tX(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let tW=(0,k.createContext)({...e_,scaleX:1,scaleY:1});(d=N||(N={}))[d.Uninitialized=0]="Uninitialized",d[d.Initializing=1]="Initializing",d[d.Initialized=2]="Initialized";let tY=(0,k.memo)(function(e){var t,r,n,a,l,i,s,o;let c,d,u,h,g,f,x,b,{id:j,accessibility:C,autoScroll:S=!0,children:E,sensors:D=tL,collisionDetection:T=e2,measuring:I,modifiers:O,...R}=e,[M,B]=(0,k.useReducer)(tK,void 0,t$),[L,A]=function(){let[e]=(0,k.useState)(()=>new Set),t=(0,k.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,k.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[P,F]=(0,k.useState)(N.Uninitialized),z=P===N.Initialized,{draggable:{active:V,nodes:H,translate:U},droppable:{containers:$}}=M,K=null!=V?H.get(V):null,G=(0,k.useRef)({initial:null,translated:null}),X=(0,k.useMemo)(()=>{var e;return null!=V?{id:V,data:null!=(e=null==K?void 0:K.data)?e:tA,rect:G}:null},[V,K]),W=(0,k.useRef)(null),[Y,J]=(0,k.useState)(null),[_,q]=(0,k.useState)(null),Q=eD(R,Object.values(R)),Z=eM("DndDescribedBy",j),ee=(0,k.useMemo)(()=>$.getEnabled(),[$]),et=(0,k.useMemo)(()=>({draggable:{...tP.draggable,...null==I?void 0:I.draggable},droppable:{...tP.droppable,...null==I?void 0:I.droppable},dragOverlay:{...tP.dragOverlay,...null==I?void 0:I.dragOverlay}}),[null==I?void 0:I.draggable,null==I?void 0:I.droppable,null==I?void 0:I.dragOverlay]),{droppableRects:er,measureDroppableContainers:en,measuringScheduled:ea}=function(e,t){let{dragging:r,dependencies:n,config:a}=t,[l,i]=(0,k.useState)(null),{frequency:s,measure:o,strategy:c}=a,d=(0,k.useRef)(e),u=function(){switch(c){case w.Always:return!1;case w.BeforeDragging:return r;default:return!r}}(),h=eD(u),g=(0,k.useCallback)(function(e){void 0===e&&(e=[]),h.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),p=(0,k.useRef)(null),m=eT(t=>{if(u&&!r)return tk;if(!t||t===tk||d.current!==e||null!=l){let t=new Map;for(let r of e){if(!r)continue;if(l&&l.length>0&&!l.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new tu(o(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,l,r,u,o]);return(0,k.useEffect)(()=>{d.current=e},[e]),(0,k.useEffect)(()=>{u||g()},[r,u]),(0,k.useEffect)(()=>{l&&l.length>0&&i(null)},[JSON.stringify(l)]),(0,k.useEffect)(()=>{u||"number"!=typeof s||null!==p.current||(p.current=setTimeout(()=>{g(),p.current=null},s))},[s,u,g,...n]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:null!=l}}(ee,{dragging:z,dependencies:[U.x,U.y],config:et.droppable}),el=eT(e=>{var t;return null==V?null:null!=(t=null!=g?g:e)?t:null},[g=(h=null!=V?H.get(V):void 0)?h.node.current:null,V]),ei=(0,k.useMemo)(()=>_?eF(_):null,[_]),es=(c=(null==Y?void 0:Y.autoScrollEnabled)===!1,d="object"==typeof S?!1===S.enabled:!1===S,u=z&&!c&&!d,"object"==typeof S?{...S,enabled:u}:{enabled:u}),eo=tS(el,et.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e,l=(0,k.useRef)(!1),{x:i,y:s}="boolean"==typeof a?{x:a,y:a}:a;eS(()=>{if(!i&&!s||!t){l.current=!1;return}if(l.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let a=e5(r(e),n);if(i||(a.x=0),s||(a.y=0),l.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){let t=te(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,i,s,n,r])}({activeNode:null!=V?H.get(V):null,config:es.layoutShiftCompensation,initialRect:eo,measure:et.draggable.measure});let ec=tT(el,et.draggable.measure,eo),ed=tT(el?el.parentElement:null),eu=(0,k.useRef)({activatorEvent:null,active:null,activeNode:el,collisionRect:null,collisions:null,droppableRects:er,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eh=$.getNodeFor(null==(t=eu.current.over)?void 0:t.id),eg=function(e){let{measure:t}=e,[r,n]=(0,k.useState)(null),a=tE({callback:(0,k.useCallback)(e=>{for(let{target:r}of e)if(eN(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[l,i]=eI((0,k.useCallback)(e=>{let r=tB(e);null==a||a.disconnect(),r&&(null==a||a.observe(r)),n(r?t(r):null)},[t,a]));return(0,k.useMemo)(()=>({nodeRef:l,rect:r,setRef:i}),[r,l,i])}({measure:et.dragOverlay.measure}),ep=null!=(r=eg.nodeRef.current)?r:el,em=z?null!=(n=eg.rect)?n:ec:null,ef=!!(eg.nodeRef.current&&eg.rect),ev=(f=tS(l=ef?null:ec),e5(l,f)),ey=tR(ep?ew(ep):null),ej=(i=z?null!=eh?eh:el:null,x=(0,k.useRef)(i),b=eT(e=>i?e&&e!==tI&&i&&x.current&&i.parentNode===x.current.parentNode?e:e9(i):tI,[i]),(0,k.useEffect)(()=>{x.current=i},[i]),b),eC=function(e,t){void 0===t&&(t=e7);let[r]=e,n=tR(r?ew(r):null),[a,l]=(0,k.useState)(tM);function i(){l(()=>e.length?e.map(e=>tl(e)?n:new tu(t(e),e)):tM)}let s=tE({callback:i});return eS(()=>{null==s||s.disconnect(),i(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),a}(ej),ek=tX(O,{transform:{x:U.x-ev.x,y:U.y-ev.y,scaleX:1,scaleY:1},activatorEvent:_,active:X,activeNodeRect:ec,containerNodeRect:ed,draggingNodeRect:em,over:eu.current.over,overlayNodeRect:eg.rect,scrollableAncestors:ej,scrollableAncestorRects:eC,windowRect:ey}),eE=ei?eL(ei,U):null,eR=function(e){let[t,r]=(0,k.useState)(null),n=(0,k.useRef)(e),a=(0,k.useCallback)(e=>{let t=tt(e.target);t&&r(e=>e?(e.set(t,ta(t)),new Map(e)):null)},[]);return(0,k.useEffect)(()=>{let t=n.current;if(e!==t){l(t);let i=e.map(e=>{let t=tt(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,ta(t)]):null}).filter(e=>null!=e);r(i.length?new Map(i):null),n.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=tt(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,k.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>eL(e,t),e_):to(e):e_,[e,t])}(ej),eB=tO(eR),eA=tO(eR,[ec]),eP=eL(ek,eB),ez=em?e4(em,ek):null,eV=X&&ez?T({active:X,collisionRect:ez,droppableRects:er,droppableContainers:ee,pointerCoordinates:eE}):null,eH=e0(eV,"id"),[eU,e$]=(0,k.useState)(null),eG=(s=ef?ek:eL(ek,eA),o=null!=(a=null==eU?void 0:eU.rect)?a:null,{...s,scaleX:o&&ec?o.width/ec.width:1,scaleY:o&&ec?o.height/ec.height:1}),eX=(0,k.useRef)(null),eY=(0,k.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==W.current)return;let a=H.get(W.current);if(!a)return;let l=e.nativeEvent,i=new r({active:W.current,activeNode:a,event:l,options:n,context:eu,onAbort(e){if(!H.get(e))return;let{onDragAbort:t}=Q.current,r={id:e};null==t||t(r),L({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!H.get(e))return;let{onDragPending:a}=Q.current,l={id:e,constraint:t,initialCoordinates:r,offset:n};null==a||a(l),L({type:"onDragPending",event:l})},onStart(e){let t=W.current;if(null==t)return;let r=H.get(t);if(!r)return;let{onDragStart:n}=Q.current,a={activatorEvent:l,active:{id:t,data:r.data,rect:G}};(0,ex.unstable_batchedUpdates)(()=>{null==n||n(a),F(N.Initializing),B({type:p.DragStart,initialCoordinates:e,active:t}),L({type:"onDragStart",event:a}),J(eX.current),q(l)})},onMove(e){B({type:p.DragMove,coordinates:e})},onEnd:s(p.DragEnd),onCancel:s(p.DragCancel)});function s(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:a}=eu.current,i=null;if(t&&a){let{cancelDrop:s}=Q.current;i={activatorEvent:l,active:t,collisions:r,delta:a,over:n},e===p.DragEnd&&"function"==typeof s&&await Promise.resolve(s(i))&&(e=p.DragCancel)}W.current=null,(0,ex.unstable_batchedUpdates)(()=>{B({type:e}),F(N.Uninitialized),e$(null),J(null),q(null),eX.current=null;let t=e===p.DragEnd?"onDragEnd":"onDragCancel";if(i){let e=Q.current[t];null==e||e(i),L({type:t,event:i})}})}}eX.current=i},[H]),eJ=(0,k.useCallback)((e,t)=>(r,n)=>{let a=r.nativeEvent,l=H.get(n);null!==W.current||!l||a.dndKit||a.defaultPrevented||!0===e(r,t.options,{active:l})&&(a.dndKit={capturedBy:t.sensor},W.current=n,eY(r,t))},[H,eY]),eq=(0,k.useMemo)(()=>D.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:eJ(e.handler,t)}))]},[]),[D,eJ]);(0,k.useEffect)(()=>{if(!eb)return;let e=D.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},D.map(e=>{let{sensor:t}=e;return t})),eS(()=>{ec&&P===N.Initializing&&F(N.Initialized)},[ec,P]),(0,k.useEffect)(()=>{let{onDragMove:e}=Q.current,{active:t,activatorEvent:r,collisions:n,over:a}=eu.current;if(!t||!r)return;let l={active:t,activatorEvent:r,collisions:n,delta:{x:eP.x,y:eP.y},over:a};(0,ex.unstable_batchedUpdates)(()=>{null==e||e(l),L({type:"onDragMove",event:l})})},[eP.x,eP.y]),(0,k.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:a}=eu.current;if(!e||null==W.current||!t||!a)return;let{onDragOver:l}=Q.current,i=n.get(eH),s=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:a.x,y:a.y},over:s};(0,ex.unstable_batchedUpdates)(()=>{e$(s),null==l||l(o),L({type:"onDragOver",event:o})})},[eH]),eS(()=>{eu.current={activatorEvent:_,active:X,activeNode:el,collisionRect:ez,collisions:eV,droppableRects:er,draggableNodes:H,draggingNode:ep,draggingNodeRect:em,droppableContainers:$,over:eU,scrollableAncestors:ej,scrollAdjustedTranslate:eP},G.current={initial:em,translated:ez}},[X,el,eV,ez,H,ep,em,er,$,eU,ej,eP]),function(e){let t,{acceleration:r,activator:n=v.Pointer,canScroll:a,draggingRect:l,enabled:i,interval:s=5,order:o=y.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:g}=e,p=function(e){let{delta:t,disabled:r}=e,n=eO(t);return eT(e=>{if(r||!n||!e)return tC;let a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[m.Backward]:e.x[m.Backward]||-1===a.x,[m.Forward]:e.x[m.Forward]||1===a.x},y:{[m.Backward]:e.y[m.Backward]||-1===a.y,[m.Forward]:e.y[m.Forward]||1===a.y}}},[r,t,n])}({delta:h,disabled:!i}),[f,x]=(t=(0,k.useRef)(null),[(0,k.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,k.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),b=(0,k.useRef)({x:0,y:0}),w=(0,k.useRef)({x:0,y:0}),j=(0,k.useMemo)(()=>{switch(n){case v.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case v.DraggableRect:return l}},[n,l,c]),N=(0,k.useRef)(null),C=(0,k.useCallback)(()=>{let e=N.current;if(!e)return;let t=b.current.x*w.current.x,r=b.current.y*w.current.y;e.scrollBy(t,r)},[]),S=(0,k.useMemo)(()=>o===y.TreeOrder?[...d].reverse():d,[o,d]);(0,k.useEffect)(()=>{if(!i||!d.length||!j)return void x();for(let e of S){if((null==a?void 0:a(e))===!1)continue;let t=u[d.indexOf(e)];if(!t)continue;let{direction:n,speed:l}=function(e,t,r,n,a){let{top:l,left:i,right:s,bottom:o}=r;void 0===n&&(n=10),void 0===a&&(a=ts);let{isTop:c,isBottom:d,isLeft:u,isRight:h}=ti(e),g={x:0,y:0},p={x:0,y:0},f={height:t.height*a.y,width:t.width*a.x};return!c&&l<=t.top+f.height?(g.y=m.Backward,p.y=n*Math.abs((t.top+f.height-l)/f.height)):!d&&o>=t.bottom-f.height&&(g.y=m.Forward,p.y=n*Math.abs((t.bottom-f.height-o)/f.height)),!h&&s>=t.right-f.width?(g.x=m.Forward,p.x=n*Math.abs((t.right-f.width-s)/f.width)):!u&&i<=t.left+f.width&&(g.x=m.Backward,p.x=n*Math.abs((t.left+f.width-i)/f.width)),{direction:g,speed:p}}(e,t,j,r,g);for(let e of["x","y"])p[e][n[e]]||(l[e]=0,n[e]=0);if(l.x>0||l.y>0){x(),N.current=e,f(C,s),b.current=l,w.current=n;return}}b.current={x:0,y:0},w.current={x:0,y:0},x()},[r,C,a,x,i,s,JSON.stringify(j),JSON.stringify(p),f,d,S,u,JSON.stringify(g)])}({...es,delta:U,draggingRect:ez,pointerCoordinates:eE,scrollableAncestors:ej,scrollableAncestorRects:eC});let eQ=(0,k.useMemo)(()=>({active:X,activeNode:el,activeNodeRect:ec,activatorEvent:_,collisions:eV,containerNodeRect:ed,dragOverlay:eg,draggableNodes:H,droppableContainers:$,droppableRects:er,over:eU,measureDroppableContainers:en,scrollableAncestors:ej,scrollableAncestorRects:eC,measuringConfiguration:et,measuringScheduled:ea,windowRect:ey}),[X,el,ec,_,eV,ed,eg,H,$,er,eU,en,ej,eC,et,ea,ey]),eZ=(0,k.useMemo)(()=>({activatorEvent:_,activators:eq,active:X,activeNodeRect:ec,ariaDescribedById:{draggable:Z},dispatch:B,draggableNodes:H,over:eU,measureDroppableContainers:en}),[_,eq,X,ec,B,Z,H,eU,en]);return k.default.createElement(eK.Provider,{value:A},k.default.createElement(tH.Provider,{value:eZ},k.default.createElement(tU.Provider,{value:eQ},k.default.createElement(tW.Provider,{value:eG},E)),k.default.createElement(tG,{disabled:(null==C?void 0:C.restoreFocus)===!1})),k.default.createElement(eW,{...C,hiddenTextDescribedById:Z}))}),tJ=(0,k.createContext)(null),t_="button";function tq(){return(0,k.useContext)(tU)}let tQ={timeout:25};function tZ(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e,l=eM("Droppable"),{active:i,dispatch:s,over:o,measureDroppableContainers:c}=(0,k.useContext)(tH),d=(0,k.useRef)({disabled:r}),u=(0,k.useRef)(!1),h=(0,k.useRef)(null),g=(0,k.useRef)(null),{disabled:m,updateMeasurementsFor:f,timeout:x}={...tQ,...a},b=eD(null!=f?f:n),v=tE({callback:(0,k.useCallback)(()=>{if(!u.current){u.current=!0;return}null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),g.current=null},x)},[x]),disabled:m||!i}),[y,w]=eI((0,k.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),u.current=!1),e&&v.observe(e))},[v])),j=eD(t);return(0,k.useEffect)(()=>{v&&y.current&&(v.disconnect(),u.current=!1,v.observe(y.current))},[y,v]),(0,k.useEffect)(()=>(s({type:p.RegisterDroppable,element:{id:n,key:l,disabled:r,node:y,rect:h,data:j}}),()=>s({type:p.UnregisterDroppable,key:l,id:n})),[n]),(0,k.useEffect)(()=>{r!==d.current.disabled&&(s({type:p.SetDroppableDisabled,id:n,key:l,disabled:r}),d.current.disabled=r)},[n,l,r,s]),{active:i,rect:h,isOver:(null==o?void 0:o.id)===n,node:y,over:o,setNodeRef:w}}function t0(e){let{animation:t,children:r}=e,[n,a]=(0,k.useState)(null),[l,i]=(0,k.useState)(null),s=eO(r);return r||n||!s||a(s),eS(()=>{if(!l)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;null==e||null==r?a(null):Promise.resolve(t(r,l)).then(()=>{a(null)})},[t,n,l]),k.default.createElement(k.default.Fragment,null,r,n?(0,k.cloneElement)(n,{ref:i}):null)}let t1={x:0,y:0,scaleX:1,scaleY:1};function t2(e){let{children:t}=e;return k.default.createElement(tH.Provider,{value:tV},k.default.createElement(tW.Provider,{value:t1},t))}let t5={position:"fixed",touchAction:"none"},t4=e=>eP(e)?"transform 250ms ease":void 0,t3=(0,k.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:l,className:i,rect:s,style:o,transform:c,transition:d=t4}=e;if(!s)return null;let u=a?c:{...c,scaleX:1,scaleY:1},h={...t5,width:s.width,height:s.height,top:s.top,left:s.left,transform:ez.Transform.toString(u),transformOrigin:a&&n?function(e,t){let r=eF(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,s):void 0,transition:"function"==typeof d?d(n):d,...o};return k.default.createElement(r,{className:i,style:h,ref:t},l)}),t6={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:ez.Transform.toString(t)},{transform:ez.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:n}=e,a={},{styles:l,className:i}=t;if(null!=l&&l.active)for(let[e,t]of Object.entries(l.active))void 0!==t&&(a[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&n.node.style.setProperty(e,t);return null!=i&&i.active&&r.node.classList.add(i.active),null!=i&&i.dragOverlay&&n.node.classList.add(i.dragOverlay),function(){for(let[e,t]of Object.entries(a))r.node.style.setProperty(e,t);null!=i&&i.active&&r.node.classList.remove(i.active)}})},t7=0,t8=k.default.memo(e=>{var t;let{adjustScale:r=!1,children:n,dropAnimation:a,style:l,transition:i,modifiers:s,wrapperElement:o="div",className:c,zIndex:d=999}=e,{activatorEvent:u,active:h,activeNodeRect:g,containerNodeRect:p,draggableNodes:m,droppableContainers:f,dragOverlay:x,over:b,measuringConfiguration:v,scrollableAncestors:y,scrollableAncestorRects:w,windowRect:j}=tq(),N=(0,k.useContext)(tW),C=(t=null==h?void 0:h.id,(0,k.useMemo)(()=>{if(null!=t)return++t7},[t])),S=tX(s,{activatorEvent:u,active:h,activeNodeRect:g,containerNodeRect:p,draggingNodeRect:x.rect,over:b,overlayNodeRect:x.rect,scrollableAncestors:y,scrollableAncestorRects:w,transform:N,windowRect:j}),E=tS(g),D=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return eE((e,l)=>{if(null===t)return;let i=r.get(e);if(!i)return;let s=i.node.current;if(!s)return;let o=tB(l);if(!o)return;let{transform:c}=ew(l).getComputedStyle(l),d=e3(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:a}={...t6,...e};return e=>{let{active:l,dragOverlay:i,transform:s,...o}=e;if(!t)return;let c={x:i.rect.left-l.rect.left,y:i.rect.top-l.rect.top},d={scaleX:1!==s.scaleX?l.rect.width*s.scaleX/i.rect.width:1,scaleY:1!==s.scaleY?l.rect.height*s.scaleY/i.rect.height:1},u={x:s.x-c.x,y:s.y-c.y,...d},h=a({...o,active:l,dragOverlay:i,transform:{initial:s,final:u}}),[g]=h,p=h[h.length-1];if(JSON.stringify(g)===JSON.stringify(p))return;let m=null==n?void 0:n({active:l,dragOverlay:i,...o}),f=i.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{f.onfinish=()=>{null==m||m(),e()}})}}(t);return tc(s,a.draggable.measure),u({active:{id:e,data:i.data,node:s,rect:a.draggable.measure(s)},draggableNodes:r,dragOverlay:{node:l,rect:a.dragOverlay.measure(o)},droppableContainers:n,measuringConfiguration:a,transform:d})})}({config:a,draggableNodes:m,droppableContainers:f,measuringConfiguration:v}),T=E?x.setRef:void 0;return k.default.createElement(t2,null,k.default.createElement(t0,{animation:D},h&&C?k.default.createElement(t3,{key:C,id:h.id,ref:T,as:o,activatorEvent:u,adjustScale:r,className:c,transition:i,rect:E,style:{zIndex:d,...l},transform:S},n):null))});function t9(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function re(e){return null!==e&&e>=0}let rt=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e,l=t9(t,n,r),i=t[a],s=l[a];return s&&i?{x:s.left-i.left,y:s.top-i.top,scaleX:s.width/i.width,scaleY:s.height/i.height}:null},rr={scaleX:1,scaleY:1},rn=e=>{var t,r,n,a;let l,i,s,{activeIndex:o,activeNodeRect:c,index:d,rects:u,overIndex:h}=e,g=null!=(t=u[o])?t:c;if(!g)return null;if(d===o){let e=u[h];return e?{x:0,y:o<h?e.top+e.height-(g.top+g.height):e.top-g.top,...rr}:null}let p=(r=u,n=d,a=o,l=r[n],i=r[n-1],s=r[n+1],l?a<n?i?l.top-(i.top+i.height):s?s.top-(l.top+l.height):0:s?s.top-(l.top+l.height):i?l.top-(i.top+i.height):0:0);return d>o&&d<=h?{x:0,y:-g.height-p,...rr}:d<o&&d>=h?{x:0,y:g.height+p,...rr}:{x:0,y:0,...rr}},ra="Sortable",rl=k.default.createContext({activeIndex:-1,containerId:ra,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rt,disabled:{draggable:!1,droppable:!1}});function ri(e){let{children:t,id:r,items:n,strategy:a=rt,disabled:l=!1}=e,{active:i,dragOverlay:s,droppableRects:o,over:c,measureDroppableContainers:d}=tq(),u=eM(ra,r),h=null!==s.rect,g=(0,k.useMemo)(()=>n.map(e=>"object"==typeof e&&"id"in e?e.id:e),[n]),p=null!=i,m=i?g.indexOf(i.id):-1,f=c?g.indexOf(c.id):-1,x=(0,k.useRef)(g),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(g,x.current),v=-1!==f&&-1===m||b,y="boolean"==typeof l?{draggable:l,droppable:l}:l;eS(()=>{b&&p&&d(g)},[b,g,p,d]),(0,k.useEffect)(()=>{x.current=g},[g]);let w=(0,k.useMemo)(()=>({activeIndex:m,containerId:u,disabled:y,disableTransforms:v,items:g,overIndex:f,useDragOverlay:h,sortedRects:g.reduce((e,t,r)=>{let n=o.get(t);return n&&(e[r]=n),e},Array(g.length)),strategy:a}),[m,u,y.draggable,y.droppable,v,g,f,o,h,a]);return k.default.createElement(rl.Provider,{value:w},t)}let rs=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return t9(r,n,a).indexOf(t)},ro=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:l,newIndex:i,previousItems:s,previousContainerId:o,transition:c}=e;return!!c&&!!n&&(s===l||a!==i)&&(!!r||i!==a&&t===o)},rc={duration:200,easing:"ease"},rd="transform",ru=ez.Transition.toString({property:rd,duration:0,easing:"linear"}),rh={roleDescription:"sortable"};function rg(e){var t,r,n,a;let{animateLayoutChanges:l=ro,attributes:i,disabled:s,data:o,getNewIndex:c=rs,id:d,strategy:u,resizeObserverConfig:h,transition:g=rc}=e,{items:p,containerId:m,activeIndex:f,disabled:x,disableTransforms:b,sortedRects:v,overIndex:y,useDragOverlay:w,strategy:j}=(0,k.useContext)(rl),N=(t=s,r=x,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(n=null==t?void 0:t.draggable)?n:r.draggable,droppable:null!=(a=null==t?void 0:t.droppable)?a:r.droppable}),C=p.indexOf(d),S=(0,k.useMemo)(()=>({sortable:{containerId:m,index:C,items:p},...o}),[m,o,C,p]),E=(0,k.useMemo)(()=>p.slice(p.indexOf(d)),[p,d]),{rect:D,node:T,isOver:I,setNodeRef:O}=tZ({id:d,data:S,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...h}}),{active:R,activatorEvent:M,activeNodeRect:B,attributes:L,setNodeRef:A,listeners:P,isDragging:F,over:z,setActivatorNodeRef:V,transform:H}=function(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e,l=eM("Draggable"),{activators:i,activatorEvent:s,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,k.useContext)(tH),{role:g=t_,roleDescription:p="draggable",tabIndex:m=0}=null!=a?a:{},f=(null==o?void 0:o.id)===t,x=(0,k.useContext)(f?tW:tJ),[b,v]=eI(),[y,w]=eI(),j=(0,k.useMemo)(()=>i.reduce((e,r)=>{let{eventName:n,handler:a}=r;return e[n]=e=>{a(e,t)},e},{}),[i,t]),N=eD(r);return eS(()=>(u.set(t,{id:t,key:l,node:b,activatorNode:y,data:N}),()=>{let e=u.get(t);e&&e.key===l&&u.delete(t)}),[u,t]),{active:o,activatorEvent:s,activeNodeRect:c,attributes:(0,k.useMemo)(()=>({role:g,tabIndex:m,"aria-disabled":n,"aria-pressed":!!f&&g===t_||void 0,"aria-roledescription":p,"aria-describedby":d.draggable}),[n,g,m,f,p,d.draggable]),isDragging:f,listeners:n?void 0:j,node:b,over:h,setNodeRef:v,setActivatorNodeRef:w,transform:x}}({id:d,data:S,attributes:{...rh,...i},disabled:N.draggable}),U=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(O,A),$=!!R,K=$&&!b&&re(f)&&re(y),G=!w&&F,X=G&&K?H:null,W=K?null!=X?X:(null!=u?u:j)({rects:v,activeNodeRect:B,activeIndex:f,overIndex:y,index:C}):null,Y=re(f)&&re(y)?c({id:d,items:p,activeIndex:f,overIndex:y}):C,J=null==R?void 0:R.id,_=(0,k.useRef)({activeId:J,items:p,newIndex:Y,containerId:m}),q=p!==_.current.items,Q=l({active:R,containerId:m,isDragging:F,isSorting:$,id:d,index:C,items:p,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:g,wasDragging:null!=_.current.activeId}),Z=function(e){let{disabled:t,index:r,node:n,rect:a}=e,[l,i]=(0,k.useState)(null),s=(0,k.useRef)(r);return eS(()=>{if(!t&&r!==s.current&&n.current){let e=a.current;if(e){let t=e7(n.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&i(r)}}r!==s.current&&(s.current=r)},[t,r,n,a]),(0,k.useEffect)(()=>{l&&i(null)},[l]),l}({disabled:!Q,index:C,node:T,rect:D});return(0,k.useEffect)(()=>{$&&_.current.newIndex!==Y&&(_.current.newIndex=Y),m!==_.current.containerId&&(_.current.containerId=m),p!==_.current.items&&(_.current.items=p)},[$,Y,m,p]),(0,k.useEffect)(()=>{if(J===_.current.activeId)return;if(null!=J&&null==_.current.activeId){_.current.activeId=J;return}let e=setTimeout(()=>{_.current.activeId=J},50);return()=>clearTimeout(e)},[J]),{active:R,activeIndex:f,attributes:L,data:S,rect:D,index:C,newIndex:Y,items:p,isOver:I,isSorting:$,isDragging:F,listeners:P,node:T,overIndex:y,over:z,setNodeRef:U,setActivatorNodeRef:V,setDroppableNodeRef:O,setDraggableNodeRef:A,transform:null!=Z?Z:W,transition:Z||q&&_.current.newIndex===C?ru:(!G||eP(M))&&g&&($||Q)?ez.Transition.toString({...g,property:rd}):void 0}}function rp(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let rm=[x.Down,x.Right,x.Up,x.Left],rf=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:a,droppableContainers:l,over:i,scrollableAncestors:s}}=t;if(rm.includes(e.code)){if(e.preventDefault(),!r||!n)return;let t=[];l.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let l=a.get(r.id);if(l)switch(e.code){case x.Down:n.top<l.top&&t.push(r);break;case x.Up:n.top>l.top&&t.push(r);break;case x.Left:n.left>l.left&&t.push(r);break;case x.Right:n.left<l.left&&t.push(r)}});let d=e1({active:r,collisionRect:n,droppableRects:a,droppableContainers:t,pointerCoordinates:null}),u=e0(d,"id");if(u===(null==i?void 0:i.id)&&d.length>1&&(u=d[1].id),null!=u){let e=l.get(r.id),t=l.get(u),i=t?a.get(t.id):null,d=null==t?void 0:t.node.current;if(d&&i&&e&&t){var o,c;let r=e9(d).some((e,t)=>s[t]!==e),a=rx(e,t),l=(o=e,c=t,!!rp(o)&&!!rp(c)&&!!rx(o,c)&&o.data.current.sortable.index<c.data.current.sortable.index),u=r||!a?{x:0,y:0}:{x:l?n.width-i.width:0,y:l?n.height-i.height:0},h={x:i.left,y:i.top};return u.x&&u.y?h:eA(h,u)}}}};function rx(e,t){return!!rp(e)&&!!rp(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}var rb=e.i(727612),rv=e.i(204565),rv=rv,ry=e.i(174886),rw=e.i(77705),rj=e.i(664659),rN=e.i(463059),rC=e.i(824024),rk=((u={}).BLOCK="BLOCK",u.SECTION="SECTION",u.FLEXBOX="FLEXBOX",u.GRID="GRID",u);(h={}).HERO="HERO",h.CONTENT="CONTENT",h.FEATURES="FEATURES",h.CTA="CTA",h.TESTIMONIALS="TESTIMONIALS",h.PRICING="PRICING",h.TEAM="TEAM",h.STATS="STATS",h.LOGO_GRID="LOGO_GRID",h.FORM="FORM",h.FAQ="FAQ",h.GALLERY="GALLERY",h.VIDEO="VIDEO",h.NAVIGATION="NAVIGATION",h.HEADER="HEADER",h.FOOTER="FOOTER",h.SOCIAL="SOCIAL",h.BREADCRUMBS="BREADCRUMBS",h.DIVIDER="DIVIDER",h.SPACER="SPACER",h.CUSTOM="CUSTOM",h.PRODUCT="PRODUCT",h.BLOG="BLOG",h.CONTAINER="CONTAINER",h.LAYOUT="LAYOUT";var rS=((g={}).DESKTOP="DESKTOP",g.TABLET="TABLET",g.MOBILE="MOBILE",g);let rE=({block:e,children:t,isSelected:r=!1,isHovered:n=!1,className:a,onAddBlockToContainer:l})=>{let i,{containerType:s,layoutSettings:o,styleConfig:c,advancedConfig:d}=e,u=(()=>{let e={};if(c){if(c.backgroundColor&&(e.backgroundColor=c.backgroundColor),c.padding){let t=c.padding;e.padding=`${t.top||0}px ${t.right||0}px ${t.bottom||0}px ${t.left||0}px`}if(c.margin){let t=c.margin;e.margin=`${t.top||0}px ${t.right||0}px ${t.bottom||0}px ${t.left||0}px`}if(c.borderRadius){let t=c.borderRadius;e.borderRadius=`${t.topLeft||0}px ${t.topRight||0}px ${t.bottomRight||0}px ${t.bottomLeft||0}px`}c.borderWidth&&c.borderStyle&&c.borderColor&&(e.border=`${c.borderWidth}px ${c.borderStyle} ${c.borderColor}`),c.boxShadow&&(e.boxShadow=c.boxShadow),c.backgroundImage&&(e.backgroundImage=`url(${c.backgroundImage})`,c.backgroundSize&&(e.backgroundSize=c.backgroundSize),c.backgroundPosition&&(e.backgroundPosition=c.backgroundPosition),c.backgroundRepeat&&(e.backgroundRepeat=c.backgroundRepeat)),c.width&&(e.width=c.width),c.height&&(e.height=c.height),c.maxWidth&&(e.maxWidth=c.maxWidth),c.minHeight&&(e.minHeight=c.minHeight)}return d&&(d.position&&(e.position=d.position),void 0!==d.zIndex&&(e.zIndex=d.zIndex),d.overflow&&(e.overflow=d.overflow)),e})(),h=(()=>{if(!o)return{styles:{},classes:""};let e={},t="";switch(s){case rk.FLEXBOX:e.display="flex",e.flexDirection=o.direction||"row",e.flexWrap=o.wrap||"nowrap",e.justifyContent=o.justifyContent||"flex-start",e.alignItems=o.alignItems||"stretch",o.alignContent&&(e.alignContent=o.alignContent),o.gap&&(e.gap=`${o.gap}px`);break;case rk.GRID:e.display="grid","number"==typeof o.columns?e.gridTemplateColumns=`repeat(${o.columns}, 1fr)`:o.columns&&(e.gridTemplateColumns=o.columns),"number"==typeof o.rows?e.gridTemplateRows=`repeat(${o.rows}, 1fr)`:o.rows&&(e.gridTemplateRows=o.rows),o.columnGap&&(e.columnGap=`${o.columnGap}px`),o.rowGap&&(e.rowGap=`${o.rowGap}px`),o.autoFlow&&(e.gridAutoFlow=o.autoFlow),o.justifyItems&&(e.justifyItems=o.justifyItems),o.alignItems&&(e.alignItems=o.alignItems);break;case rk.SECTION:t="w-full",o&&(e.display="flex",e.flexDirection=o.direction||"column",e.alignItems=o.alignItems||"stretch",o.gap&&(e.gap=`${o.gap}px`))}return{styles:e,classes:t}})(),g={...h.styles,...u},p=(i=[],d?.hideOnMobile?i.push("hidden md:block"):d?.hideOnTablet?i.push("block md:hidden lg:block"):d?.hideOnDesktop&&i.push("block lg:hidden"),i.join(" "));return(0,C.jsxs)("div",{"data-block-id":e.id,"data-container-type":s,className:(0,er.cn)("transition-all duration-200",h.classes,p,d?.customClasses,r&&"ring-2 ring-primary ring-offset-2",n&&!r&&"ring-1 ring-gray-300",a),style:g,children:[d?.customCss&&(0,C.jsx)("style",{dangerouslySetInnerHTML:{__html:`[data-block-id="${e.id}"] { ${d.customCss} }`}}),t,(!t||0===k.default.Children.count(t))&&s!==rk.BLOCK&&(0,C.jsx)("div",{className:"min-h-[120px] border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50/50 hover:bg-gray-100/50 hover:border-primary/50 transition-all group/empty",children:(0,C.jsxs)("div",{className:"text-center p-4",children:[(0,C.jsxs)("button",{onClick:t=>{t.stopPropagation(),l&&l(e.id)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-primary hover:text-white border-2 border-dashed border-gray-300 hover:border-primary rounded-lg text-gray-500 hover:text-white transition-all group-hover/empty:border-primary/50",children:[(0,C.jsx)(en.Plus,{className:"h-4 w-4"}),(0,C.jsxs)("span",{className:"text-sm font-medium",children:["Add Block to ",s]})]}),(0,C.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:"or drag blocks here"})]})})]})},rD=({containerType:e,blockName:t})=>e===rk.BLOCK?null:(0,C.jsxs)("div",{className:"inline-flex items-center gap-1.5 bg-purple-600 text-white text-[10px] font-semibold px-2 py-0.5 rounded-full shadow-sm uppercase tracking-wider",children:[(()=>{switch(e){case rk.SECTION:return(0,C.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h16M4 12h16M4 19h16"})});case rk.FLEXBOX:return(0,C.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})});case rk.GRID:return(0,C.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})});default:return null}})(),(0,C.jsx)("span",{children:e})]});function rT(e){let t=new Map,r=[];e.forEach(e=>{t.set(e.id,{...e,children:[]})}),e.forEach(e=>{let n=t.get(e.id);if(e.parentId){let a=t.get(e.parentId);a?(a.children||(a.children=[]),a.children.push(n)):r.push(n)}else r.push(n)});let n=e=>{e.sort((e,t)=>e.order-t.order),e.forEach(e=>{e.children&&e.children.length>0&&n(e.children)})};return n(r),r}function rI(e,t){for(let r of e){if(r.id===t)return r;if(r.children&&r.children.length>0){let e=rI(r.children,t);if(e)return e}}return null}function rO(e,t){let r=t(),n={...e,id:r,order:e.order+1};return e.children&&e.children.length>0&&(n.children=e.children.map(e=>rO(e,t))),n}function rR(e){return e.containerType!==rk.BLOCK}function rM(e,t,r,n=0){return e.map(e=>({id:e.id,label:e.template?.name||"Untitled Block",type:e.containerType,isVisible:e.isVisible,isSelected:e.id===t,isExpanded:r.has(e.id),depth:n,children:e.children&&e.children.length>0?rM(e.children,t,r,n+1):void 0}))}function rB(e,t){let r={},n={},a={};return Object.entries(e).forEach(([e,t])=>{e.includes("color")||e.includes("background")||e.includes("font")||e.includes("padding")||e.includes("margin")||e.includes("border")?n[e]=t:e.includes("animation")||e.includes("custom")||e.includes("position")||e.includes("zIndex")?a[e]=t:r[e]=t}),{contentConfig:r,styleConfig:n,advancedConfig:a}}function rL(e){return e.map((e,t)=>{let r={...e,order:t};return e.children&&e.children.length>0&&(r.children=rL(e.children)),r})}let rA=({block:e,isSelected:t,isHovered:r=!1,onSelect:n,onHover:a,onToggleSettings:l,onRemove:i,onDuplicate:s,onToggleVisibility:o,onAddBlockToContainer:c,depth:d=0,renderChildren:u})=>{let[h,g]=(0,k.useState)(!0),p=e.children&&e.children.length>0,m=rR(e),{attributes:f,listeners:x,setNodeRef:b,transform:v,transition:y,isDragging:w}=rg({id:e.id}),{setNodeRef:j,isOver:N}=tZ({id:`droppable-${e.id}`,disabled:!m,data:{type:"container",accepts:"block",blockId:e.id}}),S={transform:ez.Transform.toString(v),transition:y,zIndex:w?100:"auto",opacity:w?.5:1};return(0,C.jsxs)("div",{ref:b,style:S,className:(0,er.cn)("relative group transition-all",d>0&&"ml-4 border-l-2 border-gray-200 pl-3",!e.isVisible&&"opacity-50"),onMouseEnter:()=>{a&&!w&&a(e.id)},onMouseLeave:()=>{a&&!w&&a(null)},onClick:e=>{e.stopPropagation(),n()},children:[(0,C.jsxs)("div",{className:(0,er.cn)("absolute -top-3 left-0 right-0 flex items-center justify-between z-20 transition-all px-2",t||r?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[p&&(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-white/90 bg-white border shadow-sm",onClick:e=>{e.stopPropagation(),g(!h)},title:h?"Collapse":"Expand",children:h?(0,C.jsx)(rj.ChevronDown,{className:"h-3 w-3"}):(0,C.jsx)(rN.ChevronRight,{className:"h-3 w-3"})}),t&&(0,C.jsx)("div",{className:"bg-primary text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm uppercase tracking-wider",children:e.template?.name||"Block"}),(0,C.jsx)(rD,{containerType:e.containerType,blockName:e.template?.name})]}),(0,C.jsxs)("div",{className:(0,er.cn)("flex items-center gap-1 bg-white shadow-md border rounded-lg p-1",t||w?"opacity-100":"opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto"),children:[(0,C.jsx)("div",{...f,...x,className:"cursor-move p-1.5 hover:bg-gray-100 rounded-md text-gray-500 hover:text-gray-900 transition-colors",title:"Drag to reorder",children:(0,C.jsx)(rv.default,{className:"h-3.5 w-3.5"})}),(0,C.jsx)("div",{className:"w-px h-4 bg-gray-200"}),(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:(0,er.cn)("h-7 w-7 transition-colors",t?"text-primary bg-primary/10":"text-gray-500 hover:text-primary hover:bg-primary/5"),onClick:e=>{e.stopPropagation(),l?l():n()},title:t?"Close Settings":"Open Settings",children:(0,C.jsx)(O.Settings,{className:"h-3.5 w-3.5"})}),(0,C.jsx)("div",{className:"w-px h-4 bg-gray-200"}),o&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-gray-500 hover:text-gray-900 hover:bg-gray-100",onClick:e=>{e.stopPropagation(),o()},title:e.isVisible?"Hide block":"Show block",children:e.isVisible?(0,C.jsx)(A.Eye,{className:"h-3.5 w-3.5"}):(0,C.jsx)(rw.EyeOff,{className:"h-3.5 w-3.5"})}),(0,C.jsx)("div",{className:"w-px h-4 bg-gray-200"})]}),s&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-gray-500 hover:text-blue-600 hover:bg-blue-50",onClick:e=>{e.stopPropagation(),s()},title:"Duplicate block",children:(0,C.jsx)(ry.Copy,{className:"h-3.5 w-3.5"})}),(0,C.jsx)("div",{className:"w-px h-4 bg-gray-200"})]}),(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-gray-500 hover:text-red-600 hover:bg-red-50",onClick:e=>{e.stopPropagation(),i()},title:"Remove block",children:(0,C.jsx)(rb.Trash2,{className:"h-3.5 w-3.5"})})]})]}),(0,C.jsx)("div",{ref:m?j:void 0,className:(0,er.cn)("bg-white rounded-lg border shadow-sm overflow-hidden transition-all mt-2",t?"border-primary/30 shadow-primary/10":"border-gray-200 hover:border-gray-300",N&&"border-blue-400 shadow-blue-100",!h&&p&&"border-dashed"),children:(()=>{if(m)return(0,C.jsx)(rE,{block:e,isSelected:t,isHovered:r,onAddBlockToContainer:c,className:(0,er.cn)("min-h-[80px]",N&&"ring-2 ring-blue-400 ring-offset-2 bg-blue-50/20"),children:p&&h&&u&&(0,C.jsx)("div",{className:"space-y-2 p-2",children:u(e.children)})});let n=e.config||{...e.contentConfig,...e.styleConfig,...e.advancedConfig};return(0,C.jsx)("div",{className:"pointer-events-none min-h-[100px] bg-white",children:e.template?(0,C.jsx)(rC.BlockPreview,{template:e.template,config:n}):(0,C.jsx)("div",{className:"flex items-center justify-center h-24 bg-gray-50 text-gray-400",children:"Unknown Block Template"})})})()}),N&&m&&(0,C.jsx)("div",{className:"absolute inset-0 pointer-events-none rounded-lg ring-2 ring-blue-400 ring-offset-2 bg-blue-50/10 flex items-center justify-center z-10",children:(0,C.jsx)("div",{className:"bg-blue-500 text-white px-3 py-1.5 rounded-full text-xs font-semibold shadow-lg",children:"Drop here to add to container"})}),d>0&&(0,C.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-gradient-to-b from-gray-300 to-transparent",style:{left:`-${16*d}px`}})]})},rP=({blocks:e,selectedBlockId:t,hoveredBlockId:r,onSelectBlock:n,onHoverBlock:a,onToggleBlockSettings:l,onRemoveBlock:i,onReorderBlocks:s,onMoveBlock:o,onDuplicateBlock:c,onToggleVisibility:d,onAddBlockToContainer:u,device:h})=>{let[g,p]=(0,k.useState)(null),[m,f]=(0,k.useState)(null),x=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(eJ(tN,{activationConstraint:{distance:8}}),eJ(tb,{coordinateGetter:rf})),b=rT(e),v=(e,s=0)=>e.map(e=>(0,C.jsx)(rA,{block:e,isSelected:t===e.id,isHovered:r===e.id,onSelect:()=>n(e.id),onHover:a,onToggleSettings:l?()=>l(e.id):void 0,onRemove:()=>i(e.id),onDuplicate:c?()=>c(e.id):void 0,onToggleVisibility:d?()=>d(e.id):void 0,onAddBlockToContainer:u,depth:s,renderChildren:e=>v(e,s+1)},e.id)),y=g?rI(e,g):null;return(0,C.jsx)("div",{className:(0,er.cn)("transition-all duration-300 ease-in-out w-full mx-auto",(()=>{switch(h){case"mobile":return"max-w-[375px]";case"tablet":return"max-w-[768px]";default:return"max-w-full"}})()),children:(0,C.jsxs)(tY,{sensors:x,collisionDetection:e1,onDragStart:e=>{p(e.active.id)},onDragOver:e=>{let{over:t}=e;f(t?.id)},onDragEnd:t=>{let{active:r,over:n}=t;if(p(null),f(null),!n||r.id===n.id)return;let a=rI(e,r.id),l=rI(e,n.id);if(a){if(n.data.current?.type==="container"&&l){(function(e,t){let r,n;return!!rR(t)&&e.id!==t.id&&!(r=[],(n=e=>{e.children&&e.children.length>0&&e.children.forEach(e=>{r.push(e),n(e)})})(e),r).some(e=>e.id===t.id)})(a,l)&&o&&o(a.id,l.id,0);return}if(l&&a.parentId===l.parentId){let t=a.parentId?rI(e,a.parentId)?.children||[]:b,l=t.findIndex(e=>e.id===r.id),i=t.findIndex(e=>e.id===n.id);if(-1!==l&&-1!==i&&l!==i){let r=[...t],[n]=r.splice(l,1);r.splice(i,0,n);let o=r.map((e,t)=>({...e,order:t}));a.parentId?s(e.map(e=>e.parentId===a.parentId&&o.find(t=>t.id===e.id)||e)):s(o)}}}},onDragCancel:()=>{p(null),f(null)},children:[(0,C.jsx)(ri,{items:e.map(e=>e.id),strategy:rn,children:(0,C.jsx)("div",{className:(0,er.cn)("min-h-[600px] bg-white shadow-lg border border-gray-200 transition-all","desktop"===h&&"rounded-none","tablet"===h&&"rounded-lg border-[3px] border-gray-400 my-8","mobile"===h&&"rounded-[2rem] border-[12px] border-gray-800 my-8 shadow-2xl"),style:{minHeight:"desktop"===h?"100vh":"600px"},children:(0,C.jsxs)("div",{className:(0,er.cn)("min-h-full","mobile"===h&&"rounded-[1.5rem] overflow-hidden"),children:[(0,C.jsx)("div",{className:"space-y-0",children:v(b)}),0===e.length&&(0,C.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-16 m-4 text-center bg-gradient-to-br from-gray-50 to-gray-100/50",children:(0,C.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,C.jsx)("div",{className:"mb-4 inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary",children:(0,C.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,C.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Start Building Your Page"}),(0,C.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Drag blocks from the left panel to add them to your canvas."}),(0,C.jsx)("p",{className:"text-xs text-gray-500",children:"Click blocks to configure  Drag to reorder  Nest in containers"})]})})]})})}),(0,C.jsx)(t8,{children:y?(0,C.jsx)("div",{className:"bg-white rounded-lg border-2 border-primary shadow-2xl p-4 opacity-90 rotate-2 scale-105",children:(0,C.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-primary",children:[(0,C.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),y.template?.name||"Block",rR(y)&&(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["(",y.containerType,")"]})]})}):null})]})})};var G=G;let rF=({blocks:e,selectedBlockId:t,onSelectBlock:r,onRemoveBlock:n,onDuplicateBlock:a,onToggleVisibility:l,onReorderBlocks:i,className:s})=>{let[o,c]=(0,k.useState)(new Set),[d,u]=(0,k.useState)(""),h=(0,k.useMemo)(()=>{if(d){let r,n,a,l=(r=[],n=d.toLowerCase(),a=e=>{let t=e.template?.name?.toLowerCase()||"",l=JSON.stringify(e.contentConfig).toLowerCase();(t.includes(n)||l.includes(n))&&r.push(e),e.children&&e.children.length>0&&e.children.forEach(a)},e.forEach(a),r),i=new Set(l.map(e=>e.id)),s=new Set(o);return l.forEach(t=>{let r=t;for(;r.parentId&&(s.add(r.parentId),r=e.find(e=>e.id===r.parentId)););}),c(s),rM(e,t,s).filter(e=>i.has(e.id))}return rM(e,t,o)},[e,t,o,d]),g=e=>{c(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})};return(0,C.jsxs)("div",{className:(0,er.cn)("flex flex-col h-full bg-white border-r",s),children:[(0,C.jsxs)("div",{className:"p-4 border-b",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[(0,C.jsx)(G.default,{className:"w-4 h-4"}),(0,C.jsx)("span",{children:"Navigator"}),(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.length,")"]})]}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:()=>{c(new Set(e.filter(e=>e.containerType!==rk.BLOCK&&e.children&&e.children.length>0).map(e=>e.id)))},className:"h-7 px-2 text-xs",title:"Expand all",children:"Expand"}),(0,C.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:()=>{c(new Set)},className:"h-7 px-2 text-xs",title:"Collapse all",children:"Collapse"})]})]}),(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)(P.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,C.jsx)(et.Input,{type:"text",placeholder:"Search blocks...",value:d,onChange:e=>u(e.target.value),className:"pl-9 pr-8 h-9"}),d&&(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>u(""),children:(0,C.jsx)(R.X,{className:"w-3 h-3"})})]})]}),(0,C.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:h.length>0?(0,C.jsx)("div",{className:"space-y-0.5",children:h.map(e=>(0,C.jsx)(rz,{node:e,onSelect:r,onToggleExpand:g,onRemove:n,onDuplicate:a,onToggleVisibility:l},e.id))}):(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[(0,C.jsx)(G.default,{className:"w-12 h-12 text-gray-300 mb-2"}),(0,C.jsx)("p",{className:"text-sm text-gray-500",children:d?"No blocks found":"No blocks yet"}),(0,C.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:d?"Try a different search":"Add blocks to your page"})]})})]})},rz=({node:e,onSelect:t,onToggleExpand:r,onRemove:n,onDuplicate:a,onToggleVisibility:l})=>{let[i,s]=(0,k.useState)(!1),o=e.children&&e.children.length>0,{attributes:c,listeners:d,setNodeRef:u,transform:h,transition:g,isDragging:p}=rg({id:e.id}),m={transform:ez.Transform.toString(h),transition:g,opacity:p?.5:1};return(0,C.jsxs)("div",{ref:u,style:m,children:[(0,C.jsxs)("div",{className:(0,er.cn)("group relative flex items-center gap-1 px-2 py-1.5 rounded-md text-sm transition-colors cursor-pointer",e.isSelected&&"bg-primary/10 text-primary font-medium",!e.isSelected&&i&&"bg-gray-100",!e.isVisible&&"opacity-50"),style:{paddingLeft:`${20*e.depth+8}px`},onClick:()=>t(e.id),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[o&&(0,C.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"flex-shrink-0 p-0.5 hover:bg-gray-200 rounded transition-colors",children:e.isExpanded?(0,C.jsx)(rj.ChevronDown,{className:"w-3 h-3"}):(0,C.jsx)(rN.ChevronRight,{className:"w-3 h-3"})}),!o&&(0,C.jsx)("div",{className:"w-4"}),(0,C.jsx)("div",{className:"flex-shrink-0 text-gray-500",children:(()=>{switch(e.type){case rk.SECTION:return(0,C.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5h16M4 12h16M4 19h16"})});case rk.FLEXBOX:return(0,C.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7"})});case rk.GRID:return(0,C.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})});default:return(0,C.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}})()}),(0,C.jsx)("div",{className:"flex-1 truncate text-xs",children:e.label}),(0,C.jsxs)("div",{className:(0,er.cn)("flex-shrink-0 flex items-center gap-0.5 transition-opacity",i||e.isSelected?"opacity-100":"opacity-0"),children:[l&&(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),l(e.id)},title:e.isVisible?"Hide":"Show",children:e.isVisible?(0,C.jsx)(A.Eye,{className:"w-3 h-3"}):(0,C.jsx)(rw.EyeOff,{className:"w-3 h-3"})}),a&&(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),a(e.id)},title:"Duplicate",children:(0,C.jsx)(ry.Copy,{className:"w-3 h-3"})}),n&&(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:t=>{t.stopPropagation(),n(e.id)},title:"Remove",children:(0,C.jsx)(rb.Trash2,{className:"w-3 h-3"})})]})]}),o&&e.isExpanded&&(0,C.jsx)("div",{children:e.children.map(e=>(0,C.jsx)(rz,{node:e,onSelect:t,onToggleExpand:r,onRemove:n,onDuplicate:a,onToggleVisibility:l},e.id))})]})};var rV=e.i(677572),rH=e.i(44016),rH=rH,rU=e.i(943144);let r$=({block:e,onUpdateConfig:t,className:r})=>{let[n,a]=(0,k.useState)("content"),l=e.template?.configSchema;if(l?.tabs)return(0,C.jsx)("div",{className:(0,er.cn)("h-full flex flex-col overflow-hidden",r),children:(0,C.jsxs)(rV.Tabs,{value:n,onValueChange:e=>a(e),className:"flex-1 flex flex-col overflow-hidden",children:[(0,C.jsx)(rV.TabsList,{className:"grid w-full grid-cols-3 h-auto p-1 bg-gray-100 shrink-0",children:l.tabs.map(e=>(0,C.jsxs)(rV.TabsTrigger,{value:e.id,className:(0,er.cn)("flex items-center gap-2 py-2.5 text-xs font-medium transition-all","data-[state=active]:bg-white data-[state=active]:shadow-sm"),children:[function(e){switch(e){case"content":return(0,C.jsx)(X.FileText,{className:"w-3.5 h-3.5"});case"style":return(0,C.jsx)(Q.Palette,{className:"w-3.5 h-3.5"});case"advanced":return(0,C.jsx)(rH.default,{className:"w-3.5 h-3.5"});default:return null}}(e.id),(0,C.jsx)("span",{children:e.label})]},e.id))}),(0,C.jsx)("div",{className:"flex-1 overflow-hidden min-h-0",children:l.tabs.map(r=>(0,C.jsx)(rV.TabsContent,{value:r.id,className:"h-full mt-0 data-[state=inactive]:hidden",children:(0,C.jsx)(S.ScrollArea,{className:"h-full",children:(0,C.jsx)("div",{className:"p-4 pb-8",children:r.sections?(0,C.jsx)("div",{className:"space-y-4",children:r.sections.map(n=>(0,C.jsxs)("div",{className:"space-y-3",children:[(0,C.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[n.icon&&(0,C.jsx)("span",{children:n.icon}),n.label]}),(0,C.jsx)(rU.ConfigForm,{schema:{fields:n.fields},config:rK(e,r.id),onChange:e=>t(r.id,e)})]},n.id))}):r.fields?(0,C.jsx)(rU.ConfigForm,{schema:{fields:r.fields},config:rK(e,r.id),onChange:e=>t(r.id,e)}):null})})},r.id))})]})});let i=l?.fields?.filter(e=>!rG(e)&&!rX(e))||[],s=l?.fields?.filter(e=>rG(e))||[],o=l?.fields?.filter(e=>rX(e))||[];return(0,C.jsx)("div",{className:(0,er.cn)("h-full flex flex-col overflow-hidden",r),children:(0,C.jsxs)(rV.Tabs,{value:n,onValueChange:e=>a(e),className:"flex-1 flex flex-col overflow-hidden",children:[(0,C.jsxs)(rV.TabsList,{className:"grid w-full grid-cols-3 h-auto p-1 bg-gray-100 shrink-0",children:[(0,C.jsxs)(rV.TabsTrigger,{value:"content",className:"flex items-center gap-2 py-2.5 text-xs font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[(0,C.jsx)(X.FileText,{className:"w-3.5 h-3.5"}),(0,C.jsx)("span",{children:"Content"})]}),(0,C.jsxs)(rV.TabsTrigger,{value:"style",className:"flex items-center gap-2 py-2.5 text-xs font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[(0,C.jsx)(Q.Palette,{className:"w-3.5 h-3.5"}),(0,C.jsx)("span",{children:"Style"})]}),(0,C.jsxs)(rV.TabsTrigger,{value:"advanced",className:"flex items-center gap-2 py-2.5 text-xs font-medium data-[state=active]:bg-white data-[state=active]:shadow-sm",children:[(0,C.jsx)(rH.default,{className:"w-3.5 h-3.5"}),(0,C.jsx)("span",{children:"Advanced"})]})]}),(0,C.jsxs)("div",{className:"flex-1 overflow-hidden min-h-0",children:[(0,C.jsx)(rV.TabsContent,{value:"content",className:"h-full mt-0 data-[state=inactive]:hidden",children:(0,C.jsx)(S.ScrollArea,{className:"h-full",children:(0,C.jsx)("div",{className:"p-4 pb-8",children:i.length>0?(0,C.jsx)(rU.ConfigForm,{schema:{fields:i},config:e.contentConfig,onChange:e=>t("content",e)}):(0,C.jsx)(rW,{title:"No Content Settings",description:"This block doesn't have any content settings to configure."})})})}),(0,C.jsx)(rV.TabsContent,{value:"style",className:"h-full mt-0 data-[state=inactive]:hidden",children:(0,C.jsx)(S.ScrollArea,{className:"h-full",children:(0,C.jsx)("div",{className:"p-4 pb-8",children:s.length>0?(0,C.jsx)(rU.ConfigForm,{schema:{fields:s},config:e.styleConfig||{},onChange:e=>t("style",e)}):(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(rY,{config:e.styleConfig||{},onChange:e=>t("style",e)})})})})}),(0,C.jsx)(rV.TabsContent,{value:"advanced",className:"h-full mt-0 data-[state=inactive]:hidden",children:(0,C.jsx)(S.ScrollArea,{className:"h-full",children:(0,C.jsx)("div",{className:"p-4 pb-8",children:o.length>0?(0,C.jsx)(rU.ConfigForm,{schema:{fields:o},config:e.advancedConfig||{},onChange:e=>t("advanced",e)}):(0,C.jsx)(rJ,{config:e.advancedConfig||{},onChange:e=>t("advanced",e)})})})})]})]})})};function rK(e,t){switch(t){case"content":return e.contentConfig;case"style":return e.styleConfig||{};case"advanced":return e.advancedConfig||{};default:return{}}}function rG(e){return["color","background","font","text","padding","margin","border","shadow","size","width","height","spacing","typography","align","radius"].some(t=>e.name.toLowerCase().includes(t))}function rX(e){return["animation","custom","css","class","position","zindex","overflow","transform","transition"].some(t=>e.name.toLowerCase().includes(t))}let rW=({title:e,description:t})=>(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,C.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mb-3",children:(0,C.jsx)(rH.default,{className:"w-6 h-6 text-gray-400"})}),(0,C.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:e}),(0,C.jsx)("p",{className:"text-xs text-gray-500 max-w-xs",children:t})]}),rY=({config:e,onChange:t})=>(0,C.jsx)(rU.ConfigForm,{schema:{fields:[{type:"color",name:"backgroundColor",label:"Background Color",defaultValue:""},{type:"color",name:"textColor",label:"Text Color",defaultValue:""},{type:"number",name:"padding",label:"Padding (px)",min:0,max:200,defaultValue:0},{type:"number",name:"margin",label:"Margin (px)",min:0,max:200,defaultValue:0}]},config:e,onChange:t}),rJ=({config:e,onChange:t})=>(0,C.jsx)(rU.ConfigForm,{schema:{fields:[{type:"textarea",name:"customCss",label:"Custom CSS",placeholder:"/* Add custom CSS here */",defaultValue:""},{type:"text",name:"customClasses",label:"CSS Classes",placeholder:"class-1 class-2",defaultValue:""},{type:"toggle",name:"hideOnMobile",label:"Hide on Mobile",defaultValue:!1},{type:"toggle",name:"hideOnTablet",label:"Hide on Tablet",defaultValue:!1},{type:"toggle",name:"hideOnDesktop",label:"Hide on Desktop",defaultValue:!1}]},config:e,onChange:t});var G=G,r_=e.i(112798),r_=r_,U=U;let rq=({isOpen:e,onClose:t,blockTemplates:r=[],onAddBlock:n,recentBlocks:a=[],onNavigate:l})=>{let[i,s]=(0,k.useState)(""),[o,c]=(0,k.useState)(0),d=(0,k.useRef)(null),u=(0,k.useRef)(null),h=(0,k.useMemo)(()=>{let e=[];return a.length>0&&e.push(...a.slice(0,5).map(e=>({id:`recent-${e.id}`,type:"recent",label:e.name,description:"Recently used",icon:(0,C.jsx)(G.default,{className:"w-4 h-4 text-blue-500"}),action:()=>{n&&n(e),t()},keywords:[e.name,e.category,"recent"]}))),e.push(...r.map(e=>({id:`block-${e.id}`,type:"block",label:e.name,description:e.description||e.category,icon:(0,C.jsx)(G.default,{className:"w-4 h-4 text-purple-500"}),action:()=>{n&&n(e),t()},keywords:[e.name,e.category,e.slug]}))),e.push({id:"create-page",type:"action",label:"Create New Page",description:"Create a new CMS page",icon:(0,C.jsx)(en.Plus,{className:"w-4 h-4 text-green-500"}),action:()=>{l&&l("/admin/cms/pages/new"),t()},keywords:["create","new","page"]},{id:"view-pages",type:"action",label:"View All Pages",description:"Go to pages list",icon:(0,C.jsx)(X.FileText,{className:"w-4 h-4 text-blue-500"}),action:()=>{l&&l("/admin/cms/pages"),t()},keywords:["pages","list","view"]}),e.push({id:"page-settings",type:"setting",label:"Page Settings",description:"Edit page metadata and SEO",icon:(0,C.jsx)(O.Settings,{className:"w-4 h-4 text-gray-500"}),action:()=>{t()},keywords:["settings","page","seo","metadata"]},{id:"help",type:"setting",label:"Help & Documentation",description:"View editor documentation",icon:(0,C.jsx)(r_.default,{className:"w-4 h-4 text-orange-500"}),action:()=>{window.open("https://code.claude.com/docs","_blank"),t()},keywords:["help","docs","documentation","guide"]}),e},[r,a,n,t,l]),g=(0,k.useMemo)(()=>{if(!i.trim())return h.sort((e,t)=>"recent"===e.type&&"recent"!==t.type?-1:+("recent"!==e.type&&"recent"===t.type));let e=i.toLowerCase();return h.filter(t=>[t.label,t.description,...t.keywords||[]].filter(Boolean).join(" ").toLowerCase().includes(e)).sort((t,r)=>{let n=t.label.toLowerCase().startsWith(e),a=r.label.toLowerCase().startsWith(e);return n&&!a?-1:!n&&a?1:0})},[h,i]);return((0,k.useEffect)(()=>{if(!e)return;let r=e=>{"Escape"===e.key?t():"ArrowDown"===e.key?(e.preventDefault(),c(e=>Math.min(e+1,g.length-1))):"ArrowUp"===e.key?(e.preventDefault(),c(e=>Math.max(e-1,0))):"Enter"===e.key&&(e.preventDefault(),g[o]&&g[o].action())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e,g,o,t]),(0,k.useEffect)(()=>{c(0)},[g]),(0,k.useEffect)(()=>{e&&d.current&&d.current.focus()},[e]),(0,k.useEffect)(()=>{if(u.current){let e=u.current.children[o];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[o]),e)?(0,ex.createPortal)((0,C.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[10vh] bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,C.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden animate-in zoom-in-95 slide-in-from-top-4 duration-200",children:[(0,C.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 border-b bg-gray-50",children:[(0,C.jsx)(P.Search,{className:"w-5 h-5 text-gray-400"}),(0,C.jsx)(et.Input,{ref:d,type:"text",placeholder:"Search blocks, pages, and actions...",value:i,onChange:e=>s(e.target.value),className:"border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 text-base"}),(0,C.jsxs)("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs font-mono text-gray-500 bg-gray-100 border rounded",children:[(0,C.jsx)(U.default,{className:"w-3 h-3"}),(0,C.jsx)("span",{children:"E"})]})]}),(0,C.jsx)("div",{ref:u,className:"max-h-[60vh] overflow-y-auto",children:g.length>0?(0,C.jsx)("div",{className:"py-2",children:g.map((e,t)=>(0,C.jsx)(rQ,{item:e,isSelected:t===o,onClick:()=>{c(t),e.action()},onMouseEnter:()=>c(t)},e.id))}):(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,C.jsx)(P.Search,{className:"w-12 h-12 text-gray-300 mb-3"}),(0,C.jsx)("p",{className:"text-sm text-gray-500",children:"No results found"}),(0,C.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Try searching for blocks, pages, or actions"})]})}),(0,C.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-gray-50 text-xs text-gray-500",children:[(0,C.jsxs)("div",{className:"flex items-center gap-4",children:[(0,C.jsxs)("span",{className:"flex items-center gap-1",children:[(0,C.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white border rounded font-mono",children:""}),(0,C.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white border rounded font-mono",children:""}),"Navigate"]}),(0,C.jsxs)("span",{className:"flex items-center gap-1",children:[(0,C.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white border rounded font-mono",children:"Enter"}),"Select"]}),(0,C.jsxs)("span",{className:"flex items-center gap-1",children:[(0,C.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white border rounded font-mono",children:"Esc"}),"Close"]})]}),(0,C.jsxs)("span",{children:[g.length," results"]})]})]})}),document.body):null},rQ=({item:e,isSelected:t,onClick:r,onMouseEnter:n})=>(0,C.jsxs)("button",{className:(0,er.cn)("w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors",t?"bg-primary/10 border-l-2 border-primary":"hover:bg-gray-50"),onClick:r,onMouseEnter:n,children:[(0,C.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,C.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"font-medium text-sm text-gray-900 truncate",children:e.label}),(0,C.jsx)("span",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold",children:(()=>{switch(e.type){case"block":return"Block";case"recent":return"Recent";case"action":return"Action";case"setting":return"Setting";case"page":return"Page";default:return""}})()})]}),e.description&&(0,C.jsx)("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:e.description})]}),(0,C.jsx)(rN.ChevronRight,{className:(0,er.cn)("w-4 h-4 text-gray-400 flex-shrink-0",t&&"text-primary")})]});var $=$,rZ=e.i(688511),r0=e.i(503116);let r1=({isOpen:e,onClose:t,history:r,currentIndex:n,onRestoreToIndex:a,onClearHistory:l})=>{let i=(0,k.useMemo)(()=>{let e=Date.now(),t=[],n=[],a=[],l=[],i=[];return r.forEach((t,r)=>{let s=e-t.timestamp;s<864e5?n.push({index:r,item:t}):s<1728e5?a.push({index:r,item:t}):s<6048e5?l.push({index:r,item:t}):i.push({index:r,item:t})}),n.length>0&&t.push({label:"Today",items:n.reverse()}),a.length>0&&t.push({label:"Yesterday",items:a.reverse()}),l.length>0&&t.push({label:"This Week",items:l.reverse()}),i.length>0&&t.push({label:"Older",items:i.reverse()}),t},[r]);return e?(0,ex.createPortal)((0,C.jsx)("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,C.jsxs)("div",{className:"w-full max-w-md bg-white sm:rounded-xl shadow-2xl border border-gray-200 overflow-hidden animate-in slide-in-from-bottom sm:zoom-in-95 duration-200 max-h-[90vh] sm:max-h-[80vh] flex flex-col",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-gray-50",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)($.default,{className:"w-5 h-5 text-gray-700"}),(0,C.jsx)("h2",{className:"font-semibold text-gray-900",children:"History"}),(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["(",r.length," actions)"]})]}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[l&&r.length>0&&(0,C.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:l,className:"h-8 px-2 text-xs text-red-600 hover:text-red-700 hover:bg-red-50",children:"Clear All"}),(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:(0,C.jsx)(R.X,{className:"w-4 h-4"})})]})]}),(0,C.jsx)(S.ScrollArea,{className:"flex-1",children:r.length>0?(0,C.jsx)("div",{className:"p-2",children:i.map(e=>(0,C.jsxs)("div",{className:"mb-4",children:[(0,C.jsx)("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e.label}),(0,C.jsx)("div",{className:"space-y-0.5",children:e.items.map(({index:e,item:t})=>(0,C.jsx)(r2,{item:t,index:e,isCurrent:e===n,onClick:()=>a(e)},e))})]},e.label))}):(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,C.jsx)(r0.Clock,{className:"w-12 h-12 text-gray-300 mb-3"}),(0,C.jsx)("p",{className:"text-sm text-gray-500",children:"No history yet"}),(0,C.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Actions you perform will appear here"})]})}),(0,C.jsx)("div",{className:"px-4 py-3 border-t bg-gray-50 text-xs text-gray-500",children:(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("span",{children:"Click any action to restore"}),(0,C.jsx)("kbd",{className:"px-2 py-1 bg-white border rounded font-mono",children:"Ctrl+H"})]})})]})}),document.body):null},r2=({item:e,index:t,isCurrent:r,onClick:n})=>{let a,l=0===(a=e.blocks.length)?"Page created":`${a} block${1!==a?"s":""}`,i=0===e.blocks.length?(0,C.jsx)(en.Plus,{className:"w-4 h-4"}):(0,C.jsx)(rZ.Edit,{className:"w-4 h-4"}),s=function(e){let t=new Date(e),r=new Date,n=r.getTime()-t.getTime();if(n<6e4)return"Just now";if(n<36e5){let e=Math.floor(n/6e4);return`${e} minute${1!==e?"s":""} ago`}if(n<864e5){let e=Math.floor(n/36e5);return`${e} hour${1!==e?"s":""} ago`}if(t.toDateString()===r.toDateString())return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});let a=Math.floor(n/864e5);return a<7?`${a} day${1!==a?"s":""} ago`:t.toLocaleDateString([],{month:"short",day:"numeric"})}(e.timestamp);return(0,C.jsxs)("button",{className:(0,er.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all",r?"bg-primary/10 border-l-2 border-primary":"hover:bg-gray-100 border-l-2 border-transparent"),onClick:n,children:[(0,C.jsx)("div",{className:(0,er.cn)("flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center",r?"bg-primary/20 text-primary":"bg-gray-100 text-gray-600"),children:i}),(0,C.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,C.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:l}),(0,C.jsx)("p",{className:"text-xs text-gray-500",children:s})]}),r&&(0,C.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-primary rounded-full animate-pulse"})]})};var r5=e.i(110204),r4=e.i(624687),r3=e.i(967489);let r6=({pageData:e,onChange:t})=>(0,C.jsxs)("div",{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"space-y-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("h3",{className:"font-semibold text-sm text-gray-900",children:"Basic Information"}),(0,C.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Configure the basic page details"})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(r5.Label,{htmlFor:"title",children:"Page Title"}),(0,C.jsx)(et.Input,{id:"title",value:e.title,onChange:e=>t("title",e.target.value),placeholder:"Enter page title"})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(r5.Label,{htmlFor:"slug",children:"URL Slug"}),(0,C.jsx)(et.Input,{id:"slug",value:e.slug,onChange:e=>t("slug",e.target.value),placeholder:"page-url-slug"}),(0,C.jsx)("p",{className:"text-xs text-muted-foreground",children:e.overridesStorefrontPage&&e.overriddenPageType?(0,C.jsxs)(C.Fragment,{children:["This page overrides the ",(0,C.jsx)("strong",{children:e.overriddenPageType})," storefront page.","PUBLISHED"!==e.status&&(0,C.jsx)("span",{className:"block mt-1 text-amber-600 font-medium",children:" Page must be Published for override to take effect"})]}):(0,C.jsxs)(C.Fragment,{children:["URL: /landing/",e.slug]})})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(r5.Label,{htmlFor:"description",children:"Description"}),(0,C.jsx)(r4.Textarea,{id:"description",value:e.description||"",onChange:e=>t("description",e.target.value),placeholder:"Brief description of the page",rows:3})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(r5.Label,{htmlFor:"status",children:"Status"}),(0,C.jsxs)(r3.Select,{value:String(e.status||"DRAFT"),onValueChange:e=>t("status",e),children:[(0,C.jsx)(r3.SelectTrigger,{id:"status",className:"w-full",children:(0,C.jsx)(r3.SelectValue,{placeholder:"Select status"})}),(0,C.jsxs)(r3.SelectContent,{className:"z-[100]",children:[(0,C.jsx)(r3.SelectItem,{value:"DRAFT",children:"Draft"}),(0,C.jsx)(r3.SelectItem,{value:"PUBLISHED",children:"Published"}),(0,C.jsx)(r3.SelectItem,{value:"SCHEDULED",children:"Scheduled"}),(0,C.jsx)(r3.SelectItem,{value:"ARCHIVED",children:"Archived"})]})]}),e.overridesStorefrontPage&&"PUBLISHED"!==e.status&&(0,C.jsx)("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-md",children:(0,C.jsxs)("p",{className:"text-xs text-amber-800",children:[(0,C.jsx)("strong",{children:"Note:"})," Storefront page overrides only work when the page status is ",(0,C.jsx)("strong",{children:"Published"}),". Change the status to Published to activate the override."]})})]})]}),(0,C.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("h3",{className:"font-semibold text-sm text-gray-900",children:"SEO Settings"}),(0,C.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Optimize your page for search engines"})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(r5.Label,{htmlFor:"seoTitle",children:"SEO Title"}),(0,C.jsx)(et.Input,{id:"seoTitle",value:e.seoTitle||"",onChange:e=>t("seoTitle",e.target.value),placeholder:"Title for search engines",maxLength:60}),(0,C.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.seoTitle||"").length,"/60 characters"]})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(r5.Label,{htmlFor:"seoDescription",children:"SEO Description"}),(0,C.jsx)(r4.Textarea,{id:"seoDescription",value:e.seoDescription||"",onChange:e=>t("seoDescription",e.target.value),placeholder:"Description for search engines",rows:3,maxLength:160}),(0,C.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.seoDescription||"").length,"/160 characters"]})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(r5.Label,{htmlFor:"seoKeywords",children:"SEO Keywords"}),(0,C.jsx)(et.Input,{id:"seoKeywords",value:e.seoKeywords||"",onChange:e=>t("seoKeywords",e.target.value),placeholder:"keyword1, keyword2, keyword3"}),(0,C.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated keywords"})]})]})]});var r7=e.i(522016),r8=e.i(951445),r9=e.i(453136),ne=e.i(826707);let nt=({device:e,onChange:t})=>(0,C.jsxs)("div",{className:"flex items-center bg-gray-100 p-1 rounded-lg border",children:[(0,C.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:()=>t("desktop"),className:(0,er.cn)("h-7 w-7 p-0 hover:bg-white hover:shadow-sm transition-all","desktop"===e&&"bg-white shadow-sm text-primary"),title:"Desktop View",children:(0,C.jsx)(r8.Monitor,{className:"h-4 w-4"})}),(0,C.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:()=>t("tablet"),className:(0,er.cn)("h-7 w-7 p-0 hover:bg-white hover:shadow-sm transition-all","tablet"===e&&"bg-white shadow-sm text-primary"),title:"Tablet View",children:(0,C.jsx)(r9.Tablet,{className:"h-4 w-4"})}),(0,C.jsx)(E.Button,{variant:"ghost",size:"sm",onClick:()=>t("mobile"),className:(0,er.cn)("h-7 w-7 p-0 hover:bg-white hover:shadow-sm transition-all","mobile"===e&&"bg-white shadow-sm text-primary"),title:"Mobile View",children:(0,C.jsx)(ne.Smartphone,{className:"h-4 w-4"})})]});var nr=e.i(618564);let nn=({pageTitle:e,pageId:t,pageSlug:r,pageData:n,blocks:a,templates:l,selectedBlockId:i,hoveredBlockId:s,deviceMode:o=rS.DESKTOP,isSaving:c,isDirty:d,autoSaveStatus:u="idle",history:h=[],historyIndex:g=-1,canUndo:p=!1,canRedo:m=!1,clipboard:f,onAddBlock:x,onAddContainerBlock:b,onSelectBlock:v,onHoverBlock:y,onRemoveBlock:w,onReorderBlocks:j,onMoveBlock:N,onUpdateBlockConfig:en,onDuplicateBlock:ea,onToggleVisibility:el,onCopyBlock:ei,onPasteBlock:es,onCopyStyle:eo,onPasteStyle:ec,onUpdatePageData:ed,onSave:eu,onUndo:eh,onRedo:eg,onRestoreHistory:ep,onSetDeviceMode:em})=>{let ex=a.find(e=>e.id===i),[eb,ev]=(0,k.useState)(o),{setIsCollapsed:ey}=(0,nr.useAdminSidebar)(),[ew,ej]=(0,k.useState)(!1),[eN,eC]=(0,k.useState)(!0),[ek,eS]=(0,k.useState)(!0),[eE,eD]=(0,k.useState)(""),eT=function(){let[e,t]=(0,k.useState)(!1);return{isOpen:e,open:()=>t(!0),close:()=>t(!1),toggle:()=>t(e=>!e)}}(),eI=function(){let[e,t]=k.default.useState(!1);return{isOpen:e,open:()=>t(!0),close:()=>t(!1),toggle:()=>t(e=>!e)}}();(0,k.useEffect)(()=>(ey(!0),()=>ey(!1)),[ey]),(0,k.useEffect)(()=>{em&&em(eb)},[eb,em]),function({enabled:e=!0,shortcuts:t}){let r=(0,k.useCallback)(r=>{if(!e)return;let n=r.target;if("INPUT"!==n.tagName&&"TEXTAREA"!==n.tagName&&!n.isContentEditable)for(let e of t){let t=r.key.toLowerCase()===e.key.toLowerCase(),n=e.ctrl?r.ctrlKey||r.metaKey:!r.ctrlKey&&!r.metaKey,a=e.shift?r.shiftKey:!r.shiftKey,l=e.alt?r.altKey:!r.altKey;if(e.meta,r.metaKey,t&&n&&a&&l){!1!==e.preventDefault&&r.preventDefault(),e.action();break}}},[e,t]);(0,k.useEffect)(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}),[r])}({enabled:!0,shortcuts:(0,k.useMemo)(()=>{var e;let t;return e={onSave:()=>{d&&!c&&eu()},onUndo:eh,onRedo:eg,onCopy:i&&ei?()=>ei(i):void 0,onPaste:es,onDuplicate:i&&ea?()=>ea(i):void 0,onDelete:i?()=>w(i):void 0,onOpenFinder:eT.open,onOpenHistory:eI.open,onToggleDeviceMode:()=>{let e=["desktop","tablet","mobile"],t=(e.indexOf(eb)+1)%e.length;ev(e[t])},onDeselectAll:()=>v("")},t=[],e.onSave&&t.push({key:"s",ctrl:!0,description:"Save page",action:e.onSave}),e.onUndo&&t.push({key:"z",ctrl:!0,description:"Undo",action:e.onUndo}),e.onRedo&&(t.push({key:"z",ctrl:!0,shift:!0,description:"Redo",action:e.onRedo}),t.push({key:"y",ctrl:!0,description:"Redo",action:e.onRedo})),e.onCopy&&t.push({key:"c",ctrl:!0,description:"Copy selected block",action:e.onCopy}),e.onPaste&&t.push({key:"v",ctrl:!0,description:"Paste block",action:e.onPaste}),e.onDuplicate&&t.push({key:"d",ctrl:!0,description:"Duplicate selected block",action:e.onDuplicate}),e.onDelete&&(t.push({key:"Delete",description:"Delete selected block",action:e.onDelete}),t.push({key:"Backspace",description:"Delete selected block",action:e.onDelete})),e.onOpenFinder&&(t.push({key:"e",ctrl:!0,description:"Open Finder",action:e.onOpenFinder}),t.push({key:"k",ctrl:!0,description:"Open Finder",action:e.onOpenFinder})),e.onOpenHistory&&t.push({key:"h",ctrl:!0,description:"Open History",action:e.onOpenHistory}),e.onToggleDeviceMode&&t.push({key:"m",ctrl:!0,description:"Toggle device mode",action:e.onToggleDeviceMode}),e.onShowHelp&&t.push({key:"/",ctrl:!0,description:"Show keyboard shortcuts",action:e.onShowHelp}),e.onSelectAll&&t.push({key:"a",ctrl:!0,description:"Select all blocks",action:e.onSelectAll}),e.onDeselectAll&&t.push({key:"Escape",description:"Deselect all",action:e.onDeselectAll}),t},[d,c,eu,eh,eg,i,ei,es,ea,w,eT,eI,eb])});let eO=(0,k.useMemo)(()=>{if(!eE.trim())return l;let e=eE.toLowerCase().trim();return l.filter(t=>{let r=t.name?.toLowerCase().includes(e),n=t.description?.toLowerCase().includes(e),a=t.category?.toLowerCase().replace("_"," ").includes(e),l=t.slug?.toLowerCase().includes(e);return r||n||a||l})},[l,eE]),eR=(0,k.useMemo)(()=>eO.reduce((e,t)=>{let r=t.category;return e[r]||(e[r]=[]),e[r].push(t),e},{}),[eO]);return(0,C.jsxs)("div",{className:"fixed inset-0 lg:left-[70px] z-30 bg-background flex flex-col",children:[(0,C.jsxs)("header",{className:"h-16 border-b flex items-center justify-between px-4 sm:px-6 bg-white/95 backdrop-blur-sm shrink-0 z-20 shadow-sm",children:[(0,C.jsxs)("div",{className:"flex items-center gap-6",children:[(0,C.jsxs)("div",{className:"flex items-center gap-4",children:[(0,C.jsx)(r7.default,{href:"/admin/cms/pages",className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-muted-foreground hover:text-foreground",children:(0,C.jsx)(T.ArrowLeft,{className:"h-5 w-5"})}),(0,C.jsxs)("div",{className:"flex flex-col",children:[(0,C.jsx)("h1",{className:"font-semibold text-base",children:n.title||e}),(0,C.jsx)("span",{className:"text-xs text-muted-foreground",children:"Page Editor"})]})]}),(0,C.jsx)("div",{className:"h-6 w-px bg-gray-200"}),(0,C.jsx)(nt,{device:eb,onChange:ev})]}),(0,C.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[(0,C.jsxs)(E.Button,{variant:"ghost",size:"sm",onClick:eT.open,className:"gap-2",title:"Open Finder (Ctrl+E)",children:[(0,C.jsx)(U.default,{className:"h-4 w-4"}),(0,C.jsx)("span",{className:"hidden md:inline",children:"Finder"})]}),(0,C.jsxs)(E.Button,{variant:"ghost",size:"sm",onClick:eI.open,className:"gap-2",title:"Open History (Ctrl+H)",children:[(0,C.jsx)($.default,{className:"h-4 w-4"}),(0,C.jsx)("span",{className:"hidden md:inline",children:"History"})]}),(0,C.jsx)("div",{className:"h-6 w-px bg-gray-200"}),b&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(E.Button,{variant:"ghost",size:"sm",onClick:()=>b(rk.SECTION),className:"gap-2",title:"Add Section Container",children:[(0,C.jsx)(G.default,{className:"h-4 w-4"}),(0,C.jsx)("span",{className:"hidden lg:inline",children:"Section"})]}),(0,C.jsxs)(E.Button,{variant:"ghost",size:"sm",onClick:()=>b(rk.GRID),className:"gap-2",title:"Add Grid Container",children:[(0,C.jsx)(K.Grid3x3,{className:"h-4 w-4"}),(0,C.jsx)("span",{className:"hidden lg:inline",children:"Grid"})]}),(0,C.jsx)("div",{className:"h-6 w-px bg-gray-200"})]}),(0,C.jsxs)(E.Button,{variant:"ghost",size:"sm",onClick:()=>{ew&&!i?ej(!1):(v(""),ej(!0))},className:(0,er.cn)("gap-2",ew&&!i&&"bg-accent"),title:"Page Settings",children:[(0,C.jsx)(O.Settings,{className:"h-4 w-4"}),(0,C.jsx)("span",{className:"hidden md:inline",children:"Page"})]}),(0,C.jsx)("div",{className:"h-6 w-px bg-gray-200"}),eh&&eg&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",onClick:eh,disabled:!p,title:"Undo (Ctrl+Z)",className:"h-8 w-8",children:(0,C.jsx)(V.default,{className:(0,er.cn)("h-4 w-4",!p&&"opacity-40")})}),(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",onClick:eg,disabled:!m,title:"Redo (Ctrl+Y)",className:"h-8 w-8",children:(0,C.jsx)(H.default,{className:(0,er.cn)("h-4 w-4",!m&&"opacity-40")})}),(0,C.jsx)("div",{className:"h-6 w-px bg-gray-200"})]}),"idle"!==u&&(0,C.jsxs)("div",{className:(0,er.cn)("flex items-center gap-2 text-xs px-2 sm:px-3 py-1.5 rounded-md","saving"===u&&"bg-blue-50 text-blue-700","saved"===u&&"bg-green-50 text-green-700","error"===u&&"bg-red-50 text-red-700"),children:["saving"===u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(I.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),(0,C.jsx)("span",{className:"hidden sm:inline",children:"Saving..."})]}),"saved"===u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(F.CheckCircle2,{className:"h-3.5 w-3.5"}),(0,C.jsx)("span",{className:"hidden sm:inline",children:"Saved"})]}),"error"===u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(z.AlertCircle,{className:"h-3.5 w-3.5"}),(0,C.jsx)("span",{className:"hidden sm:inline",children:"Error"})]})]}),(0,C.jsx)(r7.default,{href:`/en/landing/${r}`,target:"_blank",children:(0,C.jsxs)(E.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,C.jsx)(A.Eye,{className:"h-4 w-4"}),"Preview"]})}),(0,C.jsx)(E.Button,{size:"sm",onClick:eu,disabled:!d||c,className:"min-w-[100px]",title:d?"Save (Ctrl+S)":"No changes",children:c?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(I.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(D.Save,{className:"mr-2 h-4 w-4"}),"Save"]})}),(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",onClick:()=>ej(!ew),title:ew?"Close settings":"Open settings",children:ew?(0,C.jsx)(M.default,{className:"h-5 w-5"}):(0,C.jsx)(B.default,{className:"h-5 w-5"})})]})]}),(0,C.jsxs)("div",{className:"flex-1 flex overflow-hidden relative min-h-0",children:[(0,C.jsxs)("div",{className:(0,er.cn)("border-r flex flex-col bg-white shrink-0 shadow-sm transition-all duration-300 min-h-0",eN||ek?"w-80":"w-0 border-r-0 overflow-hidden"),children:[ek&&(0,C.jsx)("div",{className:"h-1/2 border-b flex flex-col min-h-0",children:(0,C.jsx)(rF,{blocks:a,selectedBlockId:i,onSelectBlock:v,onRemoveBlock:w,onDuplicateBlock:ea,onToggleVisibility:el,onReorderBlocks:j})}),eN&&(0,C.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 bg-white",children:[(0,C.jsxs)("div",{className:"p-3 border-b shrink-0",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("div",{className:"p-1.5 bg-primary/10 rounded",children:(0,C.jsx)(L.LayoutTemplate,{className:"h-3.5 w-3.5 text-primary"})}),(0,C.jsx)("h2",{className:"font-semibold text-sm",children:"Elements"})]}),(0,C.jsxs)("span",{className:"text-xs text-muted-foreground",children:[eO.length," items"]})]}),(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)(P.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-400"}),(0,C.jsx)(et.Input,{type:"text",placeholder:"Search widgets...",value:eE,onChange:e=>eD(e.target.value),className:"pl-9 h-8 text-sm"})]})]}),(0,C.jsx)(S.ScrollArea,{className:"flex-1 min-h-0",children:(0,C.jsx)("div",{className:"p-3 space-y-4",children:0===Object.entries(eR).length?(0,C.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No widgets found"}):Object.entries(eR).map(([e,t])=>(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 mb-2 px-1",children:[(e=>{let t="h-3.5 w-3.5 text-gray-500";switch(e){case"HERO":return(0,C.jsx)(J.default,{className:t});case"CONTENT":return(0,C.jsx)(X.FileText,{className:t});case"FEATURES":default:return(0,C.jsx)(G.default,{className:t});case"CTA":return(0,C.jsx)(_.default,{className:t});case"SOCIAL_PROOF":case"FORM":case"FAQ":return(0,C.jsx)(q.MessageSquare,{className:t});case"PRICING":case"PRODUCT":return(0,C.jsx)(Z.ShoppingCart,{className:t});case"TEAM":case"STATS":return(0,C.jsx)(Q.Palette,{className:t});case"GALLERY":return(0,C.jsx)(W.Image,{className:t});case"NAVIGATION":case"LAYOUT":return(0,C.jsx)(L.LayoutTemplate,{className:t});case"BLOG":return(0,C.jsx)(ee.Newspaper,{className:t});case"MEDIA":return(0,C.jsx)(Y.Video,{className:t})}})(e),(0,C.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:e.replace("_"," ")}),(0,C.jsxs)("span",{className:"text-xs text-gray-400",children:["(",t.length,")"]})]}),(0,C.jsx)("div",{className:"grid grid-cols-2 gap-1.5",children:t.map(e=>(0,C.jsx)(ef,{template:e,onAdd:()=>{let t=a.find(e=>e.id===i);t&&("SECTION"===t.containerType||"FLEXBOX"===t.containerType||"GRID"===t.containerType)?x(e,i):x(e)}},e.id))})]},e))})})]})]}),(0,C.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden bg-gradient-to-br from-gray-50 via-gray-100 to-gray-50",children:(0,C.jsx)(S.ScrollArea,{className:"flex-1 min-h-0",children:(0,C.jsx)("div",{className:(0,er.cn)("min-h-full flex justify-center","desktop"===eb?"p-0":"py-6 px-4"),children:(0,C.jsx)(rP,{blocks:a,selectedBlockId:i,hoveredBlockId:s,onSelectBlock:v,onHoverBlock:y,onToggleBlockSettings:e=>{i===e&&ew?ej(!1):(v(e),ej(!0))},onRemoveBlock:w,onReorderBlocks:j,onMoveBlock:N,onDuplicateBlock:ea,onToggleVisibility:el,onAddBlockToContainer:e=>{v(e),eN||eC(!0)},device:eb})})})}),(0,C.jsxs)("div",{className:(0,er.cn)("w-96 border-l flex flex-col bg-white shrink-0 transition-all duration-300 min-h-0",!ew&&"w-0 border-l-0 overflow-hidden"),children:[(0,C.jsxs)("div",{className:"p-4 border-b flex items-center justify-between shrink-0",children:[(0,C.jsx)("h2",{className:"font-semibold text-sm",children:ex?ex.template?.name||"Block":"Page Settings"}),(0,C.jsx)(E.Button,{variant:"ghost",size:"icon",onClick:()=>ej(!1),className:"h-8 w-8",children:(0,C.jsx)(R.X,{className:"h-4 w-4"})})]}),ew&&(0,C.jsx)("div",{className:"flex-1 min-h-0",children:ex?(0,C.jsx)(r$,{block:ex,onUpdateConfig:(e,t)=>en(ex.id,e,t)}):(0,C.jsx)(S.ScrollArea,{className:"h-full",children:(0,C.jsx)("div",{className:"p-4",children:(0,C.jsx)(r6,{pageData:n,onChange:ed})})})})]})]}),(0,C.jsx)(rq,{isOpen:eT.isOpen,onClose:eT.close,blockTemplates:l,onAddBlock:x}),(0,C.jsx)(r1,{isOpen:eI.isOpen,onClose:eI.close,history:h,currentIndex:g,onRestoreToIndex:ep||(()=>{})})]})};var na=e.i(705766),nl=e.i(618566);e.s(["PageEditor",0,({page:e,templates:t})=>{let r=e.blocks.map(e=>{let t,r,n,a=e.template?.configSchema?function(e,t){if(!e||!t)return e;let r={...e},n=t.fields||[],a=(e,t)=>"repeater"===e.type&&e.fields?(Array.isArray(t)?t:t?[t]:[]).map(t=>{let r={};return e.fields.forEach(e=>{"repeater"===e.type?r[e.name]=a(e,t[e.name]):r[e.name]=t[e.name]??e.default??""}),r}):t;return n.forEach(e=>{"repeater"===e.type&&(r[e.name]=a(e,r[e.name]))}),r}(e.config||{},e.template.configSchema):e.config||{};if(e.contentConfig)t=e.contentConfig,r=e.styleConfig||{},n=e.advancedConfig||{};else{let l=rB(a,e.template?.configSchema);t=l.contentConfig,r=l.styleConfig,n=l.advancedConfig}return{id:e.id,templateId:e.templateId,containerType:e.containerType||rk.BLOCK,parentId:e.parentId||null,contentConfig:t,styleConfig:r,advancedConfig:n,layoutSettings:e.layoutSettings||void 0,config:a,order:e.order,isVisible:!1!==e.isVisible,template:e.template}}),n=function({pageId:e,initialBlocks:t=[],initialPageData:r={},autoSaveEnabled:n=!0,autoSaveDelay:a=2e3,templates:l=[]}){let i=(0,nl.useRouter)(),[s,o]=(0,k.useState)(t),[c,d]=(0,k.useState)(r),[u,h]=(0,k.useState)(null),[g,p]=(0,k.useState)(null),[m,f]=(0,k.useState)(rS.DESKTOP),[x,b]=(0,k.useState)(null),[v,y]=(0,k.useState)(!1),[w,j]=(0,k.useState)(!1),[N,C]=(0,k.useState)("idle"),S=(0,k.useRef)(null),E=(0,k.useRef)(""),[D,T]=(0,k.useState)([]),[I,O]=(0,k.useState)(-1),R=(0,k.useRef)(null);(0,k.useEffect)(()=>{t.length>0&&0===s.length&&(o(t),T([{blocks:t,pageData:r}]),O(0))},[t,s.length,r]);let M=(0,k.useCallback)((e,t)=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{T(r=>{let n=r.slice(0,I+1);return n.push({blocks:e,pageData:t}),n.length>50&&n.shift(),n}),O(e=>Math.min(e+1,49))},500)},[I,50]),B=(0,k.useCallback)(()=>{if(I>0){let e=I-1,t=D[e];o(t.blocks),d(t.pageData),O(e),j(!0)}},[D,I]),L=(0,k.useCallback)(()=>{if(I<D.length-1){let e=I+1,t=D[e];o(t.blocks),d(t.pageData),O(e),j(!0)}},[D,I]),A=I>0,P=I<D.length-1,F=(0,k.useCallback)((t,r)=>{let n=`cms-editor-${e}`;try{localStorage.setItem(n,JSON.stringify({blocks:t,pageData:r,timestamp:Date.now()}))}catch(e){console.error("Failed to save to localStorage:",e)}},[e]),z=(0,k.useCallback)(()=>{let t=`cms-editor-${e}`;try{localStorage.removeItem(t)}catch(e){console.error("Failed to clear localStorage:",e)}},[e]);(0,k.useEffect)(()=>{let t=`cms-editor-${e}`;try{let e=localStorage.getItem(t);if(e){let t=JSON.parse(e);t.blocks&&t.blocks.length>0&&o(t.blocks),t.pageData&&d(t.pageData),j(!0)}}catch(e){console.error("Failed to load from localStorage:",e)}},[e]);let V=()=>`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,H=(0,k.useCallback)((e,t)=>{let{contentConfig:r,styleConfig:n,advancedConfig:a}=rB(e.defaultConfig||{},e.configSchema),l={id:V(),templateId:e.id,containerType:rk.BLOCK,parentId:t||null,contentConfig:r,styleConfig:n,advancedConfig:a,config:e.defaultConfig,order:s.filter(e=>e.parentId===t).length,isVisible:!0,template:e};o(e=>{let t=[...e,l];return M(t,c),t}),h(l.id),j(!0)},[s,c,M]),U=(0,k.useCallback)((e,t)=>{let r=e===rk.SECTION?"section-container":e===rk.FLEXBOX?"flexbox-container":e===rk.GRID?"grid-container":"container",n=l.find(e=>e.slug===r);if(!n){na.toast.error(`Container template "${r}" not found. Please run the container templates seed script.`),console.error(`Container template not found for slug: ${r}`);return}let a={id:V(),templateId:n.id,template:n,containerType:e,parentId:t||null,contentConfig:n.defaultConfig||{},styleConfig:{},advancedConfig:{},layoutSettings:e===rk.FLEXBOX?{direction:"row",wrap:"nowrap",justifyContent:"flex-start",alignItems:"stretch",gap:16}:e===rk.GRID?{columns:2,columnGap:16,rowGap:16}:void 0,order:s.filter(e=>e.parentId===t).length,isVisible:!0,children:[]};o(e=>{let t=[...e,a];return M(t,c),t}),h(a.id),j(!0)},[s,c,M,l]),$=(0,k.useCallback)((e,t,r)=>{o(n=>{let a=n.map(n=>n.id===e?{...n,[`${t}Config`]:r}:n);return M(a,c),a}),j(!0)},[c,M]),K=(0,k.useCallback)(e=>{o(t=>{var r;let n,a,l=rL((r=function e(t,r){return t.filter(e=>e.id!==r).map(t=>t.children&&t.children.length>0?{...t,children:e(t.children,r)}:t)}(rT(t),e),n=[],a=e=>{let{children:t,...r}=e;n.push(r),t&&t.length>0&&t.forEach(a)},r.forEach(a),n));return M(l,c),l}),u===e&&h(null),j(!0)},[u,c,M]),G=(0,k.useCallback)(e=>{let t=rI(s,e);if(!t)return;let r=rO(t,V);o(e=>{let t=[...e,r];return M(t,c),t}),h(r.id),j(!0)},[s,c,M]),X=(0,k.useCallback)((e,t,r)=>{o(n=>{let a=rI(n,e);if(!a)return n;let l={...a,parentId:t,order:r},i=rL(n.map(t=>t.id===e?l:t));return M(i,c),i}),j(!0)},[c,M]),W=(0,k.useCallback)(e=>{let t=rL(e);o(t),M(t,c),j(!0)},[c,M]),Y=(0,k.useCallback)(e=>{o(t=>{let r=t.map(t=>t.id===e?{...t,isVisible:!t.isVisible}:t);return M(r,c),r}),j(!0)},[c,M]),J=(0,k.useCallback)(e=>{let t=rI(s,e);t&&(b({type:"block",data:t,timestamp:Date.now()}),na.toast.success("Block copied to clipboard"))},[s]),_=(0,k.useCallback)(e=>{let t=rI(s,e);t&&t.styleConfig&&(b({type:"style",data:t.styleConfig,timestamp:Date.now()}),na.toast.success("Style copied to clipboard"))},[s]),q=(0,k.useCallback)(e=>{if(!x||"block"!==x.type)return;let t=rO(x.data,V);t.parentId=e||null,t.order=s.filter(t=>t.parentId===e).length,o(e=>{let r=[...e,t];return M(r,c),r}),h(t.id),j(!0),na.toast.success("Block pasted")},[x,s,c,M]),Q=(0,k.useCallback)(e=>{x&&"style"===x.type&&($(e,"style",x.data),na.toast.success("Style pasted"))},[x,$]),Z=(0,k.useCallback)((e,t)=>{d(r=>{let n={...r,[e]:t};return M(s,n),n}),j(!0)},[s,M]),ee=(0,k.useCallback)(async(t=!1)=>{y(!0),t&&C("saving");try{let r=await fetch(`/api/admin/cms/pages/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||"Failed to save page data")}let n=await fetch(`/api/admin/cms/pages/${e}/sync-blocks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blocks:s.map(e=>({id:e.id,templateId:e.templateId,containerType:e.containerType,parentId:e.parentId,contentConfig:e.contentConfig,styleConfig:e.styleConfig,advancedConfig:e.advancedConfig,layoutSettings:e.layoutSettings,order:e.order,isVisible:e.isVisible,config:e.config||e.contentConfig}))})});if(!n.ok)throw Error("Failed to save blocks");let a=await n.json();if(a.page?.blocks){let e=a.page.blocks.map(e=>{let t=s.find(t=>t.id===e.id||t.templateId===e.templateId&&t.order===e.order);return{...e,template:e.template||t?.template}});o(e),E.current=JSON.stringify({blocks:e,pageData:c})}j(!1),t?(C("saved"),z(),setTimeout(()=>C("idle"),2e3)):(na.toast.success("Page saved successfully"),z()),i.refresh()}catch(e){console.error("Error saving page:",e),t?(C("error"),setTimeout(()=>C("idle"),3e3)):na.toast.error(e.message||"Failed to save page")}finally{y(!1)}},[s,e,c,i,z]);return(0,k.useEffect)(()=>{if(n&&w)return S.current&&clearTimeout(S.current),F(s,c),S.current=setTimeout(()=>{JSON.stringify({blocks:s,pageData:c})!==E.current&&ee(!0)},a),()=>{S.current&&clearTimeout(S.current)}},[s,c,w,n,a,ee,F]),{blocks:s,pageData:c,selectedBlockId:u,hoveredBlockId:g,deviceMode:m,clipboard:x,isSaving:v,isDirty:w,autoSaveStatus:N,canUndo:A,canRedo:P,addBlock:H,addContainerBlock:U,updateBlockConfig:$,removeBlock:K,duplicateBlock:G,moveBlock:X,reorderBlocks:W,toggleBlockVisibility:Y,copyBlock:J,copyStyle:_,pasteBlock:q,pasteStyle:Q,updatePageData:Z,savePage:ee,undo:B,redo:L,setSelectedBlockId:h,setHoveredBlockId:p,setDeviceMode:f}}({pageId:e.id,initialBlocks:r,initialPageData:{id:e.id,title:e.title,slug:e.slug,description:e.description,seoTitle:e.seoTitle,seoDescription:e.seoDescription,seoKeywords:e.seoKeywords,status:e.status,useBlockEditor:!0,overridesStorefrontPage:e.overridesStorefrontPage??!1,overriddenPageType:e.overriddenPageType||null},templates:t,autoSaveEnabled:!0,autoSaveDelay:2e3});return(0,C.jsx)(nn,{pageTitle:n.pageData.title||e.title,pageId:e.id,pageSlug:n.pageData.slug||e.slug,pageData:{...n.pageData,overridesStorefrontPage:n.pageData.overridesStorefrontPage??e.overridesStorefrontPage??!1,overriddenPageType:n.pageData.overriddenPageType??e.overriddenPageType??null},blocks:n.blocks,templates:t,selectedBlockId:n.selectedBlockId,hoveredBlockId:n.hoveredBlockId,deviceMode:n.deviceMode,isSaving:n.isSaving,isDirty:n.isDirty,autoSaveStatus:n.autoSaveStatus,canUndo:n.canUndo,canRedo:n.canRedo,clipboard:n.clipboard,onAddBlock:n.addBlock,onAddContainerBlock:n.addContainerBlock,onSelectBlock:n.setSelectedBlockId,onHoverBlock:n.setHoveredBlockId,onRemoveBlock:n.removeBlock,onReorderBlocks:n.reorderBlocks,onMoveBlock:n.moveBlock,onUpdateBlockConfig:n.updateBlockConfig,onDuplicateBlock:n.duplicateBlock,onToggleVisibility:n.toggleBlockVisibility,onCopyBlock:n.copyBlock,onPasteBlock:n.pasteBlock,onCopyStyle:n.copyStyle,onPasteStyle:n.pasteStyle,onUpdatePageData:n.updatePageData,onSave:()=>n.savePage(!1),onUndo:n.undo,onRedo:n.redo,onSetDeviceMode:n.setDeviceMode})}],194272)}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0448ec71-3cbc-56b9-a0c0-92110a6cf7c0")}catch(e){}}();
//# debugId=0448ec71-3cbc-56b9-a0c0-92110a6cf7c0
