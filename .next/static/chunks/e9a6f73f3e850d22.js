(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,180127,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>t])},871689,e=>{"use strict";var t=e.i(180127);e.s(["ArrowLeft",()=>t.default])},515288,e=>{"use strict";var t=e.i(843476),s=e.i(975157);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>i,"CardFooter",()=>o,"CardHeader",()=>r,"CardTitle",()=>l])},793479,e=>{"use strict";var t=e.i(843476),s=e.i(975157);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>a])},110204,e=>{"use strict";var t=e.i(843476),s=e.i(271645);e.i(174080);var a=e.i(991918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let l=(0,a.createSlot)(`Primitive.${r}`),i=s.forwardRef((e,s)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?l:r,{...i,ref:s})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{}),l=s.forwardRef((e,s)=>(0,t.jsx)(r.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=e.i(975157);function n({className:e,...s}){return(0,t.jsx)(l,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none mb-2 group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}e.s(["Label",()=>n],110204)},251854,e=>{"use strict";let t=(0,e.i(475254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["default",()=>t])},356909,e=>{"use strict";var t=e.i(251854);e.s(["Save",()=>t.default])},776639,e=>{"use strict";var t=e.i(843476),s=e.i(326999),a=e.i(995926),r=e.i(975157);function l({...e}){return(0,t.jsx)(s.Root,{"data-slot":"dialog",...e})}function i({...e}){return(0,t.jsx)(s.Trigger,{"data-slot":"dialog-trigger",...e})}function n({...e}){return(0,t.jsx)(s.Portal,{"data-slot":"dialog-portal",...e})}function o({className:e,...a}){return(0,t.jsx)(s.Overlay,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function d({className:e,children:l,showCloseButton:i=!0,...d}){return(0,t.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(s.Content,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[l,i&&(0,t.jsxs)(s.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(a.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function u({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function x({className:e,...a}){return(0,t.jsx)(s.Title,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",e),...a})}function m({className:e,...a}){return(0,t.jsx)(s.Description,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Dialog",()=>l,"DialogContent",()=>d,"DialogDescription",()=>m,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>x,"DialogTrigger",()=>i])},107233,603908,e=>{"use strict";let t=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",()=>t],603908),e.s(["Plus",()=>t],107233)},612329,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>t])},727612,e=>{"use strict";var t=e.i(612329);e.s(["Trash2",()=>t.default])},426612,e=>{"use strict";var t=e.i(636368);e.s(["AlignLeft",()=>t.default])},370956,e=>{"use strict";var t=e.i(824678);e.s(["List",()=>t.default])},221345,e=>{"use strict";var t=e.i(526943);e.s(["Link",()=>t.default])},758472,e=>{"use strict";var t=e.i(339402);e.s(["Code",()=>t.default])},180752,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(776639),r=e.i(519455),l=e.i(646365),i=e.i(98163),n=e.i(793479),o=e.i(555436),d=e.i(569074),c=e.i(643531),u=e.i(967489),x=e.i(705766);e.s(["MediaPicker",0,({open:e,onOpenChange:m,onSelect:h,multiple:p=!1,type:g})=>{let[f,j]=(0,s.useState)([]),[v,b]=(0,s.useState)(!0),[y,N]=(0,s.useState)([]),[w,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)(""),[T,L]=(0,s.useState)("ALL"),O=async()=>{b(!0);try{let e=new URLSearchParams;S&&e.append("search",S);let t=g||("ALL"!==T?T:void 0);t&&e.append("type",t);let s=await fetch(`/api/media?${e.toString()}`),a=await s.json();if(a.error)throw Error(a.error);j(a.media)}catch(e){console.error(e),x.toast.error("Failed to load media")}finally{b(!1)}};(0,s.useEffect)(()=>{e&&(O(),N([]))},[e,S,T]);let P=e=>{p?N(t=>t.find(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e]):N([e])};return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:m,children:(0,t.jsxs)(a.DialogContent,{className:"max-w-5xl h-[85vh] flex flex-col p-0 gap-0 overflow-hidden",children:[(0,t.jsx)(a.DialogHeader,{className:"p-4 border-b bg-white z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(a.DialogTitle,{className:"text-xl font-semibold",children:"Media Library"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(r.Button,{variant:w?"secondary":"default",size:"sm",onClick:()=>C(!w),children:[(0,t.jsx)(d.Upload,{className:"mr-2 h-4 w-4"}),w?"Back to Library":"Upload New"]})})]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col bg-gray-50/50",children:[!w&&(0,t.jsxs)("div",{className:"p-4 border-b bg-white flex flex-col sm:flex-row gap-4 items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,t.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.Input,{placeholder:"Search media files...",className:"pl-9 bg-gray-50 border-gray-200 focus:bg-white transition-colors",value:S,onChange:e=>k(e.target.value)})]}),!g&&(0,t.jsx)("div",{className:"w-full sm:w-[200px]",children:(0,t.jsxs)(u.Select,{value:T,onValueChange:L,children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Filter by type"})}),(0,t.jsxs)(u.SelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"ALL",children:"All Media"}),(0,t.jsx)(u.SelectItem,{value:"IMAGE",children:"Images"}),(0,t.jsx)(u.SelectItem,{value:"VIDEO",children:"Videos"}),(0,t.jsx)(u.SelectItem,{value:"DOCUMENT",children:"Documents"})]})]})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:w?(0,t.jsx)(i.MediaUploader,{onUploadComplete:()=>{O(),C(!1),x.toast.success("Upload complete")}}):(0,t.jsx)(l.MediaGrid,{items:f,selectedItems:y.map(e=>e.id),onSelect:e=>P(e),onItemClick:e=>P(e),loading:v})})]}),(0,t.jsxs)("div",{className:"p-4 border-t bg-white flex justify-between items-center z-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[y.length," item",1!==y.length&&"s"," selected"]}),y.length>0&&(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>N([]),className:"text-muted-foreground hover:text-foreground",children:"Clear selection"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,t.jsxs)(r.Button,{onClick:()=>{h(y),m(!1)},disabled:0===y.length,className:"px-8",children:[(0,t.jsx)(c.Check,{className:"mr-2 h-4 w-4"}),"Insert Selected"]})]})]})]})})}])},473708,e=>{"use strict";var t=e.i(803408);e.s(["Image",()=>t.default])},269638,e=>{"use strict";var t=e.i(406321);e.s(["CheckCircle",()=>t.default])},569074,e=>{"use strict";var t=e.i(860243);e.s(["Upload",()=>t.default])},232189,(e,t,s)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},865156,(e,t,s)=>{"use strict";var a=e.r(232189);function r(){}function l(){}l.resetWarningCache=r,t.exports=function(){function e(e,t,s,r,l,i){if(i!==a){var n=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:r};return s.PropTypes=s,s}},745009,(e,t,s)=>{t.exports=e.r(865156)()},581782,730896,e=>{"use strict";function t(e,s=2){if(!+e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,a)).toFixed(s<0?0:s))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}`}e.s(["formatBytes",()=>t],581782);var s=e.i(872382);e.s(["FileIcon",()=>s.default],730896)},278716,e=>{"use strict";var t=e.i(618975);e.s(["Video",()=>t.default])},646365,98163,e=>{"use strict";var t=e.i(843476),s=e.i(657688),a=e.i(581782),r=e.i(730896),l=e.i(278716),i=e.i(40180),i=i,n=e.i(178583),o=e.i(643531),d=e.i(975157);let c=({item:e,selected:c,onSelect:u,onClick:x})=>{let m="IMAGE"===e.type;return(0,t.jsxs)("div",{className:(0,d.cn)("group relative aspect-square cursor-pointer rounded-lg border bg-card overflow-hidden transition-all hover:shadow-md",c?"border-primary ring-2 ring-primary ring-offset-2":"border-border"),onClick:t=>{t.stopPropagation(),t.ctrlKey||t.metaKey?u(e,!0):x(e)},children:[(0,t.jsx)("div",{className:(0,d.cn)("absolute left-2 top-2 z-10 flex h-6 w-6 items-center justify-center rounded-full border bg-white transition-opacity",c?"opacity-100 border-primary bg-primary text-primary-foreground":"opacity-0 group-hover:opacity-100 border-gray-300"),onClick:t=>{t.stopPropagation(),u(e,!0)},children:c&&(0,t.jsx)(o.Check,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"relative h-full w-full bg-muted/20",children:m&&e.secureUrl?(0,t.jsx)(s.default,{src:e.secureUrl,alt:e.altText||e.filename,fill:!0,className:"object-cover transition-transform group-hover:scale-105",sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 20vw"}):(0,t.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center p-4 text-muted-foreground",children:["VIDEO"===e.type&&(0,t.jsx)(l.Video,{className:"h-12 w-12 mb-2"}),"AUDIO"===e.type&&(0,t.jsx)(i.default,{className:"h-12 w-12 mb-2"}),"DOCUMENT"===e.type&&(0,t.jsx)(n.FileText,{className:"h-12 w-12 mb-2"}),"OTHER"===e.type&&(0,t.jsx)(r.FileIcon,{className:"h-12 w-12 mb-2"}),(0,t.jsx)("span",{className:"text-xs font-medium truncate w-full text-center",children:e.filename})]})}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 p-2 text-white opacity-0 transition-opacity group-hover:opacity-100",children:[(0,t.jsx)("p",{className:"truncate text-xs font-medium",children:e.filename}),(0,t.jsx)("p",{className:"text-[10px] text-gray-300",children:(0,a.formatBytes)(e.fileSize)})]})]})};var u=e.i(531278),x=e.i(803408),x=x,m=e.i(569074),h=e.i(519455);e.s(["MediaGrid",0,({items:e,selectedItems:s,onSelect:a,onItemClick:r,loading:l,onUploadClick:i})=>l&&0===e.length?(0,t.jsx)("div",{className:"flex h-64 w-full items-center justify-center",children:(0,t.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-350px)] px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-3xl border-2 border-dashed rounded-3xl p-12 flex flex-col items-center justify-center bg-muted/30 hover:bg-muted/50 transition-colors",children:[(0,t.jsxs)("div",{className:"relative mb-6 group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-3xl group-hover:bg-primary/30 transition-all duration-500"}),(0,t.jsx)("div",{className:"relative bg-background rounded-full p-6 shadow-sm ring-1 ring-border group-hover:scale-110 transition-transform duration-500",children:(0,t.jsx)("div",{className:"bg-primary/10 rounded-full p-4",children:(0,t.jsx)(x.default,{className:"h-12 w-12 text-primary",strokeWidth:1.5})})})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold tracking-tight mb-2",children:"No media files yet"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-8 max-w-md text-center text-base",children:"Upload images, videos, or documents to start building your library. Your assets will be available across your entire store."}),(0,t.jsx)("div",{className:"flex items-center gap-4 mb-12",children:i&&(0,t.jsxs)(h.Button,{onClick:i,size:"lg",className:"h-12 px-8 text-base shadow-lg hover:shadow-xl transition-all hover:-translate-y-0.5",children:[(0,t.jsx)(m.Upload,{className:"h-5 w-5 mr-2"}),"Upload Files"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-12 w-full max-w-2xl border-t pt-8",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 group cursor-default",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl bg-blue-50 dark:bg-blue-950/30 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform",children:(0,t.jsx)(x.default,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:"Images"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"JPG, PNG, WebP"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 group cursor-default",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl bg-purple-50 dark:bg-purple-950/30 text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:"Videos"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"MP4, WebM"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 group cursor-default",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl bg-green-50 dark:bg-green-950/30 text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm",children:"Documents"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"PDF, DOC, TXT"})]})]})]})]})}):(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",children:e.map(e=>(0,t.jsx)(c,{item:e,selected:s.includes(e.id),onSelect:a,onClick:r},e.id))})],646365);var p=e.i(271645),g=e.i(510665),f=e.i(37727),j=e.i(269638),v=e.i(63209),b=e.i(168148);e.s(["MediaUploader",0,({onUploadComplete:e,folderId:s})=>{let[l,i]=(0,p.useState)([]),[n,o]=(0,p.useState)(!1),c=(0,p.useCallback)(e=>{let t=e.map(e=>({file:e,id:Math.random().toString(36).substring(7),progress:0,status:"pending"}));i(e=>[...e,...t])},[]),{getRootProps:u,getInputProps:x,isDragActive:y}=(0,g.useDropzone)({onDrop:c,accept:{"image/*":[],"video/*":[],"audio/*":[],"application/pdf":[]}}),N=async e=>{let t=new FormData;t.append("file",e.file),s&&t.append("folderId",s);try{let s=new XMLHttpRequest;s.upload.onprogress=t=>{if(t.lengthComputable){let s=Math.round(t.loaded/t.total*100);i(t=>t.map(t=>t.id===e.id?{...t,progress:s,status:"uploading"}:t))}};let a=new Promise((e,t)=>{s.onload=()=>{if(s.status>=200&&s.status<300)e(JSON.parse(s.responseText));else{let e="Upload failed";try{let t=JSON.parse(s.responseText);t.error&&(e=t.error)}catch{}t(Error(e))}},s.onerror=()=>t(Error("Upload failed"))});s.open("POST","/api/media/upload"),s.send(t),await a,i(t=>t.map(t=>t.id===e.id?{...t,progress:100,status:"completed"}:t))}catch(s){let t=s instanceof Error?s.message:"Failed";i(s=>s.map(s=>s.id===e.id?{...s,status:"error",error:t}:s))}},w=async()=>{o(!0);let t=l.filter(e=>"pending"===e.status);for(let e=0;e<t.length;e+=3){let s=t.slice(e,e+3);await Promise.all(s.map(e=>N(e)))}o(!1),e()};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{...u(),className:(0,d.cn)("flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-12 transition-colors cursor-pointer",y?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"),children:[(0,t.jsx)("input",{...x()}),(0,t.jsx)(m.Upload,{className:"mb-4 h-12 w-12 text-muted-foreground"}),(0,t.jsx)("p",{className:"mb-2 text-lg font-medium",children:y?"Drop files here":"Drag & drop files here, or click to select"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Supports images, videos, audio, and documents up to 10MB"})]}),l.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"font-medium",children:["Upload Queue (",l.length,")"]}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>{i(e=>e.filter(e=>"completed"!==e.status))},disabled:n||!l.some(e=>"completed"===e.status),children:"Clear Completed"}),(0,t.jsx)(h.Button,{size:"sm",onClick:w,disabled:n||!l.some(e=>"pending"===e.status),children:n?"Uploading...":"Start Upload"})]})]}),(0,t.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:l.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded bg-muted",children:(0,t.jsx)(r.FileIcon,{className:"h-5 w-5 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium",children:e.file.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,a.formatBytes)(e.file.size)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:["uploading"===e.status&&(0,t.jsx)(b.Progress,{value:e.progress,className:"w-24"}),"completed"===e.status&&(0,t.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,t.jsx)(j.CheckCircle,{className:"mr-1 h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:"Done"})]}),"error"===e.status&&(0,t.jsxs)("div",{className:"flex items-center text-red-600",title:e.error,children:[(0,t.jsx)(v.AlertCircle,{className:"mr-1 h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs max-w-[150px] truncate",children:e.error||"Error"})]}),"pending"===e.status&&(0,t.jsx)(h.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{var t;return t=e.id,void i(e=>e.filter(e=>e.id!==t))},children:(0,t.jsx)(f.X,{className:"h-4 w-4"})})]})]},e.id))})]})]})}],98163)},865960,e=>{"use strict";var t=e.i(947875);e.s(["Quote",()=>t.default])},961888,e=>{"use strict";var t=e.i(572769);e.s(["Blocks",()=>t.default])},876845,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(618566),r=e.i(519455),l=e.i(793479),i=e.i(110204),n=e.i(624687),o=e.i(967489),d=e.i(257428),c=e.i(515288),u=e.i(169222),x=e.i(871689),m=e.i(356909),h=e.i(961888),p=e.i(178583),g=e.i(778917),f=e.i(705766),j=e.i(677572);function v({params:e}){let{id:v}=(0,s.use)(e),b=(0,a.useRouter)(),y="new"===v,[N,w]=(0,s.useState)(!y),[C,S]=(0,s.useState)(!1),[k,T]=(0,s.useState)(""),[L,O]=(0,s.useState)(""),[P,I]=(0,s.useState)(""),[D,B]=(0,s.useState)(""),[M,E]=(0,s.useState)("DRAFT"),[U,z]=(0,s.useState)(!0),[H,A]=(0,s.useState)(!1),[R,F]=(0,s.useState)(""),[V,_]=(0,s.useState)(""),[G,$]=(0,s.useState)(""),[K,W]=(0,s.useState)(""),[J,q]=(0,s.useState)(""),[X,Y]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(""),[ee,et]=(0,s.useState)(""),[es,ea]=(0,s.useState)(0),[er,el]=(0,s.useState)(!1),[ei,en]=(0,s.useState)(!1),[eo,ed]=(0,s.useState)("");(0,s.useEffect)(()=>{y||ec()},[v]);let ec=async()=>{try{let e=await fetch(`/api/admin/cms/pages/${v}`);if(e.ok){let t=await e.json();T(t.title),O(t.slug),I(t.description||""),B(t.content||""),E(t.status),z(t.useStorefrontLayout??!0),A(t.useBlockEditor??!1),F(t.seoTitle||""),_(t.seoDescription||""),$(t.seoKeywords||""),W(t.ogImage||""),q(t.ogTitle||""),Y(t.ogDescription||""),Z(t.customCss||""),et(t.customJs||""),ea(t.viewCount||0),en(t.overridesStorefrontPage??!1),ed(t.overriddenPageType||""),el(!0)}else f.default.error("Failed to fetch page"),b.push("/admin/cms/pages")}catch(e){console.error("Error fetching page:",e),f.default.error("An error occurred")}finally{w(!1)}},eu=async()=>{if(!k||!L)return void f.default.error("Title and Slug are required");try{S(!0);let e=y?"/api/admin/cms/pages":`/api/admin/cms/pages/${v}`,t=await fetch(e,{method:y?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:k,slug:L,description:P,content:D,status:M,useStorefrontLayout:U,useBlockEditor:H,seoTitle:R,seoDescription:V,seoKeywords:G,ogImage:K,ogTitle:J,ogDescription:X,customCss:Q,customJs:ee,overridesStorefrontPage:ei,overriddenPageType:ei?eo:null})});if(t.ok){if(f.default.success(y?"Page created":"Page updated"),y){let e=await t.json();b.push(`/admin/cms/pages/${e.id}`)}}else{let e=await t.text();f.default.error(e||"Failed to save page")}}catch(e){console.error("Error saving page:",e),f.default.error("An error occurred")}finally{S(!1)}};return N?(0,t.jsx)("div",{className:"text-center py-12",children:"Loading..."}):(0,t.jsxs)("div",{className:"space-y-6 max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>b.back(),children:(0,t.jsx)(x.ArrowLeft,{className:"w-4 h-4"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:y?"Create Page":"Edit Page"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o.Select,{value:M,onValueChange:E,children:[(0,t.jsx)(o.SelectTrigger,{className:"w-[140px]",children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"DRAFT",children:"Draft"}),(0,t.jsx)(o.SelectItem,{value:"PUBLISHED",children:"Published"}),(0,t.jsx)(o.SelectItem,{value:"SCHEDULED",children:"Scheduled"}),(0,t.jsx)(o.SelectItem,{value:"ARCHIVED",children:"Archived"})]})]}),(0,t.jsxs)(r.Button,{onClick:eu,disabled:C,children:[(0,t.jsx)(m.Save,{className:"w-4 h-4 mr-2"}),C?"Saving...":"Save"]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardContent,{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Title"}),(0,t.jsx)(l.Input,{value:k,onChange:e=>{let t=e.target.value;T(t),!y||er||ei||O(t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""))},placeholder:"Page title"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Slug"}),(0,t.jsx)(l.Input,{value:L,onChange:e=>{O(e.target.value),el(!0)},placeholder:"page-slug",disabled:ei,className:ei?"bg-muted cursor-not-allowed":""}),ei&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Slug is automatically set based on the selected override type."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Description"}),(0,t.jsx)(n.Textarea,{value:P,onChange:e=>I(e.target.value),placeholder:"Page description",rows:2})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.Label,{children:"Content Editor"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(r.Button,{type:"button",variant:H?"outline":"default",size:"sm",onClick:()=>A(!1),children:[(0,t.jsx)(p.FileText,{className:"w-4 h-4 mr-1"}),"Rich Text"]}),(0,t.jsxs)(r.Button,{type:"button",variant:H?"default":"outline",size:"sm",onClick:()=>{A(!0),y||"new"===v||b.push(`/admin/cms/pages/${v}/editor`)},children:[(0,t.jsx)(h.Blocks,{className:"w-4 h-4 mr-1"}),"Blocks"]})]})]}),H?(0,t.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/50 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"This page uses the block editor. Click the button above to edit blocks."}),!y&&"new"!==v&&(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>b.push(`/admin/cms/pages/${v}/editor`),children:[(0,t.jsx)(g.ExternalLink,{className:"w-4 h-4 mr-2"}),"Open Block Editor"]})]}):(0,t.jsx)(u.RichTextEditor,{content:D,onChange:B})]})]})}),(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsx)(c.CardTitle,{children:"Storefront Override"})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Checkbox,{id:"overridesStorefrontPage",checked:ei,onCheckedChange:e=>{en(e),!e&&(ed(""),el(!1),y&&k&&O(k.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")))}}),(0,t.jsx)(i.Label,{htmlFor:"overridesStorefrontPage",children:"Override storefront default page"})]}),ei&&(0,t.jsxs)("div",{className:"space-y-2 pl-6 border-l-2 border-primary/20",children:[(0,t.jsx)(i.Label,{children:"Override Page Type"}),(0,t.jsxs)(o.Select,{value:eo,onValueChange:e=>{ed(e),O({HOME:"_home",SHOP:"shop",PRODUCT:"product",CART:"cart",CHECKOUT:"checkout",BLOG:"blog",BLOG_POST:"blog"}[e]||""),el(!1)},children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"Select page to override"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"HOME",children:"Homepage"}),(0,t.jsx)(o.SelectItem,{value:"SHOP",children:"Shop"}),(0,t.jsx)(o.SelectItem,{value:"PRODUCT",children:"Product Page"}),(0,t.jsx)(o.SelectItem,{value:"CART",children:"Cart"}),(0,t.jsx)(o.SelectItem,{value:"CHECKOUT",children:"Checkout"}),(0,t.jsx)(o.SelectItem,{value:"BLOG",children:"Blog"}),(0,t.jsx)(o.SelectItem,{value:"BLOG_POST",children:"Blog Post"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This page will replace the selected default storefront page when published."})]})]})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsx)(c.CardTitle,{children:"Layout Settings"})}),(0,t.jsxs)(c.CardContent,{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Checkbox,{id:"useStorefrontLayout",checked:U,onCheckedChange:e=>z(e)}),(0,t.jsx)(i.Label,{htmlFor:"useStorefrontLayout",children:"Use Storefront Layout"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"If checked, the page will include the store's header and footer."})]})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsx)(c.CardTitle,{children:"SEO Settings"})}),(0,t.jsx)(c.CardContent,{className:"space-y-4",children:(0,t.jsxs)(j.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,t.jsxs)(j.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(j.TabsTrigger,{value:"basic",children:"Basic SEO"}),(0,t.jsx)(j.TabsTrigger,{value:"social",children:"Social Media"})]}),(0,t.jsxs)(j.TabsContent,{value:"basic",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"SEO Title"}),(0,t.jsx)(l.Input,{value:R,onChange:e=>F(e.target.value),placeholder:"Meta title (defaults to page title)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"SEO Description"}),(0,t.jsx)(n.Textarea,{value:V,onChange:e=>_(e.target.value),placeholder:"Meta description",rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"SEO Keywords"}),(0,t.jsx)(l.Input,{value:G,onChange:e=>$(e.target.value),placeholder:"Comma-separated keywords"})]})]}),(0,t.jsxs)(j.TabsContent,{value:"social",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Open Graph Image URL"}),(0,t.jsx)(l.Input,{value:K,onChange:e=>W(e.target.value),placeholder:"https://example.com/image.jpg"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Open Graph Title"}),(0,t.jsx)(l.Input,{value:J,onChange:e=>q(e.target.value),placeholder:"Social media title"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Open Graph Description"}),(0,t.jsx)(n.Textarea,{value:X,onChange:e=>Y(e.target.value),placeholder:"Social media description",rows:3})]})]})]})})]}),(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsx)(c.CardTitle,{children:"Advanced Settings"})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Custom CSS"}),(0,t.jsx)(n.Textarea,{value:Q,onChange:e=>Z(e.target.value),placeholder:"/* Custom CSS */",rows:6,className:"font-mono text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"Custom JavaScript"}),(0,t.jsx)(n.Textarea,{value:ee,onChange:e=>et(e.target.value),placeholder:"// Custom JavaScript",rows:6,className:"font-mono text-sm"})]})]})]}),!y&&(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsx)(c.CardTitle,{children:"Analytics"})}),(0,t.jsx)(c.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"View Count"}),(0,t.jsx)(l.Input,{value:es,readOnly:!0,className:"bg-muted"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total number of times this page has been viewed."})]})})]})]})})]})}e.s(["default",()=>v])}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2ed0a37b-c0e8-52bb-a9ed-0f453c1a789b")}catch(e){}}();
//# debugId=2ed0a37b-c0e8-52bb-a9ed-0f453c1a789b
